#pragma option -d2

#include <a_samp>

#undef MAX_PLAYERS
#define MAX_PLAYERS 100

AntiAmx()
{
    new a[][] = {"Unarmed (Fist)", "Brass K"};
    #pragma unused a
}

/*#define MYSQL_HOST 	""
#define MYSQL_USER 		""
#define MYSQL_DB 		""
#define MYSQL_PASS 		""*/

#define MYSQL_HOST 		"localhost"
#define MYSQL_USER 		"root"
#define MYSQL_DB 		"swrp_db"
#define MYSQL_PASS 		""

#include <crashdetect>
#include <YSI-Includes\YSI\y_inline>
#include <YSI-Includes\YSI\y_va>
#include <YSI-Includes\YSI\y_stringhash>
#include <YSI-Includes\YSI\y_timers>
#include <YSI-Includes\YSI\y_vehicledata>
#include <a_mysql>
#include <a_mysql_yinline>
#include <streamer>
#include <sscanf2>
#include <Pawn.CMD>
#include <Pawn.Regex>
#include <Pawn.RakNet>
#include <interpolate_weather>
#include <mapandreas>
#define PP_SYNTAX_FOR_LIST
#include <PawnPlus>
#include <YSF>
#include <progress2>
#include <samp_bcrypt>
#include <mobile>
#include <eSelection>
#include <discord-connector>
#include <discord-cmd>
#include <FakeOnline>
//#include <sampvoice>

/* NOMBRES */
#define SERVER_VERSION			"3.0 Alpha"

#define SERVER_NAME				"SampWorld Roleplay"
#define SERVER_SHORT_NAME		"SampWorld"

#define	SERVER_NAME1			"Samp"
#define	SERVER_NAME2			"World"

#define SERVER_GAMEMODE			"Roleplay r"SERVER_VERSION""
#define SERVER_LANGUAGE			"Español - Spanish"
#define SERVER_WEBSITE			"https://discord.gg/Zy4Sc2nhnd"
#define	SERVER_DISCORD			"https://discord.gg/Zy4Sc2nhnd"
#define SERVER_HOSTNAME 		"(ESP) • "SERVER_NAME"® • [Android/PC]"

#define SERVER_COIN				"Yuan"

#define MAX_BAD_LOGIN_ATTEMPS 	3
#define REP_MULTIPLIER 			4
#define TIME_FOR_REP 			minutes(15) 
#define REP_FOR_PAYDAY 			3
#define LOGIN_TIME 				180000

#define PRIMARY_COLOR 			"2D50D7"
#define PRIMARY_COLOR2 			0x2D50D7FF

#define SILVER_COLOR 			"d1d1d1"
#define SILVER_COLOR2 			0xd1d1d1d1

#define	GOLD_COLOR				"FFD25F"
#define	GOLD_COLOR2				0xFFD25FFF

#define RED_COLOR 				"E10000"
#define RED_COLOR2 				0xE10000FF

#define YELLOW_COLOR			"FAFF5F"
#define	YELLOW_COLOR2			0xFAFF5FFF

#define GREEN_COLOR 			"B9FF4B"
#define GREEN_COLOR2 			0xB9FF4BFF

#define BLUE_COLOR 				"4B73EB"
#define BLUE_COLOR2 			0x4B73EBFF

#define	PURPLE_COLOR			"7D5FFF"
#define	PURPLE_COLOR2			0x7D5FFFFF

#define	LIGHT_RED				"FF2D2D"
#define	LIGHT_RED2				0xFF2D2DFF

#define	GRAY_COLOR				"191919"

#define	POLICE_COLOR			"696eff"
#define	POLICE_COLOR2			0x696effff
#define PLAYER_POLICE_COLOR		0x696eff00

#define	SWAT_COLOR				"232323"
#define	SWAT_COLOR2				0x232323ff
#define PLAYER_SWAT_COLOR		0x23232300

#define COLOR_FADE1 			0xE6E6E6E6
#define COLOR_FADE2 			0xC8C8C8C8
#define COLOR_FADE3 			0xAAAAAAAA
#define COLOR_FADE4 			0x8C8C8C8C
#define COLOR_FADE5 			0x6E6E6E6E
#define PLAYER_COLOR			0xCCCCCC00
#define SPECIAL_ACTION_PISSING 	68

#define	SAFE_ZONE_COLOR			0x64FF005A

#define MAX_NU_VEHICLES			2
#define MAX_NU_PROPERTIES		1 
#define MAX_NU_WORKS			1

#define MAX_VIP_VEHICLES  		4
#define MAX_VIP_PROPERTIES 		3
#define MAX_VIP_WORKS			3

#define INFINITY_HEALTH        	Float:0x7F800000

#define HidePlayerDialog(%1)	ShowPlayerDialog(%1, -1, 0, " ", " ", " ", " ")
#define callbackp:%0(%1) 		forward %0(%1); public %0(%1)

#define Loop(%0,%1,%2)			for(new %0 = %2; %0 < %1; %0++)
#define LoopEx(%0,%1,%2)		for(new %0 = %2; %0 != %1; %0++)

#define	minutes(%0)				%0 * 1000 * 60
#define	seconds(%0)				%0 * 1000
#define	hour(%0)				%0 * 1000 * 60 * 60

#define VIP_COINS_PRICE 10
#define CNAME_COINS_PRICE 10

#define COME_INTERACTION_MESSAGE	"{"#PRIMARY_COLOR"}Acercate{ffffff} "

#define SKIN_ASSETS					"https://assets.open.mp/assets/images/skins/%d.png"

#define PlayerTemp					PLAYER_TEMP
#define pInfo(%0)[%1]				PI[%0][%1]
#define pTemp(%0)[%1]				PLAYER_TEMP[%0][%1]

stock
	rcon_pass,
	MySQL:handle_db,
	QUERY_BUFFER[6144],
	Float:New_User_Pos[4] = {1130.0525, -1481.8254, 22.6699, 360.0},
	Mechanic_Areas[1],
	Lumberjack_Area,
	Farmer_Area,
	Harvest_Area,
	Jail_Areas[4]
;

new Float:Help_Actors[][] =
{
	{1122.8910, -1465.7759, 15.7831, 270.0}
};

new Welcome_Messages[][] =
{
	"ha saltado a "SERVER_NAME", denle la bienvenida.",
	"nos ha encontrado!!! denle un pequeño saludo.",
	"se ha integrado en nuestra comunidad!",
	"ha aparecido de la nada!",
	"se ha integrado en nuestra ciudad."
};

#define PRESSED(%0) (((newkeys & (%0)) == (%0)) && ((oldkeys & (%0)) != (%0)))
#define RELEASED(%0) (((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))

#define	seconds(%0)	%0 * 1000

main() {}

#define NEARS_PLAYERS_DISTANCE 4.0

forward CloseServer();
forward OnPlayerEnterInterior(playerid, index);
forward OnPlayerExitInterior(playerid, index);

enum
{
	CHEAT_WEAPON,
	CHEAT_AMMO,
	CHEAT_CAR_MOD,
	CHEAT_VEHICLE_SPEED_HACK,
	CHEAT_POS,
	CHEAT_TEXT_SPAMMER,
	CHEAT_COMMAND_SPAMMER,
	CHEAT_DEATH_SPAMMER,
	CHEAT_STATE_SPAMMER,
	CHEAT_VEHICLE_ENTER_SPAMMER,
	CHEAT_JETPACK,
	CHEAT_PLAYER_SPEED,
	CHEAT_PLAYER_ARMOUR,
	CHEAT_VEHICLE_HEALTH,
	CHEAT_PLAYER_VEHICLE_WORK, //Entra a un vehiculo que no es de su trabajo
	CHEAT_PLAYER_VEHICLE_DOORS,
	CHEAT_VEHICLE_NOFUEL,
	CHEAT_SPECTATE,
	CHEAT_UNDETECTED_WEAPON,
	CHEAT_DRIVE_BY,
	CHEAT_UNOCCUPIED_VEHICLE_TP,
	CHEAT_HIGH_POS,
	CHEAT_CAR_JACKING,
	CHEAT_FAKE_TRAILER_SYNC,
	CHEAT_DESTROY_VEHICLE,
	CHEAT_CBUG,
	CHEAT_AFKPOS
}

enum e_ac_Info
{
	ac_Name[24],
	bool:ac_Enabled,
	bool:ac_Kick, // 1 = kickea, 0 = avisa a admins
	ac_Detections, //enviar aviso cuando llege a este num en los seg de abajo
	ac_Interval,
}
new ac_Info[][e_ac_Info] = /* Valores por defecto si no se carga de AC.txt */
{
	{"armas",					true, true,		1, 0},
	{"municion",				true, true,		1, 0},
	{"mod car",					true, true,		1, 0},
	{"vehicle speed",			true, true,		1, 0},
	{"pos",						true, false,	3, 10},
	{"text spammer",			true, true,		10, 5},
	{"command spammer",			true, true,		5, 5},
	{"death spammer",			true, false,	1, 0},
	{"state change spammer",	true, false,	1, 0},
	{"vehicle enter spammer",	true, false,	1, 0},
	{"jetpack",					true, true,		1, 0},
	{"player speed",			true, true,		1, 0},
	{"player armour",			true, true,		1, 0},
	{"vehicle health",			true, true,		1, 0},
	{"pwork != vwork",			true, true,		1, 0},
	{"enter closed vehicle",	true, false,	1, 0},
	{"vehicle nofuel cs",		true, false,	50, 10},
	{"player spectate",			true, false,	1, 0},
	{"pweapon != sweapon",		true, false,	1, 0},
	{"drive by",				true, false,	1, 0},
	{"unoccupied veh tp",		true, true,		1, 0},
	{"high pos",				true, true,		1, 0},
	{"car jacking",				true, true,		1, 0},
	{"fake trailer sync",		true, true,		1, 0},
	{"destroy vehicle",			true, false,	1, 0},
	{"cbug",					true, false,	1, 0},
	{"afk pos",					true, true,		1, 0}
};

new Float:Driving_School_Points[][] =
{
	{1104.8827,-1741.1328,13.2559}, // punto
	{1133.0331,-1741.3047,13.2109}, // punto
	{1168.5569,-1741.5630,13.2056}, // punto
	{1173.2051,-1722.0657,13.4306}, // punto
	{1196.7122,-1714.7490,13.1833}, // punto
	{1229.5729,-1714.5195,13.1841}, // punto
	{1254.4447,-1714.4352,13.1841}, // punto
	{1284.7510,-1714.3323,13.1841}, // punto
	{1299.2788,-1678.1302,13.1841}, // punto
	{1299.4734,-1641.7588,13.1841}, // punto
	{1299.3717,-1612.6628,13.1841}, // punto
	{1299.2944,-1590.6459,13.1841}, // punto
	{1287.1683,-1569.5261,13.1850}, // punto
	{1250.9747,-1570.2340,13.1841}, // punto
	{1210.9746,-1570.5568,13.1919}, // punto
	{1180.1412,-1570.4323,13.1500}, // punto
	{1158.6393,-1570.3004,13.0758}, // punto
	{1147.3596,-1585.3689,13.1604}, // punto
	{1147.4038,-1609.9360,13.5827}, // punto
	{1147.3285,-1640.2021,13.5825}, // punto
	{1147.3080,-1692.4600,13.5825}, // punto
	{1147.1932,-1709.3774,13.5825}, // punto
	{1165.6476,-1715.0933,13.5395}, // punto
	{1173.4233,-1732.9067,13.3116}, // punto
	{1161.9344,-1738.7157,13.2855}, // punto
	{1139.3585,-1738.7482,13.2853}, // punto
	{1120.4847,-1738.9301,13.2782}, // punto
	{1095.7839,-1739.6091,13.3210}, // punto
	{1090.0487,-1755.4176,13.1742}, // punto
	{1089.7566,-1767.8524,13.1564}, // punto
	{1098.4475,-1772.7090,13.1469} // punto
};

enum e_ELEVATOR_INFO
{
	Float:initial_pos_x, //Subir
	Float:initial_pos_y,
	Float:initial_pos_z,
	Float:initial_pos_angle,

	Float:secondary_pos_x, //Bajar
	Float:secondary_pos_y,
	Float:secondary_pos_z,
	Float:secondary_pos_angle,

	elevator_interior
};
new ELEVATOR_INFO[][e_ELEVATOR_INFO] =
{
	{932.5338, -1458.0327, 2754.3318, 180.0,	932.5161, -1458.1503, 2761.0164, 180.0,	1}, //Gobierno
	{929.4949, -1458.2985, 2754.3318, 180.0,	929.5954, -1458.4185, 2761.0063, 180.0, 1}, //Gobierno
	{906.4886, -1457.7817, 2754.3218, 180.0,	906.6495, -1457.8956, 2761.0164, 180.0, 1}, //Gobierno
	{909.4767, -1458.2749, 2754.3218, 180.0,	909.5597, -1458.1979, 2761.0164, 180.0,	1}	//Gobierno
};

new Float:POLICE_VEHICLES_SPAWN[][] =
{
	{1633.7942, -1613.4928, 3.8353, 180.8391}, // ls
	{-1606.6038, 677.0859, -5.2422, 179.2077}, // sf
	{2243.2258, 2434.3228, 3.2734, 126.7643} // lv
};

new POLICE_VEHICLES_INFO[][] =
{
	{596, 2},
	{597, 2},
	{598, 3},
	{599, 3},
	{601, 2},
	{523, 1},
	{522, 3},
	{468, 1},
	{490, 3},
	{528, 4},
	{427, 2},
	{411, 6},
	{541, 6},
	{402, 6},
	{415, 6}
};

enum e_PLAYER_AC_INFO
{
	p_ac_info_DETECTIONS,
	p_ac_info_LAST_DETECTION,
	p_ac_info_IMMUNITY, //gettime + seconds
}
new PLAYER_AC_INFO[MAX_PLAYERS][sizeof(ac_Info)][e_PLAYER_AC_INFO];

enum
{
	TYPE_LEGAL,
	TYPE_ILLEGAL,
}

enum
{
	DIALOG_REGISTER,
	DIALOG_EMAIL,
	DIALOG_LOGIN,
	DIALOG_INFO,
	DIALOG_CLOTHES,
	DIALOG_FOOD_PIZZA,
	DIALOG_FOOD_CLUCKIN,
	DIALOG_FOOD_BURGER,
	DIALOG_BUY_PROPERTY,
	DIALOG_BANK,
	DIALOG_BANK_WITHDRAW,
	DIALOG_BANK_DEPOSIT,
	DIALOG_BANK_TRANSFER,
	DIALOG_BANK_TRANSFER_SEND,
	DIALOG_BANK_TRANSACTIONS,
	DIALOG_CREATE_BANK_ACCOUNT,
	DIALOG_247_LIST,
	DIALOG_PHONE,
	DIALOG_PHONE_BOOK,
	DIALOG_PHONE_BOOK_ADD_NUMBER,
	DIALOG_PHONE_BOOK_ADD_NAME,
	DIALOG_PHONE_BOOK_OPTIONS,
	DIALOG_PHONE_BOOK_CHANGE_NAME,
	DIALOG_PHONE_BOOK_CONFIRM_DELET,
	DIALOG_PHONE_BOOK_DELETE_ALL,
	DIALOG_PHONE_CALL_NUMBER,
	DIALOG_PHONE_SMS_NUMBER,
	DIALOG_PHONE_SMS_MESSAGE,
	DIALOG_PHONE_BOOK_SEND_MESSAGE,
	DIALOG_PHONE_SENT_MESSAGES,
	DIALOG_PHONE_RECEIVED_MESSAGES,
	DIALOG_CONFIRM_BUY_PROPERTY,
	DIALOG_PLAYER_GPS,
	DIALOG_PLAYER_GPS_PLAYER,
	DIALOG_PLAYER_GPS_PLAYER_ADD,
	DIALOG_PLAYER_GPS_PLAYER_OPTION,
	DIALOG_PLAYER_GPS_CHANGE_NAME,
	DIALOG_PLAYER_GPS_CONFIRM_DELET,
	DIALOG_PLAYER_GPS_SITES,
	DIALOG_PLAYER_GPS_WORKS,
	DIALOG_PLAYER_GPS_DELETE_ALL,
	DIALOG_PLAYER_GPS_SITE_0,
	DIALOG_PLAYER_GPS_SITE_1,
	DIALOG_PLAYER_GPS_SITE_2,
	DIALOG_PLAYER_GPS_SITE_3,
	DIALOG_PLAYER_GPS_SITE_4,
	DIALOG_PLAYER_GPS_SITE_5,
	DIALOG_PLAYER_GPS_SITE_6,
	DIALOG_PLAYER_GPS_SITE_7,
	DIALOG_PLAYER_GPS_SITE_8,
	DIALOG_PLAYER_GPS_SITE_9,
	DIALOG_PLAYER_GPS_PROPERTIES,
	DIALOG_PLAYER_GPS_VEHICLES,
	DIALOG_PROPERTY_OPTIONS,
	DIALOG_PROPERTY_NAME,
	DIALOG_PROPERTY_DESCRIPTION,
	DIALOG_PROPERTY_BANK_SELL,
	DIALOG_BUY_VEHICLE,
	DIALOG_CITYHALL_OPTIONS,
	DIALOG_NOTARY,
	DIALOG_NOTARY_SELECT_PROPERTY,
	DIALOG_PROPERTY_SELL_PRICE,
	DIALOG_PROPERTY_SELL_TO_PLAYER,
	DIALOG_SELL_CONFIRM_PROPERTY,
	DIALOG_NOTARY_SELECT_VEHICLE,
	DIALOG_VEHICLE_BANK_SELL,
	DIALOG_VEHICLE_SELL_PRICE,
	DIALOG_VEHICLE_SELL_TO_PLAYER,
	DIALOG_SELL_CONFIRM_VEHICLE,
	DIALOG_SELECT_TRUCK_TYPE,
	DIALOG_TUNING_MENU_PART,
	DIALOG_TUNING_MENU_COMPONENT,
	DIALOG_MECHANIC_MENU,
	DIALOG_MECHANIC_REPAIR_PRICE,
	DIALOG_MECHANIC_COLOR_PRICE,
	DIALOG_MECHANIC_TUNING_PRICE,
	DIALOG_MECHANIC_PAINTJOB_PRICE,
	DIALOG_MECHANIC_REM_COM_PRICE,
	DIALOG_MECHANIC_ACCEPT,
	DIALOG_MECHANIC_SELECT_COL_SLOT,
	DIALOG_MECHANIC_SELECT_COLOR,
	DIALOG_MECHANIC_REMOVE_COMPONEN,
	DIALOG_TUNING_PAINTJOB,
	DIALOG_SEED_LIST,
	DIALOG_SEED_BUY,
	DIALOG_PLANT_PLANTS,
	DIALOG_ANIMS,
	DIALOG_VEHICLE_BOOT,
	DIALOG_VEHICLE_BOOT_DELETE_ALL,
	DIALOG_VEHICLE_BOOT_OPTIONS,
	DIALOG_VEHICLE_BOOT_DELETE,
	DIALOG_SELECT_POLICE_SKIN,
	DIALOG_POLICE_RADIOS,
	DIALOG_POLICE_LIST,
	DIALOG_POLICE_MODIFY,
	DIALOG_POLICE_EQUIPMENT,
	DIALOG_POLICE_SELECT_WEAPON,
	DIALOG_POLICE_AMMO,
	DIALOG_POLICE_ARMOUR,
	DIALOG_POLICE_WEAPONS,
	DIALOG_HELP,
	DIALOG_HELP_GENERAL,
	DIALOG_HELP_INFO,
	DIALOG_HELP_CHARACTER,
	DIALOG_HELP_PROPERTIES,
	DIALOG_HELP_REPORT,
	DIALOG_HELP_VEHICLES,
	DIALOG_HELP_WORKS,
	DIALOG_HELP_CREWS,
	DIALOG_HELP_VIP,
	DIALOG_ADMIN_LIST,
	DIALOG_ADMIN_MODIFY,
	DIALOG_CHANGE_PASSWORD,
	DIALOG_CHANGE_PASSWORD_PASS,
	DIALOG_ANTI_CHEAT,
	DIALOG_ANTI_CHEAT_MODIFY,
	DIALOG_ANTI_CHEAT_MODIFY_DETECT,
	DIALOG_CRANE_SELECT_VEHICLE,
	DIALOG_CREATE_CREW,
	DIALOG_CREATE_CREW_NAME,
	DIALOG_CREATE_CREW_COLOR,
	DIALOG_CREATE_CREW_CONFIRM,
	DIALOG_CREW_MENU,
	DIALOG_CREW_MEMBER_LIST,
	DIALOG_CREW_CHANGE_NAME,
	DIALOG_CREW_MEMBER_LIST_DELETE,
	DIALOG_CREW_CAST_MEMBER_CONFIRM,
	DIALOG_CREW_INVITE_RANK,
	DIALOG_CREW_INVITE_ACCEPT,
	DIALOG_CREW_RANKS,
	DIALOG_CREW_RANK_MODIFY,
	DIALOG_CREW_RANK_MODIFY_NAME,
	DIALOG_CREW_RANK_MODIFY_PERMISS,
	DIALOG_CREW_RANK_DELETE,
	DIALOG_CREW_RANK_DELETE_CONFIRM,
	DIALOG_CREW_RANK_CREATE,
	DIALOG_CREW_MODIFY_COLOR,
	DIALOG_CREW_DELETE,
	DIALOG_CREW_LEAVE,
	DIALOG_CREW_MODIFY_MEMBERS,
	DIALOG_CREW_MODIFY_MEMBER,
	DIALOG_CREW_LEAVE_TERRITORY,
	DIALOG_POLICE_PENALTY,
	DIALOG_VIP_BUY,
	DIALOG_VIP,
	DIALOG_PLAYER_CONFIG,
	DIALOG_WORKS_TELEPORTS,
	DIALOG_POLICE_BYC,
	DIALOG_POLICE_BYC_LAST_ALL,
	DIALOG_POLICE_BYC_NAME_FIND,
	DIALOG_POLICE_DELETE_BYC,
	DIALOG_POLICE_BYC_LAST_PLAYER,
	DIALOG_CHANGE_NAME,
	DIALOG_CHANGE_NAME_NAME,
	DIALOG_PROPERTY_CLOSET,
	DIALOG_PROPERTY_CLOSET_DLT_ALL,
	DIALOG_PROPERTY_CLOSET_OPTIONS,
	DIALOG_PROPERTY_CLOSET_DELETE,
	DIALOG_INV_ACTIONS,
	DIALOG_NEARS_PLAYERS,
	DIALOG_NEARS_PLAYERS_PRICE,
	DIALOG_NEARS_PLAYERS_AMOUNT,
	DIALOG_POBJECTS_DELETE_ALL,
	DIALOG_POBJECT_EDIT,
	DIALOG_POBJECT_TEXTURE_INDEX,
	DIALOG_POBJECT_TEXTURE,
	DIALOG_PLANE_OPTIONS,
	DIALOG_PLANE_SELECT_COLOR,
	DIALOG_BOAT_OPTIONS,
	DIALOG_BOAT_SELECT_COLOR,
	DIALOG_FUEL_STATION,
	DIALOG_FUEL,
	DIALOG_FUEL_DRUM_CONFIRM,
	DIALOG_PHARMACY,
	DIALOG_PHARMACY_BUY_MEDICINE,
	DIALOG_PHARMACY_MEDICINE_BUY,
	DIALOG_PHARMACY_BUY_MEDIKITS,
	DIALOG_CONFIRM_ELEVATOR,
	DIALOG_DRIVING_EXAM,
	DIALOG_DRIVING_SCHOOL_BRIBE,
	DIALOG_BLACK_MARKET,
	DIALOG_BLACK_MARKET_WEAPONS,
	DIALOG_BLACK_MARKET_SELECT_WEA,
	DIALOG_BLACK_MARKET_AMMO,
	DIALOG_BLACK_MARKET_ARMOUR,
	DIALOG_RENOUNCE,
	DIALOG_SELECT_POLICE_DIVISION,
	DIALOG_INVENTORY,
	DIALOG_INVENTORY_OPTIONS,
	DIALOG_INVENTORY_OPTIONS_EXTRA,
	DIALOG_INVENTORY_EXTRA_INFO,
	DIALOG_INVENTORY_EXTRA,
	DIALOG_INVENTORY_SELL
}

enum
{
	MENU_SELECT_POLICE_VEHICLE
}

enum
{
	ROLEPLAY_STATE_NORMAL,
	ROLEPLAY_STATE_INTERIOR,
	ROLEPLAY_STATE_OWN_PROPERTY,
	ROLEPLAY_STATE_GUEST_PROPERTY,
	ROLEPLAY_STATE_ARRESTED,
	ROLEPLAY_STATE_JAIL,
	ROLEPLAY_STATE_CRACK,
}

enum
{
	GAME_STATE_NONE,
	GAME_STATE_CONNECTED,
	GAME_STATE_DEAD,
	GAME_STATE_NORMAL,
}

#define MAX_TIMERS_PER_PLAYER 24
/* Timers
	0 = Kick
	1 = Gangzone daño Rojo
	2 = agregar reputacion
	3 = un/freeze player
	4 = recuperar vida
	5 = restart hambre sed
	6 = esperando llamada
	7 = esperar arrancar veh
	9 = cargando camion
	10 = reciclando
	11 = talando
	12 = plantando
	13 = gps mapa
	14 = esposar
	15 = jail time
	16 = health down
	17 = msg td
	19 = anti cj
*/

/* TUNING SYSTEM */
#define TOTAL_TUNING_PARTS	14
#define MAX_TUNING_PARTS_COMPONENTS	20
enum PLAYER_TUNING_MENU_Info
{
	tuning_menu_NAME[24], // o part
	tuning_menu_ID,
	tuning_menu_PIECES,
}
new PLAYER_TUNING_MENU[MAX_PLAYERS][MAX_TUNING_PARTS_COMPONENTS][PLAYER_TUNING_MENU_Info];

/* GLOBAL_VEHICLES */
#define MAX_VEHICLE_COMPONENTS	14
#define MIN_VEHICLE_HEALTH		350.0
forward Float:GetDistanceBetweenPoints3D(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2);
forward Float:GetVehicleSpeed(vehicleid);
forward Float:GetVehicleAirSpeed(vehicleid);
forward Float:frandom(Float:max, Float:min, dp);
forward Float:CompressRotation(Float:rotation);

new VEHICLE_COLORS[256] =
{
	0x000000FF, 0xF5F5F5FF, 0x2A77A1FF, 0x840410FF, 0x263739FF, 0x86446EFF, 0xD78E10FF, 0x4C75B7FF, 0xBDBEC6FF, 0x5E7072FF,
	0x46597AFF, 0x656A79FF, 0x5D7E8DFF, 0x58595AFF, 0xD6DAD6FF, 0x9CA1A3FF, 0x335F3FFF, 0x730E1AFF, 0x7B0A2AFF, 0x9F9D94FF,
	0x3B4E78FF, 0x732E3EFF, 0x691E3BFF, 0x96918CFF, 0x515459FF, 0x3F3E45FF, 0xA5A9A7FF, 0x635C5AFF, 0x3D4A68FF, 0x979592FF,
	0x421F21FF, 0x5F272BFF, 0x8494ABFF, 0x767B7CFF, 0x646464FF, 0x5A5752FF, 0x252527FF, 0x2D3A35FF, 0x93A396FF, 0x6D7A88FF,
	0x221918FF, 0x6F675FFF, 0x7C1C2AFF, 0x5F0A15FF, 0x193826FF, 0x5D1B20FF, 0x9D9872FF, 0x7A7560FF, 0x989586FF, 0xADB0B0FF,
	0x848988FF, 0x304F45FF, 0x4D6268FF, 0x162248FF, 0x272F4BFF, 0x7D6256FF, 0x9EA4ABFF, 0x9C8D71FF, 0x6D1822FF, 0x4E6881FF,
	0x9C9C98FF, 0x917347FF, 0x661C26FF, 0x949D9FFF, 0xA4A7A5FF, 0x8E8C46FF, 0x341A1EFF, 0x6A7A8CFF, 0xAAAD8EFF, 0xAB988FFF,
	0x851F2EFF, 0x6F8297FF, 0x585853FF, 0x9AA790FF, 0x601A23FF, 0x20202CFF, 0xA4A096FF, 0xAA9D84FF, 0x78222BFF, 0x0E316DFF,
	0x722A3FFF, 0x7B715EFF, 0x741D28FF, 0x1E2E32FF, 0x4D322FFF, 0x7C1B44FF, 0x2E5B20FF, 0x395A83FF, 0x6D2837FF, 0xA7A28FFF,
	0xAFB1B1FF, 0x364155FF, 0x6D6C6EFF, 0x0F6A89FF, 0x204B6BFF, 0x2B3E57FF, 0x9B9F9DFF, 0x6C8495FF, 0x4D8495FF, 0xAE9B7FFF,
	0x406C8FFF, 0x1F253BFF, 0xAB9276FF, 0x134573FF, 0x96816CFF, 0x64686AFF, 0x105082FF, 0xA19983FF, 0x385694FF, 0x525661FF,
	0x7F6956FF, 0x8C929AFF, 0x596E87FF, 0x473532FF, 0x44624FFF, 0x730A27FF, 0x223457FF, 0x640D1BFF, 0xA3ADC6FF, 0x695853FF,
	0x9B8B80FF, 0x620B1CFF, 0x5B5D5EFF, 0x624428FF, 0x731827FF, 0x1B376DFF, 0xEC6AAEFF, 0x000000FF,
	0x177517FF, 0x210606FF, 0x125478FF, 0x452A0DFF, 0x571E1EFF, 0x010701FF, 0x25225AFF, 0x2C89AAFF, 0x8A4DBDFF, 0x35963AFF,
	0xB7B7B7FF, 0x464C8DFF, 0x84888CFF, 0x817867FF, 0x817A26FF, 0x6A506FFF, 0x583E6FFF, 0x8CB972FF, 0x824F78FF, 0x6D276AFF,
	0x1E1D13FF, 0x1E1306FF, 0x1F2518FF, 0x2C4531FF, 0x1E4C99FF, 0x2E5F43FF, 0x1E9948FF, 0x1E9999FF, 0x999976FF, 0x7C8499FF,
	0x992E1EFF, 0x2C1E08FF, 0x142407FF, 0x993E4DFF, 0x1E4C99FF, 0x198181FF, 0x1A292AFF, 0x16616FFF, 0x1B6687FF, 0x6C3F99FF,
	0x481A0EFF, 0x7A7399FF, 0x746D99FF, 0x53387EFF, 0x222407FF, 0x3E190CFF, 0x46210EFF, 0x991E1EFF, 0x8D4C8DFF, 0x805B80FF,
	0x7B3E7EFF, 0x3C1737FF, 0x733517FF, 0x781818FF, 0x83341AFF, 0x8E2F1CFF, 0x7E3E53FF, 0x7C6D7CFF, 0x020C02FF, 0x072407FF,
	0x163012FF, 0x16301BFF, 0x642B4FFF, 0x368452FF, 0x999590FF, 0x818D96FF, 0x99991EFF, 0x7F994CFF, 0x839292FF, 0x788222FF,
	0x2B3C99FF, 0x3A3A0BFF, 0x8A794EFF, 0x0E1F49FF, 0x15371CFF, 0x15273AFF, 0x375775FF, 0x060820FF, 0x071326FF, 0x20394BFF,
	0x2C5089FF, 0x15426CFF, 0x103250FF, 0x241663FF, 0x692015FF, 0x8C8D94FF, 0x516013FF, 0x090F02FF, 0x8C573AFF, 0x52888EFF,
	0x995C52FF, 0x99581EFF, 0x993A63FF, 0x998F4EFF, 0x99311EFF, 0x0D1842FF, 0x521E1EFF, 0x42420DFF, 0x4C991EFF, 0x082A1DFF,
	0x96821DFF, 0x197F19FF, 0x3B141FFF, 0x745217FF, 0x893F8DFF, 0x7E1A6CFF, 0x0B370BFF, 0x27450DFF, 0x071F24FF, 0x784573FF,
	0x8A653AFF, 0x732617FF, 0x319490FF, 0x56941DFF, 0x59163DFF, 0x1B8A2FFF, 0x38160BFF, 0x041804FF, 0x355D8EFF, 0x2E3F5BFF,
	0x561A28FF, 0x4E0E27FF, 0x706C67FF, 0x3B3E42FF, 0x2E2D33FF, 0x7B7E7DFF, 0x4A4442FF, 0x28344EFF
};

new Float:HARVEST_CHECKPOINTS[][] =
{
	{-328.332305, -1546.391357, 16.15409},
	{-250.803207, -1553.425415, 4.534295},
	{-224.260910, -1485.022827, 8.041003},
	{-308.437896, -1476.776977, 11.40934},
	{-283.487731, -1553.320068, 7.445997},
	{-258.756164, -1426.692993, 9.493670},
	{-178.887649, -1406.682250, 3.996473},
	{-177.676818, -1322.970581, 6.885325},
	{-305.899322, -1318.196533, 10.12089},
	{-325.471008, -1412.821777, 15.12606},
	{-191.962982, -1384.020019, 6.075732},
	{-214.637603, -1321.270507, 10.79362},
	{-263.975738, -1375.987426, 11.41642},
	{-308.705474, -1424.302001, 15.52844},
	{-287.710388, -1497.158325, 8.503927},
	{-387.908111, -1532.118774, 23.47214}
};

enum
{
	VEHICLE_TYPE_NONE,
	VEHICLE_TYPE_TEST,
	VEHICLE_TYPE_SELL,
	VEHICLE_TYPE_PERSONAL,
	VEHICLE_TYPE_WORK,
	VEHICLE_TYPE_DRIVING_SCHOOL,
}

enum
{
	VEHICLE_STATE_NORMAL,
	VEHICLE_STATE_DAMAGED,
}

enum Global_Vehicles_Info
{
	bool:gb_vehicle_VALID,
	bool:gb_vehicle_OCCUPIED,
	gb_vehicle_TYPE,
	gb_vehicle_MODELID,
	gb_vehicle_NUMBER_PLATE[32],
	Float:gb_vehicle_POS[3],
	Float:gb_vehicle_SPAWN_X,
	Float:gb_vehicle_SPAWN_Y,
	Float:gb_vehicle_SPAWN_Z,
	Float:gb_vehicle_SPAWN_ANGLE,
	Float:gb_vehicle_HEALTH,
	gb_vehicle_DAMAGE_PANELS,
	gb_vehicle_DAMAGE_DOORS,
	gb_vehicle_DAMAGE_LIGHTS,
	gb_vehicle_DAMAGE_TIRES,
	gb_vehicle_COLOR_1,
	gb_vehicle_COLOR_2,
	gb_vehicle_PAINTJOB,
	Float:gb_vehicle_GAS,
	Float:gb_vehicle_MAX_GAS,
	gb_vehicle_COMPONENTS[MAX_VEHICLE_COMPONENTS],
	gb_vehicle_STATE,
	gb_vehicle_INTERIOR,
	gb_vehicle_WORLD,
	gb_vehicle_PARAMS_ENGINE,
	gb_vehicle_PARAMS_LIGHTS,
	gb_vehicle_PARAMS_ALARM,
	gb_vehicle_PARAMS_DOORS,
	gb_vehicle_PARAMS_BONNET,
	gb_vehicle_PARAMS_BOOT,
	gb_vehicle_PARAMS_OBJECTIVE,
	gb_vehicle_DRIVER,
	gb_vehicle_LAST_DRIVER,
	gb_vehicle_LAST_CLOSED_TIME,
	gb_vehicle_LAST_REPAIR_TIME,
	
	bool:gb_vehicle_SPAWNED,
	gb_vehicle_TP_IMMUNITY,
	gb_vehicle_VIP,
	gb_vehicle_ATTACHED_TO,
	Text3D:gb_vehicle_LABEL,
	gb_vehicle_LANDING_GEAR_STATUS
}
new GLOBAL_VEHICLES[MAX_VEHICLES][Global_Vehicles_Info];

enum Player_Vehicles_Info
{
	bool:player_vehicle_VALID,
	player_vehicle_ID,
	player_vehicle_OWNER_ID,
	bool:player_vehicle_ACCESSIBLE,
	player_vehicle_CLAMP
};
new PLAYER_VEHICLES[MAX_VEHICLES][Player_Vehicles_Info];

new male_medic_skins[] = {274, 275, 276};

enum
{
	WORK_TYPE_NONE,
	WORK_TYPE_NORMAL,
	WORK_TYPE_FAMILY,
}
enum _:E_WORKS
{
	WORK_NONE = 0,
	WORK_TAXI = 1,
	WORK_TRUCK = 2,
	WORK_MECHANIC = 3,
	WORK_HARVESTER = 4,
	WORK_TRASH = 5,
	WORK_LUMBERJACK = 6,
	WORK_FARMER = 7,
	WORK_POLICE = 8,
	WORK_PIZZA = 9,
	WORK_MEDIC = 10
};
enum work_info_info
{
	work_info_TYPE,
	work_info_LEVEL,
	work_info_NAME[24],
	bool:work_info_NEED_DUTY,
	work_info_EXTRA_PAY,
	work_info_EXTRA_PAY_EXP,
	work_info_EXTRA_PAY_LIMIT
}
new work_info[][work_info_info] =
{
    {WORK_TYPE_NONE, 0, "ninguno", false, 0, 0, 0},
	{WORK_TYPE_NORMAL, 1, "Taxista", false, 0, 0, 0},
	{WORK_TYPE_NORMAL, 1, "Camionero", false, 0, 0, 0},
	{WORK_TYPE_NORMAL, 3, "Mecánico", true, 0, 0, 0},
	{WORK_TYPE_NORMAL, 1, "Cosechador", false, 0, 0, 0},
	{WORK_TYPE_NORMAL, 1, "Basurero", true, 0, 0, 0},
	{WORK_TYPE_NORMAL, 1, "Talador", false, 0, 0, 0},
	{WORK_TYPE_NORMAL, 3, "Agricultor", false, 0, 0, 0},
	{WORK_TYPE_FAMILY, 3, "Policía", true, 500, 1, 10000},
	{WORK_TYPE_NORMAL, 1, "Pizzero", true, 0, 0, 0},
	{WORK_TYPE_NORMAL, 3, "Médico", true, 0, 0, 0}
};

forward OnPlayerObtainWork(playerid, work);
enum enum_PLAYER_WORKS
{
	pwork_SET,
	pwork_LEVEL
};
new PLAYER_WORKS[MAX_PLAYERS][sizeof(work_info)][enum_PLAYER_WORKS];

enum obtain_work_coords_info
{
	bool:obtain_work_AVAILABLE,
	bool:obtain_work_LABELS,
	Float:obtain_work_X,
	Float:obtain_work_Y,
	Float:obtain_work_Z,
	obtain_work_INTERIOR,
	bool:obtain_work_MAP_ICON,
	obtain_work_MAP_ICON_ID,
	Float:obtain_work_MAP_ICON_X,
	Float:obtain_work_MAP_ICON_Y,
	Float:obtain_work_MAP_ICON_Z,
}
new Float:obtain_work_coords[][obtain_work_coords_info] =
{
	{false, false, 0.0, 0.0, 0.0, 0,	false, 0, 0.0, 0.0, 0.0},
	{true, true, 1490.285766, 1305.699340, 1093.296386, 3,	true, 61, 1752.603881, -1894.155883, 13.557376}, //taxista ls
	{true, true, 1297.107543, -65.027748, 1002.498046, 18, true, 61, -510.699890, -539.409118, 25.523437}, //caminero
	{true, true, 1947.8142, -1819.7198, 13.5563, 0, true, 27, 1947.8142, -1819.7198, 13.5563}, //mecanico
	{true, true, -372.126922, -1435.706298, 25.726562, 0,	true, 61, -372.126922, -1435.706298, 25.726562}, //Cosechador
	{true, true, -1884.997314, -1636.733642, 21.750000, 0, true, 61, -1884.997314, -1636.733642, 21.750000}, //Basurero
	{true, true, -532.029846, -97.514228, 63.296875, 0, true, 61, -532.029846, -97.514228, 63.296875}, //talador
	{true, true, 1564.864257, 23.255302, 24.164062, 0, true, 61, 1564.864257, 23.255302, 24.164062}, //agricultor
	{true, true, -510.972015, 324.242736, 2004.585937, 20,	false, 0, 1480.966918, -1772.065673, 18.795755}, // policia
	{true, true, 377.902313, -119.416114, 1001.492187, 5, false, 0, 2105.485107, -1806.400878, 13.554687}, //pizzero
	{true, true, -2033.237304, -117.411125, 1035.171875, 3,	false, 0, 0.0, 0.0, 0.0} //medico
};

//ZONAS
enum
{
	AREA_TYPE_NONE,
	AREA_TYPE_GANGZONE,
	AREA_TYPE_MECHANIC,
	AREA_TYPE_AIRPORT,
	AREA_TYPE_AIRVEH_FUEL,
	AREA_TYPE_WATERVEH_STATION,
	AREA_TYPE_SAFE_ZONE
};

#define MAX_TERRITORIES	400
enum enum_TERRITORIES
{
	bool:territory_VALID,
	territory_ID,
	territory_NAME[64],
	bool:territory_OCCUPIED,
	territory_CREW_ID,
	territory_CREW_INDEX,
	territory_COLOR,
	Float:territory_MIN_X,
	Float:territory_MIN_Y,
	Float:territory_MAX_X,
	Float:territory_MAX_Y,
	
	territory_AREA,
	territory_GANG_ZONE,
	
	bool:territory_WAR,
	territory_ATTACKER_CREW_INDEX,
	territory_WAR_TIME_LEFT,
	Text:territory_TEXTDRAW,
	territory_TIMER,
	territory_LAST_ATTACK,
}
new TERRITORIES[MAX_TERRITORIES][enum_TERRITORIES];
forward OnTerritoriesLoaded();

// Crews
#define MAX_CREWS		50
#define MAX_CREW_RANKS	6

enum enum_CREW_INFO
{
	bool:crew_VALID,
	crew_ID,
	crew_NAME[32],
	crew_COLOR,
	
	bool:crew_FIGHTING,
	crew_LAST_ATTACK,
	crew_LAST_ROBBERY,
	
	crew_MEMBERS,
	crew_ONLINE_MEMBERS
}
new CREW_INFO[MAX_CREWS][enum_CREW_INFO];
forward OnCrewDeleted(crewId);
forward OnCrewCaptureTerritory(crewId, crewIndex, territoryId, territoryIndex);
forward OnCrewLeftTerritory(crewId, crewIndex, territoryId, territoryIndex);

new RandomColors[] =
{
	0xFFFFFFFF,
	0x000000FF,
    0x99CC00FF,
    0xFF9900FF,
	0x6699CCFF,
	0x0099FFFF,
	0xCCCC99FF,
	
	0xFF8C13FF,	0xC715FFFF,	0x20B2AAFF,	0xDC143CFF,	0x6495EDFF,	0xf0e68cFF,	0x778899FF,	0xFF1493FF,	0xF4A460FF,
	0xEE82EEFF,	0xFFD720FF,	0x8b4513FF,	0x4949A0FF,	0x148b8bFF,	0x14ff7fFF,	0x556b2fFF,	0x0FD9FAFF,	0x10DC29FF,
	0x534081FF,	0x0495CDFF,	0xEF6CE8FF,	0xBD34DAFF,	0x247C1BFF,	0x0C8E5DFF,	0x635B03FF,	0xCB7ED3FF,	0x65ADEBFF,
	0x5C1ACCFF,	0xF2F853FF,	0x11F891FF,	0x7B39AAFF,	0x53EB10FF,	0x54137DFF,	0x275222FF,	0xF09F5BFF,	0x3D0A4FFF,
	0x22F767FF,	0xD63034FF,	0x9A6980FF,	0xDFB935FF,	0x3793FAFF,	0x90239DFF,	0xE9AB2FFF,	0xAF2FF3FF,	0x057F94FF,
	0xB98519FF,	0x388EEAFF,	0x028151FF,	0xA55043FF,	0x0DE018FF,	0x93AB1CFF,	0x95BAF0FF,	0x369976FF,	0x18F71FFF,
	0x4B8987FF,	0x491B9EFF,	0x829DC7FF,	0xBCE635FF,	0xCEA6DFFF,	0x20D4ADFF,	0x2D74FDFF,	0x3C1C0DFF,	0x12D6D4FF,
	0x48C000FF,	0x2A51E2FF,	0xE3AC12FF,	0xFC42A8FF,	0x2FC827FF,	0x1A30BFFF,	0xB740C2FF,	0x42ACF5FF,	0x2FD9DEFF,
	0xFAFB71FF,	0x05D1CDFF,	0xC471BDFF,	0x94436EFF,	0xC1F7ECFF,	0xCE79EEFF,	0xBD1EF2FF,	0x93B7E4FF,	0x3214AAFF,
	0x184D3BFF,	0xAE4B99FF,	0x7E49D7FF,	0x4C436EFF,	0xFA24CCFF,	0xCE76BEFF,	0xA04E0AFF,	0x9F945CFF,	0xDCDE3DFF,
	0x10C9C5FF,	0x70524DFF,	0x0BE472FF,	0x8A2CD7FF,	0x6152C2FF,	0xCF72A9FF,	0xE59338FF,	0xEEDC2DFF,	0xD8C762FF,
	0xD8C762FF,	0xFF8C13FF,	0xC715FFFF,	0x20B2AAFF,	0xDC143CFF,	0x6495EDFF,	0xf0e68cFF,	0x778899FF,	0xFF1493FF,
	0xF4A460FF,	0xEE82EEFF,	0xFFD720FF,	0x8b4513FF,	0x4949A0FF,	0x148b8bFF,	0x14ff7fFF,	0x556b2fFF,	0x0FD9FAFF,
	0x10DC29FF,	0x534081FF,	0x0495CDFF,	0xEF6CE8FF,	0xBD34DAFF,	0x247C1BFF,	0x0C8E5DFF,	0x635B03FF,	0xCB7ED3FF,
	0x65ADEBFF,	0x5C1ACCFF,	0xF2F853FF,	0x11F891FF,	0x7B39AAFF,	0x53EB10FF,	0x54137DFF,	0x275222FF,	0xF09F5BFF,
	0x3D0A4FFF,	0x22F767FF,	0xD63034FF,	0x9A6980FF,	0xDFB935FF,	0x3793FAFF,	0x90239DFF,	0xE9AB2FFF,	0xAF2FF3FF,
	0x057F94FF,	0xB98519FF,	0x388EEAFF,	0x028151FF,	0xA55043FF,	0x0DE018FF,	0x93AB1CFF,	0x95BAF0FF,	0x369976FF,
	0x18F71FFF,	0x4B8987FF,	0x491B9EFF,	0x829DC7FF,	0xBCE635FF,	0xCEA6DFFF,	0x20D4ADFF,	0x2D74FDFF,	0x3C1C0DFF,
	0x12D6D4FF,	0x48C000FF,	0x2A51E2FF,	0xE3AC12FF,	0xFC42A8FF,	0x2FC827FF,	0x1A30BFFF,	0xB740C2FF,	0x42ACF5FF,
	0x2FD9DEFF,	0xFAFB71FF,	0x05D1CDFF,	0xC471BDFF,	0x94436EFF,	0xC1F7ECFF,	0xCE79EEFF,	0xBD1EF2FF,	0x93B7E4FF,
	0x3214AAFF,	0x184D3BFF,	0xAE4B99FF,	0x7E49D7FF,	0x4C436EFF,	0xFA24CCFF,	0xCE76BEFF,	0xA04E0AFF,	0x9F945CFF,
	0xDCDE3DFF,	0x10C9C5FF,	0x70524DFF,	0x0BE472FF,	0x8A2CD7FF,	0x6152C2FF,	0xCF72A9FF,	0xE59338FF,	0xEEDC2DFF,
	0xD8C762FF,	0xD8C762FF
};

//permisos
enum
{
	CREW_RANK_CHANGE_NAME,
	CREW_RANK_INVITE,
	CREW_RANK_CAST_MEMBERS,
	CREW_RANK_MODIFY_MEMBERS,
	CREW_RANK_MODIFY_RANKS,
	CREW_RANK_CHANGE_COLOR,
	CREW_RANK_DELETE,
	
	CREW_RANK_SIZE, // dejar siempre el ultimo
}

new CREW_RANKS_PERMISSIONS[][] =
{
	"cambiar nombre de la banda",	//0
	"invitar jugadores",			//1
	"echar miembros",				//2
	"cambiar rangos de miembros",	//3
	"crear rangos o modificarlos",	//4
	"cambiar color de la banda",	//5
	"eliminar banda"				//6
};

enum enum_CREW_RANK_INFO
{
	bool:crew_rank_VALID,
	crew_rank_ID,
	crew_rank_NAME[32],
	crew_rank_PERMISSION[CREW_RANK_SIZE],
}
new CREW_RANK_INFO[MAX_CREWS][MAX_CREW_RANKS][enum_CREW_RANK_INFO];

enum Work_Vehicles_Info
{
	bool:work_vehicle_VALID,
	work_vehicle_WORK,
	work_vehicle_EXP,
	bool:work_vehicle_NEED_DUTY,
}
new WORK_VEHICLES[MAX_VEHICLES][Work_Vehicles_Info];

forward OnSanAndreasVehicleLoad(vehicleid);
forward OnSanAndreasVehiclesLoad();
new valid_work_vehicle_colors[] = {84, 63, 91, 63, 102, 65, 105, 72, 110, 93, 121, 93, 12, 95, 23, 1};
enum San_Andreas_Vehicles_Info
{
	san_andreas_vehicle_TYPE,
	san_andreas_vehicle_TYPE_IN,
	san_andreas_vehicle_TYPE_IN_EXP,
	san_andreas_vehicle_MODELID,
	Float:san_andreas_vehicle_SPAWN_X,
	Float:san_andreas_vehicle_SPAWN_Y,
	Float:san_andreas_vehicle_SPAWN_Z,
	Float:san_andreas_vehicle_SPAWN_ANGLE,
	san_andreas_vehicle_COLOR_1,
	san_andreas_vehicle_COLOR_2,
	san_andreas_vehicle_vip,
	san_andreas_vehicle_WORLD,
}
new San_Andreas_Vehicles[][San_Andreas_Vehicles_Info] =
{
	//taxi ls
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1792.5676, -1868.2953, 13.2887, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1807.7679, -1868.5153, 13.2887, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1805.2649, -1901.7776, 13.1195, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1805.2053, -1932.5355, 13.0518, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1775.7917, -1932.4465, 13.0518, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1783.2333, -1932.4965, 13.0518, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1798.8303, -1932.5427, 13.0518, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1791.2925, -1932.4644, 13.0518, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1775.7085, -1916.0463, 13.2772, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1805.3810, -1917.4658, 13.1195, 0.0000, 6, 1, 0, 0},
	
	// taxi sf
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 106.9412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, -1986.7380, 114.9412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 125.9412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 138.4412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, -1986.7380, 145.4412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 155.9412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 171.4412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 178.4412, 27.2298, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, -1986.7380, 185.4412, 27.2298, 0.0000, 6, 1, 0, 0},
	
	// taxi lv
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1687.2935, 1297.4829, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1695.2935, 1297.4829, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1695.7935, 1305.9829, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1691.7935, 1305.9829, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1688.2935, 1305.9829, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1681.7935, 1305.9829, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1688.3271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1693.8271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1699.3271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1703.3271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1706.8271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1711.8271, 1287.1450, 10.5616, 0.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1709.3271, 1316.1450, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1703.3271, 1316.1450, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1698.3271, 1316.1450, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 420, 1694.8271, 1316.1450, 10.5616, 180.0000, 6, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TAXI, 0, 438, 1691.3271, 1316.1450, 10.5616, 180.0000, 6, 1, 0, 0},

	//Camionero
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -494.4160, -472.8649, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -499.3518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -504.5551, -473.4075, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -510.0538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -529.0538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -544.5538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -559.5538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -572.5538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -589.0538, -473.4275, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -514.8518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -533.8518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -564.8518, -473.3605, 25.5408, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -577.3518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -583.3518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -519.4160, -472.8649, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -550.4160, -472.8649, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -489.3518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -483.3518, -473.3605, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -478.4160, -472.8649, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -473.4160, -472.8649, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -469.7829, -488.2091, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -489.7829, -488.2091, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -540.2829, -488.2091, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -564.7829, -488.2091, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 414, -589.2829, -488.2091, 25.5098, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -579.6942, -488.2058, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -549.6942, -488.2058, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 456, -510.6942, -488.2058, 25.5404, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -500.5240, -488.8626, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -556.0240, -488.8626, 25.4323, 180.0000, -1, -1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -615.4958, -480.0750, 25.5963, 269.0000, 0, 0, 1, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -615.3096, -490.5564, 25.5963, 269.0000, 0, 0, 1, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -615.4363, -500.5580, 25.5963, 269.0000, 0, 0, 1, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -615.4330, -527.0305, 25.5963, 269.0000, 0, 0, 1, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -615.8846, -537.6530, 25.5963, 269.0000, 0, 0, 1, 0},
	{VEHICLE_TYPE_WORK, WORK_TRUCK, 0, 498, -616.0970, -547.9350, 25.5963, 269.0000, 0, 0, 1, 0},
	
	//Cosechador
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -390.604370, -1476.015747, 26.704042, 259.474060, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -385.473022, -1464.722900, 26.711814, 227.251434, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -372.544342, -1462.451293, 26.736181, 224.972244, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -375.785583, -1473.692260, 26.720621, 224.966537, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -379.832061, -1484.033203, 26.696950, 223.968917, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -389.124328, -1491.877197, 26.187450, 314.527038, 1, 1, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_HARVESTER, 0, 532, -382.092529, -1499.563842, 25.449359, 314.704895, 1, 1, 0, 0},
	
	//Basurero
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1913.5554, -1702.3322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1913.5554, -1707.8322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1914.0554, -1713.8322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1913.5554, -1719.8322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1913.5554, -1726.3322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1913.5554, -1732.8322, 22.5969, 270.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1901.7543, -1702.9012, 22.5969, 180.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1896.7543, -1702.9012, 22.5969, 180.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1892.2543, -1702.9012, 22.5969, 180.0000, 26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1879.0313, -1739.9550, 22.5969, 33.7282,  26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1884.2616, -1743.0443, 22.5969, 33.7282,  26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1889.2466, -1746.0833, 22.5969, 33.7282,  26, 26, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_TRASH, 0, 408, -1894.2480, -1748.9353, 22.5969, 33.7282,  26, 26, 0, 0},

	//pizzero
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2339, -1813.4716, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2139, -1814.9722, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2139, -1816.4722, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2139, -1817.9722, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2139, -1819.4722, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2094.2139, -1820.9722, 12.9325, 90.0000, 3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2098.2712, -1812.8209, 12.9325, 0.0000,  3, 6, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_PIZZA, 0, 448, 2096.7712, -1812.8209, 12.9325, 0.0000,  3, 6, 0, 0},
	
	//ambulancias
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 2036.2555, -1429.4966, 17.0571, 180.00, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 2036.4742, -1439.7246, 17.0571, 180.00, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 2016.8370, -1411.2896, 17.0571, 90.000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 2017.1022, -1416.2045, 17.0571, 90.000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1180.2153, -1308.2330, 13.8244, -90.00, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1180.4480, -1338.4403, 13.8244, -90.00, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1226.9530, 302.3792, 19.7678, 66.10860, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2202.2329, -2294.7314, 30.7048, 320.0, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2544.5457, 610.1262, 14.4484, 90.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2544.9500, 604.4023, 14.4484, 90.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2545.0088, 598.3672, 14.4484, 90.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2544.8770, 593.1545, 14.4484, 90.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -2545.2927, 587.3546, 14.4484, 90.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -330.0057, 1062.9534, 19.7507, -90.000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -1508.8683, 2526.5510, 55.9118, 0.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, -1504.4027, 2526.4734, 55.9118, 0.0000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1617.1790, 1841.2314, 10.6855, 0.00000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1612.3330, 1841.6625, 10.6855, 0.00000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1607.3164, 1841.8850, 10.6855, 0.00000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1602.5084, 1841.9370, 10.6855, 0.00000, 1, 3, 0, 0},
	{VEHICLE_TYPE_WORK, WORK_MEDIC, 0, 416, 1597.7699, 1841.7919, 10.6855, 0.00000, 1, 3, 0, 0}
};

enum San_Andreas_Barriers_Info
{
	barrier_VEHICLE_TYPE,
	barrier_VEHICLE_TYPE_IN,
	barrier_VEHICLE_TYPE_IN2,
	Float:barrier_X,
	Float:barrier_Y,
	Float:barrier_Z,
	Float:barrier_ROTATION,
	barrier_INTERIOR,
	barrier_WORLD,
	barrier_OBJECT_ID,
	barrier_TIMER,
	bool:barrier_CLOSING,
	Float:barrier_DISTANCE,
	barrier_PRICE,
	Float:barrier_PLAYER_X,
	Float:barrier_PLAYER_Y,
	Float:barrier_PLAYER_Z
}
new San_Andreas_Barriers[][San_Andreas_Barriers_Info] = // usar VEHICLE_TYPE_NONE para que puedan pasar todos
{
	{VEHICLE_TYPE_WORK, WORK_TAXI, WORK_NONE, 1811.32373, -1886.26331, 12.36843, 90.00000, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,		0.0, 0.0, 0.0}, // barrera taxi ls
	{VEHICLE_TYPE_WORK, WORK_TAXI, WORK_NONE, 1717.0457, 1308.0387, 9.7157, 90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,				0.0, 0.0, 0.0}, // barrera taxi lv
	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, -495.0410, -562.1307, 24.4932, 180.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,				0.0, 0.0, 0.0}, // barrera camioneros TRUCK

	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, -82.1645, -1123.0260, 0.0373, 67.1102, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,				0.0, 0.0, 0.0}, // grua
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, 1539.792236, -1632.638916, 12.542699, 270.000000, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,		0.0, 0.0, 0.0}, // barrera POLICIA LS
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, 2238.19897, 2450.41797, 9.80680, -90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0}, // barrera POLICIA LV
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, -1572.20313, 658.83588, 6.07810, -90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0}, // barrera POLICIA SF 1
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, -1701.42969, 687.59381, 23.88280, 90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0}, // barrera POLICIA SF 2

	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, 1665.719848, 276.939819, 29.065624, -18.399997, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 150, 0.0, 0.0, 0.0},
	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, 1637.906982, 261.331573, 29.065624, 164.000000, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 150, 0.0, 0.0, 0.0},

	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, 67.514518, -1537.638671, 3.901367, 85.300003, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 150, 0.0, 0.0, 0.0},
	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, 38.584232, -1525.459106, 4.181367, -97.999946, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 150, 0.0, 0.0, 0.0}
};

#define MAX_BOOT_SLOTS	20

enum VEHICLE_INFO_enum
{
	bool:vehicle_info_LANDING_GEAR,
	bool:vehicle_info_AIR_ALARMS,
	bool:vehicle_info_NORMAL_SPEEDO,
	vehicle_info_NAME[24],
	Float:vehicle_info_MAX_GAS, // Por defecto
	Float:vehicle_info_MAX_VEL,
	vehicle_info_PRICE,
	vehicle_info_LEVEL,
	vehicle_info_EXTRA,
	vehicle_info_BOOT_SLOTS,
	vehicle_info_SEATS,
	bool:vehicle_info_ENGINE,
	bool:vehicle_info_DRIVER_DOOR,
	bool:vehicle_info_PASSENGER_DOOR,
	vehicle_info_VIP_LEVEL,
	vehicle_info_COINS
}
new VEHICLE_INFO[][VEHICLE_INFO_enum] =
{
	{false, false, true, "Landstalker", 80.0, 159.00, 50000, 6, 0, 10			, 4		, true, true, true, 0, 0},
	{false, false, true, "Bravura", 45.0, 148.00, 25000, 4, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Buffalo", 50.0, 188.00, 150000, 8, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Linerunner", 150.0, 110.00, 40000, 30, 0, 0		, 2		, true, true, true, 0, 0},
	{false, false, true, "Perrenial", 50.0, 134.00, 5000, 2, 0, 10			, 4		, true, true, true, 0, 0},
	{false, false, true, "Sentinel", 45.0, 165.00, 12000, 2, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Dumper", 20.0, 111.00, 700000, 30, 0, 0				, 1		, true, true, true, 0, 0},
	{false, false, true, "Firetruck", 120.0, 149.00, 500000, 30, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "Trashmaster", 80.0, 101.00, 300000, 30, 0, 0		, 2		, true, true, true, 0, 0},
	{false, false, true, "Stretch", 80.0, 159.00, 800000, 15, 0, 12			, 4		, true, true, true, 0, 0},
	{false, false, true, "Manana", 40.0, 131.00, 8000, 2, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Infernus", 80.0, 223.00, 350000, 15, 0, 6			, 2		, true, true, true, 1, 20},
	{false, false, true, "Voodoo", 45.0, 170.00, 25000, 6, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Pony", 60.0, 111.00, 30000, 6, 0, 12				, 4		, true, true, true, 0, 0},
	{false, false, true, "Mule", 60.0, 106.00, 30000, 8, 0, 0					, 2		, true, true, true, 0, 0},
	{false, false, true, "Cheetah", 65.0, 194.00, 20000, 15, 0, 4			, 2		, true, true, true, 1, 15},
	{false, false, true, "Ambulance", 120.0, 155.00, 600000, 30, 0, 0			, 4		, true, true, true, 0, 0},
	{false, false, false, "Leviathan", 400.0, 1.00, 1500000, 30, 0, MAX_BOOT_SLOTS			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Moonbeam", 60.0, 116.00, 16000, 2, 0, 12			, 4		, true, true, true, 0, 0},
	{false, false, true, "Esperanto", 40.0, 150.00, 20000, 3, 0, 5			, 2		, true, true, true, 0, 0},
	{false, false, true, "Taxi", 60.0, 146.00, 80000, 8, 0, 8					, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Washington", 50.0, 155.00, 15000, 2, 0, 6			, 4		, true, true, true, 0, 0},
	{false, false, true, "Bobcat", 70.0, 141.00, 20000, 6, 0, 8				, 2		, true, true, true, 0, 0},
	{false, false, true, "MrWhoopee", 60.0, 99.00, 30000, 15, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "BFInjection", 30.0, 136.00, 20000, 12, 0, 4		, 2		, true, true, false, 1, 20},
	{false, false, false, "Hunter", 425.0, 1.00, 3000000, 30, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Premier", 70.0, 175.00, 21000, 3, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Enforcer", 120.0, 167.00, 200000, 16, 0, 0			, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Securicar", 80.0, 158.00, 150000, 15, 0, 12			, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Banshee", 65.0, 203.00, 20000, 15, 0, 4			, 2		, true, true, true, 1, 15},
	{false, false, false, "Predator", 1.0, 1.00, 80000, 10, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, true, "Bus", 180.0, 131.00, 500000, 20, 0, 20				, 500	, true, true, true, 0, 0},
	{false, false, true, "Rhino", 200.0, 95.00, 10000000, 100, 0, 0			, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Barracks", 150.0, 111.00, 600000, 80, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "Hotknife", 50.0, 168.00, 300000, 15, 0, 4			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Trailer1", 1.0, 1.00, 50000, 5, 0, 0				, 0		, false, false, false, 0, 0}, // >>>> No.
	{false, false, true, "Previon", 40.0, 150.00, 8000, 2, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Coach", 150.0, 159.00, 450000, 30, 0, 20			, 500	, true, true, true, 0, 0},
	{false, false, true, "Cabbie", 80.0, 144.00, 54000, 5, 0, 6				, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Stallion", 60.0, 170.00, 15000, 2, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Rumpo", 60.0, 137.00, 20000, 5, 0, 12				, 4		, true, true, true, 0, 0},
	{false, false, false, "RCBandit", 1.0, 1.00, 500, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Romero", 60.0, 140.00, 80000, 10, 0, 0				, 2		, true, true, true, 0, 0},
	{false, false, true, "Packer", 150.0, 127.00, 500000, 15, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "Monster", 80.0, 111.00, 20000, 20, 0, 20			, 2		, true, true, true, 2, 50},
	{false, false, true, "Admiral", 65.0, 165.00, 5000, 1, 0, 4				, 4		, true, true, true, 0, 0},
	{false, false, false, "Squalo", 1.0, 1.00, 20000, 12, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 2, 35},
	{false, false, false, "Seasparrow", 120.0, 1.00, 500000, 16, 0, MAX_BOOT_SLOTS			, 2		, true, true, true, 2, 40}, 
	{false, false, true, "Pizzaboy", 20.0, 116.00, 1600, 1, 0, 0				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Tram", 1.0, 1.00, 0, 0, 0, 0						, 0		, false, false, false, 0, 0}, // >>>> No.
	{false, false, false, "Trailer2", 1.0, 1.00, 0, 0, 0, 0					, 0		, false, false, false, 0, 0}, // >>>> No.
	{false, false, true, "Turismo", 80.0, 195.00, 20000, 15, 0, 6			, 2		, true, true, true, 1, 20},
	{false, false, false, "Speeder", 1.0, 1.00, 1500000, 15, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, false, "Reefer", 1.0, 1.00, 800000, 10, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, false, "Tropic", 1.0, 1.00, 1600000, 15, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 2, 35},
	{false, false, true, "Flatbed", 120.0, 159.00, 50000, 10, 0, 0			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Yankee", 50.0, 107.00, 80000, 8, 0, 15				, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Caddy", 10.0, 96.00, 20000, 1, 0, 0					, 2		, true, true, false, 1, 30}, // >>>> No.
	{false, false, true, "Solair", 80.0, 158.00, 20000, 3, 0, 8				, 4		, true, true, true, 0, 0},
	{false, false, true, "BerkleyRCVan", 60.0, 137.00, 50000, 5, 0, 12		, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Skimmer", 250.0, 1.00, 160000, 15, 0, MAX_BOOT_SLOTS				, 2		, true, true, true, 0, 0},
	{false, false, true, "PCJ-600", 45.0, 167.00, 40000, 5, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, true, "Faggio", 20.0, 107.00, 1500, 1, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, true, "Freeway", 60.0, 142.00, 30000, 6, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, false, "RCBaron", 1.0, 1.00, 500, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "RCRaider", 1.0, 1.00, 500, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Glendale", 50.0, 148.00, 2000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Oceanic", 50.0, 141.00, 16000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Sanchez", 40.0, 143.00, 50000, 2, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, false, "Sparrow", 140.0, 1.00, 500000, 30, 0, MAX_BOOT_SLOTS				, 2		, true, true, true, 2, 35}, // >>>> No.
	{false, false, true, "Patriot", 120.0, 158.00, 20000, 15, 0, 8			, 4		, true, true, true, 1, 30},
	{false, false, true, "Quad", 25.0, 111.00, 20000, 1, 0, 0					, 2		, true, true, false, 1, 10},
	{false, false, false, "Coastguard", 1.0, 1.00, 150000, 5, 0, MAX_BOOT_SLOTS			, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Dinghy", 1.0, 1.00, 10000, 5, 0, MAX_BOOT_SLOTS					, 1		, true, true, true, 0, 0},
	{false, false, true, "Hermes", 80.0, 150.00, 9000, 2, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Sabre", 45.0, 174.00, 12000, 2, 0, 6				, 2		, true, true, true, 0, 0},
	{true, false, false, "Rustler", 250.0, 1.00, 30000, 15, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, true, "ZR-350", 60.0, 188.00, 120000, 3, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Walton", 50.0, 118.00, 3500, 1, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Regina", 80.0, 141.00, 10000, 5, 0, 10				, 4		, true, true, true, 0, 0},
	{false, false, true, "Comet", 45.0, 186.00, 130000, 6, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, false, "BMX", 1.0, 1.00, 150, 1, 0, 0						, 1		, false, true, true, 0, 0},
	{false, false, true, "Burrito", 60.0, 158.00, 40000, 6, 0, 12				, 4		, true, true, true, 0, 0},
	{false, false, true, "Camper", 50.0, 124.00, 60000, 9, 0, 10				, 3		, true, true, true, 0, 0},
	{false, false, false, "Marquis", 1.0, 1.00, 6000000, 20, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, true, "Baggage", 20.0, 100.00, 1000, 1, 0, 0				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Dozer", 25.0, 65.00, 50000, 5, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Maverick", 1000.0, 1.00, 20000, 20, 0, MAX_BOOT_SLOTS				, 4		, true, true, true, 1, 60}, // >>>> No.
	{false, false, false, "NewsChopper", 200.0, 1.00, 500000, 20, 0, MAX_BOOT_SLOTS			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Rancher", 90.0, 140.00, 60000, 6, 0, 10				, 2		, true, true, true, 0, 0},
	{false, false, true, "FBIRancher", 90.0, 158.00, 80000, 8, 0, 12			, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Virgo", 45.0, 150.00, 6000, 1, 0, 4					, 2		, true, true, true, 0, 0},
	{false, false, true, "Greenwood", 45.0, 141.00, 12000, 2, 0, 4			, 4		, true, true, true, 0, 0},
	{false, false, false, "Jetmax", 1.0, 1.00, 5000000, 20, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 1, 35},
	{false, false, true, "Hotring", 80.0, 216.00, 20000, 15, 0, 0			, 2		, true, true, true, 1, 35},
	{false, false, true, "Sandking", 60.0, 178.00, 20000, 15, 0, 10			, 2		, true, true, true, 1, 35},
	{false, false, true, "Blista Compact", 60.0, 164.00, 6500, 1, 0, 4		, 2		, true, true, true, 0, 0},
	{false, false, false, "Police Maverick", 1000.0, 1.00, 600000, 20, 0, MAX_BOOT_SLOTS		, 4		, true, true, true, 0, 0},
	{false, false, true, "Boxville", 60.0, 109.00, 80000, 12, 0, 12			, 4		, true, true, true, 0, 0},
	{false, false, true, "Benson", 70.0, 124.00, 80000, 12, 0, 12				, 2		, true, true, true, 0, 0},
	{false, false, true, "Mesa", 60.0, 141.00, 30000, 5, 0, 2					, 2		, true, true, true, 0, 0},
	{false, false, false, "RCGoblin", 1.0, 1.00, 500, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "HotringRacer A", 80.0, 216.00, 20000, 20, 0, 0		, 2		, true, true, true, 1, 35},
	{false, false, true, "HotringRacer B", 80.0, 216.00, 20000, 20, 0, 0		, 2		, true, true, true, 1, 35},
	{false, false, true, "BloodringBanger", 40.0, 174.00, 80000, 15, 0, 0		, 2		, true, true, true, 1, 20},
	{false, false, true, "Rancher", 80.0, 140.00, 60000, 6, 0, 10				, 2		, true, true, true, 0, 0},
	{false, false, true, "SuperGT", 60.0, 180.00, 250000, 15, 0, 4			, 2		, true, true, true, 0, 0},
	{false, false, true, "Elegant", 65.0, 167.00, 5000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Journey", 90.0, 108.00, 40000, 4, 0, 12				, 2		, true, true, true, 0, 0},
	{false, false, false, "Bike", 1.0, 1.00, 500, 1, 0, 0						, 1		, false, true, true, 0, 0}, // >>>> No.
	{false, false, false, "MountainBike", 1.0, 1.00, 500, 1, 0, 0				, 1		, false, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Beagle", 300.0, 1.00, 6000000, 16, 0, MAX_BOOT_SLOTS				, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Cropdust", 150.0, 1.00, 1200000, 12, 0, MAX_BOOT_SLOTS			, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Stunt", 150.0, 1.00, 1200000, 12, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Tanker", 130.0, 121.00, 500000, 20, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "Roadtrain", 150.0, 143.00, 500000, 20, 0, 0			, 2		, true, true, true, 0, 0},
	{false, false, true, "Nebula", 60.0, 158.00, 4000, 1, 0, 4				, 4		, true, true, true, 0, 0},
	{false, false, true, "Majestic", 45.0, 158.00, 4000, 1, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Buccaneer", 50.0, 165.00, 4500, 1, 0, 4				, 2		, true, true, true, 0, 0},
	{true, true, false, "Shamal", 3000.0, 1.00, 20000000, 30, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{true, false, false, "Hydra", 3000.0, 1.00	, 50000000, 100, 0, MAX_BOOT_SLOTS			, 1		, true, true, true, 0, 0},
	{false, false, true, "FCR-900", 50.0, 169.00, 60000, 6, 0, 0				, 2		, true, true, false, 1, 25},
	{false, false, true, "NRG-500", 40.0, 190.00, 80000, 8, 0, 0				, 2		, true, true, false, 1, 30},
	{false, false, true, "HPV1000", 60.0, 168.00, 50000, 8, 0, 0				, 2		, true, true, false, 0, 0}, // >>>> No.
	{false, false, true, "CementTruck", 30.0, 131.00, 80000, 8, 0, 0			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "TowTruck", 60.0, 162.00, 30000, 3, 0, 4				, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Fortune", 40.0, 159.00, 10000, 2, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Cadrona", 45.0, 150.00, 10000, 2, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "FBITruck", 80.0, 178.00, 150000, 15, 0, 12			, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Willard", 55.0, 150.00, 5000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Forklift", 10.0, 61.00, 1500, 1, 0, 0				, 1		, true, true, true, 0, 0},
	{false, false, true, "Tractor", 30.0, 71.00, 2000, 1, 0, 0				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Combine", 20.0, 111.00, 10000, 2, 0, 0				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Feltzer", 50.0, 168.00, 13000, 3, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "Remington", 60.0, 170.00, 15000, 3, 0, 4			, 2		, true, true, true, 0, 0},
	{false, false, true, "Slamvan", 60.0, 159.00, 20000, 8, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Blade", 62.0, 174.00, 30000, 4, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, false, "Freight", 1.0, 1.00, 1000000, 100, 0, 0			, 500	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Streak", 1.0, 1.00, 1000000, 100, 0, 0				, 500	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Vortex", 20.0, 100.00, 2000, 20, 0, 0				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Vincent", 40.0, 150.00, 5000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Bullet", 60.0, 204.00, 20000, 15, 0, 4				, 2		, true, true, true, 1, 30},
	{false, false, true, "Clover", 45.0, 165.00, 6000, 1, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Sadler", 60.0, 152.00, 5000, 1, 0, 8				, 2		, true, true, true, 0, 0},
	{false, false, true, "FiretruckLA", 120.0, 149.00, 2000000, 20, 0, 0		, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Hustler", 80.0, 148.00, 60000, 25, 0, 6			, 2		, true, true, true, 0, 0},
	{false, false, true, "Intruder", 60.0, 150.00, 15000, 3, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Primo", 55.0, 144.00, 3000, 1, 0, 6					, 4		, true, true, true, 0, 0},
	{false, false, false, "Cargobob", 400.0, 1.00, 3000000, 20, 0, MAX_BOOT_SLOTS			, 2		, true, true, true, 0, 0},
	{false, false, true, "Tampa", 60.0, 154.00, 12000, 2, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Sunrise", 60.0, 146.00, 9000, 2, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Merit", 55.0, 158.00, 8000, 2, 0, 6					, 4		, true, true, true, 0, 0},
	{false, false, true, "Utility", 60.0, 122.00, 30000, 3, 0, 6				, 2		, true, true, true, 0, 0}, // >>>> No.
	{true, true, false, "Nevada", 15000.0, 1.00, 2000000, 30, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0},
	{false, false, true, "Yosemite", 60.0, 145.00, 25000, 3, 0, 8				, 2		, true, true, true, 0, 0},
	{false, false, true, "Windsor", 45.0, 159.00, 13500, 3, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "MonsterA", 45.0, 111.00, 20000, 20, 0, 20			, 2		, true, true, true, 1, 50},
	{false, false, true, "MonsterB", 60.0, 111.00, 20000, 20, 0, 20			, 2		, true, true, true, 1, 50},
	{false, false, true, "Uranus", 80.0, 157.00, 15000, 3, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Jester", 60.0, 179.00, 25000, 5, 0, 4				, 2		, true, true, true, 1, 15},
	{false, false, true, "Sultan", 60.0, 170.00, 80000, 5, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Stratum", 60.0, 155.00, 29000, 4, 0, 8				, 4		, true, true, true, 0, 0},
	{false, false, true, "Elegy", 60.0, 179.00, 20000, 6, 0, 6				, 2		, true, true, true, 1, 15},
	{false, false, false, "Raindance", 400.0, 1.00, 500000, 15, 0, MAX_BOOT_SLOTS			, 2		, true, true, true, 0, 0},
	{false, false, false, "RC Tiger", 1.0, 1.00, 500, 1, 0, 0					, 1		, true, true, true, 0, 0},
	{false, false, true, "Flash", 60.0, 166.00, 60000, 6, 0, 8				, 2		, true, true, true, 0, 0},
	{false, false, true, "Tahoma", 40.0, 161.00, 15000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Savanna", 50.0, 174.00, 30000, 5, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Bandito", 30.0, 147.00, 30000, 5, 0, 0				, 1		, true, true, true, 0, 0},
	{false, false, false, "FreightFlat", 1.0, 1.00, 5000000, 50, 0, 0			, 0		, true, true, true, 0, 0},
	{false, false, false, "StreakCarriage", 1.0, 1.00, 5000000, 50, 0, 0		, 0		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Kart", 10.0, 94.00, 20000, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Mower", 15.0, 61.00, 1200, 1, 0, 0					, 1		, true, true, true, 0, 0},
	{false, false, true, "Duneride", 80.0, 111.00, 1000000, 20, 0, 20			, 2		, true, true, true, 2, 50},
	{false, false, true, "Sweeper", 20.0, 61.00, 4000, 1, 0, 2				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Broadway", 45.0, 159.00, 20000, 6, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Tornado", 40.0, 159.00, 6000, 1, 0, 4				, 2		, true, true, true, 0, 0},
	{true, true, false, "AT-400", 25000.0, 1.00, 10000000, 50, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "DFT-30", 80.0, 131.00, 100000, 10, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Huntley", 80.0, 159.00, 60000, 6, 0, 8				, 4		, true, true, true, 0, 0},
	{false, false, true, "Stafford", 60.0, 154.00, 90000, 2, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "BF-400", 35.0, 168.00, 13000, 2, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, true, "Newsvan", 60.0, 137.00, 30000, 3, 0, 10				, 4		, false, false, false, 0, 0},
	{false, false, true, "Tug", 15.0, 86.00, 2000, 1, 0, 0					, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Trailer 3", 1.0, 1.00, 160000, 15, 0, 0			, 0		, true, true, true, 0, 0},
	{false, false, true, "Emperor", 60.0, 154.00, 6000, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Wayfarer", 50.0, 158.00, 8000, 2, 0, 0				, 2		, true, true, false, 0, 0},
	{false, false, true, "Euros", 50.0, 166.00, 20000, 3, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Hotdog", 60.0, 109.00, 30000, 5, 0, 12				, 2		, true, true, true, 0, 0},
	{false, false, true, "Club", 65.0, 164.00, 20000, 10, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, false, "FreightCarriage", 1.0, 1.00, 1000000, 100, 0, 0	, 0		, false, false, false, 0, 0}, // >>>> No.
	{false, false, false, "Trailer3", 1.0, 1.00, 1000000, 100, 0, 0			, 0		, false, false, false, 0, 0}, // >>>> No.
	{true, true, false, "Andromada", 30000.0, 1.00, 1000000, 100, 0, MAX_BOOT_SLOTS			, 500	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Dodo", 250.0, 1.00, 750000, 12, 0, MAX_BOOT_SLOTS					, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "RCCam", 1.0, 1.00, 500, 1, 0, 0					, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Launch", 1.0, 1.00, 800000, 8, 0, MAX_BOOT_SLOTS				, 1		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "LSPD", 60.0, 177.00, 50000, 10, 0, 8				, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "SFPD", 60.0, 177.00, 50000, 10, 0, 8				, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "LVPD", 60.0, 177.00, 50000, 10, 0, 8				, 4		, true, true, true, 0, 0},
	{false, false, true, "PoliceRanger", 90.0, 159.00, 70000, 10, 0, 12		, 2		, true, true, true, 0, 0}, // // >>>> No. >>>> No.
	{false, false, true, "Picador", 40.0, 152.00, 4500, 1, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, true, "S.W.A.T.Van", 30.0, 111.00, 4000000, 50, 0, 0		, 2		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Alpha", 60.0, 170.00, 50000, 8, 0, 4				, 2		, true, true, true, 0, 0},
	{false, false, true, "Phoenix", 60.0, 172.00, 35000, 10, 0, 4			, 2		, true, true, true, 0, 0},
	{false, false, true, "Glendale", 30.0, 148.00, 1500, 1, 0, 6				, 4		, true, true, true, 0, 0},
	{false, false, true, "Sadler", 40.0, 152.00, 1600, 1, 0, 6				, 2		, true, true, true, 0, 0},
	{false, false, false, "LuggageTrailerA", 1.0, 1.00, 500, 1, 0, 0			, 0		, true, true, true, 0, 0},
	{false, false, false, "LuggageTrailerB", 1.0, 1.00, 500, 1, 0, 0			, 0		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "StairTrailer", 1.0, 1.00, 500, 1, 0, 0				, 0		, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Boxville", 90.0, 108.00, 60000, 6, 0, 15			, 4		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "FarmPlow", 1.0, 1.00, 3000, 1, 0, 0				, 0		, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "UtilityTrailer", 1.0, 1.00, 1000, 1, 0, 0         	, 0		, true, true, true, 0, 0} // >>>> No.
};

enum
{
	BOOT_TYPE_WEAPON,
	BOOT_TYPE_MEDICINES,
	BOOT_TYPE_CANNABIS,
	BOOT_TYPE_CRACK
};
enum enum_VEHICLE_BOOT
{
	bool:vehicle_boot_VALID,
	vehicle_boot_OBJECT_ID,
	vehicle_boot_TYPE,
	vehicle_boot_INT,
	vehicle_boot_INT_EXTRA,
}
new VEHICLE_BOOT[MAX_VEHICLES][MAX_BOOT_SLOTS][enum_VEHICLE_BOOT];

enum SELL_INFO_VEHICLES_Enum
{
	sel_info_vehicle_MODELID,
	Float:sell_info_SPAWN_X,
	Float:sell_info_SPAWN_Y,
	Float:sell_info_SPAWN_Z,
	Float:sell_info_SPAWN_ANGLE,
	sell_info_COLOR_1,
	sell_info_COLOR_2,
	sell_info_SHOP,
}
new SELL_INFO_VEHICLES[][SELL_INFO_VEHICLES_Enum] =
{
	{400, -1971.730834, 305.717071, 35.281467, 112.761856, -1, -1, 0}, //conce0
	{489, -1972.303588, 299.899291, 35.315319, 113.739143, -1, -1, 0}, //conce0
	{500, -1989.106811, 267.932830, 35.276290, 267.933868, -1, -1, 0}, //conce0
	{516, -1988.849243, 262.505828, 35.014682, 273.633972, -1, -1, 0}, //conce0
	{517, -1989.152587, 257.527374, 35.020854, 278.511993, -1, -1, 0}, //0
	{518, -1990.650756, 252.367614, 34.853424, 260.343750, -1, -1, 0}, //0
	{526, -1991.783203, 247.102294, 34.938541, 263.152526, -1, -1, 0}, //0
	{529, -1992.195556, 241.864547, 34.804782, 265.900787, -1, -1, 0}, //0
	{533, -1970.909790, 271.824432, 34.874591, 92.208198, -1, -1, 0}, //0
	{534, -1971.686889, 266.768585, 34.897808, 90.052833, -1, -1, 0}, //0
	{535, -1972.078857, 261.530334, 34.940402, 91.687599, -1, -1, 0}, //0
	{536, -1971.535644, 255.783843, 34.909259, 90.030273, -1, -1, 0}, //0
	{540, -1985.110107, 303.989593, 35.031871, 247.498382, -1, -1, 0}, //0
	{543, -1959.895751, 272.834747, 35.330417, 315.005645, -1, -1, 0}, //0
	{546, -1947.004760, 265.553222, 35.208316, 44.999832, -1, -1, 0}, //0
	{547, -1957.724731, 261.617736, 35.244117, 134.999298, -1, -1, 0}, //0
	{549, -1950.561035, 258.919067, 35.165855, 23.361270, -1, -1, 0}, //0
	{551, -1961.752929, 284.531127, 35.270526, 0.696665, -1, -1, 0}, //0
	{554, -1946.718139, 257.937591, 41.083919, 45.030506, -1, -1, 0}, //0
	{555, -1955.544677, 257.741241, 40.755210, 315.004882, -1, -1, 0}, //0
	{558, -1945.867919, 273.318969, 40.666416, 135.659255, -1, -1, 0}, //0
	{559, -1946.407836, 264.562194, 40.705158, 70.021125, -1, -1, 0}, //0
	{560, -1953.854003, 295.461822, 40.762950, 141.442657, -1, -1, 0}, //0
	{561, -1954.960693, 302.385498, 40.873092, 45.000858, -1, -1, 0}, //0
	{562, -1955.735351, 274.163513, 40.699062, 224.775680, -1, -1, 0}, //0
	{565, 561.566101, -1290.956542, 16.871730, 13.598201, -1, -1, 1}, //1
	{566, 555.651794, -1290.101562, 17.030550, 12.250467, -1, -1, 1}, //1
	{567, 548.681701, -1288.398803, 17.121070, 2.627753, -1, -1, 1}, //1
	{575, 543.408569, -1290.018676, 16.844970, 12.805674, -1, -1, 1}, //1
	{576, 537.712585, -1289.785278, 16.853311, 8.072924, -1, -1, 1}, //1
	{579, 531.610229, -1289.627563, 17.179222, 0.727972, -1, -1, 1}, //1
	{580, 524.575805, -1290.402587, 17.038362, 347.873016, -1, -1, 1}, //1
	{585, 519.242980, -1287.057373, 16.828090, 306.424560, -1, -1, 1}, //1
	{587, 527.172241, -1282.828613, 16.988870, 225.000015, -1, -1, 1}, //1
	{589, 531.867553, -1279.575195, 16.918565, 225.000091, -1, -1, 1}, //1
	{600, 536.016235, -1276.898681, 16.963094, 225.002395, -1, -1, 1}, //1
	{602, 539.315979, -1273.561767, 17.073772, 224.999908, -1, -1, 1}, //1
	{603, 543.021911, -1270.594482, 17.126434, 224.998825, -1, -1, 1}, //1
	{402, 547.388854, -1268.065185, 17.089252, 225.000061, -1, -1, 1}, //1
	{405, 550.830261, -1264.989990, 17.167030, 225.000000, -1, -1, 1}, //1
	{604, 2123.362304, -1144.851196, 24.472566, 314.818267, -1, -1, 2}, //2
	{605, 2120.166748, -1141.430053, 24.722545, 314.695739, -1, -1, 2}, //2
	{542, 2120.096923, -1136.088378, 24.996570, 314.858062, -1, -1, 2}, //2
	{462, 2126.857177, -1147.089843, 24.115188, 314.773010, -1, -1, 2}, //2
	{543, 2132.541748, -1142.541259, 24.895196, 44.777957, -1, -1, 2}, //2
	{529, 2135.447509, -1140.396362, 24.948331, 45.030994, -1, -1, 2}, //2
	{401, 1730.930053, 1887.108520, 10.599695, 134.999694, -1, -1, 3}, //
	{404, 1731.381225, 1892.453125, 10.569231, 134.707473, -1, -1, 3}, //
	{405, 1731.109252, 1898.369384, 10.702906, 135.000000, -1, -1, 3}, //
	{410, 1731.451293, 1903.748901, 10.504331, 135.005813, -1, -1, 3}, //
	{412, 1730.241699, 1908.477050, 10.707293, 134.881576, -1, -1, 3}, //
	{413, 1730.819458, 1914.079833, 10.902223, 134.658706, -1, -1, 3}, //
	{418, 1730.897949, 1919.471923, 10.925701, 135.000335, -1, -1, 3}, //
	{419, 1730.598510, 1924.523437, 10.644100, 135.000000, -1, -1, 3}, //
	{421, 1730.842407, 1929.510375, 10.778207, 134.998794, -1, -1, 3}, //
	{422, 1731.021850, 1934.202270, 10.808994, 135.312362, -1, -1, 3}, //
	{426, 1731.136352, 1938.637451, 10.596670, 134.887939, -1, -1, 3}, //
	{426, 1730.754760, 1943.268554, 10.570414, 134.479446, -1, -1, 3}, //
	{439, 1731.084106, 1948.810180, 10.755937, 134.970794, -1, -1, 3}, //
	{445, 1730.763916, 1954.217285, 10.718680, 134.999984, -1, -1, 3}, //
	{458, 1731.066528, 1959.513549, 10.657438, 136.287368, -1, -1, 3}, //
	{459, 1731.444946, 1964.863403, 10.899006, 134.975570, -1, -1, 3}, //
	{466, 1730.831176, 1969.622192, 10.593549, 134.999984, -1, -1, 3}, //
	{467, 1730.754882, 1975.104492, 10.608223, 134.999969, -1, -1, 3}, //
	{474, 1730.852539, 1980.575927, 10.568473, 135.129379, -1, -1, 3}, //
	{475, 1730.986572, 1986.015014, 10.660503, 134.965286, -1, -1, 3}, //
	{477, 1731.019409, 1990.834350, 10.559190, 134.795349, -1, -1, 3}, //
	{478, 1731.501220, 1996.037841, 10.857707, 134.984298, -1, -1, 3}, //
	{479, 1731.119262, 2000.719360, 10.598874, 134.999588, -1, -1, 3}, //
	{480, 1731.495361, 2005.884155, 10.634652, 134.999740, -1, -1, 3}, //
	{482, 1731.285766, 2010.759765, 10.950078, 135.215301, -1, -1, 3}, //
	{483, 1730.935058, 2014.496948, 10.826995, 135.018432, -1, -1, 3}, //
	{489, 1731.131103, 2019.822509, 10.965262, 134.999526, -1, -1, 3}, //
	{491, 1742.855224, 1886.187866, 10.607666, 224.881958, -1, -1, 3}, //
	{492, 1742.420410, 1891.042602, 10.625684, 225.000015, -1, -1, 3}, //
	{496, 1741.725830, 1895.996459, 10.518464, 224.999679, -1, -1, 3}, //
	{500, 1741.789916, 1901.220703, 10.979518, 224.999908, -1, -1, 3}, //
	{507, 1742.658081, 1905.751464, 10.650567, 224.999938, -1, -1, 3}, //
	{461, 1745.890258, 1853.801513, 10.397463, 44.999942, -1, -1, 3}, //
	{462, 1741.982177, 1853.458618, 10.424824, 45.022659, -1, -1, 3}, //
	{463, 1738.716674, 1853.531250, 10.366888, 45.000011, -1, -1, 3}, //
	{468, 1735.504272, 1853.494750, 10.499835, 44.996749, -1, -1, 3}, //
	{471, 1732.698120, 1853.572998, 10.344942, 44.999938, -1, -1, 3}, //
	{521, 1729.782714, 1853.793823, 10.406937, 44.999969, -1, -1, 3}, //
	{522, 1727.729858, 1853.685791, 10.398012, 44.997669, -1, -1, 3}, //
	{581, 1725.653930, 1853.688842, 10.425397, 45.000293, -1, -1, 3}, //
	{586, 1722.802734, 1853.941406, 10.325091, 45.006359, -1, -1, 3}, //
	{470, 1742.820800, 1913.142211, 10.816078, 229.028472, -1, -1, 3},
	{444, 1742.383178, 1877.171997, 11.191605, 207.159729, -1, -1, 3},
	{556, 1730.099609, 1877.612792, 11.195281, 145.682418, -1, -1, 3},
	{568, 1741.999877, 1919.793823, 10.684306, 230.327041, -1, -1, 3},
	{571, 1748.815063, 1854.531616, 10.108824, 43.566219 , -1, -1, 3},
	{531, 1742.570190, 1923.476196, 10.785881, 234.443817, -1, -1, 3},
	{409, 1736.970092, 2030.637451, 10.619542, 359.768463, -1, -1, 3},
	{573, 1736.567016, 1873.478393, 11.484094, 181.366882, -1, -1, 3},
	{402, -1660.500610, 1214.428955, 7.081802, 245.781250, -1, -1, 4}, //
	{411, -1659.630004, 1216.934814, 13.398953, 332.907165, -1, -1, 4}, //
	{415, -1653.029663, 1210.681518, 13.444266, 253.155578, -1, -1, 4}, //
	{429, -1669.283081, 1206.197265, 13.351553, 294.647796, -1, -1, 4}, //
	{434, -1665.829223, 1222.459350, 13.684193, 224.999526, -1, -1, 4}, //
	{451, -1666.966186, 1205.829345, 20.861524, 324.716613, -1, -1, 4}, //
	{506, -1658.944458, 1206.433837, 20.860774, 17.348609, -1, -1, 4}, //
	{541, -1649.423461, 1206.491821, 20.775476, 133.478042, -1, -1, 4}, //
	{545, -1656.527587, 1216.405029, 21.003622, 44.999988, -1, -1, 4}, //
	{446, -2231.2676, 2451.4797, 0.0119, 228.6364, -1, -1, 5},
	{452, -2241.1306, 2440.2146, 0.0119, 226.4393, -1, -1, 5},
	{453, -2250.6514, 2428.3452, 0.0119, 226.4393, -1, -1, 5},
	{454, -2262.2539, 2419.0127, 0.0119, 226.4393, -1, -1, 5},
	{454, -2202.1697, 2421.1807, 0.0119, 45.7924, -1, -1,  5},
	{472, -2234.6467, 2394.7185, 0.2970, 42.8398, -1, -1,  5},
	{484, -2213.1201, 2411.4111, 0.0119, 46.0592, -1, -1,  5},
	{473, -2237.2305, 2390.8669, 0.2970, 42.8398, -1, -1,  5},
	{493, -2223.5603, 2400.2893, -0.0596, 46.0592, -1, -1, 5},
	{595, -2245.3577, 2433.8679, 0.5854, 226.4393, -1, -1, 5},
	{487, 1331.6254, 1562.7415, 11.0567, -90.0000, -1, -1, 6},
	{447, 1331.6254, 1581.2415, 11.0567, -90.0000, -1, -1, 6},
	{469, 1331.6254, 1596.7415, 11.0567, -90.0000, -1, -1, 6}
};
new Float:SELL_VEHICLES_SHOPS_SPAWN[][] =
{
	{-1920.1965, 302.7697, 40.5643, -90.0000},
	{563.774475, -1273.510986, 16.867170, 12.636687},
	{2133.863037, -1129.836791, 25.270145, 71.406616},
	{1677.705078, 1790.098144, 10.445111, 89.955596},
	{-1645.245361, 1217.047973, 6.732273, 224.517120},
	{-2258.0054, 2477.0315, 0.2512, 313.4971}, //barcos
	{1358.9822, 1540.4270, 11.0567, -90.0} //helis
};

enum SELL_VEHICLES_Enum
{
	bool:sell_vehicle_VALID,
	sell_vehicle_SHOP,
	sell_vehicle_PRICE,
	sell_vehicle_LEVEL,
	sell_vehicle_EXTRA,
	sell_vehicle_VIP_LEVEL,
	Text3D:sell_vehicle_LABEL_ID,
}
new SELL_VEHICLES[MAX_VEHICLES][SELL_VEHICLES_Enum];

// AGRICULTOR
enum
{
	PLANT_TYPE_MEDICINE, 	// VIDA
	PLANT_TYPE_CANNABIS,	// YOKSETIOXD
	PLANT_TYPE_CRACK,		//CHALECO
}

enum seed_info_enum
{
	seed_info_TYPE,
	seed_info_PLANT_TYPE,
	seed_info_EXP,
	seed_info_NAME[24],
	seed_info_PRICE,
}
new seed_info[][seed_info_enum] =
{
	{TYPE_LEGAL, PLANT_TYPE_MEDICINE, 0, "Medicina", 50},
	{TYPE_ILLEGAL, PLANT_TYPE_CANNABIS, 100, "Marihuana", 150},
	{TYPE_ILLEGAL, PLANT_TYPE_CRACK, 200, "Coca", 300}
};

enum plant_info_enum
{
	plant_info_SEEDS,
	plant_info_NAME[24],
}
new plant_info[][plant_info_enum] =
{
	{2, "Medicamento"},
	{4, "Marihuana"},
	{10, "Crack"}
};


#define MAX_PLANTS	500
enum PLANTS_ENUM
{
	bool:plant_VALID,
	bool:plant_GROWING,
	bool:plant_INVISIBLE,
	Float:plant_GROWING_PROGRESS,
	plant_TYPE,
	plant_PLANTED_BY_ACCOUNT_ID,
	plant_PLANTED_BY_NAME[24],
	plant_OBJECT_ID,
	Text3D:plant_LABEL_ID,
	plant_EXPIRE_TIME,
	plant_TIMER,
	plant_IMMUNITY,
}
new PLANTS[MAX_PLANTS][PLANTS_ENUM];

enum
{
	OBJECT_TYPE_NONE,
	OBJECT_TYPE_PLANT,
	OBJECT_TYPE_POLICE,
	OBJECT_TYPE_TEST
}

/* SYSTEM - GPS */
enum 
{
	CHECKPOINT_TYPE_NONE,
	CHECKPOINT_TYPE_GPS,
	CHECKPOINT_TYPE_UNLOAD_TRUCK,
	CHECKPOINT_TYPE_FINISH_TRUCK,
	CHECKPOINT_TYPE_HARVEST,
	CHECKPOINT_TYPE_TRASH,
	CHECKPOINT_TYPE_FINISH_TRASH,
	CHECKPOINT_TYPE_LUMBERJACK,
	CHECKPOINT_TYPE_PIZZA_DEL,
	CHECKPOINT_TYPE_PIZZA_FINISH,
	CHECKPOINT_TYPE_DRIVING_SCHOOL,
	CHECKPOINT_TYPE_WH_PICKUP,
	CHECKPOINT_TYPE_WH_PUT,
	CHECKPOINT_TYPE_DMAN,
	CHECKPOINT_TYPE_FINISH_DMAN
}

#define MAX_PLAYER_GPS_SAVES	10
#define MAX_LISTITEMS			35
enum Player_GPS_Enum
{
	player_gps_VALID,
	player_gps_ID,
	player_gps_NAME[24],
	Float:player_gps_X,
	Float:player_gps_Y,
	Float:player_gps_Z,
	player_gps_WORLD,
	player_gps_INTERIOR,
}
new PLAYER_GPS[MAX_PLAYERS][MAX_PLAYER_GPS_SAVES][Player_GPS_Enum];


/* SYSTEM - PHONE */
enum
{
	CALL_GAME_STATE_NONE,
	CALL_STATE_WAITING_RESPONSE,
	CALL_STATE_INCOMING_CALL,
	CALL_STATE_ESTABLISHED,
}

enum
{
	PHONE_STATE_ON,
	PHONE_STATE_OFF,
}

#define MAX_PHONE_CONTACTS	20
enum Phone_Book_Enum
{
	phone_book_contact_VALID,
	
	phone_book_contact_ID,
	phone_book_contact_NAME[24],
	phone_book_contact_PHONE_NUMBER,
}
new PLAYER_PHONE_BOOK[MAX_PLAYERS][MAX_PHONE_CONTACTS][Phone_Book_Enum]; //PB = PhoneBook

enum
{
	SEX_MALE,
	SEX_FEMALE,
}

enum e_ZONEINFO
{
	z_Name[45],
    Float:z_MinX,
    Float:z_MinY,
    Float:z_MinZ,
    Float:z_MaxX,
    Float:z_MaxY,
    Float:z_MaxZ,
}
new g_Zones[][e_ZONEINFO] =
{
	{"Caligula's Palace",            2087.30,  1543.20,   900.00,  2437.30,  1703.20,   1200.90},
	{"The Four Dragons Casino",      1817.30,   863.20,   900.00,  2027.30,  1083.20,   1200.90},
	{"The Big Ear",                -410.00,  1403.30,    -3.00,  -137.90,  1681.20,   200.00},
	{"Aldea Malvada",               -1372.10,  2498.50,     0.00, -1277.50,  2615.30,   200.00},
	{"Angel Pine",                  -2324.90, -2584.20,    -6.10, -1964.20, -2212.10,   200.00},
	{"Arco del Oeste",               -901.10,  2221.80,     0.00,  -592.00,  2571.90,   200.00},
	{"Avispa Country Club",         -2646.40,  -355.40,     0.00, -2270.00,  -222.50,   200.00},
	{"Avispa Country Club",         -2831.80,  -430.20,    -6.10, -2646.40,  -222.50,   200.00},
	{"Avispa Country Club",         -2361.50,  -417.10,     0.00, -2270.00,  -355.40,   200.00},
	{"Avispa Country Club",         -2667.80,  -302.10,   -28.80, -2646.40,  -262.30,    71.10},
	{"Avispa Country Club",         -2470.00,  -355.40,     0.00, -2270.00,  -318.40,    46.10},
	{"Avispa Country Club",         -2550.00,  -355.40,     0.00, -2470.00,  -318.40,    39.70},
	{"Back o Beyond",               -1166.90, -2641.10,     0.00,  -321.70, -1856.00,   200.00},
	{"Battery Point",               -2741.00,  1268.40,    -4.50, -2533.00,  1490.40,   200.00},
	{"Bayside",                     -2741.00,  2175.10,     0.00, -2353.10,  2722.70,   200.00},
	{"Bayside Marina",              -2353.10,  2275.70,     0.00, -2153.10,  2475.70,   200.00},
	{"Beacon Hill",                  -399.60, -1075.50,    -1.40,  -319.00,  -977.50,   198.50},
	{"Blackfield",                    964.30,  1203.20,   -89.00,  1197.30,  1403.20,   110.90},
	{"Blackfield",                    964.30,  1403.20,   -89.00,  1197.30,  1726.20,   110.90},
	{"Blackfield Chapel",            1375.60,   596.30,   -89.00,  1558.00,   823.20,   110.90},
	{"Blackfield Chapel",            1325.60,   596.30,   -89.00,  1375.60,   795.00,   110.90},
	{"Blackfield Intersection",      1197.30,  1044.60,   -89.00,  1277.00,  1163.30,   110.90},
	{"Blackfield Intersection",      1166.50,   795.00,   -89.00,  1375.60,  1044.60,   110.90},
	{"Blackfield Intersection",      1277.00,  1044.60,   -89.00,  1315.30,  1087.60,   110.90},
	{"Blackfield Intersection",      1375.60,   823.20,   -89.00,  1457.30,   919.40,   110.90},
	{"Blueberry",                     104.50,  -220.10,     2.30,   349.60,   152.20,   200.00},
	{"Blueberry",                      19.60,  -404.10,     3.80,   349.60,  -220.10,   200.00},
	{"Blueberry Acres",              -319.60,  -220.10,     0.00,   104.50,   293.30,   200.00},
	{"Caligula's Palace",            2087.30,  1543.20,   -89.00,  2437.30,  1703.20,   110.90},
	{"Caligula's Palace",            2137.40,  1703.20,   -89.00,  2437.30,  1783.20,   110.90},
	{"Calton Heights",              -2274.10,   744.10,    -6.10, -1982.30,  1358.90,   200.00},
	{"Chinatown",                   -2274.10,   578.30,    -7.60, -2078.60,   744.10,   200.00},
	{"City Hall",                   -2867.80,   277.40,    -9.10, -2593.40,   458.40,   200.00},
	{"Come-A-Lot",                   2087.30,   943.20,   -89.00,  2623.10,  1203.20,   110.90},
	{"Commerce",                     1323.90, -1842.20,   -89.00,  1701.90, -1722.20,   110.90},
	{"Commerce",                     1323.90, -1722.20,   -89.00,  1440.90, -1577.50,   110.90},
	{"Commerce",                     1370.80, -1577.50,   -89.00,  1463.90, -1384.90,   110.90},
	{"Commerce",                     1463.90, -1577.50,   -89.00,  1667.90, -1430.80,   110.90},
	{"Commerce",                     1583.50, -1722.20,   -89.00,  1758.90, -1577.50,   110.90},
	{"Commerce",                     1667.90, -1577.50,   -89.00,  1812.60, -1430.80,   110.90},
	{"Conference Center",            1046.10, -1804.20,   -89.00,  1323.90, -1722.20,   110.90},
	{"Conference Center",            1073.20, -1842.20,   -89.00,  1323.90, -1804.20,   110.90},
	{"Cranberry Station",           -2007.80,    56.30,     0.00, -1922.00,   224.70,   100.00},
	{"Creek",                        2749.90,  1937.20,   -89.00,  2921.60,  2669.70,   110.90},
	{"Dillimore",                     580.70,  -674.80,    -9.50,   861.00,  -404.70,   200.00},
	{"Doherty",                     -2270.00,  -324.10,    -0.00, -1794.90,  -222.50,   200.00},
	{"Doherty",                     -2173.00,  -222.50,    -0.00, -1794.90,   265.20,   200.00},
	{"Downtown",                    -1982.30,   744.10,    -6.10, -1871.70,  1274.20,   200.00},
	{"Downtown",                    -1871.70,  1176.40,    -4.50, -1620.30,  1274.20,   200.00},
	{"Downtown",                    -1700.00,   744.20,    -6.10, -1580.00,  1176.50,   200.00},
	{"Downtown",                    -1580.00,   744.20,    -6.10, -1499.80,  1025.90,   200.00},
	{"Downtown",                    -2078.60,   578.30,    -7.60, -1499.80,   744.20,   200.00},
	{"Downtown",                    -1993.20,   265.20,    -9.10, -1794.90,   578.30,   200.00},
	{"Downtown Los Santos",          1463.90, -1430.80,   -89.00,  1724.70, -1290.80,   110.90},
	{"Downtown Los Santos",          1724.70, -1430.80,   -89.00,  1812.60, -1250.90,   110.90},
	{"Downtown Los Santos",          1463.90, -1290.80,   -89.00,  1724.70, -1150.80,   110.90},
	{"Downtown Los Santos",          1370.80, -1384.90,   -89.00,  1463.90, -1170.80,   110.90},
	{"Downtown Los Santos",          1724.70, -1250.90,   -89.00,  1812.60, -1150.80,   110.90},
	{"Downtown Los Santos",          1370.80, -1170.80,   -89.00,  1463.90, -1130.80,   110.90},
	{"Downtown Los Santos",          1378.30, -1130.80,   -89.00,  1463.90, -1026.30,   110.90},
	{"Downtown Los Santos",          1391.00, -1026.30,   -89.00,  1463.90,  -926.90,   110.90},
	{"Downtown Los Santos",          1507.50, -1385.20,   110.90,  1582.50, -1325.30,   335.90},
	{"East Beach",                   2632.80, -1852.80,   -89.00,  2959.30, -1668.10,   110.90},
	{"East Beach",                   2632.80, -1668.10,   -89.00,  2747.70, -1393.40,   110.90},
	{"East Beach",                   2747.70, -1668.10,   -89.00,  2959.30, -1498.60,   110.90},
	{"East Beach",                   2747.70, -1498.60,   -89.00,  2959.30, -1120.00,   110.90},
	{"East Los Santos",              2421.00, -1628.50,   -89.00,  2632.80, -1454.30,   110.90},
	{"East Los Santos",              2222.50, -1628.50,   -89.00,  2421.00, -1494.00,   110.90},
	{"East Los Santos",              2266.20, -1494.00,   -89.00,  2381.60, -1372.00,   110.90},
	{"East Los Santos",              2381.60, -1494.00,   -89.00,  2421.00, -1454.30,   110.90},
	{"East Los Santos",              2281.40, -1372.00,   -89.00,  2381.60, -1135.00,   110.90},
	{"East Los Santos",              2381.60, -1454.30,   -89.00,  2462.10, -1135.00,   110.90},
	{"East Los Santos",              2462.10, -1454.30,   -89.00,  2581.70, -1135.00,   110.90},
	{"Easter Basin",                -1794.90,   249.90,    -9.10, -1242.90,   578.30,   200.00},
	{"Easter Basin",                -1794.90,   -50.00,    -0.00, -1499.80,   249.90,   200.00},
	{"Easter Bay Airport",          -1499.80,   -50.00,    -0.00, -1242.90,   249.90,   200.00},
	{"Easter Bay Airport",          -1794.90,  -730.10,    -3.00, -1213.90,   -50.00,   200.00},
	{"Easter Bay Airport",          -1213.90,  -730.10,     0.00, -1132.80,   -50.00,   200.00},
	{"Easter Bay Airport",          -1242.90,   -50.00,     0.00, -1213.90,   578.30,   200.00},
	{"Easter Bay Airport",          -1213.90,   -50.00,    -4.50,  -947.90,   578.30,   200.00},
	{"Easter Bay Airport",          -1315.40,  -405.30,    15.40, -1264.40,  -209.50,    25.40},
	{"Easter Bay Airport",          -1354.30,  -287.30,    15.40, -1315.40,  -209.50,    25.40},
	{"Easter Bay Airport",          -1490.30,  -209.50,    15.40, -1264.40,  -148.30,    25.40},
	{"Easter Bay Chemicals",        -1132.80,  -768.00,     0.00,  -956.40,  -578.10,   200.00},
	{"Easter Bay Chemicals",        -1132.80,  -787.30,     0.00,  -956.40,  -768.00,   200.00},
	{"El Castillo del Diablo",       -464.50,  2217.60,     0.00,  -208.50,  2580.30,   200.00},
	{"El Castillo del Diablo",       -208.50,  2123.00,    -7.60,   114.00,  2337.10,   200.00},
	{"El Castillo del Diablo",       -208.50,  2337.10,     0.00,     8.40,  2487.10,   200.00},
	{"El Corona",                    1812.60, -2179.20,   -89.00,  1970.60, -1852.80,   110.90},
	{"El Corona",                    1692.60, -2179.20,   -89.00,  1812.60, -1842.20,   110.90},
	{"El Quebrados",                -1645.20,  2498.50,     0.00, -1372.10,  2777.80,   200.00},
	{"Esplanade East",              -1620.30,  1176.50,    -4.50, -1580.00,  1274.20,   200.00},
	{"Esplanade East",              -1580.00,  1025.90,    -6.10, -1499.80,  1274.20,   200.00},
	{"Esplanade East",              -1499.80,   578.30,   -79.60, -1339.80,  1274.20,    20.30},
	{"Esplanade North",             -2533.00,  1358.90,    -4.50, -1996.60,  1501.20,   200.00},
	{"Esplanade North",             -1996.60,  1358.90,    -4.50, -1524.20,  1592.50,   200.00},
	{"Esplanade North",             -1982.30,  1274.20,    -4.50, -1524.20,  1358.90,   200.00},
	{"Fallen Tree",                  -792.20,  -698.50,    -5.30,  -452.40,  -380.00,   200.00},
	{"Fallow Bridge",                 434.30,   366.50,     0.00,   603.00,   555.60,   200.00},
	{"Fern Ridge",                    508.10,  -139.20,     0.00,  1306.60,   119.50,   200.00},
	{"Financial",                   -1871.70,   744.10,    -6.10, -1701.30,  1176.40,   300.00},
	{"Fisher's Lagoon",              1916.90,  -233.30,  -100.00,  2131.70,    13.80,   200.00},
	{"Flint Intersection",           -187.70, -1596.70,   -89.00,    17.00, -1276.60,   110.90},
	{"Flint Range",                  -594.10, -1648.50,     0.00,  -187.70, -1276.60,   200.00},
	{"Fort Carson",                  -376.20,   826.30,    -3.00,   123.70,  1220.40,   200.00},
	{"Foster Valley",               -2270.00,  -430.20,    -0.00, -2178.60,  -324.10,   200.00},
	{"Foster Valley",               -2178.60,  -599.80,    -0.00, -1794.90,  -324.10,   200.00},
	{"Foster Valley",               -2178.60, -1115.50,     0.00, -1794.90,  -599.80,   200.00},
	{"Foster Valley",               -2178.60, -1250.90,     0.00, -1794.90, -1115.50,   200.00},
	{"Frederick Bridge",             2759.20,   296.50,     0.00,  2774.20,   594.70,   200.00},
	{"Gant Bridge",                 -2741.40,  1659.60,    -6.10, -2616.40,  2175.10,   200.00},
	{"Gant Bridge",                 -2741.00,  1490.40,    -6.10, -2616.40,  1659.60,   200.00},
	{"Ganton",                       2222.50, -1852.80,   -89.00,  2632.80, -1722.30,   110.90},
	{"Ganton",                       2222.50, -1722.30,   -89.00,  2632.80, -1628.50,   110.90},
	{"Garcia",                      -2411.20,  -222.50,    -0.00, -2173.00,   265.20,   200.00},
	{"Garcia",                      -2395.10,  -222.50,    -5.30, -2354.00,  -204.70,   200.00},
	{"Garver Bridge",               -1339.80,   828.10,   -89.00, -1213.90,  1057.00,   110.90},
	{"Garver Bridge",               -1213.90,   950.00,   -89.00, -1087.90,  1178.90,   110.90},
	{"Garver Bridge",               -1499.80,   696.40,  -179.60, -1339.80,   925.30,    20.30},
	{"Glen Park",                    1812.60, -1449.60,   -89.00,  1996.90, -1350.70,   110.90},
	{"Glen Park",                    1812.60, -1100.80,   -89.00,  1994.30,  -973.30,   110.90},
	{"Glen Park",                    1812.60, -1350.70,   -89.00,  2056.80, -1100.80,   110.90},
	{"Green Palms",                   176.50,  1305.40,    -3.00,   338.60,  1520.70,   200.00},
	{"Greenglass College",            964.30,  1044.60,   -89.00,  1197.30,  1203.20,   110.90},
	{"Greenglass College",            964.30,   930.80,   -89.00,  1166.50,  1044.60,   110.90},
	{"Hampton Barns",                 603.00,   264.30,     0.00,   761.90,   366.50,   200.00},
	{"Hankypanky Point",             2576.90,    62.10,     0.00,  2759.20,   385.50,   200.00},
	{"Harry Gold Parkway",           1777.30,   863.20,   -89.00,  1817.30,  2342.80,   110.90},
	{"Hashbury",                    -2593.40,  -222.50,    -0.00, -2411.20,    54.70,   200.00},
	{"Hilltop Farm",                  967.30,  -450.30,    -3.00,  1176.70,  -217.90,   200.00},
	{"Hunter Quarry",                 337.20,   710.80,  -115.20,   860.50,  1031.70,   203.70},
	{"Idlewood",                     1812.60, -1852.80,   -89.00,  1971.60, -1742.30,   110.90},
	{"Idlewood",                     1812.60, -1742.30,   -89.00,  1951.60, -1602.30,   110.90},
	{"Idlewood",                     1951.60, -1742.30,   -89.00,  2124.60, -1602.30,   110.90},
	{"Idlewood",                     1812.60, -1602.30,   -89.00,  2124.60, -1449.60,   110.90},
	{"Idlewood",                     2124.60, -1742.30,   -89.00,  2222.50, -1494.00,   110.90},
	{"Idlewood",                     1971.60, -1852.80,   -89.00,  2222.50, -1742.30,   110.90},
	{"Jefferson",                    1996.90, -1449.60,   -89.00,  2056.80, -1350.70,   110.90},
	{"Jefferson",                    2124.60, -1494.00,   -89.00,  2266.20, -1449.60,   110.90},
	{"Jefferson",                    2056.80, -1372.00,   -89.00,  2281.40, -1210.70,   110.90},
	{"Jefferson",                    2056.80, -1210.70,   -89.00,  2185.30, -1126.30,   110.90},
	{"Jefferson",                    2185.30, -1210.70,   -89.00,  2281.40, -1154.50,   110.90},
	{"Jefferson",                    2056.80, -1449.60,   -89.00,  2266.20, -1372.00,   110.90},
	{"Julius Thruway East",          2623.10,   943.20,   -89.00,  2749.90,  1055.90,   110.90},
	{"Julius Thruway East",          2685.10,  1055.90,   -89.00,  2749.90,  2626.50,   110.90},
	{"Julius Thruway East",          2536.40,  2442.50,   -89.00,  2685.10,  2542.50,   110.90},
	{"Julius Thruway East",          2625.10,  2202.70,   -89.00,  2685.10,  2442.50,   110.90},
	{"Julius Thruway North",         2498.20,  2542.50,   -89.00,  2685.10,  2626.50,   110.90},
	{"Julius Thruway North",         2237.40,  2542.50,   -89.00,  2498.20,  2663.10,   110.90},
	{"Julius Thruway North",         2121.40,  2508.20,   -89.00,  2237.40,  2663.10,   110.90},
	{"Julius Thruway North",         1938.80,  2508.20,   -89.00,  2121.40,  2624.20,   110.90},
	{"Julius Thruway North",         1534.50,  2433.20,   -89.00,  1848.40,  2583.20,   110.90},
	{"Julius Thruway North",         1848.40,  2478.40,   -89.00,  1938.80,  2553.40,   110.90},
	{"Julius Thruway North",         1704.50,  2342.80,   -89.00,  1848.40,  2433.20,   110.90},
	{"Julius Thruway North",         1377.30,  2433.20,   -89.00,  1534.50,  2507.20,   110.90},
	{"Julius Thruway South",         1457.30,   823.20,   -89.00,  2377.30,   863.20,   110.90},
	{"Julius Thruway South",         2377.30,   788.80,   -89.00,  2537.30,   897.90,   110.90},
	{"Julius Thruway West",          1197.30,  1163.30,   -89.00,  1236.60,  2243.20,   110.90},
	{"Julius Thruway West",          1236.60,  2142.80,   -89.00,  1297.40,  2243.20,   110.90},
	{"Juniper Hill",                -2533.00,   578.30,    -7.60, -2274.10,   968.30,   200.00},
	{"Juniper Hollow",              -2533.00,   968.30,    -6.10, -2274.10,  1358.90,   200.00},
	{"K.A.C.C. Military Fuels",      2498.20,  2626.50,   -89.00,  2749.90,  2861.50,   110.90},
	{"Kincaid Bridge",              -1339.80,   599.20,   -89.00, -1213.90,   828.10,   110.90},
	{"Kincaid Bridge",              -1213.90,   721.10,   -89.00, -1087.90,   950.00,   110.90},
	{"Kincaid Bridge",              -1087.90,   855.30,   -89.00,  -961.90,   986.20,   110.90},
	{"King's",                      -2329.30,   458.40,    -7.60, -1993.20,   578.30,   200.00},
	{"King's",                      -2411.20,   265.20,    -9.10, -1993.20,   373.50,   200.00},
	{"King's",                      -2253.50,   373.50,    -9.10, -1993.20,   458.40,   200.00},
	{"LVA Freight Depot",            1457.30,   863.20,   -89.00,  1777.40,  1143.20,   110.90},
	{"LVA Freight Depot",            1375.60,   919.40,   -89.00,  1457.30,  1203.20,   110.90},
	{"LVA Freight Depot",            1277.00,  1087.60,   -89.00,  1375.60,  1203.20,   110.90},
	{"LVA Freight Depot",            1315.30,  1044.60,   -89.00,  1375.60,  1087.60,   110.90},
	{"LVA Freight Depot",            1236.60,  1163.40,   -89.00,  1277.00,  1203.20,   110.90},
	{"Las Barrancas",                -926.10,  1398.70,    -3.00,  -719.20,  1634.60,   200.00},
	{"Las Brujas",                   -365.10,  2123.00,    -3.00,  -208.50,  2217.60,   200.00},
	{"Las Colinas",                  1994.30, -1100.80,   -89.00,  2056.80,  -920.80,   110.90},
	{"Las Colinas",                  2056.80, -1126.30,   -89.00,  2126.80,  -920.80,   110.90},
	{"Las Colinas",                  2185.30, -1154.50,   -89.00,  2281.40,  -934.40,   110.90},
	{"Las Colinas",                  2126.80, -1126.30,   -89.00,  2185.30,  -934.40,   110.90},
	{"Las Colinas",                  2747.70, -1120.00,   -89.00,  2959.30,  -945.00,   110.90},
	{"Las Colinas",                  2632.70, -1135.00,   -89.00,  2747.70,  -945.00,   110.90},
	{"Las Colinas",                  2281.40, -1135.00,   -89.00,  2632.70,  -945.00,   110.90},
	{"Las Payasadas",                -354.30,  2580.30,     2.00,  -133.60,  2816.80,   200.00},
	{"Las Venturas Airport",         1236.60,  1203.20,   -89.00,  1457.30,  1883.10,   110.90},
	{"Las Venturas Airport",         1457.30,  1203.20,   -89.00,  1777.30,  1883.10,   110.90},
	{"Las Venturas Airport",         1457.30,  1143.20,   -89.00,  1777.40,  1203.20,   110.90},
	{"Las Venturas Airport",         1515.80,  1586.40,   -12.50,  1729.90,  1714.50,    87.50},
	{"Last Dime Motel",              1823.00,   596.30,   -89.00,  1997.20,   823.20,   110.90},
	{"Leafy Hollow",                -1166.90, -1856.00,     0.00,  -815.60, -1602.00,   200.00},
	{"Lil' Probe Inn",                -90.20,  1286.80,    -3.00,   153.80,  1554.10,   200.00},
	{"Linden Side",                  2749.90,   943.20,   -89.00,  2923.30,  1198.90,   110.90},
	{"Linden Station",               2749.90,  1198.90,   -89.00,  2923.30,  1548.90,   110.90},
	{"Linden Station",               2811.20,  1229.50,   -39.50,  2861.20,  1407.50,    60.40},
	{"Little Mexico",                1701.90, -1842.20,   -89.00,  1812.60, -1722.20,   110.90},
	{"Little Mexico",                1758.90, -1722.20,   -89.00,  1812.60, -1577.50,   110.90},
	{"Los Flores",                   2581.70, -1454.30,   -89.00,  2632.80, -1393.40,   110.90},
	{"Los Flores",                   2581.70, -1393.40,   -89.00,  2747.70, -1135.00,   110.90},
	{"Los Santos International",     1249.60, -2394.30,   -89.00,  1852.00, -2179.20,   110.90},
	{"Los Santos International",     1852.00, -2394.30,   -89.00,  2089.00, -2179.20,   110.90},
	{"Los Santos International",     1382.70, -2730.80,   -89.00,  2201.80, -2394.30,   110.90},
	{"Los Santos International",     1974.60, -2394.30,   -39.00,  2089.00, -2256.50,    60.90},
	{"Los Santos International",     1400.90, -2669.20,   -39.00,  2189.80, -2597.20,    60.90},
	{"Los Santos International",     2051.60, -2597.20,   -39.00,  2152.40, -2394.30,    60.90},
	{"Marina",                        647.70, -1804.20,   -89.00,   851.40, -1577.50,   110.90},
	{"Marina",                        647.70, -1577.50,   -89.00,   807.90, -1416.20,   110.90},
	{"Marina",                        807.90, -1577.50,   -89.00,   926.90, -1416.20,   110.90},
	{"Market",                        787.40, -1416.20,   -89.00,  1072.60, -1310.20,   110.90},
	{"Market",                        952.60, -1310.20,   -89.00,  1072.60, -1130.80,   110.90},
	{"Market",                       1072.60, -1416.20,   -89.00,  1370.80, -1130.80,   110.90},
	{"Market",                        926.90, -1577.50,   -89.00,  1370.80, -1416.20,   110.90},
	{"Market Station",                787.40, -1410.90,   -34.10,   866.00, -1310.20,    65.80},
	{"Martin Bridge",                -222.10,   293.30,     0.00,  -122.10,   476.40,   200.00},
	{"Missionary Hill",             -2994.40,  -811.20,     0.00, -2178.60,  -430.20,   200.00},
	{"Montgomery",                   1119.50,   119.50,    -3.00,  1451.40,   493.30,   200.00},
	{"Montgomery",                   1451.40,   347.40,    -6.10,  1582.40,   420.80,   200.00},
	{"Montgomery Intersection",      1546.60,   208.10,     0.00,  1745.80,   347.40,   200.00},
	{"Montgomery Intersection",      1582.40,   347.40,     0.00,  1664.60,   401.70,   200.00},
	{"Mulholland",                   1414.00,  -768.00,   -89.00,  1667.60,  -452.40,   110.90},
	{"Mulholland",                   1281.10,  -452.40,   -89.00,  1641.10,  -290.90,   110.90},
	{"Mulholland",                   1269.10,  -768.00,   -89.00,  1414.00,  -452.40,   110.90},
	{"Mulholland",                   1357.00,  -926.90,   -89.00,  1463.90,  -768.00,   110.90},
	{"Mulholland",                   1318.10,  -910.10,   -89.00,  1357.00,  -768.00,   110.90},
	{"Mulholland",                   1169.10,  -910.10,   -89.00,  1318.10,  -768.00,   110.90},
	{"Mulholland",                    768.60,  -954.60,   -89.00,   952.60,  -860.60,   110.90},
	{"Mulholland",                    687.80,  -860.60,   -89.00,   911.80,  -768.00,   110.90},
	{"Mulholland",                    737.50,  -768.00,   -89.00,  1142.20,  -674.80,   110.90},
	{"Mulholland",                   1096.40,  -910.10,   -89.00,  1169.10,  -768.00,   110.90},
	{"Mulholland",                    952.60,  -937.10,   -89.00,  1096.40,  -860.60,   110.90},
	{"Mulholland",                    911.80,  -860.60,   -89.00,  1096.40,  -768.00,   110.90},
	{"Mulholland",                    861.00,  -674.80,   -89.00,  1156.50,  -600.80,   110.90},
	{"Mulholland Intersection",      1463.90, -1150.80,   -89.00,  1812.60,  -768.00,   110.90},
	{"North Rock",                   2285.30,  -768.00,     0.00,  2770.50,  -269.70,   200.00},
	{"Ocean Docks",                  2373.70, -2697.00,   -89.00,  2809.20, -2330.40,   110.90},
	{"Ocean Docks",                  2201.80, -2418.30,   -89.00,  2324.00, -2095.00,   110.90},
	{"Ocean Docks",                  2324.00, -2302.30,   -89.00,  2703.50, -2145.10,   110.90},
	{"Ocean Docks",                  2089.00, -2394.30,   -89.00,  2201.80, -2235.80,   110.90},
	{"Ocean Docks",                  2201.80, -2730.80,   -89.00,  2324.00, -2418.30,   110.90},
	{"Ocean Docks",                  2703.50, -2302.30,   -89.00,  2959.30, -2126.90,   110.90},
	{"Ocean Docks",                  2324.00, -2145.10,   -89.00,  2703.50, -2059.20,   110.90},
	{"Ocean Flats",                 -2994.40,   277.40,    -9.10, -2867.80,   458.40,   200.00},
	{"Ocean Flats",                 -2994.40,  -222.50,    -0.00, -2593.40,   277.40,   200.00},
	{"Ocean Flats",                 -2994.40,  -430.20,    -0.00, -2831.80,  -222.50,   200.00},
	{"Octane Springs",                338.60,  1228.50,     0.00,   664.30,  1655.00,   200.00},
	{"Old Venturas Strip",           2162.30,  2012.10,   -89.00,  2685.10,  2202.70,   110.90},
	{"Palisades",                   -2994.40,   458.40,    -6.10, -2741.00,  1339.60,   200.00},
	{"Palomino Creek",               2160.20,  -149.00,     0.00,  2576.90,   228.30,   200.00},
	{"Paradiso",                    -2741.00,   793.40,    -6.10, -2533.00,  1268.40,   200.00},
	{"Pershing Square",              1440.90, -1722.20,   -89.00,  1583.50, -1577.50,   110.90},
	{"Pilgrim",                      2437.30,  1383.20,   -89.00,  2624.40,  1783.20,   110.90},
	{"Pilgrim",                      2624.40,  1383.20,   -89.00,  2685.10,  1783.20,   110.90},
	{"Pilson Intersection",          1098.30,  2243.20,   -89.00,  1377.30,  2507.20,   110.90},
	{"Pirates in Men's Pants",       1817.30,  1469.20,   -89.00,  2027.40,  1703.20,   110.90},
	{"Playa del Seville",            2703.50, -2126.90,   -89.00,  2959.30, -1852.80,   110.90},
	{"Prickle Pine",                 1534.50,  2583.20,   -89.00,  1848.40,  2863.20,   110.90},
	{"Prickle Pine",                 1117.40,  2507.20,   -89.00,  1534.50,  2723.20,   110.90},
	{"Prickle Pine",                 1848.40,  2553.40,   -89.00,  1938.80,  2863.20,   110.90},
	{"Prickle Pine",                 1938.80,  2624.20,   -89.00,  2121.40,  2861.50,   110.90},
	{"Queens",                      -2533.00,   458.40,     0.00, -2329.30,   578.30,   200.00},
	{"Queens",                      -2593.40,    54.70,     0.00, -2411.20,   458.40,   200.00},
	{"Queens",                      -2411.20,   373.50,     0.00, -2253.50,   458.40,   200.00},
	{"Randolph Industrial Estate",   1558.00,   596.30,   -89.00,  1823.00,   823.20,   110.90},
	{"Redsands East",                1817.30,  2011.80,   -89.00,  2106.70,  2202.70,   110.90},
	{"Redsands East",                1817.30,  2202.70,   -89.00,  2011.90,  2342.80,   110.90},
	{"Redsands East",                1848.40,  2342.80,   -89.00,  2011.90,  2478.40,   110.90},
	{"Redsands West",                1236.60,  1883.10,   -89.00,  1777.30,  2142.80,   110.90},
	{"Redsands West",                1297.40,  2142.80,   -89.00,  1777.30,  2243.20,   110.90},
	{"Redsands West",                1377.30,  2243.20,   -89.00,  1704.50,  2433.20,   110.90},
	{"Redsands West",                1704.50,  2243.20,   -89.00,  1777.30,  2342.80,   110.90},
	{"Regular Tom",                  -405.70,  1712.80,    -3.00,  -276.70,  1892.70,   200.00},
	{"Richman",                       647.50, -1118.20,   -89.00,   787.40,  -954.60,   110.90},
	{"Richman",                       647.50,  -954.60,   -89.00,   768.60,  -860.60,   110.90},
	{"Richman",                       225.10, -1369.60,   -89.00,   334.50, -1292.00,   110.90},
	{"Richman",                       225.10, -1292.00,   -89.00,   466.20, -1235.00,   110.90},
	{"Richman",                        72.60, -1404.90,   -89.00,   225.10, -1235.00,   110.90},
	{"Richman",                        72.60, -1235.00,   -89.00,   321.30, -1008.10,   110.90},
	{"Richman",                       321.30, -1235.00,   -89.00,   647.50, -1044.00,   110.90},
	{"Richman",                       321.30, -1044.00,   -89.00,   647.50,  -860.60,   110.90},
	{"Richman",                       321.30,  -860.60,   -89.00,   687.80,  -768.00,   110.90},
	{"Richman",                       321.30,  -768.00,   -89.00,   700.70,  -674.80,   110.90},
	{"Robada Intersection",         -1119.00,  1178.90,   -89.00,  -862.00,  1351.40,   110.90},
	{"Roca Escalante",               2237.40,  2202.70,   -89.00,  2536.40,  2542.50,   110.90},
	{"Roca Escalante",               2536.40,  2202.70,   -89.00,  2625.10,  2442.50,   110.90},
	{"Rockshore East",               2537.30,   676.50,   -89.00,  2902.30,   943.20,   110.90},
	{"Rockshore West",               1997.20,   596.30,   -89.00,  2377.30,   823.20,   110.90},
	{"Rockshore West",               2377.30,   596.30,   -89.00,  2537.30,   788.80,   110.90},
	{"Rodeo",                          72.60, -1684.60,   -89.00,   225.10, -1544.10,   110.90},
	{"Rodeo",                          72.60, -1544.10,   -89.00,   225.10, -1404.90,   110.90},
	{"Rodeo",                         225.10, -1684.60,   -89.00,   312.80, -1501.90,   110.90},
	{"Rodeo",                         225.10, -1501.90,   -89.00,   334.50, -1369.60,   110.90},
	{"Rodeo",                         334.50, -1501.90,   -89.00,   422.60, -1406.00,   110.90},
	{"Rodeo",                         312.80, -1684.60,   -89.00,   422.60, -1501.90,   110.90},
	{"Rodeo",                         422.60, -1684.60,   -89.00,   558.00, -1570.20,   110.90},
	{"Rodeo",                         558.00, -1684.60,   -89.00,   647.50, -1384.90,   110.90},
	{"Rodeo",                         466.20, -1570.20,   -89.00,   558.00, -1385.00,   110.90},
	{"Rodeo",                         422.60, -1570.20,   -89.00,   466.20, -1406.00,   110.90},
	{"Rodeo",                         466.20, -1385.00,   -89.00,   647.50, -1235.00,   110.90},
	{"Rodeo",                         334.50, -1406.00,   -89.00,   466.20, -1292.00,   110.90},
	{"Royal Casino",                 2087.30,  1383.20,   -89.00,  2437.30,  1543.20,   110.90},
	{"San Andreas Sound",            2450.30,   385.50,  -100.00,  2759.20,   562.30,   200.00},
	{"Santa Flora",                 -2741.00,   458.40,    -7.60, -2533.00,   793.40,   200.00},
	{"Santa Maria Beach",             342.60, -2173.20,   -89.00,   647.70, -1684.60,   110.90},
	{"Santa Maria Beach",              72.60, -2173.20,   -89.00,   342.60, -1684.60,   110.90},
	{"Shady Cabin",                 -1632.80, -2263.40,    -3.00, -1601.30, -2231.70,   200.00},
	{"Shady Creeks",                -1820.60, -2643.60,    -8.00, -1226.70, -1771.60,   200.00},
	{"Shady Creeks",                -2030.10, -2174.80,    -6.10, -1820.60, -1771.60,   200.00},
	{"Sobell Rail Yards",            2749.90,  1548.90,   -89.00,  2923.30,  1937.20,   110.90},
	{"Spinybed",                     2121.40,  2663.10,   -89.00,  2498.20,  2861.50,   110.90},
	{"Starfish Casino",              2437.30,  1783.20,   -89.00,  2685.10,  2012.10,   110.90},
	{"Starfish Casino",              2437.30,  1858.10,   -39.00,  2495.00,  1970.80,    60.90},
	{"Starfish Casino",              2162.30,  1883.20,   -89.00,  2437.30,  2012.10,   110.90},
	{"Temple",                       1252.30, -1130.80,   -89.00,  1378.30, -1026.30,   110.90},
	{"Temple",                       1252.30, -1026.30,   -89.00,  1391.00,  -926.90,   110.90},
	{"Temple",                       1252.30,  -926.90,   -89.00,  1357.00,  -910.10,   110.90},
	{"Temple",                        952.60, -1130.80,   -89.00,  1096.40,  -937.10,   110.90},
	{"Temple",                       1096.40, -1130.80,   -89.00,  1252.30, -1026.30,   110.90},
	{"Temple",                       1096.40, -1026.30,   -89.00,  1252.30,  -910.10,   110.90},
	{"The Camel's Toe",              2087.30,  1203.20,   -89.00,  2640.40,  1383.20,   110.90},
	{"The Clown's Pocket",           2162.30,  1783.20,   -89.00,  2437.30,  1883.20,   110.90},
	{"The Emerald Isle",             2011.90,  2202.70,   -89.00,  2237.40,  2508.20,   110.90},
	{"The Farm",                    -1209.60, -1317.10,   114.90,  -908.10,  -787.30,   251.90},
	{"The Four Dragons Casino",      1817.30,   863.20,   -89.00,  2027.30,  1083.20,   110.90},
	{"The High Roller",              1817.30,  1283.20,   -89.00,  2027.30,  1469.20,   110.90},
	{"The Mako Span",                1664.60,   401.70,     0.00,  1785.10,   567.20,   200.00},
	{"The Panopticon",               -947.90,  -304.30,    -1.10,  -319.60,   327.00,   200.00},
	{"The Pink Swan",                1817.30,  1083.20,   -89.00,  2027.30,  1283.20,   110.90},
	{"The Sherman Dam",              -968.70,  1929.40,    -3.00,  -481.10,  2155.20,   200.00},
	{"The Strip",                    2027.40,   863.20,   -89.00,  2087.30,  1703.20,   110.90},
	{"The Strip",                    2106.70,  1863.20,   -89.00,  2162.30,  2202.70,   110.90},
	{"The Strip",                    2027.40,  1783.20,   -89.00,  2162.30,  1863.20,   110.90},
	{"The Strip",                    2027.40,  1703.20,   -89.00,  2137.40,  1783.20,   110.90},
	{"The Visage",                   1817.30,  1863.20,   -89.00,  2106.70,  2011.80,   110.90},
	{"The Visage",                   1817.30,  1703.20,   -89.00,  2027.40,  1863.20,   110.90},
	{"Unity Station",                1692.60, -1971.80,   -20.40,  1812.60, -1932.80,    79.50},
	{"Valle Ocultado",               -936.60,  2611.40,     2.00,  -715.90,  2847.90,   200.00},
	{"Verdant Bluffs",                930.20, -2488.40,   -89.00,  1249.60, -2006.70,   110.90},
	{"Verdant Bluffs",               1073.20, -2006.70,   -89.00,  1249.60, -1842.20,   110.90},
	{"Verdant Bluffs",               1249.60, -2179.20,   -89.00,  1692.60, -1842.20,   110.90},
	{"Verdant Meadows",                37.00,  2337.10,    -3.00,   435.90,  2677.90,   200.00},
	{"Verona Beach",                  647.70, -2173.20,   -89.00,   930.20, -1804.20,   110.90},
	{"Verona Beach",                  930.20, -2006.70,   -89.00,  1073.20, -1804.20,   110.90},
	{"Verona Beach",                  851.40, -1804.20,   -89.00,  1046.10, -1577.50,   110.90},
	{"Verona Beach",                 1161.50, -1722.20,   -89.00,  1323.90, -1577.50,   110.90},
	{"Verona Beach",                 1046.10, -1722.20,   -89.00,  1161.50, -1577.50,   110.90},
	{"Vinewood",                      787.40, -1310.20,   -89.00,   952.60, -1130.80,   110.90},
	{"Vinewood",                      787.40, -1130.80,   -89.00,   952.60,  -954.60,   110.90},
	{"Vinewood",                      647.50, -1227.20,   -89.00,   787.40, -1118.20,   110.90},
	{"Vinewood",                      647.70, -1416.20,   -89.00,   787.40, -1227.20,   110.90},
	{"Whitewood Estates",             883.30,  1726.20,   -89.00,  1098.30,  2507.20,   110.90},
	{"Whitewood Estates",            1098.30,  1726.20,   -89.00,  1197.30,  2243.20,   110.90},
	{"Willowfield",                  1970.60, -2179.20,   -89.00,  2089.00, -1852.80,   110.90},
	{"Willowfield",                  2089.00, -2235.80,   -89.00,  2201.80, -1989.90,   110.90},
	{"Willowfield",                  2089.00, -1989.90,   -89.00,  2324.00, -1852.80,   110.90},
	{"Willowfield",                  2201.80, -2095.00,   -89.00,  2324.00, -1989.90,   110.90},
	{"Willowfield",                  2541.70, -1941.40,   -89.00,  2703.50, -1852.80,   110.90},
	{"Willowfield",                  2324.00, -2059.20,   -89.00,  2541.70, -1852.80,   110.90},
	{"Willowfield",                  2541.70, -2059.20,   -89.00,  2703.50, -1941.40,   110.90},
	{"Yellow Bell Station",          1377.40,  2600.40,   -21.90,  1492.40,  2687.30,    78.00}
};

new g_Cities[][e_ZONEINFO] =
{
	// Main Zones
	{"Los Santos",                     44.60, -2892.90,  -242.90,  2997.00,  -768.00,   900.00},
	{"Las Venturas",                  869.40,   596.30,  -242.90,  2997.00,  2993.80,   900.00},
	{"Bone County",                  -480.50,   596.30,  -242.90,   869.40,  2993.80,   900.00},
	{"Tierra Robada",               -2997.40,  1659.60,  -242.90,  -480.50,  2993.80,   900.00},
	{"Tierra Robada",               -1213.90,   596.30,  -242.90,  -480.50,  1659.60,   900.00},
	{"San Fierro",                  -2997.40, -1115.50,  -242.90, -1213.90,  1659.60,   900.00},
	{"Red County",                  -1213.90,  -768.00,  -242.90,  2997.00,   596.30,   900.00},
	{"Flint County",                -1213.90, -2892.90,  -242.90,    44.60,  -768.00,   900.00},
	{"Whetstone",                   -2997.40, -2892.90,  -242.90, -1213.90, -1115.50,   900.00}
};

enum enum_SAFE_ZONES
{
	safe_zone_GANG_ZONE,
	safe_zone_AREA_ID,
	Float:safe_zone_MIN_X,
	Float:safe_zone_MIN_Y,
	Float:safe_zone_MAX_X,
	Float:safe_zone_MAX_Y,
	safe_zone_INTERIOR,
	safe_zone_WORLD,
}
new SAFE_ZONES[][enum_SAFE_ZONES] =
{
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1433.5, -1725.5, 1525.5, -1597.5, 0, 0}, //Parque Comisaria
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1525.5, -1725.5, 1582.5, -1597.5, 0, 0}, //Comisaria
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1318.5, -1864.5, 1575.5, -1742.5, 0, 0}, //Gob y 247
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1048.5, -1561.5, 1182.5, -1415.5, 0, 0}, //Spawn
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1149.5, -1391.5, 1342.5, -1284.5, 0, 0}, //HP Market
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -632.5, -647.5, -424.5, -463.5, 0, 0}, //Camionero
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 2115.5, -1207.5, 2166.5, -1119.5, 0, 0}, //Concesionaria Pobre
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1714.5, 1857.5, 1774.5, 2045.5, 0, 0}, //Conce Motos LV
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1657.5, 1788.5, 1733.5, 1857.5, 0, 0}, //Conce Motos LV
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1577.5, 1722.5, 1639.5, 1864.5, 0, 0}, //HP LV
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 493.5, -1325.5, 620.5, -1237.5, 0, 0}, //Conce Grotti
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -2003.5, 219.5, -1877.5, 311.5, 0, 0}, //Conce Wang Cars
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -1701.5, 625.5, -1564.5, 725.5, 0, 0}, //Policia SF
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -1705.5, 1194.5, -1627.5, 1237.5, 0, 0}, //Conce Cara
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -664.5, -231.5, -346.5, 46.5, 0, 0}, //Talador
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, -342.5, 1000.5, -282.5, 1067.5, 0, 0}, //HP BlueBerry
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 2235.5, 2418.5, 2361.5, 2506.5, 0, 0}, //Policia LV
	{INVALID_STREAMER_ID, INVALID_STREAMER_ID, 1998.5, -1451.5, 2103.5, -1349.5, 0, 0} //HP Glen Park
};

/* Rangos Policias */
enum enum_POLICE_WEAPONS
{
	police_weapons_RANK,
	police_weapons_WEAPON_ID
}
new POLICE_WEAPONS[][enum_POLICE_WEAPONS] =
{
    {1, 3},
	{1, 22},
	{2, 24},
	{3, 25},
	{5, 27},
	{3, 29},
	{2, 31}
};


enum enum_POLICE_SKINS
{
	police_skin_TYPE,
	police_skin_SKIN,
	police_skin_RANK,
}
new POLICE_SKINS[][enum_POLICE_SKINS] =
{
    {SEX_MALE, 253, 1},
	{SEX_MALE, 280, 2},
	{SEX_MALE, 266, 6},
	{SEX_MALE, 267, 9},
	{SEX_MALE, 281, 10},
	{SEX_MALE, 304, 12},
	{SEX_MALE, 284, 13},
	{SEX_MALE, 303, 15},
	{SEX_MALE, 282, 16},
	{SEX_MALE, 265, 17},
	{SEX_MALE, 305, 20},
	{SEX_MALE, 310, 21},
	{SEX_MALE, 311, 23},
	{SEX_MALE, 288, 24},
	{SEX_MALE, 283, 25},

	{SEX_FEMALE, 307, 1},
	{SEX_FEMALE, 306, 2},
	{SEX_FEMALE, 309, 6}
};

new POLICE_RANKS[][] =
{
    "Civil", //0
    "Cadete", //1
    "Oficial Ayudante", //2
    "Oficial III", //3
    "Oficial II", //4
    "Oficial I", //5
    "Oficial Inspector", //6
    "Cabo II", //7
    "Cabo I", //8
    "Cabo Superior", //9
    "Sargento II", //10
    "Sargento I", //11
    "Sargento Superior", //12
    "Sub inspector", //13
    "Inspector Supervisor", //14
    "Inspector General", //15
    "Sub Teniente", //16
    "Teniente II", //17
    "Teniente I", //18
    "Teniente General", //19
	"Teniente Mayor", //20
    "Sub Capitan", //21
    "Capitan", //22
    "Comisario Interino", //23
    "Comisario", //24
    "Comisario General" //25
};

#define MAX_POLICE_OBJECTS	300
enum enum_POLICE_OBJECTS
{
	bool:police_object_VALID,
	police_object_USER[24],
	police_object_OBJECT_ID,
}
new POLICE_OBJECTS[MAX_POLICE_OBJECTS][enum_POLICE_OBJECTS];

enum enum_POLICE_GARAGE_DOORS
{
	police_gdoor_MODELID,
	Float:police_gdoor_CLOSED_X,
	Float:police_gdoor_CLOSED_Y,
	Float:police_gdoor_CLOSED_Z,
	Float:police_gdoor_CLOSED_RX,
	Float:police_gdoor_CLOSED_RY,
	Float:police_gdoor_CLOSED_RZ,
	Float:police_gdoor_OPENED_X,
	Float:police_gdoor_OPENED_Y,
	Float:police_gdoor_OPENED_Z,
	Float:police_gdoor_OPENED_RX,
	Float:police_gdoor_OPENED_RY,
	Float:police_gdoor_OPENED_RZ,
	Float:police_gdoor_MOVE_SPEED,
	bool:police_gdoor_CLOSING,
	police_gdoor_OBJECT_ID,
	police_gdoor_TIMER,
}
new POLICE_GARAGE_DOORS[][enum_POLICE_GARAGE_DOORS] =
{
	{3055, 1607.911743, -1666.967651, 6.050696, 0.000000, 0.000000, 179.999984, 1607.911743, -1666.967651, 1.660699, 0.000000, 0.000000, 179.999984,		1.3, false, INVALID_STREAMER_ID, -1},
	{3055, 2294.04102, 2498.81396, 4.47113, 0.00000, 0.00000, 90.00000, 2294.0410, 2498.8140, 9.0059, 0.0, 0.0, 90.0, 										1.6, false, INVALID_STREAMER_ID, -1},
	{3055, 2335.13086, 2443.66895, 6.97370, 0.00000, 0.00000, 60.00000, 2335.1309, 2443.6689, 11.6876, 0.0, 0.0, 60.0, 										1.6, false, INVALID_STREAMER_ID, -1},
	{10184, -1631.69556, 688.56641, 8.70960, 0.00000, 0.00000, 90.00000, -1631.6956, 688.5664, 13.2064, 0.0, 0.0, 90.0, 									1.6, false, INVALID_STREAMER_ID, -1}
};

enum enum_POLICE_DOORS
{
	police_door_MODELID,
	Float:police_door_X,
	Float:police_door_Y,
	Float:police_door_Z,
	Float:police_door_RZ,
	police_door_INTERIOR,
	police_door_WORLD,
	bool:police_door_CLOSED,
	police_door_OBJECT_ID,
	police_door_TIMER,
}
new POLICE_DOORS[][enum_POLICE_DOORS] =
{
	{1495, -1619.70764, 688.41058, 6.17220, 180.00000, 0, 0, true, INVALID_STREAMER_ID, -1},//sfpd
	{1495, 239.58211, 116.84430, 1002.20319, 90.00000, 10, 0, true, INVALID_STREAMER_ID, -1},//sfpd
	{1495, 253.19209, 108.35700, 1002.20319, 90.00000, 10, 0, true, INVALID_STREAMER_ID, -1},//sfpd
	{1497, 266.59210, 112.56570, 1003.60992, 180.0, 10, 0, true, INVALID_STREAMER_ID, -1},//sfpd
	{1495, 228.27240, 150.46510, 1002.01813, 90.0, 3, 0, true, INVALID_STREAMER_ID, -1},//lvpd
	{1495, 228.27240, 160.45010, 1002.01813, 90.0, 3, 0, true, INVALID_STREAMER_ID, -1},//lvpd
	{1495, 232.21030, 169.83350, 1002.01813, 180.0, 3, 0, true, INVALID_STREAMER_ID, -1},//lvpd
	{1495, 2294.03516, 2492.91528, 2.26740, 90.0, 0, 0, true, INVALID_STREAMER_ID, -1},//lvpd
	{1497, 221.95570, 181.21680, 1002.02142, 0.0, 3, 0, true, INVALID_STREAMER_ID, -1}//lvpd
};

enum E_POLICE_START_WORK
{
	Float:police_start_X,
	Float:police_start_Y,
	Float:police_start_Z,
	police_start_WORLD,
	police_start_INTERIOR	
};
new POLICE_START_WORK[][E_POLICE_START_WORK] =
{
	{1568.2251, -1690.5861, 19.8381, -1, 1},
	{266.547180, 119.652816, 1004.617187, -1, 10},
	{217.816406, 187.667922, 1003.031250, -1, 3}
};

enum E_POLICE_EQUIP
{
	Float:police_equip_X,
	Float:police_equip_Y,
	Float:police_equip_Z,
	police_equip_WORLD,
	police_equip_INTERIOR	
};
new POLICE_EQUIP[][E_POLICE_EQUIP] =
{
	{1571.5701, -1690.7615, 19.8381, -1, 1},
	{262.945587, 109.785270, 1004.617187, -1, 10},
	{222.683914, 186.956054, 1003.031250, -1, 3}
};

/* SYSTEM - PROPERTIES */
forward OnDefaultPFurChanged(index);
#define MAX_PROPERTIES	2000
enum Property_Info_Enum
{
	property_VALID,
	property_ID,
	Float:property_EXT_X,
	Float:property_EXT_Y,
	Float:property_EXT_Z,
	Float:property_EXT_ANGLE,
	property_EXT_INTERIOR,
	property_EXT_FREEZE,
	property_ID_INTERIOR,
	
	bool:property_SOLD,
	property_OWNER_ID,
	property_NAME[24],
	property_PRICE,
	property_LEVEL,
	property_EXTRA,
	property_VIP_LEVEL,
	
	Text3D:property_EXT_LABEL_ID,
	Text3D:property_INT_LABEL_ID,
	property_EXT_PICKUP_ID,
	property_INT_PICKUP_ID,

	bool:property_POLICE_FORCING,
	bool:property_POLICE_FORCED,
	property_POLICE_FORCE_TIMER,
	property_DESCRIPTION[24]
}
new PROPERTY_INFO[MAX_PROPERTIES][Property_Info_Enum];


/* PROPERTY CONSTRUCTOR */
new TOTAL_PROPERTIES_LOADED;
enum PROPERTY_INTERIOR_ENUM
{
	property_creator_LEVEL,
	property_creator_PRICE,
	Float:property_INT_X,
	Float:property_INT_Y,
	Float:property_INT_Z,
	Float:property_INT_ANGLE,
	property_INT_INTERIOR,
	bool:property_INT_FREEZE
}
new PROPERTY_INTERIORS[][PROPERTY_INTERIOR_ENUM] =
{
	{6, 180000, 140.249008, 1366.197509, 1083.859375, 0.0, 5, false},
	{6, 160000, 2324.530029, -1149.540039, 1050.710083, 0.0, 12, false},
	{6, 270000, 225.679992, 1021.450012, 1084.017700, 0.0, 7, false},
	{6, 190000, 234.190002, 1063.729980, 1084.212280, 0.0, 6, false},
	{6, 120000, 226.300003, 1114.239990, 1080.992919, 270.0, 5, false},
	{6, 180000, 2317.889892, -1026.760009, 1050.217773, 0.0, 9, false},
	{6, 120000, 2495.979980, -1692.079956, 1014.742187, 180.0, 3, false},
	{6, 90000,  2196.626464, -1204.321411, 1049.023437, 90.0, 6, false},
	{6, 105000, 2270.143554, -1210.490600, 1047.562500, 90.0, 10, false},
	{4, 90000,  2365.199951, -1135.595825, 1050.882568, 0.0, 8, false},
	{3, 75000,  2237.590087, -1081.640014, 1049.023437, 0.0, 2, false},
	{4, 65000,  2468.840087, -1698.239990, 1013.507812, 90.0, 2, false},
	{3, 45000,  2282.928955, -1140.004516, 1050.898437, 0.0, 11, false},
	{4, 50000,  2308.775878, -1212.731689, 1049.023437, 0.0, 6, false},
	{6, 135000, 2233.681396, -1114.973510, 1050.882812, 0.0, 5, false},
	{6, 230000, 2218.162597, -1076.148315, 1050.484375, 90.0, 1, false},
	{6, 220000, 266.654327, 304.961791, 999.148437, 270.0, 2, false},
	{6, 30000,  243.720001, 304.910003, 999.148437, 270.0, 1, false},
	{6, 65000,  2259.440673, -1135.905883, 1050.640258, 270.0, 10, false},
	{12, 3000000, 1260.910034, -785.320068, 1091.906250, 280.0, 5, false}
};

enum PROPERTY_CLOSET_POS_ENUM
{
	Float:property_closet_X,
	Float:property_closet_Y,
	Float:property_closet_Z
}
new PROPERTY_CLOSET_POS[][PROPERTY_CLOSET_POS_ENUM] = //de momento posicion de la puerte se cambiara porxiamn
{
	{145.103408, 1384.249877, 1088.367187},
	{2337.974609, -1141.684082, 1054.304687},
	{243.130554, 1046.244384, 1084.000000},
	{235.600509, 1079.485351, 1087.812622},
	{239.347656, 1116.808593, 1084.992187},
	{2326.974365, -1015.419189, 1054.711059},
	{2492.362060, -1708.568969, 1018.336791},
	{2198.682128, -1219.331787, 1049.023437},
	{2258.639892, -1220.260253, 1049.023437},
	{2363.767333, -1127.419433, 1050.882568},
	{2235.885986, -1073.944335, 1049.023437},
	{2450.338867, -1706.199340, 1013.507812},
	{2286.247314, -1137.693359, 1050.898437},
	{2319.417480, -1212.880981, 1049.023437},
	{2231.736328, -1112.198730, 1050.882812},
	{2215.857910, -1074.698974, 1050.484375},
	{270.320709, 303.413482, 999.155761},
	{248.817687, 303.795257, 999.148437},
	{2263.338378, -1132.665161, 1050.632812},
	{1271.444091, -822.371704, 1089.937500}
};

#define MAX_CLOSET_SLOTS	10
enum
{
	CLOSET_TYPE_WEAPON,
	CLOSET_TYPE_MEDICINES,
	CLOSET_TYPE_CANNABIS,
	CLOSET_TYPE_CRACK
};
enum enum_PROPERTY_CLOSET
{
	bool:property_closet_VALID,
	property_closet_OBJECT_ID,
	property_closet_TYPE,
	property_closet_INT,
	property_closet_INT_EXTRA
};
new PROPERTY_CLOSET[MAX_PROPERTIES][MAX_CLOSET_SLOTS][enum_PROPERTY_CLOSET];

enum PLAYER_PROPERTY_CONSTRUCTOR_ENU
{
	bool:player_property_creator_ENABLED,
	player_property_creator_INTERIO,
	Float:player_property_creator_EXT_X,
	Float:player_property_creator_EXT_Y,
	Float:player_property_creator_EXT_Z,
	Float:player_property_creator_EXT_ANG,
	player_property_creator_EXT_INT,
}
new PLAYER_PROPERTY_CONSTRUCTOR[MAX_PLAYERS][PLAYER_PROPERTY_CONSTRUCTOR_ENU];

//Taxis
enum TAXI_METER_VEHICLE_Info
{
	bool:veh_taxi_meter_ENABLED,
	veh_taxi_meter_PRICE,
	veh_taxi_meter_PAYMENT,
	Float:veh_taxi_meter_OLD_X,
	Float:veh_taxi_meter_OLD_Y,
	Float:veh_taxi_meter_OLD_Z,
	Float:veh_taxi_meter_DISTANCE,
	veh_taxi_meter_TIMER,
}
new TAXI_METER_VEHICLE[MAX_VEHICLES][TAXI_METER_VEHICLE_Info];

// Grua
new Float:CRANE_POINTS[][] =
{
	{-28.8145, -1124.5767, 0.6990, 157.4051},
	{-34.1703, -1122.5664, 0.6990, 157.4051},
	{-39.7803, -1119.8870, 0.6990, 157.4051},
	{-45.1235, -1117.3114, 0.6990, 157.4051},
	{-49.8637, -1115.2751, 0.6990, 157.4051},
	{-42.4484, -1154.7849, 0.6990, 333.7967},
	{-46.8119, -1152.4274, 0.6990, 333.7967},
	{-50.6488, -1150.6056, 0.6990, 333.7967},
	{-54.1760, -1149.1364, 0.6990, 333.7967},
	{-57.8852, -1147.4999, 0.6990, 333.7967},
	{-62.2619, -1145.2260, 0.6990, 333.7967},
	{-66.4254, -1143.2191, 0.6990, 333.7967},
	{-70.7787, -1140.9065, 0.6990, 333.7967},
	{-75.1332, -1138.9713, 0.6990, 333.7967},
	{-79.8642, -1136.7786, 0.6990, 333.7967},
	{-33.8437, -1135.5642, 0.6990, 333.7967},
	{-36.8147, -1141.7927, 0.6990, 157.4051},
	{-40.9361, -1140.1613, 0.6990, 157.4051},
	{-45.5692, -1138.2747, 0.6990, 157.4051},
	{-50.3522, -1136.1228, 0.6990, 157.4051},
	{-54.4753, -1134.3014, 0.6990, 157.4051},
	{-38.0563, -1133.7695, 0.6990, 333.7967},
	{-42.4517, -1132.0298, 0.6990, 333.7967},
	{-47.2834, -1129.8915, 0.6990, 333.7967},
	{-51.6219, -1127.9185, 0.6990, 333.7967}
};

//Pizzero
new Float:PIZZA_DELIVERY_POINT[][] = 
{
	{2232.147460, -1785.597656, 13.560449, 82.756179    },
	{2290.242675, -1796.022583, 13.546875, 267.344024   },
	{1739.314575, -1582.890747, 14.158246, 174.783370   },
	{1694.923339, -1583.478881, 13.546875, 179.829818   },
	{1241.816406, -2032.996093, 60.041099, 263.972076   },
	{1187.268798, -1666.487915, 13.634441, 172.332916   },
	{998.998962, -1868.162231, 12.820312, 333.677734    },
	{891.677551, -1695.211669, 13.546875, 182.046417    },
	{507.502838, -1606.101684, 16.247840, 359.563903    },
	{305.462341, -1748.736816, 4.546875, 356.093139     },
	{159.034683, -1906.259521, 3.773437, 0.044234       },
	{387.668762, -2083.981689, 7.835937, 11.638330      },
	{902.655456, -930.055786, 42.601562, 185.516662     },
	{1809.700439, -1166.832885, 24.226562, 168.451568   },
	{2007.953857, -985.501953, 33.888450, 203.231872    },
	{2580.753906, -969.438110, 81.363517, 50.412715     },
	{2796.151855, -1088.867187, 30.719810, 234.631011   },
	{2819.019287, -1614.678588, 11.079871, 245.630599   },
	{2756.354492, -1979.312011, 13.547579, 270.360687   },
	{931.654541, -1231.159545, 16.928218, 262.568939    },
	{952.439208, -913.921447, 45.729900, 180.787841     },
	{824.417663, -2031.578857, 12.867187, 331.166229    },
	{1714.394531, -1629.683593, 20.203384, 332.709594   }
};

enum PIZZA_VEHICLE_Info
{
	bool:pizza_vehicle_STARTED,
	pizza_vehicle_DRIVER_AID,
	pizza_vehicle_PIZZAS,
	pizza_vehicle_PIZZA_POINT,
	bool:pizza_vehicle_PIZZA_POINT_DELI,
}
new PIZZA_VEHICLE[MAX_VEHICLES][PIZZA_VEHICLE_Info];

//Camioneros
new Float:LoadTrucksPoints[][] =
{
	{-520.48822, -502.04059, 25.26037, 0.0},
	{-529.98822, -502.04059, 25.26040, 0.0},
	{-557.48822, -502.04059, 25.26040, 0.0},

	{4471.7319, 5898.2646, 44.1051, 180.0},
	{4477.1011, 5898.2646, 44.1051, 180.0},
	{4481.8916, 5898.2646, 44.1051, 180.0}
};

enum TRUCK_VEHICLE_Info
{
	bool:truck_vehicle_LOADED,
	bool:truck_vehicle_LOADING,
	bool:truck_vehicle_UNLOADING,
	bool:truck_vehicle_DELIVERED,
	truck_vehicle_DRIVER_USER_ID,
	truck_vehicle_POINT,
	truck_vehicle_CURRENT_POINT,
	truck_vehicle_TOTAL_POINTS,
	Float:truck_vehicle_TOTAL_DISTANCE
}
new TRUCK_VEHICLE[MAX_VEHICLES][TRUCK_VEHICLE_Info];

new Float:Truck_Return_Positions[3] =
{
	-481.952117, -521.362060, 25.691177
};

enum Truck_Content_Info
{
	truck_content_EXP,
	truck_content_NAME[32],
	truck_content_MONEY,
	Float:truck_content_X,
	Float:truck_content_Y,
	Float:truck_content_Z
}
new Truck_Contents[][Truck_Content_Info] =
{
	{0, "Productos agrícolas", 950, -185.473693, -280.008880, 1.603357},
	{0, "Productos industriales", 1250, 2168.514404, -2275.264892, 13.128628},
	{0, "Madera y troncos", 1700, -2096.593017, -2243.229492, 30.352083},
	{0, "Ropa y complementos", 1975, 2834.454833, 958.061462, 10.479191},
	{25, "Productos de limpieza", 2250, 2524.153076, 2816.919189, 10.547390},
	{50, "Productos de pesca", 2760, -1789.979858, 1421.842895, 6.914581},
	{50, "Productos químicos", 3560, -1862.919433, -202.232727, 18.125516},
	{80, "Productos tecnologicos", 3850, 1039.057983, 2132.961425, 10.547390}
};

/* Mecánico */
new Float:MechanicStartWorkingCoords[1][3] =
{
	{1929.8110, -1814.7921, 13.6063}
};

new Float:MechanicBuyPiecesCoords[1][3] =
{
	{1923.0374, -1820.3766, 13.6063}
};

new Float:MechanicBuyKitsCoords[][3] = 
{
	{1930.3470, -1820.8022, 13.6063}
};

/* talador */
enum
{
	LUMBER_TREE_STATE_NORMAL,
	LUMBER_TREE_STATE_CUTTING,
	LUMBER_TREE_STATE_CUTTED,
}
enum LUMBER_TREES_Info
{
	lumber_tree_MODELID,
	Float:lumber_tree_X,
	Float:lumber_tree_Y,
	Float:lumber_tree_Z,
	Float:lumber_tree_RX,
	Float:lumber_tree_RY,
	Float:lumber_tree_RZ,
	lumber_tree_OBJECT_ID,
	Text3D:lumber_tree_LABEL,
	lumber_tree_STATE,
	lumber_tree_GROW_TIMER,
	lumber_tree_GROW_COUNTER,
}
new LUMBER_TREES[][LUMBER_TREES_Info] =
{
	{657, -467.31256, -47.68515, 59.00023,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -480.88443, -53.57695, 59.39736,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -491.79199, -45.14817, 59.24156,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -493.84619, -54.35930, 59.48059,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -473.43958, -40.64830, 59.00023,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -468.32245, -61.54378, 58.98302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -458.69937, -75.32365, 58.80302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -453.17416, -65.31260, 58.98302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -444.92609, -78.80465, 57.97836,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -465.78470, -85.49714, 58.96302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -454.24377, -86.58199, 58.46635,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -440.20041, -92.70150, 57.60720,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -484.98972, -65.79082, 59.82284,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -460.57928, -95.55928, 59.25615,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -521.20569, -44.74903, 60.62712,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -534.94348, -50.98387, 61.66861,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -533.45081, -41.45306, 61.64992,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -495.74197, -64.77782, 59.94119,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -519.74005, -72.02750, 61.19377,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -518.47144, -57.24505, 60.76774,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1}
};

/* Basurero */

#define MAX_ROUTES	5
#define MAX_OBJECTS_PER_ROUTE	20

enum Trash_Object_Info
{
	bool:trash_route_VALID,
	trash_route_OBJECTS,
	Float:trash_route_DISTANCE,
	trash_route_MONEY,
	trash_object_MODELID[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_X[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_Y[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_Z[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RX[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RY[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RZ[MAX_OBJECTS_PER_ROUTE],
}
new TRASH_OBJECTS[MAX_ROUTES][Trash_Object_Info];
new TRASH_PLAYER_OBJECTS[MAX_PLAYERS][MAX_OBJECTS_PER_ROUTE];

enum TRASH_VEHICLES_INFO
{
	bool:trash_vehicle_JOB_STARTED, 
	trash_vehicle_ROUTE,
	trash_vehicle_CP,
	trash_vehicle_DRIVER_ID,
	trash_vehicle_PASSENGER_ID,
}
new TRASH_VEHICLES[MAX_VEHICLES][TRASH_VEHICLES_INFO];

/* SYSTEM - PLAYERTEMP */
enum
{
	PED_STOPPED,
	PED_WALKING,
	PED_RUNNING,
	PED_SPRINTING,
	PED_BYCICLING,
}

enum Temp_Enum
{
	pt_GAME_STATE,
	pt_NAME[24],
	pt_IP[16],
	bool:pt_USER_EXIST, // Esta registrado?
	bool:pt_USER_LOGGED, // 1 = ha cargado todos los datos del user
	pt_ANTIFLOOD_COMMANDS,
	pt_ANTIFLOOD_TALK,
	pt_TIMERS[MAX_TIMERS_PER_PLAYER],
	bool:pt_USER_VALID_NAME,
	pt_BAD_LOGIN_ATTEMP,
	pt_DOUBT_CHANNEL_TIME,
	pt_LAST_PICKUP_ID,
	pt_LAST_AREA_ID,
	pt_TIME_PASSED_LAST_REP,
	pt_INTERIOR_INDEX,
	pt_CLOTHING_SHOP,
	pt_CLOTHING_SHOP_SELECTED_SKIN,
	bool:pt_SELECT_TEXTDRAW,
	bool:pt_HUD_TEXTDRAWS, // Barra de hambre y sed
	bool:pt_THIRST_MESSAGE,
	bool:pt_HUNGRY_MESSAGE,
	pt_SELECT_BANK_TRANSFER_ACCOUNT,
	pt_SELECT_BANK_TRANSFER_ID,
	bool:pt_PLAYER_IN_ATM,
	bool:pt_PLAYER_IN_CALL,
	pt_PLAYER_PHONE_CALL_STATE,
	pt_PLAYER_PHONE_CALL_PLAYERID,
	pt_PLAYER_LISTITEM[MAX_LISTITEMS],
	pt_PLAYER_PHONE_BOOK_ADD_NUMBER,
	pt_PLAYER_PHONE_BOOK_SELECTED,
	pt_PLAYER_PHONE_NUMBER_SELECTED,
	pt_BUY_HOUSE_INDEX,
	pt_ANTIFLOOD_KNOCK_PROPERTY,
	pt_KNOCK_PLAYER_ID,
	pt_GPS_CHECKPOINT,
	pt_GPS_PLAYER_SELECTED,
	pt_PLAYER_GPS_SELECTED_PROPERTY[MAX_VIP_PROPERTIES],
	pt_PLAYER_PROPERTY_SELECTED,
	bool:pt_MUSIC_FOR_PROPERTY,
	bool:pt_MUSIC_FOR_VEHICLE,
	pt_SELECTED_BUY_VEHICLE_ID,
	pt_LAST_VEHICLE_ID,
	pt_NOTARY_OPTION, //0 al banco, 1 a persona
	pt_NOTARY_PRICE,
	pt_NOTARY_TO_PLAYER,
	pt_PLAYER_VEHICLE_SELECTED,
	bool:pt_TAXI_METER_ENABLED,
	bool:pt_WANT_TAXI,
	Float:pt_TRUCK_LOADING_VALUE,
	pt_TRUCK_CHECKPOINT,
	pt_TUNING_SELECTED_PART[24],
	pt_TUNING_SELECTED_COMPONENT[24],
	pt_TUNING_SELECTED_COMPONENT_ID,
	pt_TUNING_SELECTED_PIECES,
	pt_PAINTJOB_SELECTED_ID,
	pt_WORKING_IN,
	pt_SELECTED_MECHANIC_VEHICLE_ID,
	pt_MECHANIC_COLOR_SLOT,
	pt_HARVERT_CHECKPOINT,
	pt_HARVERT_PROCCESS,
	pt_PIZZA_CHECKPOINT,
	bool:pt_TRASH_DRIVER,
	bool:pt_TRASH_PASSENGER,
	pt_TRASH_VEHICLE_ID,
	pt_TRASH_CHECKPOINT,
	Float:pt_RECYCLE_BIN_VALUE,
	bool:pt_PLAYER_CARRYING_TREE,
	pt_PLAYER_LUMBERJACK_TREE,
	pt_LUMBERJACK_CHECKPOINT,
	pt_LAST_GOT_WORK_TIME,
	pt_LAST_GIVE_MONEY_TIME,
	pt_SELECTED_BUY_SEED_ID,
	bool:pt_PLANTING,
	pt_PLANTING_PLANT_SELECTED,
	pt_PROPERTY_INDEX,
	bool:pt_KICKED,
	pt_SELECTED_DIALOG_WEAPON_SLOT,
	pt_DIALOG_BOT_VEHICLE,
	pt_DIALOG_BOT_VEHICLE_BOOT_SLOT,
	pt_POLICE_RADIO,
	bool:pt_CUFFING,
	bool:pt_CUFFED,
	pt_ENTER_JAIL_TIME,
	pt_DIALOG_DB_LIMIT,
	pt_DIALOG_DB_PAGE,
	pt_SELECTED_DB_AC_ID,
	bool:pt_POLICE_CALL_NAME,
	bool:pt_POLICE_CALL_DESCRIPTION,
	pt_POLICE_CALL_NAME_STR[24],
	pt_ANTIFLOOD_REPORT,
	bool:pt_SEE_ACMD_LOG,
	bool:pt_SEE_ADM_LOG,
	bool:pt_SEE_ADM_CHAT,
	pt_LAST_CHEAT_DETECTED_TIME,
	bool:pt_SEE_AC_LOG,
	pt_ANTIFLOOD_DEATH,
	pt_ANTIFLOOD_STATE,
	pt_ANTIFLOOD_ENTER_VEHICLE,
	pt_SELECTED_AC_LISTITEM,
	pt_ADMIN_PM_PID,
	pt_ADMIN_PM_AID,
	pt_ADMIN_PM_TIME,
	pt_MECHANIC_PID,
	pt_MECHANIC_AID,
	pt_MECHANIC_PRICE,
	pt_MECHANIC_TEXT[64],
	pt_MECHANIC_TYPE,
	pt_MECHANIC_EXTRA,
	pt_MECHANIC_VEHICLE_ID,
	pt_MECHANIC_PIECES,
	pt_MECHANIC_TIME,
	pt_MECHANIC_SELECTED_COLOR,
	pt_MECHANIC_SELECTED_COMPONENT,
	pt_VIRTUAL_WORLD,
	bool:pt_PLAYER_SPECTATE,
	pt_PIZZA_PROCCESS,
	pt_DELIVERED_PIZZAS,
	pt_PIZZA_ACTOR,
	pt_LAST_PLANT_TIME,
	pt_LAST_SET_WANTED_LEVEL,
	pt_CREATE_CREW_NAME[32],
	pt_CREATE_CREW_COLOR,
	pt_CREW_INVITE_PID,
	pt_CREW_INVITE_AID,
	pt_CREW_INVITE_INFO[4],
	pt_CREW_SELECTED_RANK,
	pt_CREW_SELECTED_NEW_RANK,
	pt_LAST_TERRITORY,
	pt_PLAYER_TERRITORY_PRO,
	pt_PLAYER_COLOR[10],
	pt_LAST_GOT_CREW,
	pt_POLICE_PEN_PID,
	pt_POLICE_PEN_AID,
	pt_POLICE_PEN_IM,
	pt_POLICE_PEN_TIME,
	pt_LAST_VIP_CHECK,
	pt_LAST_SHOT_ROBBERY,
	pt_PASSWD[24],
	bool:pt_CONTROL,
	pt_SELECTING_STYLE,
	pt_SELECTED_STYLE,
	pt_PROPERTY_CINFO[4],
	pt_CJ_WARNINGS,
	pt_FIRST_NAME[24],
	pt_SUB_NAME[24],
	bool:pt_ADMIN_SERVICE,
	pt_LAST_SAFE_ZONE_WARNING,
	pt_SELECTED_POLICE_OBJECT_INDEX,
	pt_SELECTED_BYC_ID,
	pt_SELECTED_BYC_USER_ID,
	bool:pt_DIALOG_RESPONDED,
	pt_DIALOG_ID,
	bool:pt_DL_EXAM,
	pt_DL_EXAM_CP,
	pt_DL_EXAM_PROCCESS,
	pt_COOLDOWN_MEDICINE,
	pt_COOLDOWN_CRACK,
	pt_COOLDOWN_WEED,
	pt_SELECTED_OBJECT,
	pt_DIALOG_CLOSET_PROPERTY,
	pt_DIALOG_CLOSET_PROPERTY_SLOT,
	bool:pt_CLASSED,
	pt_CREW_INDEX,
	bool:pt_REQUEST_HELP,
	bool:pt_COMBAT,
	pt_COMBAT_TIMER,
	pt_LAST_VEHICLE_DESTROY,
	pt_LOGIN_KICK_TIMER,
	pt_COOLDOWN_MEDICAL_KIT,
	Float:pt_INJURED_POS[4],
	pt_PICKUP_TIMER,
	bool:pt_DIALOG_OPENED,
	pt_LAST_PICKUP_CHECKED,
	pt_GLOBAL_TIMER,
	pt_ELEVATOR_INDEX,
	pt_ELEVATOR_OPTION,
	pt_GIVECASHALL_TIME,
	pt_VEHICLE_SPAWNED,
	bool:pt_TASER_GUN,
	pt_TASSED,
	Float:pt_TASSED_TIME,
	pt_TASER_ENERGY,
	pt_TASER_TIMER,
	pt_POLICE_SWAT,
	Text3D:pt_PLAYER_NAMETAG,
	bool:pt_PLAYER_DAMAGE,
	/*pt_VOICE_PLUGIN,
	SV_BOOL:pt_VOICE_MICROPHONE,
	SV_UINT:pt_LOCAL_CHANNEL,*/
	pt_POCKETS_SELECTED_PLAYER,
	pt_POCKETS_PLAYERID,
	pt_VEHICLE_SPAWN_INDEX,
	pt_SELECTED_POCKET_SLOT,
	pt_HAND_POCKET,
	pt_INVENTORY_OPTION_EXTRA,
	pt_INVENTORY_DATA_EXTRA,
	pt_INVENTORY_SELL_DATA,
	pt_INVENTORY_SELL_EXTRA,
	pt_TRICK_PLAYERID,
	pt_TRICK_ID,
	pt_TRICK_TYPE,
	pt_TRICK_EXTRA,
	pt_TRICK_PRICE,
	pt_TRICK_TIMER
};
new PlayerTemp[MAX_PLAYERS][Temp_Enum]; // Guardar todas las variables en el modulo player_data.pwn

enum
{
	MECHANIC_OPTION_REPAIR,
	MECHANIC_OPTION_COLOR_1,
	MECHANIC_OPTION_COLOR_2,
	MECHANIC_OPTION_TUNING,
	MECHANIC_OPTION_REMOVE_COMPONEN,
	MECHANIC_OPTION_PAINTJOB,
}

//EnterExits
enum
{
	INTERIOR_NO_INFO,
	INTERIOR_BINCO,
	INTERIOR_VIPBURBAN,
	INTERIOR_PROLAPS,
	INTERIOR_DIDIER_SACHS,
	INTERIOR_VICTIM,
	INTERIOR_ZIP,
	INTERIOR_247,
	INTERIOR_PIZZA,
	INTERIOR_CLUCKIN_BELL,
	INTERIOR_BURGER_SHOT,
	INTERIOR_BANK_LS,
	INTERIOR_BANK_SF,
	INTERIOR_BANK_LV,
	INTERIOR_CITY_HALL_LS,
	INTERIOR_UNITY_STATION,
	INTERIOR_TRUCK,
	INTERIOR_POLICE_LS,
	INTERIOR_POLICE_SF,
	INTERIOR_POLICE_LV,
	INTERIOR_ALHAMBRA,
	INTERIOR_POLICE_GARAGE,
	INTERIOR_HOSPITAL,
	INTERIOR_CLUB,
	INTERIOR_PHARMACY,
	INTERIOR_BLACK_MARKET
}
enum Enter_Exits
{
	ee_VISIBLE_ITEMS,
	bool:ee_ROBBABLE,
	ee_LAST_ROBBERY,
	ee_MAIN_ACTOR,
	ee_TIMER,
	Text:ee_TEXTDRAW,
	ee_STEP,
	ee_LAST_CREW_INDEX_ROBBERY,
	Float:ee_ROBBERY_PROGRESS,

	ee_ID,
	ee_NAME[64],
	
	ee_INTERIOR_TYPE,
	
	ee_INT_MAPICON,
	ee_INT_FREEZE,
	ee_INT_WORLD,
	ee_INT_INTERIOR,
	Float:ee_INT_X,
	Float:ee_INT_Y,
	Float:ee_INT_Z,
	Float:ee_INT_ANGLE,
	
	ee_EXT_MAPICON,
	ee_EXT_FREEZE,
	ee_EXT_WORLD,
	ee_EXT_INTERIOR,
	Float:ee_EXT_X,
	Float:ee_EXT_Y,
	Float:ee_EXT_Z,
	Float:ee_EXT_ANGLE,
	
	ee_TIME_OPEN,
	ee_TIME_CLOSE,
	
	ee_INT_MAPICON_ID,
	ee_EXT_MAPICON_ID,
	Text3D:ee_INT_LABEL_ID,
	Text3D:ee_EXT_LABEL_ID,
	
	
	ee_INT_PICKUP_ID,	/* No son pickups decorativos */
	ee_EXT_PICKUP_ID,	/* Son pickups para identificar el id */

	ee_EXT_PICKUP_OBJECT /* Pickups de area para ciudades extra */
}

new ENTER_EXIT[][Enter_Exits] = // EE = EnterExits
{
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Binco", INTERIOR_BINCO, -1, false, 0, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 2244.484863, -1665.223510, 15.476562, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Binco", INTERIOR_BINCO, -1, false, 1, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, -2374.125976, 910.103271, 45.433864, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Binco", INTERIOR_BINCO, -1, false, 2, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 2101.902832, 2257.391845, 11.023437, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Binco", INTERIOR_BINCO, -1, false, 3, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 1656.993408, 1733.450195, 10.828111, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "SubUrban", INTERIOR_VIPBURBAN, -1, false, 0, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, 2112.835205, -1211.456665, 23.962865, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "SubUrban", INTERIOR_VIPBURBAN, -1, false, 1, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, -2490.140869, -29.123632, 25.617187, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "SubUrban", INTERIOR_VIPBURBAN, -1, false, 2, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, 2779.590087, 2453.658203, 11.062500, 136.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ProLaps", INTERIOR_PROLAPS, -1, false, 0, 3, 206.995925, -140.021163, 1003.507812, 0.0,	45, false, 0, 0, 499.498168, -1360.616088, 16.368682, 340.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ProLaps", INTERIOR_PROLAPS, -1, false, 1, 3, 206.995925, -140.021163, 1003.507812, 0.0,	45, false, 0, 0, 2825.891357, 2407.322265, 11.062500, 133.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Didier Sachs", INTERIOR_DIDIER_SACHS, -1, false, 0, 14, 204.348281, -168.678985, 1000.523437, 0.0,	45, false, 0, 0, 453.858032, -1478.098632, 30.813968, 111.110641, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Didier Sachs", INTERIOR_DIDIER_SACHS, -1, false, 1, 14, 204.348281, -168.678985, 1000.523437, 0.0,	45, false, 0, 0, 1642.838012, -2284.760742, -1.195312, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Victim", INTERIOR_VICTIM, -1, false, 0, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, 461.541320, -1500.892333, 31.049194, 98.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Victim", INTERIOR_VICTIM, -1, false, 1, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, -1694.747558, 951.613464, 24.890625, 135.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Victim", INTERIOR_VICTIM, -1, false, 2, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, 2802.926269, 2430.682861, 11.062500, 130.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ZIP", INTERIOR_ZIP, -1, false, 0, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 1456.611816, -1137.818969, 23.961400, 215.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ZIP", INTERIOR_ZIP, -1, false, 1, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, -1882.421997, 866.394836, 35.171875, 138.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ZIP", INTERIOR_ZIP, -1, false, 2, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 2090.534667, 2224.481933, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "ZIP", INTERIOR_ZIP, -1, false, 3, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 2572.074218, 1904.711181, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 0, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2194.734130, 1991.022216, 12.296875, 90.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 1, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -180.966003, 1034.823242, 19.742187, 90.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 2, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1352.314941, -1758.961425, 13.507812, 0.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 3, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1833.540771, -1842.542724, 13.578125, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 4, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2884.694335, 2453.865478, 11.068956, 225.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 5, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2097.616210, 2224.081298, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 6, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2247.650146, 2396.417236, 10.820312, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 7, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1315.453247, -897.967102, 39.578125, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 8, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1000.317199, -919.933349, 42.328125, 105.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 9, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2452.572021, 2064.924316, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 10, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2546.502929, 1972.397338, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 11, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1937.592773, 2307.269042, 10.820312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 12, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -1562.437744, -2733.189941, 48.743457, 234.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 13, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -2442.718994, 755.316589, 35.171875, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "24/7", INTERIOR_247, -1, false, 14, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1102.4149, -1457.8940, 15.7969, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 0, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2105.234619, -1806.479614, 13.554687, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 1, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, -1721.211425, 1359.705932, 7.185316, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 2, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2756.652099, 2477.132812, 11.062500, 135.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 3, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2083.380615, 2224.687988, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 4, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2351.770996, 2533.328369, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 5, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2638.568847, 1849.818481, 11.023437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 6, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 372.310729, -133.246292, 1001.492187, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 7, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 375.114501, -117.272621, 1001.492187, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 0, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2419.926025, -1509.024780, 24.000000, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 1, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2397.772949, -1898.847778, 13.546875, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 2, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 928.553466, -1352.848876, 13.343750, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 3, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2838.312011, 2407.552978, 11.068956, 225.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 4, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2101.901367, 2228.776855, 11.023437, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 5, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2393.372070, 2041.856323, 10.820312, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 6, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2638.423828, 1671.904296, 11.023437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 7, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, -1816.567382, 618.417419, 35.171875, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 8, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, -2671.401611, 257.927551, 4.632812, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 9, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 364.914093, -11.778851, 1001.851562, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 10, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 368.652679, -4.492218, 1001.851562, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 0, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 810.715270, -1616.163330, 13.546875, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 1, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1199.272216, -918.372253, 43.121376, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 2, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2366.805419, 2071.106201, 10.820312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 3, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2472.626464, 2034.173339, 11.062500, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 4, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1872.485351, 2071.812255, 11.062500, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 5, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2169.620117, 2795.799072, 10.820312, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 6, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1157.925659, 2072.159912, 11.062500, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 7, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -2356.003173, 1008.051147, 50.898437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 8, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -2336.861816, -166.945022, 35.554687, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, true, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 9, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -1912.406860, 827.900634, 35.227863, 315.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Banco Los Santos", INTERIOR_BANK_LS, -1, true, 5, 5, 1412.077880, 1315.779907, 1501.087890, 90.0,	52, false, 0, 0, 1461.9930, -1021.3185, 24.0042, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Banco San Fierro", INTERIOR_BANK_SF, -1, true, 10, 10, 1104.824462, 1515.503173, 1452.807128, 0.0, 52, false, 0, 0, -1961.384887, 441.804687, 35.171875, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Banco Las Venturas", INTERIOR_BANK_LV, -1, true, 15, 15, 2673.430908, -610.844604, -71.658203, 270.0, 52, false, 0, 0, 2474.557861, 1024.154052, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Gobierno San Andreas", INTERIOR_CITY_HALL_LS, -1, true, 1, 1, 920.2025, -1474.7396, 2754.3318, 0.0, 3, false, 0, 0, 1480.966918, -1772.065673, 18.795755, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Unity Station", INTERIOR_UNITY_STATION, -1, false, 0, 3, 1494.416015, 1303.681884, 1093.289062, 0.0, -1, false, 0, 0, 1752.603881, -1894.155883, 13.557376, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Camioneros", INTERIOR_TRUCK, -1, true, 25, 18, 1297.457031, -61.437820, 1002.498046, 180.0, -1, false, 0, 0, -510.699890, -539.409118, 25.523437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía Los Santos", INTERIOR_POLICE_LS, -1, false, 1, 1, 1561.2817, -1674.4030, 19.8381, 271.4333, 30, false, 0, 0, 1550.5962, -1672.5985, 13.5579, 89.2858, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía San Fierro", INTERIOR_POLICE_SF, -1, false, 0, 10, 246.425857, 107.400123, 1003.218750, 0.0, 30, false, 0, 0, -1605.511840, 710.382507, 13.867187, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía Las Venturas", INTERIOR_POLICE_LV, -1, false, 0, 3, 238.758178, 138.726867, 1003.023437, 0.0, 30, false, 0, 0, 2287.059082, 2432.260742, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Club Alhambra", INTERIOR_ALHAMBRA, -1, false, 0, 17, 493.487731, -24.662528, 1000.679687, 0.0, 48, false, 0, 0, 1836.876586, -1682.407104, 13.329626, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía Los Santos", INTERIOR_POLICE_GARAGE, -1, false, 1, 1, 1571.8660, -1679.0662, 19.8381, 30.8891, -1, false, 0, 0, 1621.5770, -1654.2692, 4.1634, 90.2525, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID}, // garaje lspd
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía San Fierro", INTERIOR_POLICE_GARAGE, -1, false, 0, 10, 278.369232, 117.561325, 1004.617187, 90.0, -1, false, 0, 0, -1594.110107, 716.163024, -4.906250, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID}, // garaje lspd
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Policía Las Venturas", INTERIOR_POLICE_GARAGE, -1, false, 0, 3, 231.671142, 181.048477, 1003.031250, 90.0, -1, false, 0, 0, 2282.221923, 2423.218505, 3.476562, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID}, // garaje lspd
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 1, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	2034.197875, -1403.040039, 17.294845, 180.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 2, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	1172.832763, -1323.269531, 15.400051, 270.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 3, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	1242.235595, 328.113281, 19.755510, 0.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 4, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	-2201.566162, -2307.610839, 30.625000, 320.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 5, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	-2655.108886, 639.278625, 14.453125, 180.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 6, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	-318.812774, 1050.359130, 20.340259, 0.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 7, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	-1514.855590, 2520.366699, 55.909828, 0.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 8, 3, -2029.700683, -119.617759, 1035.171875, 0.0, 22, false, 0, 0,	1583.311401, 1768.952758, 10.820312, 90.0	, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Club", INTERIOR_CLUB, -1, false, 0, 3, 1212.160522, -26.097007, 1000.953125, 180.0, 21, false, 0, 0, 693.761047, 1967.498168, 5.539062, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Farmacia", INTERIOR_PHARMACY,  -1, false, 1, 1, -429.8470, -1729.5017, 2244.3611, 355.0, 22, false, 0, 0,	2063.144531, -1897.216918, 13.553800, 350.875305, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Farmacia", INTERIOR_PHARMACY,  -1, false, 2, 1, -429.8470, -1729.5017, 2244.3611, 355.0, 22, false, 0, 0,	2352.009277, -1412.268188, 23.992412, 273.470184, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Farmacia", INTERIOR_PHARMACY,  -1, false, 3, 1, -429.8470, -1729.5017, 2244.3611, 355.0, 22, false, 0, 0,	984.542358, -1131.203247, 23.820327, 359.603851, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Farmacia", INTERIOR_PHARMACY,  -1, false, 4, 1, -429.8470, -1729.5017, 2244.3611, 355.0, 22, false, 0, 0,	1284.649047, -1585.623779, 13.546875, 155.803787, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Mercado Negro", INTERIOR_BLACK_MARKET,  -1, false, 1, 1, -730.4490, 1449.3657, -90.4973, 260.0, -1, false, 0, 0, 2770.6680, -1628.6982, 12.1775, 2.3955, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID},
	{-1, false, 0, INVALID_ACTOR_ID, -1, Text:INVALID_TEXT_DRAW, 0, -1, 0.0, -1, "Mercado Negro", INTERIOR_BLACK_MARKET,  -1, false, 2, 1, -730.4490, 1449.3657, -90.4973, 260.0, -1, false, 0, 0, 2494.0979, -1464.7142, 24.0255, 355.8577, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, INVALID_OBJECT_ID}
};

enum enum_JAIL_POSITIONS
{
	jail_INT,
	Float:jail_X,
	Float:jail_Y,
	Float:jail_Z,
	Float:jail_ANGLE,
	jail_INTERIOR,
}
new JAIL_POSITIONS[][enum_JAIL_POSITIONS] = 
{
	{INTERIOR_POLICE_LS, 1571.8126, -1662.1216, 19.8381, 88.8908, 1}, //jaills
	{INTERIOR_POLICE_SF, 215.681945, 110.177680, 999.015625, 0.0, 10}, //jailsf
	{INTERIOR_POLICE_LV, 197.925323, 174.997573, 1003.023437, 0.0, 3} //jaillv
};

enum BUY_PROPERTIES_SITES_INFO
{
	site_INTERIOR_TYPE,
	Float:site_X,
	Float:site_Y,
	Float:site_Z,
	site_WORLD,
	site_INTERIOR,
}
new BUY_PROPERTIES_SITES[][BUY_PROPERTIES_SITES_INFO] =
{
	{INTERIOR_BANK_LS, 1396.613403, 1320.551635, 1501.090698, 5, 5},
	{INTERIOR_BANK_SF, 1116.351684, 1540.468750, 1451.827148, 10, 10},
	{INTERIOR_BANK_LV, 2681.990966, -615.470520, -71.658203, 15, 15}
};

enum
{
	PRODUCT_TYPE_NONE,
	PRODUCT_TYPE_FOOD,
	PRODUCT_TYPE_DRINK,
	PRODUCT_TYPE_PHONE,
	PRODUCT_TYPE_GPS,
	PRODUCT_TYPE_PHONE_RESOLVER,
}
enum Supermarket_Enum
{
	product_TYPE,
	product_NAME[24],
	product_PRICE,
	Float:product_HUNGRY,
	Float:product_THIRST,
	product_DRUNK,
	product_AMOUNT
}
new Supermarket_Product_List[][Supermarket_Enum] =  
{
	{PRODUCT_TYPE_PHONE, "Teléfono", 2500, 0.0, 0.0, 0, 0},
	{PRODUCT_TYPE_PHONE_RESOLVER, "Guía telefonica", 1500, 0.0, 0.0, 0, 0},
	{PRODUCT_TYPE_GPS, "Localizador GPS", 500, 0.0, 0.0, 0, 0},
	{PRODUCT_TYPE_FOOD, "Snacks", 25, 1.2, 0.2, 0, 6},
	{PRODUCT_TYPE_DRINK, "Agua mineral", 50, 0.0, 2.3, 0, 1}
};


enum Clothing_Shop_Info
{
	clothing_shop_INTERIOR_TYPE,
	clothing_shop_NAME[24],
	Float:clothing_shop_X,
	Float:clothing_shop_Y,
	Float:clothing_shop_Z,
	Float:clothing_shop_ANGLE,
	clothing_shop_INTERIOR,
}
new Clothing_Shop_Positions[][Clothing_Shop_Info] =  
{ 
	{INTERIOR_BINCO, "Binco", 207.733657, -100.633468, 1005.257812, 180.0, 15}, //Binco
	{INTERIOR_VIPBURBAN, "SubUrban", 203.905395, -43.450450, 1001.804687, 180.0, 1}, //SubUrban
	{INTERIOR_PROLAPS, "ProLaps", 207.049148, -129.177581, 1003.507812, 180.0, 3}, //prolaps
	{INTERIOR_DIDIER_SACHS, "Didier Sachs", 204.348281, -159.493728, 1000.523437, 180.0, 14}, //Didier
	{INTERIOR_VICTIM, "Victim", 206.374328, -7.241514, 1001.210937, 270.0, 5}, //Victim
	{INTERIOR_ZIP, "ZIP", 161.443634, -83.589271, 1001.804687, 180.0, 18} //Zip
};


enum Fast_Food_Info
{
	fast_food_INTERIOR_TYPE,
	fast_food_NAME[24],
	Float:fast_food_X,
	Float:fast_food_Y,
	Float:fast_food_Z,
	fast_food_INTERIOR,
}
new Fast_Food_Positions[][Fast_Food_Info] =
{
	{INTERIOR_BURGER_SHOT, "Burger Shot", 375.913238, -67.435272, 1001.507812, 10}, // BurgerShot
	{INTERIOR_PIZZA, "Well Stacked Pizza", 375.254730, -118.804710, 1001.499511, 5}, //Pizza
	{INTERIOR_CLUCKIN_BELL, "Cluckin Bell", 368.757904, -6.018908, 1001.851562, 9} //Cluckin Bell
};

enum atm_bank_info
{
	atm_modelid,
	Float:atm_X,
	Float:atm_Y,
	Float:atm_Z,
	Float:atm_RX,
	Float:atm_RY,
	Float:atm_RZ
}
new ATM_BANK[][atm_bank_info] = 
{
	{2754, 2833.38672, 2402.91553, 10.93546,   0.00000, 0.00000, 131.44171},
	{2754, 2088.78442, 1510.00574, 10.69234,   0.00000, 0.00000, 45.39682},
	{2754, 1662.92346, 1723.03162, 10.53258,   0.00000, 0.00000, 90.27153},
	{2754, -16.17070, 1219.33813, 19.17369,   0.00000, 0.00000, 179.53238},
	{2754, -1505.91687, 2612.09058, 55.63910,   0.00000, 0.00000, 178.85609},
	{2754, -2540.67188, 2340.96143, 4.79166,   0.00000, 0.00000, 90.97625},
	{2754, -1690.23547, 1327.11902, 7.04427,   0.00000, 0.00000, 43.44909},
	{2754, -1980.48608, 155.24883, 27.49554,   0.00000, 0.00000, 359.06995},
	{2754, -2631.60693, -6.86652, 5.97444,   0.00000, 0.00000, 181.99303},
	{2754, -2146.54395, -2332.90283, 30.43888,   0.00000, 0.00000, 232.48808},
	{2754, 574.90155, -1419.96509, 14.22211,   0.00000, 0.00000, 283.89526},
	{2754, 1227.24524, -1428.54846, 13.29063,   0.00000, 0.00000, 269.20294},
	{2754, 1810.57153, -1873.97852, 13.38759,   0.00000, 0.00000, 180.44339},
	{2754, 1493.07471, -1022.08618, 23.63997,   0.00000, 0.00000, 91.19178},
	{2754, 2330.78149, 81.79469, 26.33336,   0.00000, 0.00000, 269.20883},
	{2754, 711.71503, -542.69287, 16.04271,   0.00000, 0.00000, 180.17184},
	{2754, 242.68755, -54.72442, 1.31352,   0.00000, 0.00000, 0.00000},
	{2754, 1381.12219, 233.81693, 19.28907,   0.00000, 0.00000, 154.79193}
};

#define MAX_BANK_TRANSACTIONS_DIALOG	20
enum
{
	BANK_TRANSACTION_WITHDRAW,
	BANK_TRANSACTION_DEPOSIT,
	BANK_TRANSACTION_TRANSFER,
	BANK_TRANSACTION_CREATE_ACCOUNT,
	BANK_TRANSACTION_BUY_PROPERTY,
	BANK_TRANSACTION_SOLD_PROPERTY,
	BANK_TRANSACTION_BUY_VEHICLE,
	BANK_TRANSACTION_SOLD_VEHICLE
};
enum Bank_Interior_Info
{
	bank_INTERIOR_TYPE,
	Float:bank_X,
	Float:bank_Y,
	Float:bank_Z,
	bank_WORLD,
	bank_INTERIOR,
}
new Bank_Interior_Positions[][Bank_Interior_Info] =
{
	{INTERIOR_BANK_LS, 1407.356201, 1320.171142, 1501.083984, 5, 5},
	{INTERIOR_BANK_SF, 1105.033935, 1529.565795, 1452.480957, 10, 10},
	{INTERIOR_BANK_LV, 2690.869628, -610.943664, -71.658203, 15, 15}
};

enum Food_Info
{
	food_NAME[24],
	food_PRICE,
	Float:food_HUNGRY,
	Float:food_THIRST,
}
new PIZZA_FOOD[][Food_Info] =
{
	{"Pizza de verduras", 25, 10.0, -0.1},
	{"Pizza de jamon y queso", 60, 16.0, -0.1},
	{"Pizza barbacoa", 40, 15.0, -0.1},
	{"Pizza 4 quesos", 55, 14.0, -0.1},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};
new BURGER_SHOT_FOOD[][Food_Info] =
{
	{"Hamburguesa de ternera", 60, 16.0, -0.1},
	{"Hamburguesa de pollo", 80, 10.0, -0.1},
	{"Hamburguesa especial", 60, 12.0, -3.0},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};
new CLUCKIN_BELL_FOOD[][Food_Info] =
{
	{"Alitas de pollo", 60, 16.0, -0.1},
	{"Plato especial", 80, 18.0, -2.0},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};

new 
Binco_Shop_Male_Skins[][] =  
{
	/* BINCO - HOMBRE */
	{4, 75      , 0},
	{5, 75      , 0},
	{6, 90      , 0},
	{7, 80      , 0},
	{21, 121    , 0},
	{44, 65     , 0},
	{47, 119    , 0},
	{101, 149   , 0},
	{127, 89    , 0},
	{128, 25    , 0},
	{134, 25    , 0},
	{135, 25    , 0},
	{137, 19    , 0},
	{160, 55    , 0},
	{161, 68    , 0},
	{168, 39    , 0},
	{176, 79    , 0},
	{177, 65    , 0},
	{179, 110   , 0},
	{184, 150   , 0},
	{188, 160   , 0},
	{200, 15    , 0},
	{212, 30    , 0},
	{230, 10    , 0},
	{258, 69    , 0},
	{259, 69    , 0},
	{262, 50	, 0},
	{86, 70		, 0},
	{102, 100	, 0},
	{103, 100	, 0},
	{104, 100	, 0},
	{105, 100	, 0},
	{106, 100	, 0},
	{107, 100	, 0},
	{108, 100	, 0},
	{109, 100	, 0},
	{110, 100	, 0},
	{111, 100	, 0},
	{112, 100	, 0},
	{113, 100	, 0},
	{114, 100	, 0},
	{115, 100	, 0},
	{116, 100	, 0},
	{117, 100	, 0},
	{118, 100	, 0},
	{119, 100	, 0},
	{120, 100	, 0},
	{121, 100	, 0},
	{122, 100	, 0},
	{123, 100	, 0},
	{124, 100	, 0},
	{125, 100	, 0},
	{126, 100	, 0}
},

Binco_Shop_Female_Skins[][] =  
{
	/* BINCO - MUJER */
	{13, 120   , 0},
	{41, 59    , 0},
	{56, 190   , 0},
	{65, 110   , 0},
	{69, 100   , 0},
	{75, 50    , 0},
	{89, 69    , 0},
	{151, 89   , 0},
	{152, 3000 , 0},
	{207, 500  , 0},
	{226, 120  , 0},
	{298, 900  , 0}
},

Suburban_Shop_Male_Skins[][] =  
{
	/* SUBURBAN - HOMBRE */
	{2, 100   , 0},
	{3, 140   , 0},
	{20, 190  , 0},
	{43, 180  , 0},
	{48, 145  , 0},
	{60, 250  , 0},
	{100, 300 , 0},
	{112, 200 , 0},
	{119, 49  , 0},
	{143, 199 , 0},
	{180, 150 , 0},
	{183, 100 , 0},
	{184, 140 , 0},
	{241, 200 , 0},
	{242, 190 , 0},
	{247, 450 , 0},
	{248, 499 , 0},
	{249, 650 , 0},
	{264, 5   , 0}
},

Suburban_Shop_Female_Skins[][] =  
{
	/* SUBURBAN - MUJER */
	{39, 109  , 0},
	{56, 100  , 0},
	{88, 140  , 0},
	{131, 200 , 0},
	{195, 199 , 0}
},

Prolaps_Shop_Male_Skins[][] =  
{
	/* PROLAPS - HOMBRE */
	{29, 129  , 0},
	{36, 140  , 0},
	{37, 150  , 0},
	{51, 160  , 0},
	{52, 170  , 0},
	{96, 200  , 0},
	{99, 700  , 0},
	{206, 499 , 0},
	{154, 199 , 0}
},

Prolaps_Shop_Female_Skins[][] =  
{
	/* PROLAPS - MUJER */
	{41, 199 , 0},
	{90, 250 , 0},
	{92, 860 , 0},
	{138, 150, 0},
	{139, 150, 0},
	{140, 159, 0},
	{190, 150, 0},
	{192, 180, 0},
	{193, 195, 0}
},

Didier_Shop_Male_Skins[][] =  
{
	/* DIDIER - HOMBRE */
	{17, 1500  , 0},
	{46, 1900  , 0},
	{57, 1220  , 0},
	{82, 3400  , 0},
	{83, 3400  , 0},
	{84, 3400  , 0},
	{124, 3500 , 0},
	{147, 6000 , 0},
	{163, 3000 , 0},
	{166, 3000 , 0},
	{171, 4000 , 0},
	{187, 4500 , 0},
	{223, 3100 , 0},
	{240, 1500 , 0},
	{295, 3000 , 0}
},

Didier_Shop_Female_Skins[][] =  
{
	/* DIDIER - MUJER */
	{11, 1500  , 0},
	{12, 3000  , 0},
	{40, 2500  , 0},
	{91, 8000  , 0},
	{141, 3500 , 0},
	{169, 4000 , 0},
	{172, 2100 , 0},
	{194, 2000 , 0},
	{214, 25000, 0},
	{215, 3200 , 0},
	{216, 10500, 0},
	{219, 9500 , 0}
},

Victim_Shop_Male_Skins[][] =  
{
	/* VICTIM - HOMBRE */
	{19, 400   , 0},
	{46, 1200  , 0},
	{59, 900   , 0},
	{72, 599   , 0},
	{73, 699   , 0},
	{98, 339   , 0},
	{121, 200  , 0},
	{170, 500  , 0},
	{185, 400  , 0},
	{186, 900  , 0},
	{188, 350  , 0},
	{221, 700  , 0},
	{223, 1200 , 0},
	{250, 50000, 0},
	{289, 699  , 0},
	{299, 700  , 0},
	{303, 500  , 0},
	{304, 700  , 0}
},

Victim_Shop_Female_Skins[][] =  
{
	/* VICTIM - MUJER */
	{12, 2900  , 0},
	{40, 3000  , 0},
	{55, 1010  , 0},
	{56, 400   , 0},
	{192, 3000 , 0},
	{211, 3500 , 0},
	{226, 600  , 0},
	{233, 900  , 0}
},

Zip_Shop_Male_Skins[][] =  
{
	/* ZIP - HOMBRE */
	{121, 190  , 0},
	{170, 500  , 0},
	{185, 400  , 0},
	{186, 900  , 0},
	{19, 400   , 0},
	{46, 1200  , 0},
	{59, 905   , 0},
	{72, 400   , 0},
	{73, 650   , 0},
	{98, 320   , 0},
	{250, 49999, 0},
	{289, 622  , 0},
	{299, 730  , 0},
	{303, 550  , 0},
	{188, 350  , 0},
	{221, 700  , 0},
	{223, 1200 , 0},
	{304, 700  , 0}
},

Zip_Shop_Female_Skins[][] =  
{
	/* ZIP - MUJER */
	{56, 405    , 0},
	{192, 3010  , 0},
	{211, 3520  , 0},
	{226, 620   , 0},
	{233, 950   , 0},
	{12, 2904   , 0},
	{40, 3002   , 0},
	{55, 1011   , 0}
};

enum
{
	PICKUP_TYPE_NONE = 0,
	PICKUP_TYPE_ENTER_EXIT,
	PICKUP_TYPE_ATM,
	PICKUP_TYPE_PROPERTY,
	PICKUP_TYPE_CLOTHING_SHOP,
	PICKUP_TYPE_FAST_FOOD,
	PICKUP_TYPE_BANK,
	PICKUP_TYPE_BUY_PROPERTY,
	PICKUP_TYPE_PRODUCT_LIST,
	PICKUP_TYPE_CITYHALL_OPTIONS,
	PICKUP_TYPE_POLICE_WORK,
	PICKUP_TYPE_EQUIPMENT,
	PICKUP_TYPE_OBTAIN_WORK,
	PICKUP_TYPE_HELP,
	PICKUP_TYPE_FUELSTATION,
	PICKUP_TYPE_PHARMACY,
	PICKUP_TYPE_ELEVATOR,
	PICKUP_TYPE_DRIVING_EXAM,
	PICKUP_TYPE_DS_VEHICLE,
	PICKUP_TYPE_DS_BRIBE,
	PICKUP_TYPE_BLACK_MARKET,
	PICKUP_TYPE_POLICE_VEHICLES,
	PICKUP_TYPE_POLICE_AIR_VEHICLE
};

enum Fuel_Stations_Info
{
	Float:fs_X,
	Float:fs_Y,
	Float:fs_Z
};
new Fuel_Stations[][Fuel_Stations_Info] =
{
	{1942.679443, -1771.374511, 13.390598},
	{654.678710, -570.627807, 16.335937},
	{1384.011962, 457.825012, 19.995258},
	{-1669.027221, 411.541076, 7.179687},
	{-2409.644042, 976.147644, 45.307708},
	{-1328.633666, 2675.913818, 50.062500},
	{612.890563, 1692.938720, 6.992187},
	{-1607.715820, -2717.499023, 48.539062},
	{2146.831542, 2743.855224, 10.820312},
	{2197.993408, 2475.015625, 10.820312},
	{2115.124267, 926.094909, 10.960937},
	{1595.974731, 2193.016845, 10.820312},
	{-1477.559326, 1858.962524, 32.639846},
	{-98.757804, -1172.726440, 2.428447}
};

enum E_HOSPITAL_SPAWN_INFO
{
	Float:hspX,
	Float:hspY,
	Float:hspZ,
	Float:hspANGLE,
}

new Hospital_Spawn_Positions[][E_HOSPITAL_SPAWN_INFO] =  
{ 
	{2034.197875, -1403.040039, 17.294845, 180.0},
	{1172.832763, -1323.269531, 15.400051, 270.0},
	{1242.235595, 328.113281, 19.755510, 0.0},
	{-2201.566162, -2307.610839, 30.625000, 320.0},
	{-2655.108886, 639.278625, 14.453125, 180.0},
	{-318.812774, 1050.359130, 20.340259, 0.0},
	{-1514.855590, 2520.366699, 55.909828, 0.0},
	{1583.311401, 1768.952758, 10.820312, 90.0}
};

/* TEXTDRAWS */
#define MAX_PLAYER_MAP_GPS_POINTS 20
#define HUD_PTEXTDRAWS_SIZE 3
enum Player_Textdraws_Enum
{
	PlayerText:ptextdraw_CLOTHING_SHOP[6],
	PlayerText:ptextdraw_PROPERTY_CONSTRUCTOR[6],
	PlayerText:ptextdraw_TRUCK_LOAD[4],
	PlayerText:ptextdraw_RECYCLE_TRASH[3],
	PlayerText:ptextdraw_PLAYER_GPS_MAP[MAX_PLAYER_MAP_GPS_POINTS],
	PlayerText:ptextdraw_HUD[HUD_PTEXTDRAWS_SIZE]
}
new PlayerTextdraws[MAX_PLAYERS][Player_Textdraws_Enum];

#define map_td_X 3.0
#define map_td_Y 134.0
#define map_td_SIZE_X 175.0
#define map_td_SIZE_Y 190.0

#define HUD_TEXTDRAWS_SIZE 3
#define LOAD_SCREEN_TEXTDRAWS_SIZE 4
enum Textdraws_Enum
{
	Text:textdraw_PLAYER_REP_BACK[2],
	Text:textdraw_LOAD_SCREEN[LOAD_SCREEN_TEXTDRAWS_SIZE],
	Text:textdraw_SERVER_TIME,
	Text:textdraw_TERRITORY_BOX,
	Text:textdraw_HUD[HUD_TEXTDRAWS_SIZE],
	Text:textdraw_PLAY[4],
	Text:textdraw_GENDER[10],
	Text:textdraw_SAFE_ZONE,
	Text:textdraw_SERVER_MARK
}
new Textdraws[Textdraws_Enum];

enum E_PBARS
{
	PlayerBar:pbHEALTH
};
new PlayerBars[MAX_PLAYERS][E_PBARS];

#define MIN_PASS_LENGTH	6
#define MAX_PASS_LENGTH	18

enum enum_PI
{
	pID,
	pNAME[24],
	pIP[16],
	pEMAIL[32],
	pPASS[65],
	pREG_DATE[24],
	pLAST_CONNECTION[24],
	pLAST_CONNECTION_TIMESTAMP,
	pTIME_PLAYING,
	pLEVEL,
	pREP,
	pCONNECTED,
	pPLAYERID,
	pDOUBT_CHANNEL,
	pTIME_FOR_REP,
	pADMIN_LEVEL,
	pPAYDAY_REP,
	pVIP,
	pVIP_EXPIRE_DATE[24],
	pCOINS,
	pSKIN,
	pCASH,
	Float:pPOS_X,
	Float:pPOS_Y,
	Float:pPOS_Z,
	Float:pANGLE,
	pSTATE,
	pINTERIOR,
	pLOCAL_INTERIOR,
	pFIGHT_STYLE,
	Float:pHEALTH,
	Float:pARMOUR,
	pGENDER,
	Float:pHUNGRY,
	Float:pTHIRST,
	pWANTED_LEVEL,
	pPOLICE_JAIL_TIME,
	pPOLICE_DUTY,
	pPOLICE_JAIL_ID,
	pDRIVE_LICENSE_POINTS,
	pBANK_ACCOUNT,
	pBANK_MONEY,
	pPHONE_NUMBER,
	pPHONE_STATE,
	pPHONE_VISIBLE_NUMBER,
	pGPS,
	pPHONE_RESOLVER,
	pMECHANIC_PIECES,
	pFUEL_DRUM,
	pSEED_MEDICINE,
	pSEED_CANNABIS,
	pSEED_CRACK,
	pMEDICINE,
	pCANNABIS,
	pCRACK,
	pCONFIG_SOUNDS,
	pCONFIG_AUDIO,
	pCONFIG_ADMIN,
	pMUTE,
	pPLACA_PD,
	pCREW,
	pCREW_RANK,
	pMECHANIC_KITS,
	pMEDICAL_KITS,
	pCONFIG_GLOBAL,
	pGLOBAL_MUTE,
	pBLACK_CASH,
	pDISCORD_USERID[DCC_ID_SIZE],
	pPHARMACY_TIMER
};
new PI[MAX_PLAYERS][enum_PI];

forward OnPlayerRegister(playerid);
forward OnPlayerLogin(playerid);

new 
	DIALOG_FOOD_PIZZA_String[800],
	DIALOG_FOOD_CLUCKIN_String[800],
	DIALOG_FOOD_BURGER_String[800],
	DIALOG_247_LIST_String[34 + 55 * sizeof Supermarket_Product_List],
	DIALOG_ANIMS_String[1000],
	DIALOG_PLAYER_GPS_SITE_7_String[90 * (sizeof(SELL_VEHICLES_SHOPS_SPAWN) + 1)],
	DIALOG_CREATE_CREW_COLOR_String[4200],
	DIALOG_CREDIT_String[2000]
;

// PLAYER WEAPONS
#define NO_WEAPON 0
enum enum_WEAPON_INFO
{
	bool:weapon_info_SPECIAL,
	bool:weapon_info_AC_CBUG,
	bool:weapon_info_ANTI_CHEAT,
	bool:weapon_info_AMMO,
	weapon_info_TYPE,
	weapon_info_NAME[32],
	weapon_info_SLOT,
	weapon_info_SHOT_TIME,
	weapon_info_MODEL,
	bool:weapon_info_DROP
}
new WEAPON_INFO[][enum_WEAPON_INFO] = 
{
	{false, false, false, false, NO_WEAPON, "Nada", 0, 250, -1, false},
	{false, false, true, false, WEAPON_BRASSKNUCKLE, "Manopla", 0, 250, 331, true},
	{false, false, true, false, WEAPON_GOLFCLUB, "Palo de golf", 1, 250, 333, true},
	{false, false, true, false, WEAPON_NITESTICK, "Porra", 1, 250, 334, false},
	{false, false, true, false, WEAPON_KNIFE, "Cuchillo", 1, 250, 335, true},
	{false, false, true, false, WEAPON_BAT, "Bate", 1, 250, 336, true},
	{false, false, true, false, WEAPON_SHOVEL, "Pala", 1, 250, 337, true},
	{false, false, true, false, WEAPON_POOLSTICK, "Taco", 1, 250, 338, true},
	{false, false, true, false, WEAPON_KATANA, "Katana", 1, 250, 339, true},
	{false, false, true, false, WEAPON_CHAINSAW, "Motosierra", 1, 30, 341, true},
	{false, false, true, false, WEAPON_DILDO, "Dildo morado", 10, 250, 321, true},
	{false, false, true, false, WEAPON_DILDO2, "Dildo", 10, 250, 322, true},
	{false, false, true, false, WEAPON_VIBRATOR, "Vibrador", 10, 250, 323, true},
	{false, false, true, false, WEAPON_VIBRATOR2, "Vibrador plateado", 10, 250, 324, true},
	{false, false, true, false, WEAPON_FLOWER, "Flores", 10, 250, 325, true},
	{false, false, true, false, WEAPON_CANE, "Baston", 10, 250, 326, true},
	{false, false, true, true, WEAPON_GRENADE, "Granada", 8, 500, 342, true},
	{false, false, true, true, WEAPON_TEARGAS, "Gas lacrimogeno", 8, 500, 343, true},
	{false, false, true, true, WEAPON_MOLTOV, "Cocktail Molotov", 8, 500, 344, true},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1, false},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1, false},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1, false},
	{false, true, true, true, WEAPON_COLT45, "9mm", 2, 160, 346, true},
	{false, true, true, true, WEAPON_SILENCED, "9mm silenciada", 2, 120, 347, true},
	{false, true, true, true, WEAPON_DEAGLE, "Desert Eagle", 2, 950, 348, true},
	{false, true, true, true, WEAPON_SHOTGUN, "Escopeta", 3, 800, 349, true},
	{false, true, true, true, WEAPON_SAWEDOFF, "Escopeta recortada", 3, 120, 350, true},
	{false, true, true, true, WEAPON_SHOTGSPA, "Escopeta de combate", 3, 120, 351, true},
	{false, true, true, true, WEAPON_UZI, "Micro UZI", 4, 70, 352, true},
	{false, true, true, true, WEAPON_MP5, "MP5", 4, 70, 353, true},
	{false, true, true, true, WEAPON_AK47, "Ak-47", 5, 80, 355, true},
	{false, true, true, true, WEAPON_M4, "M4", 5, 80, 356, true},
	{false, true, true, true, WEAPON_TEC9, "TEC-9", 4, 70, 372, true},
	{false, true, true, true, WEAPON_RIFLE, "Rifle", 6, 1000, 357, true},
	{false, true, true, true, WEAPON_SNIPER, "Sniper", 6, 1000, 358, true},
	{false, true, true, true, WEAPON_ROCKETLAUNCHER, "Lanzacohetes RPG", 7, 1000, 359, true},
	{false, true, true, true, WEAPON_HEATSEEKER, "Lanzacohetes HS", 7, 1000, 360, true},
	{false, true, true, true, WEAPON_FLAMETHROWER, "Lanzallamas", 7, 500, 361, true},
	{false, true, true, true, WEAPON_MINIGUN, "Minigun", 7, 0, 362, false},
	{false, false, true, true, WEAPON_SATCHEL, "Bomba detonadora", 8, 500, 363, false},
	{false, false, false, false, WEAPON_BOMB, "Detonador", 12, 500, 364, false},
	{false, false, true, true, WEAPON_SPRAYCAN, "Bote de spray", 9, 10, 365, true},
	{false, false, true, true, WEAPON_FIREEXTINGUISHER, "Extintor", 9, 10, 366, true},
	{false, false, true, false, WEAPON_CAMERA, "Cámara", 9, 500, 367, true},
	{false, false, true, false, NO_WEAPON, "Gafas de vision nocturna", 11, 0, 368, false},
	{false, false, true, false, NO_WEAPON, "Gafas térmicas", 11, 0, 369, false},
	{false, false, false, false, WEAPON_PARACHUTE, "Paracaídas", 11, 0, 371, true}
};

#define NULL ""
#define NONE -1

enum
{
	BLACK_MARKET_TYPE_WEAPON
}

enum enum_BLACK_MARKT_ARTICLES
{
	black_market_ARTICLE_NAME[24],
	black_market_WEAPON_ID,
	black_market_ARTICLE_PRICE,
	black_market_TYPE
}
new BLACK_MARKT_ARTICLES[][enum_BLACK_MARKT_ARTICLES] = 
{
	{NULL, 22, 1500, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 23, 1500, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 24, 5000, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 25, 15000, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 27, 30000, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 29, 45000, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 30, 25000, BLACK_MARKET_TYPE_WEAPON},
	{NULL, 31, 50000, BLACK_MARKET_TYPE_WEAPON}
};

enum enum_PLAYER_WEAPONS
{
	bool:player_weapon_VALID,
	player_weapon_DB_ID,
	player_weapon_ID,
	player_weapon_AMMO,
}
new PLAYER_WEAPONS[MAX_PLAYERS][20][enum_PLAYER_WEAPONS];


enum
{
	TYPE_WARNING,
	TYPE_KICK,
	TYPE_BAN,
	TYPE_TEMP_BAN,
	TYPE_UNBAN
}

enum
{
	CMD_USER,
	CMD_HELPER,
	CMD_MODERATOR,
	CMD_GLOBAL_MODERATOR,
	CMD_ADMINISTRATOR,
	CMD_OWNER,
	CMD_DISABLED,
}
new ADMIN_LEVELS[][] = 
{
	"Ciudadano",
	"Ayudante",
	"Moderador",
	"Moderador Global",
	"Administrador",
	"Comunity Manager"
};

public OnPlayerConnect(playerid)
{
	//if(IsPlayerNPC(playerid)) Kick(playerid);
	ClearPlayerTempData(playerid);

	PlayerTemp[playerid][pt_GAME_STATE] = GAME_STATE_CONNECTED;
	PlayerTemp[playerid][pt_INTERIOR_INDEX] = -1;
	PlayerTemp[playerid][pt_PROPERTY_INDEX] = -1;
	PlayerTemp[playerid][pt_CLOTHING_SHOP] = -1;
	PlayerTemp[playerid][pt_HUD_TEXTDRAWS] = false;
	PlayerTemp[playerid][pt_SEE_ACMD_LOG] = true;
	PlayerTemp[playerid][pt_SEE_AC_LOG] = true;
	PlayerTemp[playerid][pt_SEE_ADM_LOG] = true;
	PlayerTemp[playerid][pt_SEE_ADM_CHAT] = true;
	PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
	PlayerTemp[playerid][pt_KNOCK_PLAYER_ID] = INVALID_PLAYER_ID;
	PlayerTemp[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] = INVALID_PLAYER_ID;
	PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PlayerTemp[playerid][pt_LAST_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	PlayerTemp[playerid][pt_REQUEST_HELP] = false;
	PlayerTemp[playerid][pt_COMBAT_TIMER] = -1;
	PlayerTemp[playerid][pt_COMBAT] = false;
	PlayerTemp[playerid][pt_DIALOG_ID] = -1;
	PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] = -1;
	PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
	PlayerTemp[playerid][pt_TIMERS][23] = -1;
	pTemp(playerid)[pt_TASER_GUN] = false;
	pTemp(playerid)[pt_TASSED] = -1;
	pTemp(playerid)[pt_TASSED_TIME] = 0;
	PlayerTemp[playerid][pt_HAND_POCKET] = -1;
	/*pTemp(playerid)[pt_VOICE_PLUGIN] = SvGetVersion(playerid);
	pTemp(playerid)[pt_VOICE_MICROPHONE] = SvHasMicro(playerid);*/
	//pTemp(playerid)[pt_LOCAL_CHANNEL] = SV_NULL;
	for(new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++) TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;
	if(IsValidDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]))
	{
		DestroyDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]);
		PlayerTemp[playerid][pt_PLAYER_NAMETAG] = Text3D:INVALID_STREAMER_ID;
	}

	GetPlayerName(playerid, PlayerTemp[playerid][pt_NAME], 24);
	GetPlayerIp(playerid, PlayerTemp[playerid][pt_IP], 16);
	
	EnablePlayerCameraTarget(playerid, true);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	TogglePlayerControllableEx(playerid, true);
	HidePlayerDialog(playerid);
	ResetPlayerMoney(playerid);
	CancelSelectTextDrawEx(playerid);
	SetPlayerScore(playerid, 0);
	ResetPlayerWeapons(playerid);
	SetPlayerNormalColour(playerid);
	CancelEdit(playerid);
	TogglePlayerClock(playerid, false);

	if(IsPlayerHaveAutoaim(playerid))
	{
		PlayerTemp[playerid][pt_USER_VALID_NAME] = false;
		ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", "{d1d1d1}Bienvenido, has entrado a un servidor de rol.\n\nTienes una configuracion prohibida que esta activa actualmente\nPor favor desactive el auto apuntado y vuelve a ingresar.", "Salir", "");
		KickEx(playerid, 500);
	}
	else if(!IsValidRPName(PlayerTemp[playerid][pt_NAME]))
	{
		PlayerTemp[playerid][pt_USER_VALID_NAME] = false;
		ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", "{d1d1d1}Bienvenido, has entrado a un servidor de rol.\n\nTu nombre no cumple con el formato necesario.\nPor favor utilice el formato: Nombre_Apellido.", "Salir", "");
		KickEx(playerid, 500);
	}
	else
	{
		PlayerTemp[playerid][pt_USER_VALID_NAME] = true;
		SetRolePlayNames(playerid);

		if(GetNumberOfPlayersOnThisIP(PlayerTemp[playerid][pt_IP]) > 3)
		{
			ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", "Ha sido expulsado por exceder el máximo de conexiones desde una IP.", "Salir", "");
			KickEx(playerid, 500);
		}
		else
		{
			PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] = SetTimerEx("KickPlayer", LOGIN_TIME, false, "i", playerid);

			SendMessage(playerid, "Cargando...");

			CreatePlayerTextDraws(playerid);
			CreatePlayerBars(playerid);
			SetPiDefaultValues(playerid);
		}
	}
	return 1;
}

/*public SV_VOID:OnPlayerActivationKeyPress(SV_UINT:playerid, SV_UINT:keyid)
{
	if(keyid == 0x5A && pTemp(playerid)[pt_LOCAL_CHANNEL]) SvAttachSpeakerToStream(pTemp(playerid)[pt_LOCAL_CHANNEL], playerid);
	return 1;
}

public SV_VOID:OnPlayerActivationKeyRelease(SV_UINT:playerid, SV_UINT:keyid)
{
	if(keyid == 0x5A && pTemp(playerid)[pt_LOCAL_CHANNEL]) SvDetachSpeakerFromStream(pTemp(playerid)[pt_LOCAL_CHANNEL], playerid);
	return 1;
}

stock CreatePlayerLocalVoice(playerid)
{
	if(pTemp(playerid)[pt_VOICE_PLUGIN] == 0) return SendMessage(playerid, "No se ha encontrado el plugin del chat de voz. /discord");
	if(pTemp(playerid)[pt_VOICE_MICROPHONE] == SV_FALSE) return SendMessage(playerid, "No se ha encontrado un microfono activo.");

	if((pTemp(playerid)[pt_LOCAL_CHANNEL] = SvCreateDLStreamAtPlayer(40.0, SV_INFINITY, playerid, 0xFFFFFFFF, "")))
	{
		if(IsPlayerUsingMobile(playerid)) SendClientMessage(playerid, PRIMARY_COLOR2, "[*] {ffffff}Manten presionado el boton {"#GOLD_COLOR"}Microfono{ffffff} para hablar por el chat de proximidad.");
		else SendClientMessage(playerid, PRIMARY_COLOR2, "[*] {ffffff}Manten presionada la tecla {"#GOLD_COLOR"}Z{ffffff} para hablar por el chat de proximidad.");
	}

	SvAddKey(playerid, 0x5A);
	return 1;
}*/

stock ErrorCommandParams(playerid, const params[])
{
	return SendInfoMessagef(playerid, "Error~n~~n~Te faltan algunos parametros para poder ejecutar este comando.~n~~n~~r~%s~w~~n~~n~", params[0]);
}

public CloseServer()
{
    SendRconCommand("exit");
}

public OnPlayerDisconnect(playerid, reason)
{
	for(new i = 0; i != MAX_TIMERS_PER_PLAYER; i++) KillTimer(PlayerTemp[playerid][pt_TIMERS][i]);

	if(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] != -1) {
		KillTimer(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER]);
		PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] = -1;
	}

	/*SvDeleteStream(pTemp(playerid)[pt_LOCAL_CHANNEL]);
	pTemp(playerid)[pt_LOCAL_CHANNEL] = SV_NULL;*/

	if(playerid, PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
	{
		if(PlayerTemp[playerid][pt_COMBAT])
		{
			new 
				str_text[190],
				price = minrand(500, 2000)
			;

			PlayerTemp[playerid][pt_COMBAT] = false;
			KillTimer(PlayerTemp[playerid][pt_COMBAT_TIMER]);
			PlayerTemp[playerid][pt_COMBAT_TIMER] = -1;

			GivePlayerCash(playerid, -price, true, true);
			GivePlayerBlackCash(playerid, -price, true, true);

			format(str_text, 190, "* %s ha perdido un poco de dinero por desconectarse en combate.", PlayerTemp[playerid][pt_NAME]);
			ProxDetector(playerid, 25.0, str_text, 0xDD4C4FFF, 0xDD4C4FFF, 0xDD4C4FFF, 0xDD4C4FFF, 0xDD4C4FFF, 85);
		}
	}

	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if(vehicleid)
		{
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_OCCUPIED] = false;
		}
	}

	if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
	{
		if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] == playerid) GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	}

	if(pTemp(playerid)[pt_VEHICLE_SPAWNED] != INVALID_VEHICLE_ID)
	{
		ClearVehicleGlobalInfo(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
		DestroyVehicleEx(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
		pTemp(playerid)[pt_VEHICLE_SPAWNED] = INVALID_VEHICLE_ID;
	}

	PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000 - PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP];
	PI[playerid][pTIME_FOR_REP] -= PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP];
	if(PI[playerid][pCREW]) CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL) PI[playerid][pPOLICE_JAIL_TIME] -= gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME];
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);

	DestroyPlayerCheckpoints(playerid);
	DestroyPlayerTextDraws(playerid);
	CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], false);

	if(PI[playerid][pID] != 0)
	{
		if(PlayerTemp[playerid][pt_USER_LOGGED]) //guardar datos solo si ha logeado
		{
			PI[playerid][pCONNECTED] = 0;
			PI[playerid][pPLAYERID] = 0;
			UpdatePlayerWorldInfo(playerid);

			getDateTime(PI[playerid][pLAST_CONNECTION]);
			SavePlayerData(playerid);
			SavePlayerVehicles(playerid, true);
			SavePlayerWeaponsData(playerid);
			SavePlayerWorkLevels(playerid);
			
			//msg
			new disconnect_message[128];
			switch(reason)
			{
				case 0: format(disconnect_message, sizeof disconnect_message, "%s se ha desconectado.", PlayerTemp[playerid][pt_NAME]);
				case 1: format(disconnect_message, sizeof disconnect_message, "%s se ha desconectado.", PlayerTemp[playerid][pt_NAME]);
				case 2: format(disconnect_message, sizeof disconnect_message, "%s se ha desconectado.", PlayerTemp[playerid][pt_NAME]);
			}
			NearbyMessage(PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pINTERIOR], GetPlayerVirtualWorld(playerid), 15.0, 0x909D95FF, disconnect_message);
		}
		else 
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET connected = 0, playerid = 0 WHERE id = %d;", PI[playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	}

	ResetPlayerVariables(playerid);
	return 1;
}

ResetPlayerVariables(playerid)
{
	static const tmp_PI[enum_PI]; PI[playerid] = tmp_PI;

	static const temp_PLAYER_TEMP[Temp_Enum]; PlayerTemp[playerid] = temp_PLAYER_TEMP;

	static const temp_PLAYER_PHONE_BOOK[Phone_Book_Enum]; 
	for(new i = 0; i != MAX_PHONE_CONTACTS; i ++) PLAYER_PHONE_BOOK[playerid][i] = temp_PLAYER_PHONE_BOOK;
	
	static const temp_PLAYER_GPS[Player_GPS_Enum]; 
	for(new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++) PLAYER_GPS[playerid][i] = temp_PLAYER_GPS;
	
	static const tmp_PLAYER_WORKS[enum_PLAYER_WORKS];
	for(new i = 0; i != sizeof(PLAYER_WORKS[]); i ++) PLAYER_WORKS[playerid][i] = tmp_PLAYER_WORKS;
	
	static const temp_PLAYER_PROPERTY_CONSTRUCTO[PLAYER_PROPERTY_CONSTRUCTOR_ENU]; PLAYER_PROPERTY_CONSTRUCTOR[playerid] = temp_PLAYER_PROPERTY_CONSTRUCTO;
	
	PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] = INVALID_PLAYER_ID;
	PlayerTemp[playerid][pt_ADMIN_SERVICE] = false;

	static const tmp_PLAYER_WEAPONS[enum_PLAYER_WEAPONS];
	for(new i = 0; i != sizeof PLAYER_WEAPONS[]; i ++) PLAYER_WEAPONS[playerid][i] = tmp_PLAYER_WEAPONS;
	
	static const tmp_PLAYER_AC_INFO[e_PLAYER_AC_INFO];
	for(new i = 0; i != sizeof(ac_Info); i ++) PLAYER_AC_INFO[playerid][i] = tmp_PLAYER_AC_INFO;
	return 1;
}

DestroyPlayerCheckpoints(playerid)
{
	if(IsValidDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]))
	{
		DestroyDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]);
		PlayerTemp[playerid][pt_PLAYER_NAMETAG] = Text3D:INVALID_STREAMER_ID;
	}
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]);
		PlayerTemp[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]);
		PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_TRASH_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_TRASH_CHECKPOINT]);
		PlayerTemp[playerid][pt_TRASH_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]))
	{
		DestroyDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]);
		PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
		PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]))
	{
		DestroyDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]);
		PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]))
	{
		DestroyDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]);
		PlayerTemp[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
	}
	return 1;
}

GetEnterExitIndexById(id)
{
	for(new i = 0; i != sizeof ENTER_EXIT; i ++)
	{
		if(ENTER_EXIT[i][ee_ID] == 0) continue;
		if(ENTER_EXIT[i][ee_ID] == id) return i;
	}
	return -1;
}

public OnRconLoginAttempt(ip[], password[], success)
{
	if(!success)
	{
        for(new i = 0; i != MAX_PLAYERS; i++)
        {
			new pip[16];
            GetPlayerIp(i, pip, 16);
            if(!strcmp(ip, pip, true))
            {
				SendMessage(i, "Esta accion no esta permitida.");
                KickEx(i, 500);
				break;
            }
        }

		BlockIpAddress(ip, 30000);
	}
    return 1;
}

public OnPlayerSpawn(playerid)
{
	if(!PlayerTemp[playerid][pt_USER_LOGGED]) return Kick(playerid);

	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) // Primer spawn
	{
		if(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] != -1) {
			KillTimer(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER]);
			PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] = -1;
		}

		new now = gettime();
		PlayerTemp[playerid][pt_LAST_PLANT_TIME] = now;
		PlayerTemp[playerid][pt_COOLDOWN_MEDICAL_KIT] = now + 300;
		format(PI[playerid][pIP], 16, "%s", PlayerTemp[playerid][pt_IP]);
		
		if(PI[playerid][pCREW]) SetPlayerGangZones(playerid);
		ShowPlayerSafeZones(playerid);
		SetPlayerSkillLevels(playerid);
		ApplyAnimation(playerid,"SWAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"MEDIC","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SHOP","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BOMBER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"FOOD","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CHAINSAW","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"ROB_BANK","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CARRY","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"PED","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SWEET","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CRACK","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"POLICE","null",0.0,0,0,0,0,0);

		PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
		pTemp(playerid)[pt_TASER_GUN] = false;

		SetPlayerNametagInfo(playerid, false);
		TextDrawShowForPlayer(playerid, Textdraws[textdraw_SERVER_MARK]);
		//CreatePlayerLocalVoice(playerid);

		if(IsPlayerInSafeZone(playerid)) TextDrawShowForPlayer(playerid, Textdraws[textdraw_SAFE_ZONE]);

		if(PI[playerid][pPOLICE_DUTY] != 0)
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_POLICE, INVALID_VEHICLE_ID);
			else PI[playerid][pPOLICE_DUTY] = 0;
		}
		switch(PI[playerid][pSTATE])
		{
			case ROLEPLAY_STATE_NORMAL:
			{
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
				PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);

				SetPlayerVirtualWorld(playerid, 0);

				if(PI[playerid][pWANTED_LEVEL] > 0)
				{
					PI[playerid][pPOLICE_JAIL_ID] = 0;
					JailPlayer(playerid);
				}
			}
			case ROLEPLAY_STATE_JAIL:
			{
				PI[playerid][pSTATE] = ROLEPLAY_STATE_JAIL;
				if(PI[playerid][pPOLICE_JAIL_TIME] < 5) PI[playerid][pPOLICE_JAIL_TIME] = 5;
				KillTimer(PlayerTemp[playerid][pt_TIMERS][15]);
				PlayerTemp[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pPOLICE_JAIL_TIME] * 1000, false, "i", playerid);
				
				PlayerTemp[playerid][pt_ENTER_JAIL_TIME] = gettime();
				SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				
				new time = PI[playerid][pPOLICE_JAIL_TIME] - (gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME]);
				SendClientMessagef(playerid, -1, "Te quedan %s minutos de condena.", TimeConvert(time));
				
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
				PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
			}
			case ROLEPLAY_STATE_ARRESTED:
			{
				if(PI[playerid][pVIP]) PI[playerid][pPOLICE_JAIL_TIME] = 150 * PI[playerid][pWANTED_LEVEL];
				else PI[playerid][pPOLICE_JAIL_TIME] = 300 * PI[playerid][pWANTED_LEVEL];
				
				PI[playerid][pWANTED_LEVEL] = 0;
				
				PI[playerid][pSTATE] = ROLEPLAY_STATE_JAIL;
				if(PI[playerid][pPOLICE_JAIL_TIME] < 5) PI[playerid][pPOLICE_JAIL_TIME] = 5;
				KillTimer(PlayerTemp[playerid][pt_TIMERS][15]);
				PlayerTemp[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pPOLICE_JAIL_TIME] * 1000, false, "i", playerid);
				
				PlayerTemp[playerid][pt_ENTER_JAIL_TIME] = gettime();
				SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				
				new time = PI[playerid][pPOLICE_JAIL_TIME] - (gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME]);
				SendClientMessagef(playerid, -1, "Te quedan %s minutos de condena.", TimeConvert(time));
				
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
				PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
			}
			case ROLEPLAY_STATE_OWN_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
				if(index == -1)
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = New_User_Pos[0];
					PI[playerid][pPOS_Y] = New_User_Pos[1];
					PI[playerid][pPOS_Z] = New_User_Pos[2];
					PI[playerid][pANGLE] = New_User_Pos[3];
					PI[playerid][pINTERIOR] = 0;
					
					SetPlayerPosEx(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], PI[playerid][pINTERIOR], 0);
				}
				else
				{
					if(PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pID])
					{
						SetPlayerInterior(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR]);
						SetPlayerVirtualWorld(playerid, PROPERTY_INFO[index][property_ID]);
					}
					else
					{
						PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
						PI[playerid][pLOCAL_INTERIOR] = 0;
						PI[playerid][pPOS_X] = PROPERTY_INFO[index][property_EXT_X];
						PI[playerid][pPOS_Y] = PROPERTY_INFO[index][property_EXT_Y];
						PI[playerid][pPOS_Z] = PROPERTY_INFO[index][property_EXT_Z];
						PI[playerid][pANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
						PI[playerid][pINTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
						
						SetPlayerPosEx(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], PI[playerid][pINTERIOR], 0);
					}
				}
					
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
				PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
			}
		}

		for(new i = 0; i < LOAD_SCREEN_TEXTDRAWS_SIZE; i ++) 
		{
			TextDrawHideForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][i]);
		}

		new neccessary_rep = PI[playerid][pLEVEL] * REP_MULTIPLIER;
		if(PI[playerid][pREP] < neccessary_rep)
		{
			if(PI[playerid][pTIME_FOR_REP] > TIME_FOR_REP) PI[playerid][pTIME_FOR_REP] = TIME_FOR_REP;
			if(PI[playerid][pTIME_FOR_REP] <= 900) PI[playerid][pTIME_FOR_REP] = 3000;
			
			PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
			PlayerTemp[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pTIME_FOR_REP], false, "i", playerid);
		}
		
		if(PI[playerid][pPHONE_NUMBER])
		{
			inline OnOfflineMessagesChecked()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new unreaded_messages;
						cache_get_value_index_int(0, 0, unreaded_messages);
						if(unreaded_messages > 0) SendClientMessagef(playerid, -1, "Tienes {f1f442}%d {FFFFFF}mensajes nuevos en tu /movil desde tu ultima conexion.", unreaded_messages);
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pmessages SET offline = 0 WHERE to_id = %d;", PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM pmessages WHERE to_id = %d AND offline = 1;", PI[playerid][pID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnOfflineMessagesChecked);
		}
	}
	
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) SetPlayerSkin(playerid, PI[playerid][pSKIN]);
	else SetPlayerSkin(playerid, PI[playerid][pPOLICE_DUTY]);

	PlayerTemp[playerid][pt_GAME_STATE] = GAME_STATE_NORMAL;
	if(PI[playerid][pSTATE] != ROLEPLAY_STATE_JAIL && PI[playerid][pSTATE] != ROLEPLAY_STATE_CRACK) SetWeaponsForPlayer(playerid);
	SetPlayerWantedLevelEx(playerid, PI[playerid][pWANTED_LEVEL]);
	SetPlayerArmedWeapon(playerid, 0);
	
	SetPlayerCityWeather(playerid);
	GameTextForPlayer(playerid, "_", 500, 3);
	PlayerTemp[playerid][pt_TIMERS][23] = -1;
	ShowPlayerHudInfo(playerid, 30);
	UpdatePlayerWorldInfo(playerid);
	PlayerTemp[playerid][pt_CONTROL] = false;
	PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
	PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
	
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY] = gettime() + 5;
	return 1;
}

CMD:n(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendMessage(playerid, "Ahora no puedes hacer eso.");
	CallLocalFunction("OnPlayerKeyStateChange", "iii", playerid, KEY_NO, KEY_NO);
	return 1;
}

CMD:y(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendMessage(playerid, "Ahora no puedes hacer eso.");
	CallLocalFunction("OnPlayerKeyStateChange", "iii", playerid, KEY_YES, KEY_YES);
	return 1;
}

CMD:c(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendMessage(playerid, "Ahora no puedes hacer eso.");
	CallLocalFunction("OnPlayerKeyStateChange", "iii", playerid, KEY_CROUCH, KEY_CROUCH);
	return 1;
}

CMD:cachear(playerid, params[])
{
	if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No formas parte de una banda.");
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /cachear [playerid/nombre]");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás de pie.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(PI[params[0]][pSTATE] != ROLEPLAY_STATE_CRACK) return SendClientMessagef(playerid, -1, "El jugador no está abatido.");
	if(GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "Para revisar a esta persona tiene que estar de pie.");
	
	new dialog[95 * 15], line_str[95];
	format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Arma\t{"#BLUE_COLOR"}Municion\t{"#SILVER_COLOR"}Slot\n");
	
	for(new i = 0; i < sizeof PLAYER_WEAPONS[]; i ++)
	{
		if(!PLAYER_WEAPONS[params[0]][i][player_weapon_VALID]) continue;
		
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", WEAPON_INFO[ PLAYER_WEAPONS[params[0]][i][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[params[0]][i][player_weapon_AMMO]), i);
		strcat(dialog, line_str);
	}

	format(line_str, sizeof line_str, "Armas de %s", PlayerTemp[playerid][pt_NAME]);
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, line_str, dialog, "Continuar", "Cerrar");
	
	new action[64];
	format(action, sizeof action, "cachea rápidamente a %s.", pTemp(params[0])[pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	return 1;
}

CMD:gpos(playerid, params[])
{
	new Float:pos[3], Float:angle;
	if(IsPlayerInAnyVehicle(playerid)) {
		new vehicleId = GetPlayerVehicleID(playerid);
		GetVehiclePos(vehicleId, pos[0], pos[1], pos[2]);
		GetVehicleZAngle(vehicleId, angle);
	}
	else {
		GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
		GetPlayerFacingAngle(playerid, angle);
	}

	if(isnull(params)) printf("%f, %f, %f, %f, %d", pos[0], pos[1], pos[2], angle, GetPlayerInterior(playerid));
	else printf("%f, %f, %f, %f, %d //%s", pos[0], pos[1], pos[2], angle, GetPlayerInterior(playerid), params);
	return 1;
}

CMD:cpos(playerid, params[])
{
	new Float:pos[3], Float:at[3];
	GetPlayerCameraPos(playerid, pos[0], pos[1], pos[2]);
	GetPlayerCameraLookAt(playerid, at[0], at[1], at[2]);

	printf("{%f, %f, %f, %f, %f, %f}", pos[0], pos[1], pos[2], at[0], at[1], at[2]);
	return 1;
}

callbackp:OnPlayerSWDeath(playerid, killerid, reason)
{
	if(PlayerTemp[playerid][pt_COMBAT]) ResetCombat(playerid);
	
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
	pTemp(playerid)[pt_TASER_GUN] = false;

	for(new i = 0, j = GetPlayerPoolSize(); i <= j; i++)
	{
		if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
		{
			if(PI[i][pADMIN_LEVEL] >= CMD_MODERATOR && pTemp(i)[pt_ADMIN_SERVICE])
			{
				SendDeathMessageToPlayer(i, killerid, playerid, reason);
			}
		}
	}

	if(!PI[playerid][pVIP])
	{
		DropAllPlayerWeapons(playerid);
	}
	
	if(PlayerTemp[playerid][pt_SELECT_TEXTDRAW])
	{
		if(PlayerTemp[playerid][pt_CLOTHING_SHOP] != -1) ClosePlayerClothingMenu(playerid);
	}
	
	StopAudioStreamForPlayer(playerid);
	SetPlayerDrunkLevel(playerid, 0);
	KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	GetPlayerPos(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
	GetPlayerFacingAngle(playerid, PI[playerid][pANGLE]);
	PI[playerid][pINTERIOR] = GetPlayerInterior(playerid);
	HidePlayerHud(playerid);
	CancelEdit(playerid);
	HidePlayerDialog(playerid);
	SetNormalPlayerMarkers(playerid);
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], false);
	PlayerTemp[playerid][pt_HUNGRY_MESSAGE] = false;
	PlayerTemp[playerid][pt_THIRST_MESSAGE] = false;
	PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
	PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
	PlayerTemp[playerid][pt_CUFFED] = false;
	PlayerTemp[playerid][pt_CUFFING] = false;

	if(PlayerTemp[playerid][pt_WANT_TAXI])
	{
		PlayerTemp[playerid][pt_WANT_TAXI] = false;
		DisablePlayerTaxiMark(playerid);
	}

	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
	if(PI[playerid][pWANTED_LEVEL] > 0) DisablePlayerPoliceMark(playerid);

	if(PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] != INVALID_VEHICLE_ID)
	{
		if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
		{
			if(PlayerTemp[playerid][pt_TRASH_DRIVER])
			{
				SendClientMessage(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], -1, "{"#SILVER_COLOR"}El trabajo se ha cancelado porque tu amigo ha dejado de trabajar.");
				CancelTrashWork(playerid, TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
			}
			if(PlayerTemp[playerid][pt_TRASH_PASSENGER])
			{
				SendClientMessage(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], -1, "{"#SILVER_COLOR"}El trabajo se ha cancelado porque tu amigo ha dejado de trabajar.");
				CancelTrashWork(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], playerid, PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
			}
		}
	}
	
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL)
	{
		PI[playerid][pPOLICE_JAIL_TIME] -= gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME];
		if(PI[playerid][pPOLICE_JAIL_TIME] < 5) PI[playerid][pPOLICE_JAIL_TIME] = 5;
		PlayerTemp[playerid][pt_ENTER_JAIL_TIME] = gettime();
		PI[playerid][pINTERIOR] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR];
		SetPlayerVirtualWorld(playerid, 0);
	}
	else
	{
		switch(PI[playerid][pSTATE])
		{
			case ROLEPLAY_STATE_INTERIOR:
			{
				new index = GetEnterExitIndexById(PI[playerid][pLOCAL_INTERIOR]);

				PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
				PI[playerid][pLOCAL_INTERIOR] = 0;
				PI[playerid][pPOS_X] = ENTER_EXIT[index][ee_EXT_X];
				PI[playerid][pPOS_Y] = ENTER_EXIT[index][ee_EXT_Y];
				PI[playerid][pPOS_Z] = ENTER_EXIT[index][ee_EXT_Z];
				PI[playerid][pANGLE] = ENTER_EXIT[index][ee_EXT_ANGLE];
				PI[playerid][pINTERIOR] = ENTER_EXIT[index][ee_EXT_INTERIOR];
			}
			case ROLEPLAY_STATE_OWN_PROPERTY:
			{
				new index = GetEnterExitIndexById(PI[playerid][pLOCAL_INTERIOR]);
				if(PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pID])
				{
					PI[playerid][pPOS_X] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_X];
					PI[playerid][pPOS_Y] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Y];

					new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Z];
					
					PI[playerid][pPOS_Z] = z_pos;

					PI[playerid][pANGLE] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_ANGLE];
					PI[playerid][pINTERIOR] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR];
				}
				else
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = PROPERTY_INFO[index][property_EXT_X];
					PI[playerid][pPOS_Y] = PROPERTY_INFO[index][property_EXT_Y];
					PI[playerid][pPOS_Z] = PROPERTY_INFO[index][property_EXT_Z];
					PI[playerid][pANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
					PI[playerid][pINTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
				}
			}
			case ROLEPLAY_STATE_GUEST_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
				PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
				PI[playerid][pLOCAL_INTERIOR] = 0;
				PI[playerid][pPOS_X] = PROPERTY_INFO[index][property_EXT_X];
				PI[playerid][pPOS_Y] = PROPERTY_INFO[index][property_EXT_Y];
				PI[playerid][pPOS_Z] = PROPERTY_INFO[index][property_EXT_Z];
				PI[playerid][pANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
				PI[playerid][pINTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
			}
			default:
			{
				GetPlayerPos(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
				GetPlayerFacingAngle(playerid, PI[playerid][pANGLE]);
				PI[playerid][pINTERIOR] = GetPlayerInterior(playerid);
			}
		}

		PI[playerid][pSTATE] = ROLEPLAY_STATE_CRACK;

		PlayerTemp[playerid][pt_INJURED_POS][0] = PI[playerid][pPOS_X];
		PlayerTemp[playerid][pt_INJURED_POS][1] = PI[playerid][pPOS_Y];
		PlayerTemp[playerid][pt_INJURED_POS][2] = PI[playerid][pPOS_Z];
		PlayerTemp[playerid][pt_INJURED_POS][3] = PI[playerid][pANGLE];
	}

	if(GetPlayerAnimationIndex(playerid) != 1537) ApplyAnimation(playerid, "SWEET", "Sweet_injuredloop", 4.1, true, 0, 0, 0, 0, 1);
	SpawnPlayerDeath(playerid);

	PLAYER_TEMP[playerid][pt_GAME_STATE] = GAME_STATE_NORMAL;
	return 1;
}

hook OnPlayerDeath(playerid, killerid, reason)
{
	if(PlayerTemp[playerid][pt_KICKED] || !PlayerTemp[playerid][pt_USER_LOGGED]) return 0;

	KillTimer(PlayerTemp[playerid][pt_TIMERS][16]);
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
	
	if(ac_Info[CHEAT_DEATH_SPAMMER][ac_Enabled])
	{
		if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_IMMUNITY])
		{
			new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_ANTIFLOOD_DEATH]);
			if(interval < 50)
			{
				if(!ac_Info[CHEAT_DEATH_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_DEATH_SPAMMER, float(interval));
				else
				{
					if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DEATH_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
					if(PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DEATH_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_DEATH_SPAMMER, float(interval));
				}
			}
			PlayerTemp[playerid][pt_ANTIFLOOD_DEATH] = GetTickCount();
		}
	}
	
	PlayerTemp[playerid][pt_GAME_STATE] = GAME_STATE_DEAD;

	OnPlayerSWDeath(playerid, killerid, reason);
	return 1;
}

public OnPlayerRequestClass(playerid, classid)
{
	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) // Recién conectado
	{
		if(!PlayerTemp[playerid][pt_USER_VALID_NAME] || PlayerTemp[playerid][pt_KICKED] || PlayerTemp[playerid][pt_CLASSED]) Kick(playerid);
		else
		{
			PlayerTemp[playerid][pt_CLASSED] = true;
			TogglePlayerSpectatingEx(playerid, true);
			ClearPlayerChat(playerid);

			SetPlayerCameraPos(playerid, 1121.490478, -1455.516479, 34.826873);
			SetPlayerCameraLookAt(playerid, 1129.959594, -1489.960449, 22.246841);
			InterpolateCameraPos(playerid, 1121.490478, -1455.516479, 34.826873, 1143.040893, -1517.899902, 36.396896, LOGIN_TIME, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, 1129.959594, -1489.960449, 22.246841, 1129.956909, -1483.099487, 22.236873, LOGIN_TIME, CAMERA_MOVE);

			inline OnPlayerBannedCheck()
			{
				new rows, bool:continue_proccess;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new name[24], expire_date[24], id_player, by, text[128], date[24], expire_date_ts, now[24], now_ts, bool:isnull_name, bool:isnull_by, bool:isnull_expire_date_ts;
						cache_is_value_name_null(0, "name", isnull_name);
						if(!isnull_name) cache_get_value_name(0, "name", name, 24);
						cache_get_value_name(0, "expire_date", expire_date, 24);
						cache_get_value_name_int(0, "id_player", id_player);
						cache_is_value_name_null(0, "by", isnull_by);
						if(!isnull_by) cache_get_value_name_int(0, "by", by);
						cache_get_value_name(0, "text", text, 128);
						cache_get_value_name(0, "date", date, 24);
						cache_is_value_name_null(0, "expire_date_ts", isnull_expire_date_ts);
						if(!isnull_expire_date_ts) cache_get_value_name_int(0, "expire_date_ts", expire_date_ts);
						cache_get_value_name(0, "now", now, 24);
						cache_get_value_name_int(0, "now_ts", now_ts);

						if(expire_date_ts)
						{
							//temporal
							if(now_ts >= expire_date_ts)
							{
								continue_proccess = true;
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM bans WHERE name = '%e' OR ip = '%e';", PlayerTemp[playerid][pt_NAME], PlayerTemp[playerid][pt_IP]);
								mysql_tquery(handle_db, QUERY_BUFFER);

								if(id_player) AddPlayerBadHistory(id_player, -1, TYPE_UNBAN, "Readmitido (de tban)");
								SendClientMessagef(playerid, -1, "Tu cuenta ha sido re-admitida, no hagas que vuelvan a banearte.");
							}
							else
							{
								new dialog[600];
								format(dialog, sizeof dialog, 
									
									"\
										Esta IP o cuenta está expulsada temporalmente, detalles:\n\
										\n\
										Tu nombre: %s\n\
										\n\
										Nombre: %s\n\
										Expulsado por: %d\n\
										Fecha expulsion: %s\n\
										Razon: %s\n\
										\n\
										Fecha actual: %s\n\
										Fecha readmision: %s\n\
										\n\
									",
									
									PlayerTemp[playerid][pt_NAME],
									name, by, date, text, now, expire_date
								);

								ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
								KickEx(playerid, 500);
							}

						}
						else
						{
							//permanente
							new dialog[480];
							format(dialog, sizeof dialog, 
								
								"\
									Esta IP o cuenta está expulsada permanentemente, detalles:\n\
									\n\
									Tu nombre: %s\n\
									\n\
									Nombre: %s\n\
									Expulsado por: %d\n\
									Fecha expulsion: %s\n\
									Razon: %s\n\
									\n\
								",
								
								PlayerTemp[playerid][pt_NAME],
								name, by, date, text
							);
								
							ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
							KickEx(playerid, 500);
						}
					}
					else continue_proccess = true;

					if(continue_proccess)
					{
						inline OnPlayerCheck()
						{
							if(cache_get_row_count(rows))
							{
								TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][1]);

								if(rows)
								{
									cache_get_value_name_int(0, "id", PI[playerid][pID]);
									cache_get_value_name(0, "ip", PI[playerid][pIP], 16);
									cache_get_value_name(0, "email", PI[playerid][pEMAIL], 32);
									cache_get_value_name(0, "pass", PI[playerid][pPASS], 65);

									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET connected = 1, playerid = %d WHERE id = %d;", playerid, PI[playerid][pID]);
									mysql_tquery(handle_db, QUERY_BUFFER);

									PlayerTemp[playerid][pt_USER_EXIST] = true;
								}
								else PlayerTemp[playerid][pt_USER_EXIST] = false;

								GameTextForPlayer(playerid, "_", 500, 3);

								ShowPlayerPlayButton(playerid);
							}
							else Kick(playerid);
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, email, pass FROM player WHERE name = '%e';", PlayerTemp[playerid][pt_NAME]);
						mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPlayerCheck);
					}
				}
				else Kick(playerid);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT *, UNIX_TIMESTAMP(bans.expire_date) AS expire_date_ts, NOW() AS now, UNIX_TIMESTAMP(NOW()) AS now_ts FROM bans LEFT JOIN bad_history ON bans.id_history = bad_history.id WHERE bans.name = '%e' OR bans.ip = '%e';", PlayerTemp[playerid][pt_NAME], PlayerTemp[playerid][pt_IP]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPlayerBannedCheck);
		}
	}
	else if((PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL || PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_DEAD) && PlayerTemp[playerid][pt_USER_LOGGED]) // Viene de jugar
	{
		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pSKIN], PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], 0, 0, 0, 0, 0, 0);
		SpawnPlayer(playerid);
		return 0;
	}
	
	return 0;
}

public OnPlayerRequestSpawn(playerid) // Intentar 'spawnear' mediante la seleccion de skin << spawn >>
{
	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) CallLocalFunction("OnPlayerRequestClass", "dd", playerid, 0);
    return 0;
}

public OnGameModeInit()
{
	AntiAmx();
	SetGameModeText(SERVER_GAMEMODE);
    SendRconCommand("hostname "SERVER_HOSTNAME"");
    SendRconCommand("language "SERVER_LANGUAGE"");
	SendRconCommand("weburl "SERVER_WEBSITE"");
	SendRconCommand("mapname "SERVER_WEBSITE"");
	SendRconCommand("minconnectiontime 0");
    SendRconCommand("ackslimit 8000");
    SendRconCommand("messageslimit 100");
    SendRconCommand("conncookies 1");
	SendRconCommand("cookielogging 0");
	SendRconCommand("chatlogging 0");
	SendRconCommand("sleep 1");
	SendRconCommand("query 0");
	ShowNameTags(0);

	SetDatabaseInfo();

	if(mysql_errno(handle_db) != 0)
	{
		print("CONEXION >>FALLIDA<< CON LA BASE DE DATOS");
		SetTimer("CloseServer", 3 * 1000, false);
		return 1;
	}

	print("BASE DE DATOS CARGADA CORRECTAMENTE");

	mysql_tquery(handle_db, "SELECT * FROM `properties` ORDER BY `id` ASC", "LoadProperties");
	mysql_tquery(handle_db, "SELECT * FROM `crews` ORDER BY `id` ASC", "LoadCrews");
	mysql_tquery(handle_db, "SELECT * FROM `territories` ORDER BY `id` ASC", "LoadGangZones");

	CreateTextDraws();
	LoadEnterExits();
	LoadServerInfo();
	LoadAntiCheatInfo();
	SetRandomRconPassword();

	SetWorldMinutesForDay(180); // 3 horas reales = 24 horas en juego
	DisableInteriorEnterExits();
	ShowPlayerMarkers(PLAYER_MARKERS_MODE_GLOBAL);
	EnableStuntBonusForAll(false);
	ManualVehicleEngineAndLights();
	FormatDialogStrings();
	UsePlayerPedAnims();
	MapAndreas_Init(MAP_ANDREAS_MODE_FULL);

	FO_SetMode(FO_RELATIVE);
	FO_SetValue((2 + random(3)));
	SetTimer("UpdateFOPlayers", 60000, true);
	SendRconCommand("query 1");
	return 1;
}


FormatDialogStrings()
{
	new Dialog_Lines_String[256];
	
		/* PIZZA FOOD */
	format(DIALOG_FOOD_PIZZA_String, sizeof DIALOG_FOOD_PIZZA_String, "Producto\tPrecio\n");
	for(new i; i != sizeof PIZZA_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{FFFFFF}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, PIZZA_FOOD[i][food_NAME], PIZZA_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_PIZZA_String, Dialog_Lines_String);
	}
	
		/* CLUCKIN FOOD */
	format(DIALOG_FOOD_CLUCKIN_String, sizeof DIALOG_FOOD_CLUCKIN_String, "Producto\tPrecio\n");
	for(new i; i != sizeof CLUCKIN_BELL_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{FFFFFF}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, CLUCKIN_BELL_FOOD[i][food_NAME], CLUCKIN_BELL_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_CLUCKIN_String, Dialog_Lines_String);
	}
	
		/* BURGER_SHOT FOOD */
	format(DIALOG_FOOD_BURGER_String, sizeof DIALOG_FOOD_BURGER_String, "Producto\tPrecio\n");
	for(new i; i != sizeof BURGER_SHOT_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{FFFFFF}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, BURGER_SHOT_FOOD[i][food_NAME], BURGER_SHOT_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_BURGER_String, Dialog_Lines_String);
	}

		/* 24/7 LIST */
	format(DIALOG_247_LIST_String, sizeof DIALOG_247_LIST_String, "Producto\tPrecio\n");
	for(new i = 0; i != sizeof Supermarket_Product_List; i ++)
	{
		format(Dialog_Lines_String, sizeof(Dialog_Lines_String), "{FFFFFF}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, Supermarket_Product_List[i][product_NAME], Supermarket_Product_List[i][product_PRICE]);
		strcat(DIALOG_247_LIST_String, Dialog_Lines_String);
	}
	
	//GPS
	new city[45], zone[45];

	//GPS CONCES
	format(DIALOG_PLAYER_GPS_SITE_7_String, sizeof DIALOG_PLAYER_GPS_SITE_7_String, "{"#SILVER_COLOR"}Lugar\t{"#BLUE_COLOR"}Zona\n");
	for(new i = 0; i != sizeof(SELL_VEHICLES_SHOPS_SPAWN); i++ )
	{
		GetPointZone(SELL_VEHICLES_SHOPS_SPAWN[i][0], SELL_VEHICLES_SHOPS_SPAWN[i][1], city, zone);
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{FFFFFF}Concesionario %d\t{"#BLUE_COLOR"}%s, %s\n", i + 1, city, zone);
		strcat(DIALOG_PLAYER_GPS_SITE_7_String, Dialog_Lines_String);
	}
	
	//Colores bandas
	format(DIALOG_CREATE_CREW_COLOR_String, sizeof DIALOG_CREATE_CREW_COLOR_String, "");
	for(new i = 0; i != sizeof(RandomColors); i++)
	{
		format(Dialog_Lines_String, sizeof(Dialog_Lines_String), "{%06x}color %d\n", RandomColors[i] >>> 8, i + 1);
		strcat(DIALOG_CREATE_CREW_COLOR_String, Dialog_Lines_String);
	}

	format(DIALOG_CREDIT_String, sizeof DIALOG_CREDIT_String, 
		"\
			Servidor: "SERVER_NAME"\n\
			Web/foro: "SERVER_WEBSITE"\n\
			Version: "SERVER_VERSION"\n\
			\n\
			"SERVER_NAME" es un servidor Roleplay nuevo por lo que actualmente\n\
			se encuentra desarrollo, puedes dejar tus sugerencias en el foro.\n\
			Actualmente al ser una version inicial puede contener fallos.\n\
			\n\
			\n\
		"
	);
	
	//Animaciones
	format(DIALOG_ANIMS_String, sizeof DIALOG_ANIMS_String, "");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /rendirse\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /blowjob\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /rodar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /borracho\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /bomba\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /apuntar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /reir\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /amenazar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /paja\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /herido\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /cruzarbrazos\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /recostarse\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /cubrirse\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /vomitar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /comer\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /despedir\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /nalgada\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /agonizar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /besar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /crack\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /mear\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /sentarse\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /fucku\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /llamar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /taichi\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /beber\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /boxear\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /saludar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /llorar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /dormir\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /rapear\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /astrip\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /bailar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /alentar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /hablar\n");
	strcat(DIALOG_ANIMS_String, "{"#SILVER_COLOR"}>> /asiento\n");
			
	return 1;
}

stock Float:GetSpeed(Float:vx, Float:vy, Float:vz)
{
	new Float:vel = floatmul(floatsqroot(floatadd(floatadd(floatpower(vx, 2), floatpower(vy, 2)),  floatpower(vz, 2))), 181.5);
	return vel;
}

//By Kar
stock IsVehicleDrivingForward(vehicleid)
{
    new Float:Float[3];
    if(GetVehicleVelocity(vehicleid, Float[1], Float[2], Float[0]))
    {
        GetVehicleZAngle(vehicleid, Float[0]);
        if(Float[0] < 90)
        {
            if(Float[1] < 0 && Float[2] > 0) return true;
        }
        else if(Float[0] < 180)
        {
            if(Float[1] < 0 && Float[2] < 0) return true;
        }
        else if(Float[0] < 270)
        {
            if(Float[1] > 0 && Float[2] < 0) return true;
        }
        else if(Float[1] > 0 && Float[2] > 0) return true;
    }
    return false;
}

CreateTrashCheckpoint(route, modelid, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{
	if(route >= MAX_ROUTES) return print("---> Límite superado en array 'TRASH_OBJECTS, route' en la funcion 'CreateTrashCheckpoint'.");
	if(!TRASH_OBJECTS[route][trash_route_VALID]) TRASH_OBJECTS[route][trash_route_VALID] = true;
	if(TRASH_OBJECTS[route][trash_route_OBJECTS] >= MAX_OBJECTS_PER_ROUTE) return print("---> Límite superado en array 'TRASH_OBJECTS, objects' en la funcion 'CreateTrashCheckpoint'.");

	if(TRASH_OBJECTS[route][trash_route_OBJECTS] == 0) TRASH_OBJECTS[route][trash_route_DISTANCE] = GetDistanceBetweenPoints3D(x, y, z, obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
	else
	{
		TRASH_OBJECTS[route][trash_route_DISTANCE] -= GetDistanceBetweenPoints3D(TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1], TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
		TRASH_OBJECTS[route][trash_route_DISTANCE] += GetDistanceBetweenPoints3D(x, y, z, TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1], TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ]);
	}
	
	TRASH_OBJECTS[route][trash_object_MODELID][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = modelid;
	TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = x;
	TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = y;
	TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = z;
	TRASH_OBJECTS[route][trash_object_RX][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = rx;
	TRASH_OBJECTS[route][trash_object_RY][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = ry;
	TRASH_OBJECTS[route][trash_object_RZ][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = rz;
	//CreateDynamicObject(modelid, x, y, z, rx, ry, rz, 0, 0);
	
	TRASH_OBJECTS[route][trash_route_DISTANCE] += GetDistanceBetweenPoints3D(x, y, z, obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
	TRASH_OBJECTS[route][trash_route_MONEY] = floatround(0.3 * TRASH_OBJECTS[route][trash_route_DISTANCE]);
	
	TRASH_OBJECTS[route][trash_route_OBJECTS] ++;
	return 1;
}
	
stock Float:GetDistanceBetweenPoints3D(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2)
{
    return VectorSize(x1-x2,y1-y2,z1-z2);
}

CreateTextDraws()
{
	for(new i; i < sizeof(Textdraws); i++) Textdraws[Textdraws_Enum:i] = INVALID_TEXT_DRAW;

    Textdraws[textdraw_SAFE_ZONE] = TextDrawCreate(320.000000, 410.000000, "Zona_~g~Segura");
	TextDrawFont(Textdraws[textdraw_SAFE_ZONE], 1);
	TextDrawLetterSize(Textdraws[textdraw_SAFE_ZONE], 0.245833, 1.200000);
	TextDrawTextSize(Textdraws[textdraw_SAFE_ZONE], 1024.000000, 1024.000000);
	TextDrawSetOutline(Textdraws[textdraw_SAFE_ZONE], 0);
	TextDrawSetShadow(Textdraws[textdraw_SAFE_ZONE], 1);
	TextDrawAlignment(Textdraws[textdraw_SAFE_ZONE], 2);
	TextDrawColor(Textdraws[textdraw_SAFE_ZONE], -1);
	TextDrawBackgroundColor(Textdraws[textdraw_SAFE_ZONE], 255);
	TextDrawBoxColor(Textdraws[textdraw_SAFE_ZONE], 50);
	TextDrawUseBox(Textdraws[textdraw_SAFE_ZONE], 0);
	TextDrawSetProportional(Textdraws[textdraw_SAFE_ZONE], 1);
	TextDrawSetSelectable(Textdraws[textdraw_SAFE_ZONE], 0);

	Textdraws[textdraw_SERVER_MARK] = TextDrawCreate(1.000, 432.000, SERVER_NAME);
	TextDrawLetterSize(Textdraws[textdraw_SERVER_MARK], 0.300, 1.500);
	TextDrawTextSize(Textdraws[textdraw_SERVER_MARK], 900.000, 0.000);
	TextDrawAlignment(Textdraws[textdraw_SERVER_MARK], 1);
	TextDrawColor(Textdraws[textdraw_SERVER_MARK], -1);
	TextDrawSetShadow(Textdraws[textdraw_SERVER_MARK], 0);
	TextDrawSetOutline(Textdraws[textdraw_SERVER_MARK], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SERVER_MARK], 150);
	TextDrawFont(Textdraws[textdraw_SERVER_MARK], 1);
	TextDrawSetProportional(Textdraws[textdraw_SERVER_MARK], 1);

    Textdraws[textdraw_HUD][0] = TextDrawCreate(319.000, 428.000, "bar");
    TextDrawLetterSize(Textdraws[textdraw_HUD][0], 0.000, 1.800);
    TextDrawTextSize(Textdraws[textdraw_HUD][0], 0.000, 490.000);
    TextDrawAlignment(Textdraws[textdraw_HUD][0], 2);
    TextDrawColor(Textdraws[textdraw_HUD][0], -1);
    TextDrawUseBox(Textdraws[textdraw_HUD][0], 1);
    TextDrawBoxColor(Textdraws[textdraw_HUD][0], 150);
    TextDrawSetShadow(Textdraws[textdraw_HUD][0], 1);
    TextDrawSetOutline(Textdraws[textdraw_HUD][0], 1);
    TextDrawBackgroundColor(Textdraws[textdraw_HUD][0], 150);
    TextDrawFont(Textdraws[textdraw_HUD][0], 1);
    TextDrawSetProportional(Textdraws[textdraw_HUD][0], 1);

    Textdraws[textdraw_HUD][1] = TextDrawCreate(478.000, 429.000, "HUD:radar_burgerShot");
    TextDrawTextSize(Textdraws[textdraw_HUD][1], 16.000, 15.000);
    TextDrawAlignment(Textdraws[textdraw_HUD][1], 1);
    TextDrawColor(Textdraws[textdraw_HUD][1], -1);
    TextDrawSetShadow(Textdraws[textdraw_HUD][1], 0);
    TextDrawSetOutline(Textdraws[textdraw_HUD][1], 0);
    TextDrawBackgroundColor(Textdraws[textdraw_HUD][1], 255);
    TextDrawFont(Textdraws[textdraw_HUD][1], 4);
    TextDrawSetProportional(Textdraws[textdraw_HUD][1], 1);

    Textdraws[textdraw_HUD][2] = TextDrawCreate(525.000, 428.000, "HUD:radar_diner");
    TextDrawTextSize(Textdraws[textdraw_HUD][2], 16.000, 15.000);
    TextDrawAlignment(Textdraws[textdraw_HUD][2], 1);
    TextDrawColor(Textdraws[textdraw_HUD][2], -1);
    TextDrawSetShadow(Textdraws[textdraw_HUD][2], 0);
    TextDrawSetOutline(Textdraws[textdraw_HUD][2], 0);
    TextDrawBackgroundColor(Textdraws[textdraw_HUD][2], 255);
    TextDrawFont(Textdraws[textdraw_HUD][2], 4);
    TextDrawSetProportional(Textdraws[textdraw_HUD][2], 1);

	Textdraws[textdraw_PLAYER_REP_BACK][0] = TextDrawCreate(500.000000, 13.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_PLAYER_REP_BACK][0], 0.000000, 0.633333);
	TextDrawTextSize(Textdraws[textdraw_PLAYER_REP_BACK][0], 605.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawColor(Textdraws[textdraw_PLAYER_REP_BACK][0], -1);
	TextDrawUseBox(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_PLAYER_REP_BACK][0], 255);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);
	TextDrawSetOutline(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_PLAYER_REP_BACK][0], 255);
	TextDrawFont(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);

	Textdraws[textdraw_PLAYER_REP_BACK][1] = TextDrawCreate(502.000000, 15.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_PLAYER_REP_BACK][1], 0.000000, 0.200000);
	TextDrawTextSize(Textdraws[textdraw_PLAYER_REP_BACK][1], 603.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawColor(Textdraws[textdraw_PLAYER_REP_BACK][1], -1);
	TextDrawUseBox(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawBoxColor(Textdraws[textdraw_PLAYER_REP_BACK][1], 5787296);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);
	TextDrawSetOutline(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_PLAYER_REP_BACK][1], 255);
	TextDrawFont(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawSetProportional(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);

	Textdraws[textdraw_LOAD_SCREEN][0] = TextDrawCreate(-15.000000, -4.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][0], 0.000000, 50.866653);
	TextDrawTextSize(Textdraws[textdraw_LOAD_SCREEN][0], 728.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][0], -1);
	TextDrawUseBox(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_LOAD_SCREEN][0], 0x000000FF);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][0], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][0], 1);

	Textdraws[textdraw_LOAD_SCREEN][1] = TextDrawCreate(-15.000000, -4.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][1], 0.000000, 50.866653);
	TextDrawTextSize(Textdraws[textdraw_LOAD_SCREEN][1], 728.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][1], -1);
	TextDrawUseBox(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawBoxColor(Textdraws[textdraw_LOAD_SCREEN][1], 90);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][1], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][1], 1);

	Textdraws[textdraw_LOAD_SCREEN][2] = TextDrawCreate(320.000000, 80.000000, SERVER_SHORT_NAME);
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][2], 0.505666, 2.649481);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][2], 2);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][2], -1);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][2], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][2], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][2], 2);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][2], 1);

	Textdraws[textdraw_LOAD_SCREEN][3] = TextDrawCreate(320.000000, 99.000000, "ROLEPLAY");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][3], 0.311000, 1.811555);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][3], 2);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][3], -1);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][3], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][3], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][3], 2);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][3], 1);
	
    Textdraws[textdraw_SERVER_TIME] = TextDrawCreate(320.000, 429.000, "00:00");
    TextDrawLetterSize(Textdraws[textdraw_SERVER_TIME], 0.300, 1.500);
    TextDrawAlignment(Textdraws[textdraw_SERVER_TIME], 2);
    TextDrawColor(Textdraws[textdraw_SERVER_TIME], -1);
    TextDrawSetShadow(Textdraws[textdraw_SERVER_TIME], 0);
    TextDrawSetOutline(Textdraws[textdraw_SERVER_TIME], 0);
    TextDrawBackgroundColor(Textdraws[textdraw_SERVER_TIME], 150);
    TextDrawFont(Textdraws[textdraw_SERVER_TIME], 2);
    TextDrawSetProportional(Textdraws[textdraw_SERVER_TIME], 1);
	
	Textdraws[textdraw_TERRITORY_BOX] = TextDrawCreate(320.000000, 355.000000, "-");
	TextDrawLetterSize(Textdraws[textdraw_TERRITORY_BOX], 12.321674, 9.937778);
	TextDrawAlignment(Textdraws[textdraw_TERRITORY_BOX], 2);
	TextDrawColor(Textdraws[textdraw_TERRITORY_BOX], 167);
	TextDrawSetShadow(Textdraws[textdraw_TERRITORY_BOX], 0);
	TextDrawSetOutline(Textdraws[textdraw_TERRITORY_BOX], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_TERRITORY_BOX], 255);
	TextDrawFont(Textdraws[textdraw_TERRITORY_BOX], 1);
	TextDrawSetProportional(Textdraws[textdraw_TERRITORY_BOX], 1);
	TextDrawSetShadow(Textdraws[textdraw_TERRITORY_BOX], 0);

    Textdraws[textdraw_PLAY][0] = TextDrawCreate(320.000000, 170.000000, ""SERVER_NAME1"~b~"SERVER_NAME2"");
    TextDrawFont(Textdraws[textdraw_PLAY][0], 1);
    TextDrawLetterSize(Textdraws[textdraw_PLAY][0], 2.000000, 5.300000);
    TextDrawTextSize(Textdraws[textdraw_PLAY][0], 2048.000000, 2048.000000);
    TextDrawSetOutline(Textdraws[textdraw_PLAY][0], 0);
    TextDrawSetShadow(Textdraws[textdraw_PLAY][0], 1);
    TextDrawAlignment(Textdraws[textdraw_PLAY][0], 2);
    TextDrawColor(Textdraws[textdraw_PLAY][0], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY][0], 255);
    TextDrawBoxColor(Textdraws[textdraw_PLAY][0], 50);
    TextDrawUseBox(Textdraws[textdraw_PLAY][0], 0);
    TextDrawSetProportional(Textdraws[textdraw_PLAY][0], 1);
    TextDrawSetSelectable(Textdraws[textdraw_PLAY][0], 0);

    Textdraws[textdraw_PLAY][1] = TextDrawCreate(359.000000, 237.000000, "ld_pool:ball");
    TextDrawFont(Textdraws[textdraw_PLAY][1], 4);
    TextDrawLetterSize(Textdraws[textdraw_PLAY][1], 0.600000, 2.000000);
    TextDrawTextSize(Textdraws[textdraw_PLAY][1], 20.000000, 28.500000);
    TextDrawSetOutline(Textdraws[textdraw_PLAY][1], 1);
    TextDrawSetShadow(Textdraws[textdraw_PLAY][1], 0);
    TextDrawAlignment(Textdraws[textdraw_PLAY][1], 1);
    TextDrawColor(Textdraws[textdraw_PLAY][1], 255);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY][1], 255);
    TextDrawBoxColor(Textdraws[textdraw_PLAY][1], 50);
    TextDrawUseBox(Textdraws[textdraw_PLAY][1], 1);
    TextDrawSetProportional(Textdraws[textdraw_PLAY][1], 1);
    TextDrawSetSelectable(Textdraws[textdraw_PLAY][1], 0);

    Textdraws[textdraw_PLAY][2] = TextDrawCreate(260.000000, 237.000000, "ld_pool:ball");
    TextDrawFont(Textdraws[textdraw_PLAY][2], 4);
    TextDrawLetterSize(Textdraws[textdraw_PLAY][2], 0.600000, 2.000000);
    TextDrawTextSize(Textdraws[textdraw_PLAY][2], 20.000000, 28.500000);
    TextDrawSetOutline(Textdraws[textdraw_PLAY][2], 1);
    TextDrawSetShadow(Textdraws[textdraw_PLAY][2], 0);
    TextDrawAlignment(Textdraws[textdraw_PLAY][2], 1);
    TextDrawColor(Textdraws[textdraw_PLAY][2], 255);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY][2], 255);
    TextDrawBoxColor(Textdraws[textdraw_PLAY][2], 50);
    TextDrawUseBox(Textdraws[textdraw_PLAY][2], 1);
    TextDrawSetProportional(Textdraws[textdraw_PLAY][2], 1);
    TextDrawSetSelectable(Textdraws[textdraw_PLAY][2], 0);

    Textdraws[textdraw_PLAY][3] = TextDrawCreate(320.000000, 240.000000, "Jugar");
    TextDrawFont(Textdraws[textdraw_PLAY][3], 3);
    TextDrawLetterSize(Textdraws[textdraw_PLAY][3], 1.000000, 2.500000);
    TextDrawTextSize(Textdraws[textdraw_PLAY][3], 25.000000, 100.000000);
    TextDrawSetOutline(Textdraws[textdraw_PLAY][3], 0);
    TextDrawSetShadow(Textdraws[textdraw_PLAY][3], 1);
    TextDrawAlignment(Textdraws[textdraw_PLAY][3], 2);
    TextDrawColor(Textdraws[textdraw_PLAY][3], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY][3], 255);
    TextDrawBoxColor(Textdraws[textdraw_PLAY][3], 255);
    TextDrawUseBox(Textdraws[textdraw_PLAY][3], 1);
    TextDrawSetProportional(Textdraws[textdraw_PLAY][3], 1);
    TextDrawSetSelectable(Textdraws[textdraw_PLAY][3], 1);

    Textdraws[textdraw_GENDER][0] = TextDrawCreate(320.000000, 132.000000, "_");
    TextDrawFont(Textdraws[textdraw_GENDER][0], 1);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][0], 0.000000, 25.749988);
    TextDrawTextSize(Textdraws[textdraw_GENDER][0], 0.000000, 305.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][0], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][0], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][0], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][0], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][0], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][0], 255);
    TextDrawUseBox(Textdraws[textdraw_GENDER][0], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][0], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][0], 0);

    Textdraws[textdraw_GENDER][1] = TextDrawCreate(320.000000, 98.000000, "_");
    TextDrawFont(Textdraws[textdraw_GENDER][1], 1);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][1], 0.000000, 2.999988);
    TextDrawTextSize(Textdraws[textdraw_GENDER][1], 0.000000, 305.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][1], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][1], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][1], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][1], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][1], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][1], 255);
    TextDrawUseBox(Textdraws[textdraw_GENDER][1], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][1], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][1], 0);

    Textdraws[textdraw_GENDER][2] = TextDrawCreate(320.000000, 135.000000, "_");
    TextDrawFont(Textdraws[textdraw_GENDER][2], 1);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][2], 0.000000, 25.000000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][2], 0.000000, 300.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][2], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][2], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][2], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][2], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][2], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][2], 65415);
    TextDrawUseBox(Textdraws[textdraw_GENDER][2], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][2], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][2], 0);

    Textdraws[textdraw_GENDER][3] = TextDrawCreate(320.000000, 100.000000, "_");
    TextDrawFont(Textdraws[textdraw_GENDER][3], 1);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][3], 0.000000, 2.400000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][3], 0.000000, 300.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][3], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][3], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][3], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][3], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][3], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][3], 65415);
    TextDrawUseBox(Textdraws[textdraw_GENDER][3], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][3], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][3], 0);

    Textdraws[textdraw_GENDER][4] = TextDrawCreate(170.000000, 102.000000, "Selecciona_tu_Genero");
    TextDrawFont(Textdraws[textdraw_GENDER][4], 2);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][4], 0.295832, 1.750000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][4], 0.000000, 0.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][4], 0);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][4], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][4], 1);
    TextDrawColor(Textdraws[textdraw_GENDER][4], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][4], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][4], 50);
    TextDrawUseBox(Textdraws[textdraw_GENDER][4], 0);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][4], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][4], 0);

    Textdraws[textdraw_GENDER][5] = TextDrawCreate(178.000000, 170.000000, "Hombre");
    TextDrawFont(Textdraws[textdraw_GENDER][5], 5);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][5], 0.600000, 2.000000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][5], 130.000000, 160.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][5], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][5], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][5], 1);
    TextDrawColor(Textdraws[textdraw_GENDER][5], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][5], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][5], 50);
    TextDrawUseBox(Textdraws[textdraw_GENDER][5], 0);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][5], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][5], 1);
    TextDrawSetPreviewModel(Textdraws[textdraw_GENDER][5], 250);
    TextDrawSetPreviewRot(Textdraws[textdraw_GENDER][5], -10.000000, 0.000000, 20.000000, 1.000000);
    TextDrawSetPreviewVehCol(Textdraws[textdraw_GENDER][5], 1, 1);

    Textdraws[textdraw_GENDER][6] = TextDrawCreate(330.000000, 170.000000, "Mujer");
    TextDrawFont(Textdraws[textdraw_GENDER][6], 5);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][6], 0.600000, 2.000000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][6], 130.000000, 160.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][6], 1);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][6], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][6], 1);
    TextDrawColor(Textdraws[textdraw_GENDER][6], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][6], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][6], 50);
    TextDrawUseBox(Textdraws[textdraw_GENDER][6], 0);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][6], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][6], 1);
    TextDrawSetPreviewModel(Textdraws[textdraw_GENDER][6], 11);
    TextDrawSetPreviewRot(Textdraws[textdraw_GENDER][6], -10.000000, 0.000000, -20.000000, 1.000000);
    TextDrawSetPreviewVehCol(Textdraws[textdraw_GENDER][6], 1, 1);

    Textdraws[textdraw_GENDER][7] = TextDrawCreate(243.000000, 152.000000, "Hombre");
    TextDrawFont(Textdraws[textdraw_GENDER][7], 2);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][7], 0.349999, 1.399999);
    TextDrawTextSize(Textdraws[textdraw_GENDER][7], 0.000000, -133.500000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][7], 0);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][7], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][7], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][7], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][7], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][7], 255);
    TextDrawUseBox(Textdraws[textdraw_GENDER][7], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][7], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][7], 0);

    Textdraws[textdraw_GENDER][8] = TextDrawCreate(395.000000, 152.000000, "Mujer");
    TextDrawFont(Textdraws[textdraw_GENDER][8], 2);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][8], 0.349999, 1.399999);
    TextDrawTextSize(Textdraws[textdraw_GENDER][8], 0.000000, -133.500000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][8], 0);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][8], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][8], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][8], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][8], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][8], 255);
    TextDrawUseBox(Textdraws[textdraw_GENDER][8], 1);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][8], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][8], 0);

    Textdraws[textdraw_GENDER][9] = TextDrawCreate(320.000000, 340.000000, "'Pulsa_el_personaje_que_quieres_elegir'");
    TextDrawFont(Textdraws[textdraw_GENDER][9], 2);
    TextDrawLetterSize(Textdraws[textdraw_GENDER][9], 0.220832, 1.400000);
    TextDrawTextSize(Textdraws[textdraw_GENDER][9], 0.000000, 0.000000);
    TextDrawSetOutline(Textdraws[textdraw_GENDER][9], 0);
    TextDrawSetShadow(Textdraws[textdraw_GENDER][9], 0);
    TextDrawAlignment(Textdraws[textdraw_GENDER][9], 2);
    TextDrawColor(Textdraws[textdraw_GENDER][9], -1);
    TextDrawBackgroundColor(Textdraws[textdraw_GENDER][9], 255);
    TextDrawBoxColor(Textdraws[textdraw_GENDER][9], 50);
    TextDrawUseBox(Textdraws[textdraw_GENDER][9], 0);
    TextDrawSetProportional(Textdraws[textdraw_GENDER][9], 1);
    TextDrawSetSelectable(Textdraws[textdraw_GENDER][9], 0);
	return 1;
}

public OnGameModeExit()
{
	AntiAmx();

	new date[24];
	getDateTime(date);
	for(new i, j = GetPlayerPoolSize(); i <= j; i++)
	{
		if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
		{
			format(PI[i][pLAST_CONNECTION], 24, "%s", date);
			SavePlayerData(i);
			SavePlayerVehicles(i, false);
			SavePlayerWeaponsData(i);
			SavePlayerWorkLevels(i);
		}
	}
	mysql_close(handle_db);

	return 1;
}

CMD:a(playerid, params[])
{
	if(PI[playerid][pADMIN_LEVEL] < CMD_MODERATOR) return -1; //hacemos chequeo aqui para hacer que este comando no necesite duty
	if(isnull(params)) return ErrorCommandParams(playerid, "/a <texto>");

  	new string[445];
    format(string, sizeof(string), "[Admin Chat | %s] {"#YELLOW_COLOR"}/%s (%d): {"#SILVER_COLOR"}%s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, params);
	SendChatMessageToAdmins(GOLD_COLOR2, string);

	new dc_string[445]; format(dc_string, sizeof(dc_string), "Admin Chat (nick: '%s' Message: '%s')", PI[playerid][pNAME], params);
	SendAdminChatLogMessage(playerid, dc_string);
	return 1;
}

#define MIN_SECONDS_BETWEEN_TALKS 100 // Deben pasar al menos 1 segundos para volver a hablar.
hook OnPlayerText(playerid, text[])
{
	if(PlayerTemp[playerid][pt_KICKED]) return 0;
	
	if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL || PlayerTemp[playerid][pt_SELECT_TEXTDRAW])
	{
		SendMessage(playerid, "No puedes hablar ahora.");
		return 0;
	}

	if(text[0] == '#' && PI[playerid][pADMIN_LEVEL] > 1)
	{
      	new string[145];
		format(string, sizeof(string), "[Admin Chat | %s] {"#YELLOW_COLOR"}#%s (%d): {"#SILVER_COLOR"}%s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, text[1]);
		SendChatMessageToAdmins(GOLD_COLOR2, string);

		new dc_string[445]; format(dc_string, sizeof(dc_string), "Admin Chat (nick: '%s' Message: '%s')", PI[playerid][pNAME], text[1]);
		SendAdminChatLogMessage(playerid, dc_string);
		return 0;
	}

	new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_ANTIFLOOD_TALK]);
	if(interval < MIN_SECONDS_BETWEEN_TALKS)
	{
		if(ac_Info[CHEAT_TEXT_SPAMMER][ac_Enabled])
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_IMMUNITY])
			{
				if(interval < 50)
				{
					if(!ac_Info[CHEAT_TEXT_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_TEXT_SPAMMER, float(interval));
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_TEXT_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_TEXT_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_TEXT_SPAMMER, float(interval));
					}
				}
			}
		}
		SendClientMessagef(playerid, -1, "Cálmate."); 
		return 0; 
	}
	PlayerTemp[playerid][pt_ANTIFLOOD_TALK] = GetTickCount();
	
	if(PlayerTemp[playerid][pt_POLICE_CALL_NAME])
	{
		format(PlayerTemp[playerid][pt_POLICE_CALL_NAME_STR], 24, "%s", text);
		SendClientMessagef(playerid, -1, "Operadora: de acuerdo, describe brevemente lo que sucede para enviar una patrulla.");
		PlayerTemp[playerid][pt_POLICE_CALL_NAME] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION] = true;
		return 0;
	}
	if(PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PlayerTemp[playerid][pt_PLAYER_IN_CALL] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_NAME] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		
		
		new city[45], zone[45];
		GetPlayerZones(playerid, city, zone);
			
		new message[145];
		format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}Reporte {"#SILVER_COLOR"}[%s (%d), gps: %s, %s]: {FFFFFF}%s", PlayerTemp[playerid][pt_POLICE_CALL_NAME_STR], playerid, city, zone, text);
		SendPoliceRadioMessage(-1, -1, message);

		SendClientMessagef(playerid, -1, "Operadora: su peticion fue enviada, en breve una patrulla acudirá.");
		SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}Llamada finalizada.");
		return 0;
	}
	
	new str_text[190];
	if(text[0] == '!')
	{
		if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE)
		{
			if(text[1] == '!') format(str_text, sizeof str_text, "** [Radio] (( %s: %s ))", PlayerTemp[playerid][pt_NAME], text[2]);
			else
			{
				if(pTemp(playerid)[pt_POLICE_SWAT]) format(str_text, sizeof str_text, "{"#SWAT_COLOR"}** [Radio]{FF8C00} S.W.A.T %s: {FFFFFF}%s", PlayerTemp[playerid][pt_NAME], text[1]);
				else format(str_text, sizeof str_text, "{"#POLICE_COLOR"}** [Radio]{FF8C00} %s %s: {FFFFFF}%s", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PlayerTemp[playerid][pt_NAME], text[1]);
			}
			
			SendPoliceRadioMessage(PlayerTemp[playerid][pt_POLICE_RADIO], 0xCCCCCCCC, str_text);
			return 0;
		}
		
		if(PI[playerid][pCREW])
		{
			if(text[1] == '!') format(str_text, sizeof str_text, "** [Radio] (( %s: %s ))", PlayerTemp[playerid][pt_NAME], text[2]);
			else format(str_text, sizeof str_text, "{8D8DFF}** [Radio] %s %s: %s", PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], text[1]);
			
			SendMessageToCrewMembers(PI[playerid][pCREW], 0xCCCCCCCC, str_text);
			return 0;
		}
	}
	
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] == CALL_STATE_ESTABLISHED)
	{
		format(str_text, 145, "%s dice (por teléfono): %s", PlayerTemp[playerid][pt_NAME], text);
		SendClientMessagef(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID], -1, "{"#SILVER_COLOR"}Teléfono: %s: %s", convertPhoneNumber(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID], PI[playerid][pPHONE_NUMBER]), text);
	}
	else
	{
		if(GetPlayerDrunkLevel(playerid) > 2000) format(str_text, 145, "%s dice (ebrio): %s", PlayerTemp[playerid][pt_NAME], text);
		else format(str_text, 145, "%s dice: %s", PlayerTemp[playerid][pt_NAME], text);
	}
	ProxDetector(playerid, 15.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 0;
}

CMD:bebida(playerid, params[])
{
	if(PlayerTemp[playerid][pt_INTERIOR_INDEX] != -1)
	{
		if(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_CLUB)
		{
			if(IsPlayerInRangeOfPoint(playerid, 1.5, 1207.234375, -29.231435, 1000.953125))
			{
				if(GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_DRINK_WINE)
				{
					if(PI[playerid][pCASH] <= 50) return SendClientMessagef(playerid, -1, "La bebida cuesta 50$.");
					
					if(GivePlayerCash(playerid, -50, false, true)) {
						SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DRINK_BEER);
					}
				}
				return 1;
			}
		}
	}
	
	SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	return 1;
}

#define MIN_TIME_BETWEEN_DOUBT	60
#define IP_SPAM_MUTE_TIME		5 //minutos
CMD:duda(playerid, params[])
{
	if(!PI[playerid][pDOUBT_CHANNEL]) return SendMessagef(playerid, "Para enviar una duda primero debes activar el canal de dudas con /panel");
	if(isnull(params)) return ErrorCommandParams(playerid, "/duda [mensaje]");
	if(PI[playerid][pADMIN_LEVEL]) return ErrorCommandParams(playerid, "/dresponder [ID] [Texto]");

	if(PI[playerid][pMUTE] > gettime())
	{
		new seconds = PI[playerid][pMUTE] - gettime();
		SendClientMessagef(playerid, 0xCCCCCCCC, "Estás silenciado en el canal de dudas por %s minutos.", TimeConvert(seconds));
		return 1;
	}
	if(!PI[playerid][pADMIN_LEVEL])
	{
		if(gettime() < PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME] + MIN_TIME_BETWEEN_DOUBT)
		{
			new time = (MIN_TIME_BETWEEN_DOUBT-(gettime()-PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para volver a realizar otra consulta.", TimeConvert(time));
			return 1;
		}
	}
	
 	SendMessageToDoubtChannel(playerid, params);
	return 1;
}

CMD:dresponder(playerid, params[])
{
	if(!PI[playerid][pDOUBT_CHANNEL]) return SendMessagef(playerid, "Para enviar una duda primero debes activar el canal de dudas con /panel");
	
	new to_playerid, message[256];
	if(sscanf(params, "us[256]", to_playerid, message)) return ErrorCommandParams(playerid, "/dresponder [playerid] [mensaje]");

	if(PI[playerid][pMUTE] > gettime())
	{
		new seconds = PI[playerid][pMUTE] - gettime();
		SendClientMessagef(playerid, 0xCCCCCCCC, "Estás silenciado en el canal de dudas por %s minutos.", TimeConvert(seconds));
		return 1;
	}

	if(!PI[playerid][pADMIN_LEVEL])
	{
		if(gettime() < PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME] + MIN_TIME_BETWEEN_DOUBT)
		{
			new time = (MIN_TIME_BETWEEN_DOUBT-(gettime()-PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para responder a este jugador.", TimeConvert(time));
			return 1;
		}
	}

	format(message, sizeof(message), "@%d | %s", to_playerid, message);
 	SendMessageToDoubtChannel(playerid, message, true);
	return 1;
}

CMD:tg(playerid, params[])
{
	if(PI[playerid][pLEVEL] < 3) return SendMessage(playerid, "Debes ser nivel 3 o superior para usar el canal global.");
	if(!PI[playerid][pCONFIG_GLOBAL]) return SendMessage(playerid, "Para enviar un mensaje global activa el canal desde /panel.");
	if(PI[playerid][pGLOBAL_MUTE] > gettime())
	{
		new seconds = PI[playerid][pGLOBAL_MUTE] - gettime();
		SendClientMessagef(playerid, -1, "Estás silenciado en el canal global por %s minutos.", TimeConvert(seconds));
		return 1;
	}
	if(isnull(params)) return ErrorCommandParams(playerid, "/telegram [Texto]");
	if(!PI[playerid][pADMIN_LEVEL])
	{
		if(gettime() < PlayerTemp[playerid][pt_GLOBAL_TIMER] + MIN_TIME_BETWEEN_DOUBT)
		{
			new time = (MIN_TIME_BETWEEN_DOUBT-(gettime()-PlayerTemp[playerid][pt_GLOBAL_TIMER]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para volver a enviar otro mensaje.", TimeConvert(time));
			return 1;
		}
	}

	new message[445]; format(message, 445, "[Telegram] • {ffffff}#{2AABEE}%s {ffffff}(%d): %s", pTemp(playerid)[pt_NAME], playerid, params[0]);
	SendMessageToGlobalChannel(playerid, message);
	SendGlobalMessageToDiscord(playerid, params[0], false);
	return 1;
}
alias:tg("telegram");

CMD:atg(playerid, params[])
{
	if(PI[playerid][pLEVEL] < 3) return SendMessage(playerid, "Debes ser nivel 3 o superior para usar el canal global.");
	if(!PI[playerid][pCONFIG_GLOBAL]) return SendMessage(playerid, "Para enviar un mensaje global anonimo activa el canal desde /panel.");
	if(PI[playerid][pGLOBAL_MUTE] > gettime())
	{
		new seconds = PI[playerid][pGLOBAL_MUTE] - gettime();
		SendClientMessagef(playerid, -1, "Estás silenciado en el canal global por %s minutos.", TimeConvert(seconds));
		return 1;
	}	
	if(isnull(params)) return ErrorCommandParams(playerid, "/atelegram [Texto]");
	if(!PI[playerid][pADMIN_LEVEL])
	{
		if(gettime() < PlayerTemp[playerid][pt_GLOBAL_TIMER] + MIN_TIME_BETWEEN_DOUBT)
		{
			new time = (MIN_TIME_BETWEEN_DOUBT-(gettime()-PlayerTemp[playerid][pt_GLOBAL_TIMER]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para volver a enviar otro mensaje.", TimeConvert(time));
			return 1;
		}
	}

	new message[445]; format(message, 445, "[Telegram] • {666666}[#:%d]: {ffffff}%s", PI[playerid][pID], params[0]);
	SendMessageToGlobalChannel(playerid, message);
	SendGlobalMessageToDiscord(playerid, params[0], true);
	return 1;
}
alias:atg("atelegram");

CMD:g(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/gritar [TEXTO]");
	
	new str_text[190];
	format(str_text, 190, "%s grita: ¡%s!", PlayerTemp[playerid][pt_NAME], params);
	ProxDetector(playerid, 25.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}
alias:g("gritar");

CMD:s(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/susurrar [TEXTO]");
	
	new str_text[190];
	format(str_text, sizeof(str_text), "%s susurra: %s", PlayerTemp[playerid][pt_NAME], params);
	ProxDetector(playerid, 5.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}
alias:s("susurrar");

CMD:decir(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/decir [TEXTO]");
	
    new str_text[190];

	format(str_text, 145, "%s dice: %s", PlayerTemp[playerid][pt_NAME], params);
	ProxDetector(playerid, 15.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}


CMD:b(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/b [TEXTO]");
	
    new str_text[190];
    format(str_text, sizeof(str_text), "ID: %d | %s: (( %s ))", playerid, PlayerTemp[playerid][pt_NAME], params);
	ProxDetector(playerid, 15.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}

CMD:do(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/do [TEXTO]");
    SendPlayerEnviroment(playerid, params);
	return 1;
}

CMD:me(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/me [TEXTO]");
	SendPlayerAction(playerid, params);
	return 1;
}

CMD:1(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE)
	{
		SendPlayerAction(playerid, "desenfunda su arma con autoridad y determinación.");
		SendPlayerEnviroment(playerid, "..::Click::.. ..::Clack::.. Arma lista para disparar");
	}
	else
	{
		SendPlayerAction(playerid, "saca su arma con un gesto rápido y amenazante.");
		SendPlayerEnviroment(playerid, "..::Click::.. ..::Clack::.. Arma lista para disparar");
		SendPlayerEnviroment(playerid, "Se verian a todos los civiles correr cuando ven al sujeto armado");
	}
	return 1;
}


CMD:experiencia(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ShowPlayerSkills(playerid, playerid);
	return 1;
}
alias:experiencia("exp", "skills");

CMD:estado(playerid, params[])
{
	ShowPlayerHudInfo(playerid, 15);
	return 1;
}

CMD:est(playerid, params[])
{
	ShowPlayerStats(playerid, playerid);
	return 1;
}
alias:est("estadisticas", "cuenta");

CMD:inv(playerid, params[])
{
	ShowPlayerInventory(playerid, playerid);
}
alias:inv("inventario");

CMD:web(playerid, params[])
{
	SendClientMessage(playerid, -1, "Web: {"#BLUE_COLOR"}"SERVER_WEBSITE"");
	return 1;
}

CMD:discord(playerid, params[])
{
	SendClientMessage(playerid, -1, "Discord: {"#BLUE_COLOR"}"SERVER_DISCORD"");
	return 1;
}

ptask AutoSavePlayerData[30000](playerid)
{
	if(IsPlayerRegistered(playerid))
	{
		if(IsPlayerLoggedIn(playerid))
		{
			SavePlayerData(playerid);
			SavePlayerVehicles(playerid, false);
			SavePlayerWeaponsData(playerid);
			SavePlayerWorkLevels(playerid);
		}
	}
}

stock SetPlayerNametagInfo(playerid, bool:update)
{
	new label_str[1024], extra_str[1024] = "", health_str[445] = "", armour_str[445] = "";
	format(label_str, 1024, "%s%s (%d)\n", PlayerTemp[playerid][pt_PLAYER_COLOR], PlayerTemp[playerid][pt_NAME], playerid);

	if(PI[playerid][pWANTED_LEVEL])
	{
		switch(PI[playerid][pWANTED_LEVEL])
		{
			case 1: format(extra_str, sizeof(extra_str), "{FFFED0}[{fffdba}Buscado *%d{FFFED0}]\n", PI[playerid][pWANTED_LEVEL]);
			case 2: format(extra_str, sizeof(extra_str), "{F6F391}[{f7f254}Buscado *%d{F6F391}]\n", PI[playerid][pWANTED_LEVEL]);
			case 3: format(extra_str, sizeof(extra_str), "{D8A144}[{d98900}Buscado *%d{D8A144}]\n", PI[playerid][pWANTED_LEVEL]);
			case 4: format(extra_str, sizeof(extra_str), "{CB724A}[{ce4202}Buscado *%d{CB724A}]\n", PI[playerid][pWANTED_LEVEL]);
			case 5: format(extra_str, sizeof(extra_str), "{FF7DFF}[{ff00ff}Buscado *%d{FF7DFF}]\n", PI[playerid][pWANTED_LEVEL]);
			case 6: format(extra_str, sizeof(extra_str), "{A742C8}[{9900cc}Buscado *%d{A742C8}]\n", PI[playerid][pWANTED_LEVEL]);
		}
	}

	if(pTemp(playerid)[pt_CUFFED]) format(extra_str, sizeof(extra_str), "{C8FF73}[{"#GREEN_COLOR"}Esposado{C8FF73}]\n");

	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE)
	{
		if(pTemp(playerid)[pt_POLICE_SWAT]) format(extra_str, sizeof(extra_str), "{"#POLICE_COLOR"}S.W.A.T | N.%d | %c. %s\n", PI[playerid][pPLACA_PD], PlayerTemp[playerid][pt_FIRST_NAME][0], PlayerTemp[playerid][pt_SUB_NAME]);
		else format(extra_str, sizeof(extra_str), "{CCCCCC}%s | N.%d | %c. %s\n", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PI[playerid][pPLACA_PD], PlayerTemp[playerid][pt_FIRST_NAME][0], PlayerTemp[playerid][pt_SUB_NAME]);
	}

	if(PlayerTemp[playerid][pt_ADMIN_SERVICE]) format(extra_str, sizeof(extra_str), "{"#PRIMARY_COLOR"}[%s]\n", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ]);
	if(IsPlayerPaused(playerid)) format(extra_str, sizeof(extra_str), "{000000}[{232323}Pausa{000000}]\n");
	
	if(PI[playerid][pSTATE] != ROLEPLAY_STATE_CRACK && !IsPlayerInSafeZone(playerid) && PlayerTemp[playerid][pt_COMBAT])
	{
		if(PI[playerid][pARMOUR])
		{
			format(armour_str, 445, "{000000}[{ffffff}IIIIIIIIII{000000}]\n");
			new start = floatround( floatdiv(PI[playerid][pARMOUR], floatdiv(100, 10.0)) );
			if(start < 10) strins(armour_str, "{323232}", 17 + start);
		}
		else armour_str = "";

		format(health_str, 445, "{000000}[{ff0000}IIIIIIIIII{000000}]\n");
		new start = floatround( floatdiv(PI[playerid][pHEALTH], floatdiv(100, 10.0)) );
		if(start < 10) strins(health_str, "{550000}", 17 + start);
	}

	if(strlen(armour_str) > 0) strcat(label_str, armour_str);
	if(strlen(health_str) > 0) strcat(label_str, health_str);
	if(strlen(extra_str) > 0) strins(label_str, extra_str, 0);

	if(update) UpdateDynamic3DTextLabelText(PlayerTemp[playerid][pt_PLAYER_NAMETAG], PLAYER_COLOR, label_str);
	else
	{
		if(IsValidDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]))
		{
			DestroyDynamic3DTextLabel(PlayerTemp[playerid][pt_PLAYER_NAMETAG]);
			PlayerTemp[playerid][pt_PLAYER_NAMETAG] = Text3D:INVALID_STREAMER_ID;
		}
		PlayerTemp[playerid][pt_PLAYER_NAMETAG] = CreateDynamic3DTextLabel(label_str, PLAYER_COLOR, 0.0, 0.0, 0.3, 40.0, playerid, .testlos = true);
	}
	return 1;
}

ptask UpdatePlayerInfo[500](playerid)
{
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE)
	{
		if(PlayerTemp[playerid][pt_REQUEST_HELP])
		{
			for(new i = 0; i != MAX_PLAYERS; i++)
			{
				if(IsPlayerConnected(i))
				{
					if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if(i == playerid) continue;
						if(!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
						if(pTemp(i)[pt_WORKING_IN] != WORK_POLICE) continue;
						
						if(pTemp(playerid)[pt_POLICE_SWAT]) SetPlayerMarkerForPlayer(i, playerid, SWAT_COLOR2);
						else SetPlayerMarkerForPlayer(i, playerid, POLICE_COLOR2);
					}
				}
			}
		}
		else DisablePlayerGlobalMarker(playerid);

		if(pTemp(playerid)[pt_POLICE_SWAT]) format(PlayerTemp[playerid][pt_PLAYER_COLOR], 10, "{"#SWAT_COLOR"}");
		else format(PlayerTemp[playerid][pt_PLAYER_COLOR], 10, "{"#POLICE_COLOR"}");
		
		if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK) SendAlertToMedics(playerid);
		if(PlayerTemp[playerid][pt_WANT_TAXI]) SendAlertToTaxiDrivers(playerid);
	}
	else if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK) SendAlertToMedics(playerid);
	else if(PlayerTemp[playerid][pt_WANT_TAXI]) SendAlertToTaxiDrivers(playerid);
	else
	{
		if(PlayerTemp[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
		{
			if(IsPlayerInDynamicArea(playerid, TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_AREA]))
			{
				if(TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_WAR])
				{
					format(PlayerTemp[playerid][pt_PLAYER_COLOR], 11, "{%06x}", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8);
				}
				else SetPlayerNormalColour(playerid);
			}
			else SetPlayerNormalColour(playerid);
		}
		else SetPlayerNormalColour(playerid);
	}

	if(PI[playerid][pWANTED_LEVEL]) SetWantedMarkerToPolice(playerid);
	SetPlayerNametagInfo(playerid, true);
}

CMD:ayuda(playerid, params[])
{
	switch(YHash(params, false))
	{
		case _I<general>: ShowDialog(playerid, DIALOG_HELP_GENERAL);
		case _I<informacion>: ShowDialog(playerid, DIALOG_HELP_INFO);
		case _I<personaje>: ShowDialog(playerid, DIALOG_HELP_CHARACTER);
		case _I<propiedades>: ShowDialog(playerid, DIALOG_HELP_PROPERTIES);
		case _I<reportar>: ShowDialog(playerid, DIALOG_HELP_REPORT);
		case _I<trabajos>: ShowDialog(playerid, DIALOG_HELP_WORKS);
		case _I<vehiculos>: ShowDialog(playerid, DIALOG_HELP_VEHICLES);
		case _I<bandas>: ShowDialog(playerid, DIALOG_HELP_CREWS);
		case _I<vip>: ShowDialog(playerid, DIALOG_HELP_VIP);

		default: ShowDialog(playerid, DIALOG_HELP);
	}
	return 1;
}

CMD:gps(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pGPS])
	{
		SendMessage(playerid, "No tienes ningun GPS, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	
	Auto_SendPlayerAction(playerid, "mira su GPS.");
	ShowDialog(playerid, DIALOG_PLAYER_GPS);
	return 1;
}

CMD:tiempo(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL)
	{
		new time = PI[playerid][pPOLICE_JAIL_TIME] - (gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME]);
		if(time <= 0)
		{
			UnjailPlayer(playerid);
			return 1;
		}
		SendMessagef(playerid, "Te quedan %s minutos de condena.", TimeConvert(time));
	}
	else SendClientMessagef(playerid, -1, "No estás en la cárcel.");
	return 1;
}

CMD:stop(playerid, params[])
{
	StopAudioStreamForPlayer(playerid);
	return 1;
}

CMD:pass(playerid, params[])
{
	ShowDialog(playerid, DIALOG_CHANGE_PASSWORD);
	return 1;
}
alias:pass("contra", "cpass");

CMD:gcp(playerid, params[])
{
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]);
		PlayerTemp[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
		
		SendMessage(playerid, "Has cancelado la ruta antigua de tu GPS.");
	}
	else SendClientMessagef(playerid, -1, "No tienes ningun punto marcado en tu GPS.");
	return 1;
}

CMD:movil(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");

	if(!PI[playerid][pPHONE_NUMBER]) return SendMessage(playerid, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendMessage(playerid, "Estás en una llamada.");
						
	Auto_SendPlayerAction(playerid, "mira su teléfono.");
	ShowDialog(playerid, DIALOG_PHONE);
	return 1;
}
alias:movil("celular", "telefono", "tlf");


CMD:guia(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pPHONE_RESOLVER])
	{
		SendMessage(playerid, "No tienes una guía telefonica, puedes ir a cualquier 24/7 para comprar una.");
		return 1;
	}
	
	if(sscanf(params, "u", params[0])) return ErrorCommandParams(playerid, "/guia [PlayerID/Nombre]");
	if(!IsPlayerConnected(params[0])) return SendMessage(playerid, "Jugador desconectado.");
	
	if(!PI[params[0]][pPHONE_NUMBER]) return SendMessage(playerid, "Este jugador no tiene teléfono.");
	if(!PI[params[0]][pPHONE_VISIBLE_NUMBER]) return SendClientMessagef(playerid, -1, "Este jugador ha decidido no mostrar su numero en la guía.");
	
	SendClientMessagef(playerid, GOLD_COLOR2, "[Agenda]: {ffffff}Nombre: {"#BLUE_COLOR"}%s {ffffff}Teléfono: {"#PURPLE_COLOR"}%d.", pTemp(params[0])[pt_NAME], PI[params[0]][pPHONE_NUMBER]);
	return 1;
}

CMD:sms(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pPHONE_NUMBER])
	{
		SendClientMessagef(playerid, -1, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "Estás en una llamada.");
	
	new params_message[64], params_number, params_contact[24];
	if(!sscanf(params, "ds[64]", params_number, params_message))
	{
		if(params_number <= 0) SendClientMessagef(playerid, -1, "El numero destino no es válido.");
		else
		{
			inline OnPhoneChecked()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new id, connected, pid;
						cache_get_value_name_int(0, "id", id);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);

						if(connected) RegisterPhoneMessage(PI[playerid][pID], id, params_message, 0);
						else RegisterPhoneMessage(PI[playerid][pID], id, params_message, 1);
						if(connected)
						{
							if(PI[pid][pPHONE_STATE] == PHONE_STATE_ON)
							{
								SendClientMessagef(pid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(pid, PI[playerid][pPHONE_NUMBER]), params_message);
							}
						}
						SendClientMessagef(playerid, -1, "Mensaje enviado a %s.", convertPhoneNumber(playerid, params_number));
					}
					else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, connected, playerid FROM player WHERE phone_number = %d;", params_number);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneChecked);
		}
	}
	else if(!sscanf(params, "s[24]s[64]", params_contact, params_message))
	{
		inline OnPhoneChecked()
		{
			new rows;
			if(cache_get_row_count(rows))
			{
				if(rows)
				{
					new number, id, connected, pid, bool:isnull_id;
					cache_is_value_name_null(0, "id", isnull_id);
					if(!isnull_id) {
						cache_get_value_name_int(0, "number", number);
						cache_get_value_name_int(0, "id", id);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);

						if(connected) RegisterPhoneMessage(PI[playerid][pID], id, params_message, 0);
						else RegisterPhoneMessage(PI[playerid][pID], id, params_message, 1);

						if(connected)
						{
							if(PI[pid][pPHONE_STATE] == PHONE_STATE_ON)
							{
								SendClientMessagef(pid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(pid, PI[playerid][pPHONE_NUMBER]), params_message);
							}
						}
						SendClientMessagef(playerid, -1, "Mensaje enviado a %s.", convertPhoneNumber(playerid, number));
					}
					else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
				}
				else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pbook.number, player.id, player.connected, player.playerid FROM pbook LEFT JOIN player ON pbook.number = player.phone_number WHERE pbook.id_player = %d AND pbook.name LIKE '%%%e%%' LIMIT 1;", PI[playerid][pID], params_contact);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneChecked);
	}
	else SendClientMessagef(playerid, -1, "Usa /sms [numero o contacto]");
	return 1;
}

CMD:agenda(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pPHONE_NUMBER])
	{
		SendClientMessagef(playerid, -1, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "Estás en una llamada.");
	
	ShowDialog(playerid, DIALOG_PHONE_BOOK);
	return 1;
}

HandleStaticPhoneNumbers(playerid, call_number)
{
	switch(call_number)
	{
		case 911:
		{
			if(PI[playerid][pLEVEL] < 2) return SendClientMessagef(playerid, -1, "Debes ser al menos nivel 2 para llamar a la policía.");
			PlayerTemp[playerid][pt_PLAYER_IN_CALL] = true;
			PlayerTemp[playerid][pt_POLICE_CALL_NAME] = true;
			PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
			
			SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Operadora: ha llamado a la central de policía, indícanos su nombre por favor.");
			return 1;
		}
		case 450: //Taxi
		{
			if(PlayerTemp[playerid][pt_WANT_TAXI])
			{
				PlayerTemp[playerid][pt_WANT_TAXI] = false;
				DisablePlayerTaxiMark(playerid);
				SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Has cancelado el taxi.");
			}
			else
			{
				PlayerTemp[playerid][pt_WANT_TAXI] = true;
				SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Tu llamada se ha enviado a los taxistas disponibles, espera a que llegue un taxi.");
				SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Vuelve a llamar a este numero si ya no necesitas un taxi.");
				SendAlertToTaxiDrivers(playerid);
			}
			return 1;
		}
		case 6740:
		{
			SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}No vuelvas a llamar al banco, cuidado.");
			return 1;
		}
		case 38350:
		{
			SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Aseguradora que asegura tus vehículos de mierda.");
			return 1;
		}
		case 666:
		{
			SendClientMessage(playerid, -1, "{"#SILVER_COLOR"}Mirar a las estrellas es mirar al pasado, no mires.");
			return 1;
		}
	}
	return 0;
}

CMD:llamar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pPHONE_NUMBER])
	{
		SendClientMessagef(playerid, -1, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "Estás en una llamada.");

	new params_number, params_contact[24];
	if(!sscanf(params, "d", params_number))
	{
		if(params_number <= 0) SendClientMessagef(playerid, -1, "El numero destino no es válido.");
		else
		{
			if(!HandleStaticPhoneNumbers(playerid, params_number))
			{
				inline OnPhoneChecked()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new id, connected, pid;
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if(!connected) SendClientMessagef(playerid, -1, "El numero al que intentas llamar está fuera de cobertura (desconectado).");
							else
							{
								if(pid == playerid) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar es el tuyo.");
								if(PI[pid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar está apagado o fuera de cobertura.");
								if(pTemp(pid)[pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar está en otra llamada.");
								
								SendClientMessagef(pid, -1, "[Llamada entrante] %s te está llamando, para responser usa /responder o /colgar.", convertPhoneNumber(pid, PI[playerid][pPHONE_NUMBER]));
								pTemp(pid)[pt_PLAYER_IN_CALL] = true;
								pTemp(pid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_INCOMING_CALL;
								pTemp(pid)[pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
								
								SendClientMessagef(playerid, -1, "Llamando a %s...", convertPhoneNumber(playerid, params_number));
								PlayerTemp[playerid][pt_TIMERS][6] = SetTimerEx("NoCallResponse", 15000, false, "i", playerid);
								PlayerTemp[playerid][pt_PLAYER_IN_CALL] = true;
								PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_WAITING_RESPONSE;
								PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = pid;
								PlayerPlaySoundEx(playerid, 3600, 0.0, 0.0, 0.0);
							}
						}
						else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, connected, playerid FROM player WHERE phone_number = %d;", params_number);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneChecked);
			}
		}
	}
	else if(!sscanf(params, "s[24]", params_contact))
	{
		if(!strcmp(params_contact, "policia", true)) HandleStaticPhoneNumbers(playerid, 911);
		else if(!strcmp(params_contact, "taxi", true)) HandleStaticPhoneNumbers(playerid, 450);
		else if(!strcmp(params_contact, "mecanico", true)) HandleStaticPhoneNumbers(playerid, 570);
		else
		{
			inline OnPhoneChecked()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new number, id, connected, pid, bool:isnull_id;
						cache_is_value_name_null(0, "id", isnull_id);
						if(!isnull_id) {
							cache_get_value_name_int(0, "number", number);
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if(!connected) SendClientMessagef(playerid, -1, "El numero al que intentas llamar está fuera de cobertura (desconectado).");
							else
							{
								if(pid == playerid) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar es el tuyo.");
								if(PI[pid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar está apagado o fuera de cobertura.");
								if(pTemp(pid)[pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "El numero al que intentas llamar está en otra llamada.");
								
								SendClientMessagef(pid, -1, "[Llamada entrante] %s te está llamando, para responser usa /responder o /colgar.", convertPhoneNumber(pid, PI[playerid][pPHONE_NUMBER]));
								pTemp(pid)[pt_PLAYER_IN_CALL] = true;
								pTemp(pid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_INCOMING_CALL;
								pTemp(pid)[pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
								
								SendClientMessagef(playerid, -1, "Llamando a %s...", convertPhoneNumber(playerid, number));
								PlayerTemp[playerid][pt_TIMERS][6] = SetTimerEx("NoCallResponse", 15000, false, "i", playerid);
								PlayerTemp[playerid][pt_PLAYER_IN_CALL] = true;
								PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_WAITING_RESPONSE;
								PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = pid;
								PlayerPlaySoundEx(playerid, 3600, 0.0, 0.0, 0.0);
							}
						}
						else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
					}
					else SendClientMessagef(playerid, -1, "El numero destino no es válido.");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pbook.number, player.id, player.connected, player.playerid FROM pbook LEFT JOIN player ON pbook.number = player.phone_number WHERE pbook.id_player = %d AND pbook.name LIKE '%%%e%%' LIMIT 1;", PI[playerid][pID], params_contact);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneChecked);
		}
	}
	else SendClientMessagef(playerid, -1, "Usa /llamar [numero o contacto]");
	return 1;
}

CMD:responder(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!PI[playerid][pPHONE_NUMBER])
	{
		SendClientMessagef(playerid, -1, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, para encenderlo usa /movil.");
	
	if(!PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "No hay ninguna llamada entrante.");
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "No hay ninguna llamada entrante."); 
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] != CALL_STATE_INCOMING_CALL) return SendClientMessagef(playerid, -1, "No hay ninguna llamada entrante.");
	
	new to_playerid = PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID];
	
	PlayerTemp[playerid][pt_PLAYER_IN_CALL] = true;
	PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_ESTABLISHED;
	PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = to_playerid;
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USECELLPHONE);
	
	KillTimer(pTemp(to_playerid)[pt_TIMERS][6]);
	pTemp(to_playerid)[pt_PLAYER_IN_CALL] = true;
	pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_ESTABLISHED;
	pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
	SetPlayerSpecialAction(to_playerid, SPECIAL_ACTION_USECELLPHONE);
	
	SendClientMessagef(playerid, -1, "Llamada establecida, usa /colgar para terminarla.");
	SendClientMessagef(to_playerid, -1, "Llamada establecida, usa /colgar para terminarla.");
	return 1;
}

CMD:colgar(playerid, params[])
{
	if(!PI[playerid][pPHONE_NUMBER])
	{
		SendClientMessagef(playerid, -1, "No tienes ningun teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, para encenderlo usa /movil.");
	
	if(!PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return SendClientMessagef(playerid, -1, "No hay ninguna llamada entrante.");
	
	if(PlayerTemp[playerid][pt_POLICE_CALL_NAME] || PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PlayerTemp[playerid][pt_PLAYER_IN_CALL] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_NAME] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		SendClientMessagef(playerid, -1, "Llamada finalizada.");
		return 1;
	}
	
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "No hay ninguna llamada entrante."); 
	
	switch(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE])
	{
		case CALL_STATE_WAITING_RESPONSE:
		{
			EndPhoneCall(playerid);
			SendClientMessagef(playerid, -1, "Colgaste.");
		}
		case CALL_STATE_INCOMING_CALL:
		{
			EndPhoneCall(playerid);
			SendClientMessagef(playerid, -1, "No has respondido la llamada.");
		}
		case CALL_STATE_ESTABLISHED:
		{
			EndPhoneCall(playerid);
			SendClientMessagef(playerid, -1, "Llamada finalizada.");
		}
		default: SendClientMessagef(playerid, -1, "No estás en ninguna llamada.");	
	}
	return 1;
}

CMD:panel(playerid, params[])
{
	ShowDialog(playerid, DIALOG_PLAYER_CONFIG);
	return 1;
}
alias:panel("config", "configuracion", "ajustes");

GetPropertyIndexByID(id)
{
	for(new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if(!PROPERTY_INFO[i][property_VALID]) continue;
		if(PROPERTY_INFO[i][property_ID] == id) return i;
	}
	return -1;
}

CMD:puerta(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
		if(index == -1) return SendMessage(playerid, "BUG: Toma captura de pantalla y abre ticket en discord.");
		if(PROPERTY_INFO[index][property_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Esta no es tu casa");

		if(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID] == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "Nadie ha tocado en la puerta.");
		if(!IsPlayerConnected(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID])) return SendClientMessagef(playerid, -1, "Nadie ha tocado en la puerta o ya se ha ido.");
		if(!IsPlayerInRangeOfPoint(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID], 3.0, PROPERTY_INFO[index][property_EXT_X], PROPERTY_INFO[index][property_EXT_Y], PROPERTY_INFO[index][property_EXT_Z])) return SendClientMessagef(playerid, -1, "Nadie ha tocado en la puerta o ya se ha ido.");
		if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "Este jugador no puede entrar ahora.");

		PI[PlayerTemp[playerid][pt_KNOCK_PLAYER_ID]][pSTATE] = ROLEPLAY_STATE_GUEST_PROPERTY;
		PI[PlayerTemp[playerid][pt_KNOCK_PLAYER_ID]][pLOCAL_INTERIOR] = PROPERTY_INFO[index][property_ID];
		pTemp(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID])[pt_PROPERTY_INDEX] = index;

		new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Z];
		
		SetPlayerPosEx(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID], PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[index][property_ID], false /*PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_FREEZE]*/, true);
		FreezePlayer(PlayerTemp[playerid][pt_KNOCK_PLAYER_ID]);
	}
	else SendClientMessagef(playerid, -1, "No estás en tu casa.");
	return 1;
}

CMD:casa(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
		if(index == -1) return SendMessage(playerid, "BUG: Toma captura de pantalla y abre ticket en discord.");
		if(PROPERTY_INFO[index][property_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Esta no es tu casa");

		PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] = index;
		ShowDialog(playerid, DIALOG_PROPERTY_OPTIONS);
	}
	else SendClientMessagef(playerid, -1, "No estás en tu casa.");
	return 1;
}

CMD:armario(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
		if(index == -1) return SendMessage(playerid, "BUG: Toma captura de pantalla y abre ticket en discord.");
		if(PROPERTY_INFO[index][property_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Esta no es tu casa");

		new Float:z_pos = PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_Z];
		
		if(IsPlayerInRangeOfPoint(playerid, 1.0, PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_X], PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_Y], z_pos))
		{
			PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] = index;
			ShowDialog(playerid, DIALOG_PROPERTY_CLOSET);
		}
		else SendClientMessagef(playerid, -1, "No estás cerca del armario.");
	}
	else SendClientMessagef(playerid, -1, "No estás en tu casa.");
	return 1;
}

CMD:echar(playerid, params[])
{
	if(sscanf(params, "u", params[0])) return ErrorCommandParams(playerid, "/echar [PlayerID/Nombre]");
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	if(playerid == params[0]) return SendClientMessagef(playerid, -1, "No te eches a ti mismo.");
	
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		if( PI[params[0]][pSTATE] == ROLEPLAY_STATE_GUEST_PROPERTY && PI[params[0]][pLOCAL_INTERIOR] == PI[playerid][pLOCAL_INTERIOR])
		{		
			new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
			if(index == -1) return SendClientMessagef(playerid, -1, "BUG: CMD /ECHAR, Tome captura y contacte con administrador.");
				
			PI[params[0]][pSTATE] = ROLEPLAY_STATE_NORMAL;
			PI[params[0]][pLOCAL_INTERIOR] = 0;
			pTemp(params[0])[pt_PROPERTY_INDEX] = -1;
			SetPlayerPosEx(params[0], PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], PROPERTY_INFO[ index ][property_EXT_ANGLE], PROPERTY_INFO[ index ][property_EXT_INTERIOR], 0, false /*PROPERTY_INFO[ index ][property_EXT_FREEZE]*/, false);
			StopAudioStreamForPlayer(params[0]);
			FreezePlayer(params[0]);
			
			SendClientMessagef(playerid, -1, "%s te ha echado de su propiedad.", PlayerTemp[playerid][pt_NAME]);
			SendClientMessagef(playerid, -1, "Has echado a %s de tu propiedad.", pTemp(params[0])[pt_NAME]);
		}
		else SendClientMessagef(playerid, -1, "Este jugador no está en tu propiedad.");
		return 1;
	}

	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		
		if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
		if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
		if(GetPlayerVehicleID(params[0]) != vehicleid) return SendClientMessagef(playerid, -1, "Este jugador no está en tu vehículo.");
		
		RemovePlayerFromVehicle(params[0]);
		
		new action[64];
		format(action, sizeof action, "ha echado a %s de su vehículo.", pTemp(params[0])[pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		return 1;
	}
	
	SendClientMessagef(playerid, -1, "No estás en tu propiedad o en tu vehículo.");
	return 1;
}

CMD:tarifa(playerid, params[])
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessagef(playerid, -1, "No estás conduciendo.");
	if(!PLAYER_WORKS[playerid][WORK_TAXI][pwork_SET]) return SendMessage(playerid, "No eres taxista.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TAXI) return SendMessage(playerid, "No estás de servicio como taxista.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED]) return SendClientMessagef(playerid, -1, "Solo puedes cambiar la tarifa cuando no haya ningun pasajero.");
	
	if(sscanf(params, "d", params[0])) return ErrorCommandParams(playerid, "/tarifa [0-14]");
	if(params[0] < 0 || params[0] > 14) return ErrorCommandParams(playerid, "/tarifa [0-14]");
	
	TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_PRICE] = params[0];
	Auto_SendPlayerAction(playerid, "ajusta el taxímetro.");
	UpdatePlayerTaxiMeterTextdraws(playerid);
	return 1;
}

CMD:cargar(playerid, params[])
{
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessagef(playerid, -1, "No estás conduciendo.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "No estás en un vehículo de carga.");
	if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_TRUCK) return SendClientMessagef(playerid, -1, "No estás en un vehículo de carga.");

	if(PLAYER_WORKS[playerid][WORK_TRUCK][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_TRUCK) {
		for(new i = 0; i != sizeof LoadTrucksPoints; i ++)
		{
			if(IsPlayerInRangeOfPoint(playerid, 3.0, LoadTrucksPoints[i][0], LoadTrucksPoints[i][1], LoadTrucksPoints[i][2]))
			{
				new Float:angle;
				GetVehicleZAngle(vehicleid, angle);
				if(angle > 180.0) angle -= 360.0;

				if(angle > (LoadTrucksPoints[i][3] - 15.0) && angle < (LoadTrucksPoints[i][3] + 15.0))
				{	
					if(TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED]) return SendClientMessagef(playerid, -1, "El camion ya está cargado.");
					if(TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING]) return SendClientMessagef(playerid, -1, "El camion ya se está cargando.");
		
					TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING] = true;
					TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] = PI[playerid][pID];
					
					SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
					
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
					UpdateVehicleParams(vehicleid);
					
					ShowDialog(playerid, DIALOG_SELECT_TRUCK_TYPE);
				}
				else SendClientMessagef(playerid, -1, "El camion no está correctamente colocado para cargarlo.");
				return 1;
			}
		}
		SendClientMessagef(playerid, -1, "Para cargar el camion colocate en cualquier punto de carga.");
	}
	else SendClientMessagef(playerid, -1, "No estás trabajando en camionero o repartidor.");
	return 1;
}

CMD:gasolina(playerid, params[])
{
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessagef(playerid, -1, "No estás en nigun vehículo.");
	
	new vehicleid = GetPlayerVehicleID(playerid), modelid = GetVehicleModel(vehicleid);
	if(!VEHICLE_INFO[modelid - 400][vehicle_info_NORMAL_SPEEDO]) return SendClientMessagef(playerid, -1, "No puedes repostar este vehículo.");
	
	new fuel_station = -1;
	for(new i = 0; i < sizeof Fuel_Stations; i++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 5.0, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z]))
		{
			fuel_station = i;
			break;
		}
	}
	if(fuel_station == -1) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) return SendClientMessagef(playerid, -1, "Este vehículo no tiene deposito de gasolina.");
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE])
	{
		SendClientMessagef(playerid, -1, "Por favor, para primero el motor del vehículo.");
		return 1;
	}
	
	if(!sscanf(params, "d", params[0]))
	{
		new Float:amount = float(params[0]);
		if(amount < 0.0) return ErrorCommandParams(playerid, "/gasolina [litros / lleno]");
		if(amount + GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) amount = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] - GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS];
		
		new price = floatround( floatmul(amount, 5.0) );
		
		if(PI[playerid][pCASH] >= price)
		{
			if(GivePlayerCash(playerid, -price, true, true)) {
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] += amount;
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "Cantidad: %.1f litros Precio: %s dolares", amount, number_format_thousand(price));
				Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
			}
		}
		else
		{
			PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
			SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder repostar {588dc9}%.1f.", number_format_thousand(price - PI[playerid][pCASH]), amount);
		}
		return 1;
	}
	
	new text[24];
	if(!sscanf(params, "s[24]", text))
	{
		if(!strcmp(text, "lleno", true))
		{
			new Float:amount = floatsub(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS]);

			new price = floatround( floatmul(amount, 5.0) );
			if(PI[playerid][pCASH] >= price)
			{
				if(GivePlayerCash(playerid, -price, true, true)) {
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS];
					
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "Cantidad: %.1f litros Precio: %s dolares.", amount, number_format_thousand(price));
					Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
				}
			}
			else
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder repostar {588dc9}%.1f.", number_format_thousand(price - PI[playerid][pCASH]), amount);
			}
		}
		else ErrorCommandParams(playerid, "/gasolina [litros / lleno]");
		return 1;
	}
	
	ErrorCommandParams(playerid, "/gasolina [litros / lleno]");
	return 1;
}

CMD:vertir(playerid, params[])
{	
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "Tienes que estar fuera del vehículo para vertir el bidon.");
	
	new vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendMessage(playerid, "No estás cerca de ningun vehículo.");
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE])
	{
		SendClientMessagef(playerid, -1, "Por favor, para primero el motor del vehículo.");
		return 1;
	}
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) return SendClientMessagef(playerid, -1, "Este vehículo no tiene deposito de gasolina.");

	if(sscanf(params, "d", params[0])) return ErrorCommandParams(playerid, "/vetir [Cantidad de litros]");
	if(params[0] <= 0) return SendClientMessagef(playerid, -1, "Cantidad de litros no válida.");
	if(params[0] > PI[playerid][pFUEL_DRUM]) return SendClientMessagef(playerid, -1, "Solo tienes %d.0 litros en el bidon.", PI[playerid][pFUEL_DRUM]);
	
	new Float:amount = float(params[0]);
	if(amount + GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) amount = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] - GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS];
	
	PI[playerid][pFUEL_DRUM] -= floatround(amount);
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] += amount;
	SendClientMessagef(playerid, -1, "Has vertido {"#GOLD_COLOR"}%.1f{ffffff} litros del bidon, te quedan {"#GREEN_COLOR"}%d.0{ffffff} litros.", amount, PI[playerid][pFUEL_DRUM]);
	Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
	return 1;
}

CMD:setfdrum(playerid, params[])
{
	new to_playerid, amount;
	if(sscanf(params, "ud", to_playerid, amount)) return ErrorCommandParams(playerid, "/setfdrum <player_id> <valor>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	PI[to_playerid][pFUEL_DRUM] = amount;
	
	SendCmdLogToAdmins(playerid, "setfdrum", params);
	return 1;
}

SendPlayerAction(playerid, const action[])
{
	new str_text[445];
	format(str_text, sizeof str_text, "* %s %s", PlayerTemp[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF, 85);
	return 1;
}

Auto_SendPlayerAction(playerid, const action[])
{
	new str_text[445];
	format(str_text, 145, "** %s %s", PlayerTemp[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF, 0xC2A2DAFF);
	return 1;
}

SendPlayerEnviroment(playerid, const action[])
{
    new str_text[445];
    format(str_text, sizeof(str_text), "* %s (( %s ))", PlayerTemp[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 85);
	return 1;
}

stock Auto_SendPlayerEnviroment(playerid, const action[])
{
    new str_text[445];
    format(str_text, sizeof(str_text), "** %s (( %s ))", PlayerTemp[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 85);
	return 1;
}

stock ShowMenu(playerid, extra)
{
	switch(extra)
	{
		case MENU_SELECT_POLICE_VEHICLE:
		{	
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			new List:Vehicles = list_new(), listitem;

			Loop(i, sizeof(POLICE_VEHICLES_INFO), 0)
			{
				AddModelMenuItem(Vehicles, POLICE_VEHICLES_INFO[i][0], .usingrotation = true, .rotx = -10.000000, .roty = 0.0, .rotz = -40.000000, .vehiclecolor1 = 0, .vehiclecolor2 = 1);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}

			ShowModelSelectionMenu(playerid, "Vehiculos - Policia", extra, Vehicles);
		}
	}
	return 1;
}

stock ShowDialog(playerid, dialogid)
{
	PlayerTemp[playerid][pt_DIALOG_RESPONDED] = false;
	PlayerTemp[playerid][pt_DIALOG_ID] = dialogid;
	
	switch(dialogid)
	{
		case DIALOG_REGISTER:
		{
			new dialog[4096];
			format(dialog, sizeof dialog, 
			"\
				{ffffff}Bienvenido {"#GREEN_COLOR"}%s. {ffffff}esperemos que disfrutes el servidor\n\
				\n\
				{ffffff}Tenemos un buen espacio para ti en nuestra comunidad, ademas de varios sistemas\n\
				{ffffff}manteniendo nuestra escencia de {"#LIGHT_RED"}Rol Medio.\n\
				\n\
				{ffffff}- {"#PRIMARY_COLOR"}WEB: {d1d1d1}"#SERVER_WEBSITE"\n\
				{ffffff}- {"#BLUE_COLOR"}DISCORD: {d1d1d1}"#SERVER_DISCORD"\n\
				\n\
				{ffffff}Para {"#YELLOW_COLOR"}registrarte {ffffff}ingresa una clave:\n\
			",
				PlayerTemp[playerid][pt_NAME]
			);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "{ffffff}[{"#GREEN_COLOR"}Registrarse{ffffff}] - "SERVER_NAME1"{"#PRIMARY_COLOR"}"SERVER_NAME2" {ffffff}Roleplay", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_LOGIN:
		{
			new dialog[4096];
			format(dialog, sizeof dialog, 
			"\
				\n\
				{ffffff}Bienvenido de nuevo, {"#GREEN_COLOR"}%s. {ffffff}esta cuenta esta registrada.\n\
				\n\
				{ffffff}- {"#PRIMARY_COLOR"}WEB: {d1d1d1}"#SERVER_WEBSITE"\n\
				{ffffff}- {"#BLUE_COLOR"}DISCORD: {d1d1d1}"#SERVER_DISCORD"\n\
				\n\
				{ffffff}Ingresa tu {"#YELLOW_COLOR"}clave{ffffff} para acceder:\n\
			",
				PlayerTemp[playerid][pt_NAME]
			);

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "{ffffff}[{"#BLUE_COLOR"}Acceder{ffffff}] - "SERVER_NAME1"{"#PRIMARY_COLOR"}"SERVER_NAME2" {ffffff}Roleplay", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_EMAIL:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "{"#GREEN_COLOR"}Email {ffffff}- "SERVER_NAME1"{"#PRIMARY_COLOR"}"SERVER_NAME2" {ffffff}Roleplay", 

				"\
					\n\
					{ffffff}La {"#YELLOW_COLOR"}SEGURIDAD{ffffff} es importante!\n\
					\n\
					{ffffff}Tener el correo electronico disponible, es la mejor manera de recuperar tu cuenta!\n\
					{ffffff}Nosotros necesitamos tu correo unicamente para poder recuperar tu cuenta en caso de perdidas.\n\
					\n\
					{"#LIGHT_RED"}Aviso: debes tener acceso a tu correo o podrias perder tu cuenta permanentemente.\n\
					\n\
					{ffffff}Para {"#YELLOW_COLOR"}continuar {ffffff}ingresa tu correo electronico:\n\
				", 

				"Continuar", "Cerrar"
			);
			return 1;
		}
		case DIALOG_CLOTHES: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "{"#PRIMARY_COLOR"}¿Qué quieres comprar?", "Ropa\nAccesorios", ">>", "Salir");
		case DIALOG_FOOD_PIZZA: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_PIZZA_String, "Pedir", "Cerrar");
		case DIALOG_FOOD_CLUCKIN: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_CLUCKIN_String, "Pedir", "Cerrar");
		case DIALOG_FOOD_BURGER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_BURGER_String, "Pedir", "Cerrar");
		case DIALOG_BUY_PROPERTY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Comprar Propiedad", 
				"{d1d1d1}Escribe la ID de la propiedad para comprarla\nRecuerda tener el dinero, y escribir una ID valida:", 
			"Continuar", "Cerrar");
		}
		case DIALOG_BANK:
		{
			if(PI[playerid][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "No tienes cuenta bancaria.");
			
			new caption[80];
			format(caption, sizeof caption, "Mi cuenta bancaria: {"#BLUE_COLOR"}%s {FFFFFF}- Balance actual: {"#BLUE_COLOR"}%s$", number_format_thousand(PI[playerid][pBANK_ACCOUNT]), number_format_thousand(PI[playerid][pBANK_MONEY]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, 
				"{"#SILVER_COLOR"}1. Retirar dinero\n{"#SILVER_COLOR"}2. Depositar dinero\n{"#SILVER_COLOR"}3. Transferir dinero\n{"#SILVER_COLOR"}4. ultimas transacciones", 
			"Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CREATE_BANK_ACCOUNT:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Crear cuenta bancaria", 
				"{"#SILVER_COLOR"}Bienvenido, actualmente no tienes una cuenta bancaria.\n\nPara disfrutar de los beneficios de una cuenta bancaria\npuedes crearla ahora mismo con un deposito minimo de 500$.", 
			"Crear", "Cerrar");
			return 1;
		}
		case DIALOG_BANK_WITHDRAW:
		{
			new dialog[100];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Balance actual: {"#BLUE_COLOR"}%s$\n{"#SILVER_COLOR"}¿Cuánto quiere retirar?", number_format_thousand(PI[playerid][pBANK_MONEY]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Retirar", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_BANK_DEPOSIT:
		{
			new dialog[100];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Dinero actual: {"#BLUE_COLOR"}%s$\n{"#SILVER_COLOR"}¿Cuánto quiere depositar?", number_format_thousand(PI[playerid][pCASH]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Depositar", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_BANK_TRANSFER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Transferir", "Indica a que numero de cuenta quiere transferir dinero.", "Continuar", "Atrás");
		case DIALOG_BANK_TRANSFER_SEND:
		{
			new dialog[170];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Transferir a cuenta: {"#BLUE_COLOR"}%s\n{"#SILVER_COLOR"}Balance actual: {"#BLUE_COLOR"}%s$\n\n{"#SILVER_COLOR"}¿Cuánto quiere transferir?", number_format_thousand(PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]), number_format_thousand(PI[playerid][pBANK_MONEY]));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Transferir", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_BANK_TRANSACTIONS:
		{
			inline OnBankMovementsLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[2675], caption[40], line_str[128];
					format(caption, sizeof caption, "Banco - ultimas %d transacciones", rows);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Fecha\t{"#BLUE_COLOR"}Concepto\t{"#SILVER_COLOR"}Importe\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							new date[24], type, from_id, to_id, amount, from_bankid, to_bankid, bool:insull_from_id, bool:isnull_to_id;
							cache_get_value_name(i, "date", date);
							cache_get_value_name_int(i, "type", type);
							cache_is_value_name_null(i, "from_id", insull_from_id);
							if(!insull_from_id) cache_get_value_name_int(i, "from_id", from_id);
							cache_is_value_name_null(i, "to_id", isnull_to_id);
							if(!isnull_to_id) cache_get_value_name_int(i, "to_id", to_id);
							cache_get_value_name_int(i, "amount", amount);
							cache_get_value_name_int(i, "from_bankid", from_bankid);
							cache_get_value_name_int(i, "to_bankid", to_bankid);

							switch(type)
							{
								case BANK_TRANSACTION_WITHDRAW:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Retirada efectivo\t{"#SILVER_COLOR"}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_DEPOSIT:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Ingreso efectivo\t{"#SILVER_COLOR"}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_TRANSFER:
								{
									if(from_id == PI[playerid][pID]) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Transferencia a %d\t{"#SILVER_COLOR"}-%s$\n", date, to_bankid, number_format_thousand(amount));
									else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Transferencia de %d\t{"#SILVER_COLOR"}%s$\n", date, from_bankid, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_CREATE_ACCOUNT:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Apertura cuenta\t{"#SILVER_COLOR"}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_BUY_PROPERTY:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Compra de propiedad\t{"#SILVER_COLOR"}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_SOLD_PROPERTY:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Venta de propiedad\t{"#SILVER_COLOR"}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_BUY_VEHICLE:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Compra de vehículo\t{"#SILVER_COLOR"}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_SOLD_VEHICLE:
								{
									format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}Venta de vehículo\t{"#SILVER_COLOR"}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
							}
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}No hay transacciones en tu cuenta.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT bank_movements.*, player.bank_account AS from_bankid, player2.bank_account AS to_bankid FROM bank_movements LEFT JOIN player ON bank_movements.from_id = player.id LEFT JOIN player AS player2 ON bank_movements.to_id = player2.id WHERE bank_movements.from_id = %d OR bank_movements.to_id = %d ORDER BY date DESC LIMIT %d;", PI[playerid][pID], PI[playerid][pID], MAX_BANK_TRANSACTIONS_DIALOG);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnBankMovementsLoad);
			return 1;
		}
		case DIALOG_247_LIST: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "24/7", DIALOG_247_LIST_String, "Continuar", "Cerrar");
		case DIALOG_PHONE:
		{
			new caption[50];
			format(caption, sizeof caption, "Mi teléfono - %d", PI[playerid][pPHONE_NUMBER]);
			
			new dialog[200];
			if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) format(dialog, sizeof dialog, "{"#SILVER_COLOR"}1. Agenda\n{"#SILVER_COLOR"}2. Llamar\n{"#SILVER_COLOR"}3. Enviar mensaje\n{"#SILVER_COLOR"}4. Ver mensajes recibidos\n{"#SILVER_COLOR"}5. Ver mensajes enviados\n{"#SILVER_COLOR"}6. Apagar teléfono\n");
			else format(dialog, sizeof dialog, "{"#SILVER_COLOR"}1. Encender teléfono\n{"#SILVER_COLOR"}2. Agenda\n{"#SILVER_COLOR"}3. Llamar\n{"#SILVER_COLOR"}4. Enviar mensaje\n{"#SILVER_COLOR"}5. Ver mensajes recibidos\n{"#SILVER_COLOR"}6. Ver mensajes enviados\n");
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_PHONE_BOOK:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[80 * (MAX_PHONE_CONTACTS + 3)];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#BLUE_COLOR"}Numero\n");

			new line_str[80], contacts, listitem;
			for(new i = 0; i != MAX_PHONE_CONTACTS; i++ )
			{
				if(!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) continue;
				
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#BLUE_COLOR"}%d\n", listitem + 1, PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER]);
				strcat(dialog, line_str);
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				
				contacts ++; listitem ++;
			}
			if(contacts < MAX_PHONE_CONTACTS)
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PHONE_CONTACTS + 10;
				strcat(dialog, "{"#SILVER_COLOR"}+ agregar contacto\n"); listitem ++;
			}
			if(contacts > 0)
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PHONE_CONTACTS + 20;
				strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Mi teléfono - Agenda", dialog, "Continuar", "Atrás");		
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Agenda - agregar contacto", "Está creando un nuevo contacto en su agenda.\nIndique el numero de teléfono del nuevo contacto.", "Continuar", "Atrás");
		case DIALOG_PHONE_BOOK_ADD_NAME: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Agenda - agregar contacto", "Está creando un nuevo contacto en su agenda.\nIndique el nombre del nuevo contacto.", "Continuar", "Atrás");
		case DIALOG_PHONE_BOOK_OPTIONS:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{"#SILVER_COLOR"}1. Llamar\n{"#SILVER_COLOR"}2. Enviar mensaje\n{"#SILVER_COLOR"}3. Cambiar nombre del contacto\n{"#SILVER_COLOR"}4. Eliminar este contacto", "Continuar", "Atrás");			
			return 1;
		}
		case DIALOG_PHONE_BOOK_CHANGE_NAME:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			new dialog[140];
			format(dialog, sizeof dialog, "Nombre actual: %s\nTeléfono: %d\n\nIndica el nuevo nombre de este contacto.", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Cambiar", "Atrás");	
			return 1;
		}
		case DIALOG_PHONE_BOOK_CONFIRM_DELET:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			new dialog[140];
			format(dialog, sizeof dialog, "¿Estás seguro de que desea eliminar el siguiente contacto?\n\nNombre: %s\nTeléfono: %d", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Eliminar", "Atrás");	
			return 1;
		}
		case DIALOG_PHONE_BOOK_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Agenda - Eliminar todo", "¿Estás seguro de que quiere eliminar todos sus contactos?\nEsta opcion no se puede deshacer y perderás todos los contactos guardados.", "Eliminar", "Atrás");	
		case DIALOG_PHONE_CALL_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Realizar una llamada", "¿A quién quieres llamar?\nIndique el numero al que desea llamar.", "Continuar", "Atrás");
		case DIALOG_PHONE_SMS_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "¿A quién quieres enviarle el mensaje?\nIndique el numero al que desea enviar el mensaje.", "Continuar", "Atrás");
		case DIALOG_PHONE_SMS_MESSAGE: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "Escribe el mensaje que quieres enviar\nCaracteres: 1-64.", "Continuar", "Atrás");
		case DIALOG_PHONE_BOOK_SEND_MESSAGE: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "Escribe el mensaje que quieres enviar\nCaracteres: 1-64.", "Continuar", "Atrás");
		case DIALOG_PHONE_SENT_MESSAGES:
		{
			inline OnSentMessagesLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[1600], caption[40], line_str[128];
					format(caption, sizeof caption, "ultimos %d mensajes enviados", rows);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Fecha\t{"#BLUE_COLOR"}Enviado a\t{"#SILVER_COLOR"}Mensaje\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							new message[64], date[24], phone_number, bool:isnull_phone_number;
							cache_get_value_name(i, "message", message);
							cache_get_value_name(i, "date", date);
							cache_is_value_name_null(i, "phone_number", isnull_phone_number);
							if(!isnull_phone_number) cache_get_value_name_int(i, "phone_number", phone_number);

							if(!phone_number) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}---\t{"#SILVER_COLOR"}%s\n", date, message);
							else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", date, convertPhoneNumber(playerid, phone_number), message);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}No hay mensajes.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pmessages.*, player.phone_number FROM pmessages LEFT JOIN player ON pmessages.to_id = player.id WHERE pmessages.from_id = %d ORDER BY pmessages.date DESC LIMIT 10;", PI[playerid][pID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnSentMessagesLoad);
			return 1;
		}
		case DIALOG_PHONE_RECEIVED_MESSAGES:
		{
			inline OnReceivedMessagesLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[1600], caption[40], line_str[128];
					format(caption, sizeof caption, "ultimos %d mensajes recibidos", rows);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Fecha\t{"#BLUE_COLOR"}Remitente\t{"#SILVER_COLOR"}Mensaje\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							new message[64], date[24], phone_number, bool:isnull_phone_number;
							cache_get_value_name(i, "message", message);
							cache_get_value_name(i, "date", date);
							cache_is_value_name_null(i, "phone_number", isnull_phone_number);
							if(!isnull_phone_number) cache_get_value_name_int(i, "phone_number", phone_number);

							if(!phone_number) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}---\t{"#SILVER_COLOR"}%s\n", date, message);
							else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", date, convertPhoneNumber(playerid, phone_number), message);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}No hay mensajes.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pmessages.*, player.phone_number FROM pmessages LEFT JOIN player ON pmessages.from_id = player.id WHERE pmessages.to_id = %d ORDER BY pmessages.date DESC LIMIT 10;", PI[playerid][pID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnReceivedMessagesLoad);
			return 1;
		}
		case DIALOG_CONFIRM_BUY_PROPERTY:
		{
			new dialog[220];
			
			if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA])
			{
				format(dialog, sizeof dialog, "Coste de la propiedad: %d "SERVER_COIN"\nSeguro: NO\nMonedas "SERVER_COIN" actuales: %d "SERVER_COIN"\nMonedas "SERVER_COIN" tras la compra: %d "SERVER_COIN"\n\n¿De verdad desea comprar esta propiedad?", PROPERTY_INFO[ PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] ][property_EXTRA], PI[playerid][pCOINS], PI[playerid][pCOINS] - PROPERTY_INFO[ PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] ][property_EXTRA]);
			}
			else
			{
				format(dialog, sizeof dialog, "Precio de la propiedad: %s$\nSeguro: %s$\nBalance actual: %s$\nBalance tras la compra: %s$\n\n¿De verdad desea comprar esta propiedad?", number_format_thousand(PROPERTY_INFO[ PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE]), number_format_thousand(PROPERTY_INFO[ PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE] / 200), number_format_thousand(PI[playerid][pBANK_MONEY]), number_format_thousand(PI[playerid][pBANK_MONEY] - PROPERTY_INFO[ PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE]));
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar propiedad",  dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_PLAYER_GPS:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "GPS",  "- Mis lugares\n- Mis propiedades\n- Mis vehículos\n- Lugares de interés\n- Trabajos", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[90 * (MAX_PLAYER_GPS_SAVES + 2)];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Lugar\t{FF846A}Distancia\n");
			
			new line_str[90], sites, listitem;
			for(new i = 0; i != MAX_PLAYER_GPS_SAVES; i++ )
			{
				if(!PLAYER_GPS[playerid][i][player_gps_VALID]) continue;
				
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#BLUE_COLOR"}%.2f Km\n", listitem + 1, PLAYER_GPS[playerid][listitem][player_gps_NAME], (GetPlayerDistanceFromPoint(playerid, PLAYER_GPS[playerid][listitem][player_gps_X], PLAYER_GPS[playerid][listitem][player_gps_Y], PLAYER_GPS[playerid][listitem][player_gps_Z]) * 0.01));
				strcat(dialog, line_str);
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				
				sites ++; listitem ++;
			}
			if(sites < MAX_PLAYER_GPS_SAVES)
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PLAYER_GPS_SAVES + 10;
				strcat(dialog, "{"#SILVER_COLOR"}+ agregar lugar actual\n"); listitem ++;
			}
			if(sites > 0)
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PLAYER_GPS_SAVES + 20;
				strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Mis lugares", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_ADD:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "GPS - agregar lugar", "Tu posicion actual será guardada en este lugar para ir más tarde.\nIndica el nombre de este lugar para guardarlo.", "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Mis lugares - Eliminar todo", "¿Estás seguro de que quiere eliminar todos sus lugares?\nEsta opcion no se puede deshacer y perderás todos los lugares guardados.", "Eliminar", "Atrás");	
		case DIALOG_PLAYER_GPS_PLAYER_OPTION:
		{
			new caption[40];
			format(caption, sizeof caption, "GPS - %s", PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{"#SILVER_COLOR"}1. Marcar coordenadas en el GPS\n{"#SILVER_COLOR"}2. Cambiar nombre de este lugar\n{"#SILVER_COLOR"}3. Eliminar este lugar del GPS", "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_CHANGE_NAME:
		{
			new dialog[90];
			format(dialog, sizeof dialog, "Nombre del lugar: %s\nIndica el nuevo nombre para este lugar.", PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "GPS - Cambiar nombre de un lugar", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_CONFIRM_DELET:
		{
			new dialog[95];
			format(dialog, sizeof dialog, "Nombre del lugar: %s\n¿Estás seguro de que quiere borrarlo del GPS?", PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "GPS - Eliminar un lugar", dialog, "Eliminar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITES:
		{
			new dialog[4096];
			format(dialog, sizeof dialog, "- Hospitales\n- Tiendas de Ropa\n- Tiendas 24/7\n- Restaurantes\n- Bancos\n- Cajeros\n- Gasolineras\n- Concesionarios\n- Gobierno\n- Policías\n- Autoescuela\n- Farmacias");
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "GPS - Lugares de interés", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PLAYER_GPS_WORKS:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[85 * (sizeof(work_info) + 1)], listitem;
			format(dialog, sizeof dialog, "Trabajo\tNivel\tDistancia\n");

			for(new i = 1; i != sizeof work_info; i ++)
			{
				if(work_info[i][work_info_TYPE] == WORK_TYPE_FAMILY) continue;
				if(!obtain_work_coords[i][obtain_work_AVAILABLE]) continue;
				
				new line_str[85];
				if(i == WORK_MEDIC)
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%c%s\t{"#SILVER_COLOR"}%d\t{"#SILVER_COLOR"}-\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], work_info[i][work_info_LEVEL]);
				else
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%c%s\t{"#SILVER_COLOR"}%d\t{"#SILVER_COLOR"}%.2f Km\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], work_info[i][work_info_LEVEL], (GetPlayerDistanceFromPoint(playerid, obtain_work_coords[i][obtain_work_MAP_ICON_X], obtain_work_coords[i][obtain_work_MAP_ICON_Y], obtain_work_coords[i][obtain_work_MAP_ICON_Z]) * 0.01));
				strcat(dialog, line_str);
				
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Trabajos", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_WORKS_TELEPORTS:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[85 * (sizeof(work_info) + 1)], listitem;
			format(dialog, sizeof dialog, "Trabajo\tNivel\n");

			for(new i = 1; i != sizeof work_info; i ++)
			{
				new line_str[85];
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%c%s (id: %d)\t{"#SILVER_COLOR"}%d\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], i, work_info[i][work_info_LEVEL]);
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Trabajos", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_0: //Hospitales
		{
			new dialog[90 * (sizeof Hospital_Spawn_Positions)], listitem;

			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Lugar\t{"#BLUE_COLOR"}Zona");
			for(new i = 0; i != sizeof(Hospital_Spawn_Positions); i++ )
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;

				new city[45], zone[45];
				GetPointZone(Hospital_Spawn_Positions[i][hspX], Hospital_Spawn_Positions[i][hspY], city, zone);
				format(dialog, sizeof dialog, "%s\n{FFFFFF}Hospital %d\t{"#BLUE_COLOR"}%s, %s", dialog, listitem + 1, city, zone);

				listitem++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Hospitales", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_1: //Tiendas de ropa
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BINCO && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_VIPBURBAN && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PROLAPS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_DIDIER_SACHS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_VICTIM && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_ZIP) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{"#SILVER_COLOR"}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Tiendas de ropa", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_2: //Tiendas 24 horas
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_247) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{"#SILVER_COLOR"}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Tiendas 24/7", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_3: //Comida rapida
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PIZZA && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_CLUCKIN_BELL && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BURGER_SHOT) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{"#SILVER_COLOR"}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Restaurantes", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_4: //Bancos
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_LS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_SF && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_LV) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{"#SILVER_COLOR"}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Bancos", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_5: //Cajeros
		{
			new dialog[90 * (sizeof(ATM_BANK) + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ATM_BANK); i++ )
			{

				format(line_str, sizeof line_str, "{FFFFFF}Cajero %d\t{"#SILVER_COLOR"}%.2f Km\n", sites + 1, (GetPlayerDistanceFromPoint(playerid, ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z]) * 0.01));
				strcat(dialog, line_str);

				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Cajeros", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_6: //Gasolineras
		{
			new dialog[90 * (sizeof(Fuel_Stations) + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(Fuel_Stations); i++ )
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				format(line_str, sizeof line_str, "{FFFFFF}Gasolinera %d\t%.2f Km\n", sites + 1, (GetPlayerDistanceFromPoint(playerid, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z]) * 0.01));
				strcat(dialog, line_str);

				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Gasolineras", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_7: //Concesionarios
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Concesionarios", DIALOG_PLAYER_GPS_SITE_7_String, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_8: //Policias
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_POLICE_LS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_POLICE_SF && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_POLICE_LV) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Policías", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_9: //Farmacias
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for(new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if(sites >= MAX_LISTITEMS) break;
				if(ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PHARMACY) continue;

				format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PlayerTemp[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Policías", dialog, "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_PROPERTIES:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[90 * (MAX_VIP_PROPERTIES + 2)], line_str[90];
					format(dialog, sizeof dialog, "Propiedad\tDistancia\n");
					for(new i = 0; i != MAX_VIP_PROPERTIES; i ++) PlayerTemp[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][i] = -1;
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							if(i >= MAX_VIP_PROPERTIES) break;
							new property_name[24], Float:pos[3], bool:isnull_name;
							cache_get_value_name_int(i, "id", PlayerTemp[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][i]);
							cache_is_value_name_null(i, "name", isnull_name);
							if(!isnull_name) cache_get_value_name(i, "name", property_name);
							cache_get_value_name_float(i, "ext_x", pos[0]);
							cache_get_value_name_float(i, "ext_y", pos[1]);
							cache_get_value_name_float(i, "ext_z", pos[2]);
							format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{"#SILVER_COLOR"}%.2f Km\n", i + 1, property_name, (GetPlayerDistanceFromPoint(playerid, pos[0], pos[1], pos[2]) * 0.01));
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}No tienes propiedades");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Mis propiedades", dialog, "Continuar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM properties WHERE id_player = %d;", PI[playerid][pID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_PLAYER_GPS_VEHICLES:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[115 * (MAX_VIP_VEHICLES + 2)], total_vehicles;
			format(dialog, sizeof dialog, "Vehículo\tMatrícula\tDistancia\n");
			for(new i = 0; i != MAX_VEHICLES; i++)
			{
				if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
				if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
				if(total_vehicles > MAX_VIP_VEHICLES) break;

				if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][total_vehicles] = i;

					new Float:pos[3];
					GetVehiclePos(i, pos[0], pos[1], pos[2]);

					new line_str[115];

					if(!PLAYER_VEHICLES[i][player_vehicle_ACCESSIBLE])
						format(line_str, sizeof line_str, "{666666}%d. %s (%d)\t{666666}%s\t{666666}-\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], i, GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE]);
					else
						format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{FFFFFF}%s\t{"#SILVER_COLOR"}%.2f Km\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], (GetPlayerDistanceFromPoint(playerid, pos[0], pos[1], pos[2]) * 0.01));

					strcat(dialog, line_str);
					total_vehicles ++;
				}
			}
			if(total_vehicles == 0) strcat(dialog, "{"#SILVER_COLOR"}No tienes vehículos");

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS - Mis vehículos", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_OPTIONS:
		{
			new caption[40];
			format(caption, sizeof caption, "Propiedad - %s", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);

			new dialog[512];
			format(dialog, sizeof dialog, "1. Cambiar nombre de la propiedad\n2. Echar a todo del mundo de mi propiedad\n3. Cambiar descripcion de la propiedad");

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_NAME:
		{
			new dialog[85];
			format(dialog, sizeof dialog, "Nombre actual: %s\nIndica el nuevo nombre de la propiedad.", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Propiedad - Cambiar nombre", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_DESCRIPTION:
		{
			new dialog[85];
			format(dialog, sizeof dialog, "Descripcion actual: %s\nIndica la nueva descripcion de la propiedad.", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_DESCRIPTION]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Propiedad - Cambiar nombre", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_BUY_VEHICLE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_VALID]) return 0;
			if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_TYPE] != VEHICLE_TYPE_SELL) return 0;
			if(!SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_VALID]) return 0;
			
			new dialog[800];
			format(dialog, sizeof dialog, 
				"Vehículo: %s\n\
				Nivel necesario: %d\n\
				Precio del vehículo: %s$\n\
				Velocidad máxima: %d Km/h\n\
				Capacidad deposito: %.1f Litros\n\
				Espacio maletero: %d\n\
				Seguro: %s$\n\n", 
				VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME],
				SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_LEVEL],
				number_format_thousand(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE]),
				floatround(VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_VEL]),
				VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_GAS],
				VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_BOOT_SLOTS],
				number_format_thousand(VEHICLE_INFO[GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 100)
			);
			
			new str[445];
			if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_LEVEL] > PI[playerid][pLEVEL])
			{
				format(str, sizeof str, "{"#RED_COLOR"}- Necesitas ser al menos nivel %d para poder comprar este vehículo.", SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_LEVEL]);
				strcat(dialog, str);
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}
			
			if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_VIP_LEVEL] > PI[playerid][pVIP])
			{
				format(str, sizeof str, "{"#RED_COLOR"}- Necesitas membresía VIP (%d) para poder comprar este vehículo.", SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_VIP_LEVEL]);
				strcat(dialog, str);
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}
			
			if(PI[playerid][pBANK_ACCOUNT] == 0)
			{
				strcat(dialog, "{"#RED_COLOR"}- Necesitas una cuenta bancaria para poder comprar vehículos.");
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}
	
			if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE] > PI[playerid][pBANK_MONEY])
			{
				new diff = SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE] - PI[playerid][pBANK_MONEY];
				format(str, sizeof str, "{"#RED_COLOR"}- Te faltan %s$ en tu cuenta bancaria para poder comprar este vehículo.", number_format_thousand(diff));
				strcat(dialog, str);
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}
			
			if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA] > PI[playerid][pCOINS])
			{
				format(str, sizeof str, "{"#RED_COLOR"}- Te faltan %d "SERVER_COIN" para poder comprar este vehículo.", SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA] - PI[playerid][pCOINS]);
				strcat(dialog, str);
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}

			if(PI[playerid][pDRIVE_LICENSE_POINTS] == 0)
			{
				strcat(dialog, "{"#RED_COLOR"}- No puedes comprar vehículos sin una licencia.");
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = INVALID_VEHICLE_ID;
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Cerrar", "");
				return 1;
			}
			
			if(!SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA]) format(str, sizeof str, "Balance de tu cuenta bancaria: %s$\nBalance tras la compra: %s$\n\n¿De verdad desea comprar este vehículo?", number_format_thousand(PI[playerid][pBANK_MONEY]), number_format_thousand(PI[playerid][pBANK_MONEY] - SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE]));
			else format(str, sizeof str, "Tus monedas: %d "SERVER_COIN"\nMonedas tras la compra: %d "SERVER_COIN"\n\n¿De verdad desea comprar este vehículo?", PI[playerid][pCOINS], PI[playerid][pCOINS] - SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA]);
			strcat(dialog, str);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar vehículo", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_CITYHALL_OPTIONS: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Gobierno - Servicios", "{d1d1d1}Vender Propiedad/Auto\n{d1d1d1}Servicios de Grua", "Continuar", "Cerrar");
		case DIALOG_NOTARY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Notaría", "{"#SILVER_COLOR"}Vender una propiedad al banco\n{"#SILVER_COLOR"}Vender un vehículo al banco\n{"#SILVER_COLOR"}Vender una propiedad a una persona\n{"#SILVER_COLOR"}Vender un vehículo a una persona", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_NOTARY_SELECT_PROPERTY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[45 * (MAX_VIP_PROPERTIES + 2)], line_str[45];
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Propiedad\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							if(i >= MAX_VIP_PROPERTIES) break;
							new property_name[24], bool:isnull_name;
							cache_get_value_name_int(i, "id", PlayerTemp[playerid][pt_PLAYER_LISTITEM][i]);
							cache_is_value_name_null(i, "name", isnull_name);
							if(!isnull_name) cache_get_value_name(i, "name", property_name);
							format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\n", i + 1, property_name);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}No tienes propiedades");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la propiedad que quieres vender", dialog, "Continuar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name FROM properties WHERE id_player = %d;", PI[playerid][pID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_PROPERTY_BANK_SELL:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new Float:price, payment;
			price = PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
			if(PI[playerid][pVIP]) payment = floatround( floatmul(price, 0.50) );
			else payment = floatround( floatmul(price, 0.25) );
			
			new dialog[160];
			format(dialog, sizeof dialog, "Precio en mercado: %s$\nNosotros te pagaremos: %s$\n\n¿Estás seguro de que quiere venderla?", number_format_thousand(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE]), number_format_thousand(payment));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Vender", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_SELL_PRICE:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new Float:price, min_price, max_price;
			price = PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
			min_price = floatround( floatmul(price, 0.15) );
			max_price = floatround( floatmul(price, 6.0) );
			
			new dialog[250];
			format(dialog, sizeof dialog, 
			"Precio en mercado: %s$\n\nPrecio mínimo de venta: %s$\nPrecio máximo de venta: %s$\n\n¿Por cuánto quieres vender esta propiedad?", 
			number_format_thousand(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE]),
			number_format_thousand(min_price),
			number_format_thousand(max_price));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_SELL_TO_PLAYER:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new dialog[250];
			format(dialog, sizeof dialog, "De acuerdo, quieres vender esta propiedad por %s$.\n\nIndica el nombre o playerid del comprador.\nEl comprador debe estar en la sala y cumplir todos los requisitos.", number_format_thousand(PlayerTemp[playerid][pt_NOTARY_PRICE]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_SELL_CONFIRM_PROPERTY:
		{
			new dialog[240];
			format(dialog, sizeof dialog,
				"%s te quiere vender una propiedad.\n\n\
				Propiedad: %d\n\
				Precio: %s$\n\n\
				Balance tras la compra: %s$\n\n\
				¿Quieres comprar esta propiedad?",
				pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_NAME],
				PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID],
				number_format_thousand(PlayerTemp[playerid][pt_NOTARY_PRICE]),
				number_format_thousand( PI[playerid][pBANK_MONEY] - PlayerTemp[playerid][pt_NOTARY_PRICE] )
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Oferta recibida", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_NOTARY_SELECT_VEHICLE:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[95 * (MAX_VIP_VEHICLES + 2)], total_vehicles;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Vehículo\t{"#BLUE_COLOR"}Matrícula\n");
			for(new i = 0; i != MAX_VEHICLES; i++)
			{
				if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
				if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
				if(total_vehicles > MAX_VIP_VEHICLES) break;
				
				if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][total_vehicles] = i;
					
					new line_str[95];
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#BLUE_COLOR"}%s\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE]);
					strcat(dialog, line_str);
					total_vehicles ++;
				}
			}
			if(total_vehicles == 0) strcat(dialog, "{"#SILVER_COLOR"}No tienes vehículos");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona el vehículo que quieres vender", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_VEHICLE_BANK_SELL:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new Float:price, payment;
			price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
			if(PI[playerid][pVIP]) payment = floatround( floatmul(price, 0.50) );
			else payment = floatround( floatmul(price, 0.25) );
			
			new dialog[160];
			format(dialog, sizeof dialog, "Precio en mercado: %s$\nNosotros te pagaremos: %s$\n\n¿Estás seguro de que quiere venderlo?", number_format_thousand( VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE] ), number_format_thousand(payment));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Vender", "Atrás");
			return 1;
		}
		case DIALOG_VEHICLE_SELL_PRICE:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new Float:price, min_price, max_price;
			price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
			min_price = floatround( floatmul(price, 0.15) );
			max_price = floatround( floatmul(price, 6.0) );
			
			new dialog[250];
			format(dialog, sizeof dialog, 
			"Precio en mercado: %s$\n\nPrecio mínimo de venta: %s$\nPrecio máximo de venta: %s$\n\n¿Por cuánto quieres vender este vehículo?", 
			number_format_thousand(VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE]),
			number_format_thousand(min_price),
			number_format_thousand(max_price));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_VEHICLE_SELL_TO_PLAYER:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new dialog[250];
			format(dialog, sizeof dialog, "De acuerdo, quieres vender este vehículo por %s$.\n\nIndica el nombre o playerid del comprador.\nEl comprador debe estar en la sala y cumplir todos los requisitos.", number_format_thousand(PlayerTemp[playerid][pt_NOTARY_PRICE]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_SELL_CONFIRM_VEHICLE:
		{
			new dialog[300];
			format(dialog, sizeof dialog,
				"%s te quiere vender un vehículo.\n\n\
				Vehículo: %s\n\
				Matrícula: %s\n\
				Precio: %s$\n\n\
				Balance tras la compra: %s$\n\n\
				¿Quieres comprar este vehículo?",
				pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_NAME],
				VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME],
				GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_NUMBER_PLATE],
				number_format_thousand(PlayerTemp[playerid][pt_NOTARY_PRICE]),
				number_format_thousand( PI[playerid][pBANK_MONEY] - PlayerTemp[playerid][pt_NOTARY_PRICE] )
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Oferta recibida", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_SELECT_TRUCK_TYPE:
		{
			new work_extra_payment;
			if(work_info[WORK_TRUCK][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_TRUCK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP])));
				if(work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT];
			}
			
			new dialog[105 * (sizeof(Truck_Contents) + 2)], listitem;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Producto\t{"#BLUE_COLOR"}Beneficios\t{"#SILVER_COLOR"}Distancia\n");
			for(new i = 0; i != sizeof Truck_Contents; i ++)
			{
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;

				new line_str[105];
				if(Truck_Contents[i][truck_content_EXP] > PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL])
				{
					format(line_str, sizeof line_str, "{666666}%s\t{666666}%s$\t{666666}%.2f Km\n", Truck_Contents[i][truck_content_NAME], number_format_thousand(Truck_Contents[i][truck_content_MONEY] + work_extra_payment), (GetPlayerDistanceFromPoint(playerid, Truck_Contents[i][truck_content_X], Truck_Contents[i][truck_content_Y], Truck_Contents[i][truck_content_Z]) * 0.01));
					strcat(dialog, line_str);
				}
				else
				{
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s$\t{"#SILVER_COLOR"}%.2f Km\n", Truck_Contents[i][truck_content_NAME], number_format_thousand(Truck_Contents[i][truck_content_MONEY] + work_extra_payment), (GetPlayerDistanceFromPoint(playerid, Truck_Contents[i][truck_content_X], Truck_Contents[i][truck_content_Y], Truck_Contents[i][truck_content_Z]) * 0.01));
					strcat(dialog, line_str);
				}

				listitem++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la carga", dialog, "Continuar", "Cancelar");
			return 1;
		}
		case DIALOG_TUNING_MENU_PART:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new caption[45], dialog[80 * TOTAL_TUNING_PARTS], line_str[80];
					format(caption, sizeof caption, "Tuning - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Categoría\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							if(i >= TOTAL_TUNING_PARTS)
							{
								printf("---> Límite superado en array 'PLAYER_TUNING_MENU, dialog Parts' al intentar cargar de la base de datos.");
								break;
							}

							cache_get_value_index(i, 0, PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\n", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{666666}Este vehículo no se puede tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vcomponents_info.part FROM vcomponents_info INNER JOIN vcomponents ON vcomponents_info.id = vcomponents.componentid WHERE vcomponents.modelid = %d GROUP BY vcomponents_info.part;", GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnComponentsInfoLoad);
			return 1;
		}
		case DIALOG_TUNING_MENU_COMPONENT:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new caption[45], dialog[75 * MAX_TUNING_PARTS_COMPONENTS], line_str[75];
					format(caption, sizeof caption, "%s > %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], PlayerTemp[playerid][pt_TUNING_SELECTED_PART]);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Categoría\t{"#BLUE_COLOR"}Piezas necesarias\t{"#SILVER_COLOR"}Estimacion\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							if(i >= MAX_TUNING_PARTS_COMPONENTS)
							{
								printf("---> Límite superado en array 'PLAYER_TUNING_MENU, dialog Partsnames' al intentar cargar de la base de datos.");
								break;
							}

							cache_get_value_name_int(i, "id", PLAYER_TUNING_MENU[playerid][i][tuning_menu_ID]);
							cache_get_value_name(i, "name", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							cache_get_value_name_int(i, "pieces", PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES]);
							format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%d\t{"#SILVER_COLOR"}%s$\n", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME], PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES], number_format_thousand(PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES] * 50));
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{666666}No se puede tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vcomponents_info.id, vcomponents_info.name, vcomponents_info.pieces FROM vcomponents_info INNER JOIN vcomponents ON vcomponents_info.id = vcomponents.componentid WHERE vcomponents_info.part = '%e' AND vcomponents.modelid = %d;", PlayerTemp[playerid][pt_TUNING_SELECTED_PART], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnComponentsInfoLoad);
			return 1;
		}
		case DIALOG_MECHANIC_MENU:
		{
			new caption[60];
			format(caption, sizeof caption, "%s piezas disponibles - %s", number_format_thousand(PI[playerid][pMECHANIC_PIECES]), VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new dialog[450];
			format(dialog, sizeof dialog, 
			"\
				{"#SILVER_COLOR"}Opcion\t{"#BLUE_COLOR"}Piezas necesarias\t{"#SILVER_COLOR"}Estimacion\n\
				{"#SILVER_COLOR"}Reparacion completa\t{"#BLUE_COLOR"}10\t{"#SILVER_COLOR"}500$\n\
			");
			
			for(new i; i != sizeof Mechanic_Areas; i++)
				if(IsPlayerInDynamicArea(playerid, Mechanic_Areas[i]))
				{
					new paintjobs = VehiclePaintjob( GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] );
					strcat(dialog, "{"#SILVER_COLOR"}Pintar vehículo\t{"#BLUE_COLOR"}5\t{"#SILVER_COLOR"}250$\n");
					if(PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL] >= 100)
					{
						strcat(dialog, "{"#SILVER_COLOR"}Eliminar componentes\n");
						strcat(dialog, "{"#SILVER_COLOR"}Tunear vehículo\n");
						if(paintjobs > 0) strcat(dialog, "{"#SILVER_COLOR"}Paintjob\t{"#BLUE_COLOR"}15\t{"#SILVER_COLOR"}750$\n");
					}
					else
					{
						strcat(dialog, "{666666}Eliminar componentes\n");
						strcat(dialog, "{666666}Tunear vehículo\n");
						if(paintjobs > 0) strcat(dialog, "{666666}Paintjob\t{666666}15\t{666666}750$\n");
					}
					break;
				}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_REPAIR_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "Reparar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio de la reparacion.\nRango de precio: 0$ - 2.000$", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_COLOR_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para pintar el vehículo.\nRango de precio: 0$ - 1.750$", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_TUNING_PRICE:
		{
			new caption[60], dialog[145];
			format(caption, sizeof caption, "Tunear %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			format(dialog, sizeof dialog, "Indica el precio para tunear el vehículo.\nRango de precio: 0$ - %s$", number_format_thousand((PlayerTemp[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_PAINTJOB_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "Paintjob %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			if(PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID] == 3)
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para eliminar el paintjob del vehículo.\nRango de precio: 0$ - 2.750$", "Continuar", "Atrás");
			else
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para el paintjob del vehículo.\nRango de precio: 0$ - 2.750$", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_REM_COM_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "Eliminar componente de %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para eliminar el componente del vehículo.\nRango de precio: 0$ - 2.750$", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_ACCEPT:
		{
			new dialog[300];
			format(dialog, sizeof dialog,
				
				"\
					{"#SILVER_COLOR"}El mecánico %s te ofrece:\n\
						\t%s\n\
					\n\
					{"#SILVER_COLOR"}Precio: %s$\n\
					¿Quieres aceptarlo?\n\
				",
					pTemp(PlayerTemp[playerid][pt_MECHANIC_PID])[pt_NAME],
					PlayerTemp[playerid][pt_MECHANIC_TEXT],
					number_format_thousand(PlayerTemp[playerid][pt_MECHANIC_PRICE])
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Mecánico", dialog, "Aceptar", "Cancelar");
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COL_SLOT:
		{
			new caption[60];
			format(caption, sizeof caption, "Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{"#SILVER_COLOR"}Pintar color primario\n{"#SILVER_COLOR"}Pintar color secundario", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COLOR, DIALOG_PLANE_SELECT_COLOR, DIALOG_BOAT_SELECT_COLOR:
		{
			new caption[60];
			format(caption, sizeof caption, "Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			
			new dialog[15 * (sizeof(VEHICLE_COLORS) + 1) ];
			for(new i = 0; i != sizeof VEHICLE_COLORS; i++)
			{
				new line_str[15];
				format(line_str, sizeof(line_str), "{%06x}%d\n", VEHICLE_COLORS[i] >>> 8, i);
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_MECHANIC_REMOVE_COMPONEN:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new caption[60], dialog[80 * (MAX_VEHICLE_COMPONENTS + 2) ], count, line_str[80];
					format(caption, sizeof caption, "Componentes de %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Componente\t{"#BLUE_COLOR"}Piezas\n");
					if(rows)
					{
						for(new i = 0; i != rows; i ++)
						{
							new id, part[24], name[24];
							cache_get_value_name_int(i, "id", id);
							PLAYER_TUNING_MENU[playerid][count][tuning_menu_ID] = GetVehicleComponentIndexFromId(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], id);
							if(PLAYER_TUNING_MENU[playerid][count][tuning_menu_ID] != -1) {
								cache_get_value_name(i, "part", part);
								cache_get_value_name(i, "name", name);
								cache_get_value_name_int(i, "pieces", PLAYER_TUNING_MENU[playerid][count][tuning_menu_PIECES]);
								format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s > %s\t{"#BLUE_COLOR"}+ %d\n", part, name, PLAYER_TUNING_MENU[playerid][count][tuning_menu_PIECES]);
								strcat(dialog, line_str);
								count++;
							}
							else strcat(dialog, "{"#SILVER_COLOR"}Vehículo sin tunear"); 
						}
					}
					else strcat(dialog, "{"#SILVER_COLOR"}Vehículo sin tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Eliminar", "Atrás");
				}
			}

			new components_query[1024], count;
			format(components_query, sizeof components_query, "SELECT * FROM vcomponents_info WHERE");
			for(new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
			{
				PLAYER_TUNING_MENU[playerid][i][tuning_menu_ID] = -1;
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]) continue;
				if(count == 0) format(components_query, sizeof components_query, "%s id = %d", components_query, GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]);
				else format(components_query, sizeof components_query, "%s OR id = %d", components_query, GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]);
				count ++;
			}
			if(!count) SendClientMessagef(playerid, -1, "Vehículo sin tunear.");
			else mysql_tquery_inline(handle_db, components_query, using inline OnComponentsInfoLoad);
			return 1;
		}
		case DIALOG_TUNING_PAINTJOB:
		{
			new caption[60], dialog[25 * 4];
			format(caption, sizeof caption, "Paintjob - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new paintjobs = VehiclePaintjob( GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] );
			if(paintjobs == 0)
			{
				SendClientMessagef(playerid, -1, "Este vehículo no soporta paintjobs.");
				ShowDialog(playerid, DIALOG_MECHANIC_MENU);
				return 1;
			}
			
			strcat(dialog, "{"#SILVER_COLOR"}Eliminar paintjob (+ 15 piezas)\n");
			for(new i = 0; i != paintjobs; i ++)
			{
				new line_str[25];
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Paintjob %d\n", i + 1);
				strcat(dialog, line_str);
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_SEED_LIST:
		{
			new dialog[64 * (sizeof(seed_info) + 1)];
			format(dialog, sizeof dialog, "Nombre\tPrecio por semilla\n");
			
			for(new i = 0; i != sizeof seed_info; i ++)
			{
				new line_str[64];
				if(PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL] >= seed_info[i][seed_info_EXP])
				{
					if(seed_info[i][seed_info_TYPE] == TYPE_LEGAL) format(line_str, sizeof line_str, "{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%d$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
					else format(line_str, sizeof line_str, "{"#RED_COLOR"}%s\t{"#SILVER_COLOR"}%d$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
				}
				else format(line_str, sizeof line_str, "{666666}%s\t{666666}%d$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
				
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Semillas", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_SEED_BUY:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Vale, quieres comprar semillas de %s.\n{"#SILVER_COLOR"}El precio por semilla es de: %d$\n\n{"#SILVER_COLOR"}¿Cuántas semillas quieres comprar?", seed_info[ PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], seed_info[ PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PRICE]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Semillas", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_PLANT_PLANTS:
		{
			new dialog[95 * (sizeof(seed_info) + 1)];
			format(dialog, sizeof dialog, "Planta\tSemilla requerida\tSemillas necesarias\n");
			
			for(new i = 0; i != sizeof plant_info; i ++)
			{
				new line_str[95];
				
				if(seed_info[i][seed_info_TYPE] == TYPE_LEGAL) format(line_str, sizeof line_str, "{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", plant_info[i][plant_info_NAME], seed_info[i][seed_info_NAME], plant_info[i][plant_info_SEEDS]);
				else format(line_str, sizeof line_str, "{"#RED_COLOR"}%s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", plant_info[i][plant_info_NAME], seed_info[i][seed_info_NAME], plant_info[i][plant_info_SEEDS]);

				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Plantar", dialog, "Continuar", "Cerrar");
		}
		case DIALOG_ANIMS: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Animaciones", DIALOG_ANIMS_String, "Continuar", "X");	
		case DIALOG_VEHICLE_BOOT:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
	
			new max_slots = VEHICLE_INFO[GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS];
			if(max_slots > MAX_BOOT_SLOTS) max_slots = MAX_BOOT_SLOTS;
			
			new dialog[128 * (MAX_BOOT_SLOTS + 2)], line_str[128], listitem;
			format(dialog, sizeof dialog, "Tipo\tDescripcion\n");
			
			for(new i = 0; i != max_slots; i ++)
			{
				if(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_VALID])
				{
					switch(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_TYPE])
					{
						case BOOT_TYPE_WEAPON:
						{
							format(line_str, sizeof line_str, "%s\t%s (%s balas)\n", GetBootTypeName(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_TYPE]), WEAPON_INFO[ VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_INT] ][weapon_info_NAME], number_format_thousand(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_INT_EXTRA]));
							strcat(dialog, line_str);
						}
						case BOOT_TYPE_MEDICINES, BOOT_TYPE_CANNABIS, BOOT_TYPE_CRACK:
						{
							format(line_str, sizeof line_str, "%s\t%s gramos\n", GetBootTypeName(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_TYPE]), number_format_thousand(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i][vehicle_boot_INT]));
							strcat(dialog, line_str);
						}
					}
					
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
					listitem ++;
				}
			}
			
			new caption[64];
			format(caption, sizeof caption, "Maletero de %s (%d espacios disponibles)", VEHICLE_INFO[GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][gb_vehicle_MODELID] - 400][vehicle_info_NAME], max_slots - listitem);
			
			PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_BOOT_SLOTS + 20;
			strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Cerrar");
		}
		case DIALOG_VEHICLE_BOOT_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Maletero - Eliminar todo", "¿Estás seguro de que quiere eliminar todo de su maletero?\nEsta opcion no se puede deshacer.", "Eliminar", "Cancelar");	
		case DIALOG_VEHICLE_BOOT_OPTIONS:
		{	
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Opciones", "{"#SILVER_COLOR"}1. Sacar\n{"#SILVER_COLOR"}2. Eliminar", "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_VEHICLE_BOOT_DELETE:
		{
			new dialog[190];

			switch(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_TYPE])
			{
				case BOOT_TYPE_WEAPON: format(dialog, sizeof dialog, "Tipo: %s\nDescripcion: %s (%s balas)\n\n¿Estás seguro de que quiere eliminar esto de tu maletero?\nEsta opcion no se puede deshacer.", GetBootTypeName(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_TYPE]), WEAPON_INFO[ VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT] ][weapon_info_NAME], number_format_thousand( VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT_EXTRA] ));
				case BOOT_TYPE_MEDICINES, BOOT_TYPE_CANNABIS, BOOT_TYPE_CRACK: format(dialog, sizeof dialog, "Tipo: %s\nDescripcion: %s gramos\n\n¿Estás seguro de que quiere eliminar esto de tu maletero?\nEsta opcion no se puede deshacer.", GetBootTypeName(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_TYPE]), number_format_thousand( VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT] ));
			}			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Maletero - Eliminar", dialog, "Eliminar", "Atrás");
			return 1;
		}
		case DIALOG_SELECT_POLICE_SKIN:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[60 * sizeof(POLICE_SKINS)], line_str[60], listitem;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Ropa\t{"#SILVER_COLOR"}Rango necesario\n");
			for(new i = 0; i != sizeof POLICE_SKINS; i ++)
			{
				if(POLICE_SKINS[i][police_skin_TYPE] != PI[playerid][pGENDER]) continue;
				
				if(POLICE_SKINS[i][police_skin_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) format(line_str, sizeof line_str, "{666666}%d\t{666666}%s\n", POLICE_SKINS[i][police_skin_SKIN], POLICE_RANKS[ POLICE_SKINS[i][police_skin_RANK] ]);
				else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d\t{"#SILVER_COLOR"}%s\n", POLICE_SKINS[i][police_skin_SKIN], POLICE_RANKS[ POLICE_SKINS[i][police_skin_RANK] ]);
				strcat(dialog, line_str);
				
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la ropa", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_RADIOS:
		{
			new dialog[64 * 6];
			for(new i = 0; i != 6; i ++)
			{
				new players = CountPoliceRadioPlayers(i);
				
				if(PlayerTemp[playerid][pt_POLICE_RADIO] == i) strcat(dialog, "{"#SILVER_COLOR"}");
				else strcat(dialog, "{666666}");
				format(dialog, sizeof dialog, "%sFrecuencia %d:\t%d personas\n", dialog, i, players);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Selecciona la frecuencia", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#SILVER_COLOR"}Rango\t{"#SILVER_COLOR"}ult. conexion\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for(new i = 0; i != rows; i ++)
					{
						new level, id, name[24], last_connection[24], connected;
						cache_get_value_name_int(i, "level", level);
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);

						if(connected) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, POLICE_RANKS[level]);
						else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, name, POLICE_RANKS[level], last_connection);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "policías", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.id, player.name, player.last_connection, player.connected FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_work = %d AND pworks.`set` = 1 ORDER BY player.connected DESC, pworks.level DESC LIMIT %d, %d;", WORK_POLICE, PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_POLICE_MODIFY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new level, name[24];
						cache_get_value_name_int(0, "level", level);
						cache_get_value_name(0, "name", name);

						if(level > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este policía porque es un rango superior al tuyo.");
						else
						{
							new caption[45], dialog[45 * sizeof(POLICE_RANKS)], line_str[45];
							format(caption, sizeof caption, "policía - %s", name);
							format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Civil (eliminar)\n");
							for(new i = 1; i != sizeof POLICE_RANKS; i ++)
							{
								if(i > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
								{
									if(level == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", POLICE_RANKS[i]);
									else format(line_str, sizeof line_str, "{666666}%s\n", POLICE_RANKS[i]);
								}
								else
								{
									if(level == i) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s (actual)\n", POLICE_RANKS[i]);
									else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\n", POLICE_RANKS[i]);
								}
								strcat(dialog, line_str);
							}
							ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.name FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_player = %d AND pworks.id_work = %d AND pworks.`set` = 1;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID], WORK_POLICE);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_POLICE_EQUIPMENT:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Equiparse", "{"#SILVER_COLOR"}1. Equipar armas\n{"#SILVER_COLOR"}2. Equipar cargadores\n{"#SILVER_COLOR"}3. Equipar chaleco antibalas", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_SELECT_WEAPON:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[95 * 15], line_str[95], listitem;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Arma\t{"#BLUE_COLOR"}Municion\t{"#SILVER_COLOR"}Slot\n");
			
			for(new i = 0; i < sizeof PLAYER_WEAPONS[]; i ++)
			{
				if(!PLAYER_WEAPONS[playerid][i][player_weapon_VALID]) continue;
				
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", WEAPON_INFO[ PLAYER_WEAPONS[playerid][i][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[playerid][i][player_weapon_AMMO]), i);
				strcat(dialog, line_str);
				
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i; 
				listitem ++;
			}
			if(listitem == 0) strcat(dialog, "{666666}No tienes armas");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la arma a la que quieres comprarle municion", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_AMMO:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "Arma: %s\nMunicion: %s\n\nEl precio por bala es de 2$\n¿Cuánto municion quiere comprar?", WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_AMMO]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Comprar municion", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_ARMOUR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Equipar chaleco", "El chaleco antibalas te da mucha mas resistencia contra los enemigos.\n¿Lo quieres equipar?", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_POLICE_WEAPONS:
		{
			new dialog[64 * (sizeof(POLICE_WEAPONS) + 2)];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Producto\t{"#SILVER_COLOR"}Precio\n");
			
			for(new i = 0; i != sizeof POLICE_WEAPONS; i ++)
			{
				new line_str[64];
				if(POLICE_WEAPONS[i][police_weapons_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
				{
					format(line_str, sizeof line_str, "{666666}%s\t{666666}%s\n", WEAPON_INFO[ POLICE_WEAPONS[i][police_weapons_WEAPON_ID] ][weapon_info_NAME], POLICE_RANKS[ POLICE_WEAPONS[i][police_weapons_RANK] ]);
					strcat(dialog, line_str);
				}
				else
				{
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", WEAPON_INFO[ POLICE_WEAPONS[i][police_weapons_WEAPON_ID] ][weapon_info_NAME], POLICE_RANKS[ POLICE_WEAPONS[i][police_weapons_RANK] ]);
					strcat(dialog, line_str);
				}
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Armas", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_HELP:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, ""SERVER_NAME" v"SERVER_VERSION"",
			
				"\
					{"#SILVER_COLOR"}- General\n\
					{"#SILVER_COLOR"}- Informacion\n\
					{"#SILVER_COLOR"}- Personaje\n\
					{"#SILVER_COLOR"}- Propiedades\n\
					{"#SILVER_COLOR"}- Reportar\n\
					{"#SILVER_COLOR"}- Trabajos\n\
					{"#SILVER_COLOR"}- Vehículos\n\
					{"#SILVER_COLOR"}- Bandas\n\
					{"#PRIMARY_COLOR"}- Membresía VIP\n\
				"
			
			, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_HELP_GENERAL:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "General",
			
				"\
					{FFFFFF}Un día del juego dura tres horas reales.\n\
					\n\
					Para subir de nivel necesitas rellenar la reputacion, puedes verlo gráficamente\n\
					en la barra que aparece en la parte superior derecha que representa tu reputacion.\n\
					La reputacion se aumenta cada {"#PRIMARY_COLOR"}25 minutos,{FFFFFF} cuando la reputacion llegue\n\
					al límite podrás subir al siguiente nivel.\n\
					{FFFFFF}El pago de juego(payday) se recibe cada tres reputaciones {"#PRIMARY_COLOR"}(75 minutos).\n\
					{FFFFFF}Puedes utilizar {"#SILVER_COLOR"}/csave{FFFFFF} para guardar los datos de tu cuenta.\n\
					\n\
					Utiliza {"#SILVER_COLOR"}/estadisticas{FFFFFF} para ver tus estadísticas, utiliza {"#SILVER_COLOR"}/exp{FFFFFF} para ver tus habilidades.\n\
					En el nivel uno no podrás agredir a otros jugadores, tampoco podrás tener armas\n\
					hasta el nivel tres.\n\
					Utiliza {"#SILVER_COLOR"}/nombre{FFFFFF} para cambiar tu nombre.\n\
					Utiliza {"#SILVER_COLOR"}/correo{FFFFFF} para cambiar tu correo electronico.\n\
					Utiliza {"#SILVER_COLOR"}/pass{FFFFFF} para cambiar la clave de tu cuenta.\n\
					Para ver el tiempo que te queda en la cárcel utiliza {"#SILVER_COLOR"}/tiempo.\n\
					\n\
					{FFFFFF}Para utilizar el canal de dudas utiliza el comando {"#SILVER_COLOR"}/duda{FFFFFF} seguido de tu duda.\n\
					Para deshabilitar o volver a habilitar el canal de dudas usa {"#SILVER_COLOR"}/dudas.\n\
					\n\
					{FFFFFF}Utiliza {"#SILVER_COLOR"}/panel {FFFFFF}para configuraciones básicas de tu cuenta.\n\
					\n\
				"
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_INFO:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Informacion", DIALOG_CREDIT_String, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_CHARACTER:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Personaje",
			
				"\
					{FFFFFF}Para poder localizar cualquier punto en San Andreas te recomandamos que compres\n\
					un GPS en cualquier tienda {FF846A}24/7.{FFFFFF} Desde el GPS podrás localizarlo todo, tus vehículos,\n\
					tus propiedades, trabajos, lugares de interés, etc.\n\
					\n\
					Utiliza tu teléfono para llamar a la policía, mecánico, taxi... o para hablar con\n\
					alguien, por defecto tendrás varios contactos en la agenda pero puedes eliminarlos\n\
					o agregar más, puedes tener hasta 20 contactos, todo esto se hace desde {"#SILVER_COLOR"}/movil{FFFFFF} o {"#SILVER_COLOR"}/celular.\n\
					\n\
					{FFFFFF}En las tiendas {FF846A}24/7{FFFFFF} puedes comprar guías para saber el numero de cualquier jugador.\n\
					Para evitar aparecer en la guía utiliza {"#SILVER_COLOR"}/panel.\n\
					\n\
					{FFFFFF}Las barras en la esquina superior derecha representan tu nivel de hidratacion y de alimentacion,\n\
					si los niveles llegan muy abajo tu personaje se empezará a sentir mal y empezarás a perder vida.\n\
					Los niveles bajarán segun tu actividad física, corriendo te dará sed más pronto que caminando.\n\
					Para alimentarte ve a un restaurante de comida rápida o a un {FF846A}24/7{FFFFFF} donde podrás comprar alimentos,\n\
					que podrás consumir el cualquier momento con {"#SILVER_COLOR"}/n{FFFFFF} o {"#SILVER_COLOR"}/consumir.\n\
					\n\
					{FFFFFF}Puedes dar objetos con el comando {"#SILVER_COLOR"}/dar,{FFFFFF} para más informacion utiliza {"#SILVER_COLOR"}/man dar.\n\
					{FFFFFF}Puedes deshacerte de tus objetos con el comando {"#SILVER_COLOR"}/tirar,{FFFFFF} para más informacion utiliza {"#SILVER_COLOR"}/man tirar.\n\
					{FFFFFF}Puedes vender objetos con el comando {"#SILVER_COLOR"}/vender, para más informacion utiliza {"#SILVER_COLOR"}/man vender.\n\
					{FFFFFF}Para consumir consumibles que lleves contigo utiliza {"#SILVER_COLOR"}/consumir.\n\
					\n\
					{FFFFFF}Puedes cambiar la ropa de tu personaje en cualquier tienda de ropa, también\n\
					podrás comprarte accesorios y ponertelos o quitartelos {"#SILVER_COLOR"}(/accesorios).\n\
					\n\
					{FFFFFF}Si tienes nivel de busqueda o estás arrestado y mueres irás a la cárcel después de recuperarte.\n\
					Cuando te arresten los policías te pueden requisar tus pertenencias ilegales {FF846A}(armas y drogas).\n\
					\n\
					{FFFFFF}Utiliza {"#SILVER_COLOR"}/inv{FFFFFF} para ver todo lo que llevas encima.\n\
					{FFFFFF}Utiliza {"#SILVER_COLOR"}/estilo{FFFFFF} para cambiar el estilo de tu personaje.\n\
					\n\
				"
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_PROPERTIES:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Propiedades",
			
				"\
					{FFFFFF}Puedes encontrar diferentes propiedades en todo {FF846A}San Andreas,{FFFFFF} para comprarla tendrás que saber la\n\
					ID de la propiedad e ir a cualquier banco para comprarla, el dinero se descuenta de la cuenta bancaria.\n\
					\n\
					Puedes localizar tus propiedades con el GPS.\n\
					Puedes dejar pasar a cualquiera a tu propiedad, solo tiene que tocar el timbre\n\
					y tu elijes si quieres dejarlo pasar o no.\n\
					\n\
					Si quieres echar a alguien que está dentro de tu propiedad utiliza el comando {"#SILVER_COLOR"}/echar.\n\
					{FFFFFF}Dentro de la propiedad situate en la puerta interior y pon {"#SILVER_COLOR"}/casa,{FFFFFF} desde ahí podras\n\
					cambiar el nombre de la propiedad para así localizarla más fácilmente en el GPS.\n\
					{FFFFFF}también podrás echar a todos los huéspedes de tu propiedad.\n\
					\n\
					Si quieres vender tu propiedad puedes hacerlo en {"#PRIMARY_COLOR"}\"Gobierno San Andreas\"{FFFFFF}, localizalo en el GPS.\n\
					Puedes vendersela al banco al instante, pero te darán solo el 25% de lo que te costo {FF846A}(50% VIP).\n\
					{FFFFFF}también se la puedes vender a otro jugador, dentro de un rango de precio pre-establecido.\n\
					\n\
				"
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_REPORT:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Reportar",
			
				"\
					{FFFFFF}Para un reporte simple utiliza {"#SILVER_COLOR"}/reportar ID{FFFFFF} para reportar a un jugador.\n\
					\n\
					Para reportes más detallado debes publicarlos en el foro aportando imágenes.\n\
					Los reportes de fallos o bugs también deberás hacerlo en el foro junto con imágenes.\n\
					\n\
				"
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_VEHICLES:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Vehículos",
			
				"\
					{FF846A}GENERAL\n\
					{FFFFFF}Para arrancar o detener un vehículo presiona {"#SILVER_COLOR"}Y {FFFFFF}o utiliza {"#SILVER_COLOR"}/motor.\n\
					{FFFFFF}Utiliza {"#SILVER_COLOR"}/luces{FFFFFF} para encender o apagar las luces del vehículos.\n\
					Si tu vehículo se estropea tendrás que llamar a un mecánico desde tu movil para que lo repare.\n\
					\n\
					Cada vehículo tiene su cantidad máxima del deposito de gasolina.\n\
					Para repostar el vehículo debes ir a cualquier gasolinera, puedes localizarlas con el GPS.\n\
					también puedes comprar un bidon de gasolina para {"#SILVER_COLOR"}/vertir{FFFFFF} gasolina en cualquier momento.\n\
					\n\
					\n\
					{FF846A}VEHICULOS PERSONALES\n\
					{FFFFFF}Para comprarlos ve a cualquier concesionario.\n\
					El dinero para comprarlo es el de la cuenta bancaria.\n\
					Para localizar tus vehículos utiliza el GPS.\n\
					\n\
					Utiliza {"#SILVER_COLOR"}/abrir{FFFFFF} para abrir las puertes de tu vehículo, utiliza {"#SILVER_COLOR"}/cerrar{FFFFFF} para cerrarlas.\n\
					Puedes estacionar tu vehículo con el comando {"#SILVER_COLOR"}/estacionar.\n\
					{FFFFFF}Cuando tu vehículo sea destruido recibirás uno nuevo en tu ultimo estacionamiento.\n\
					Para pintar, tunear o modificar tu vehículo tendrás que hacerlo en el mecánico.\n\
					\n\
					Puedes guardar cosas en el maletero del vehículo con el comando {"#SILVER_COLOR"}/guardar.\n\
					{FFFFFF}Para sacar cosas del maletero puedes utilizar {"#SILVER_COLOR"}/maletero.\n\
					\n\
					{FFFFFF}Si quieres vender tu vehículo puedes hacerlo en \"Gobierno San Andreas\", localizalo en el GPS.\n\
					Puedes venderselo al banco, pero te darán solo el 25% de lo que te costo (50% VIP).\n\
					también se la puedes vender a otro jugador, dentro de un rango de precio pre-establecido.\n\
					{FFFFFF}Al vender tu vehículo se venderá con todo lo que haya en el maletero.\n\
					\n\
				"
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_WORKS:
		{
			new dialog[45 * sizeof work_info], line_str[45];
			for(new i = 1; i != sizeof work_info; i ++)
			{
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}- %c%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1]);
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Trabajos", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_HELP_CREWS:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Bandas",
			
				"\
					{FFFFFF}Utiliza {"#SILVER_COLOR"}/banda{FFFFFF} para crear una banda o administrar la tuya.\n\
					{FFFFFF}Al entrar a una banda puedes conquistar territorios por todo San Andreas.\n\
					\n\
					{FFFFFF}Visita {FF846A}"SERVER_WEBSITE" {FFFFFF}para más informacion.\n\
					\n\
				"
			
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_VIP:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Membresía VIP",
			
				"\
					{"#SILVER_COLOR"}Puedes comprar VIP por 30 días con el comando /vip.\n\
					{"#SILVER_COLOR"}Se compra con "SERVER_COIN", para ver como comprar esta moneda visita nuestra web.\n\
					\n\
					{"#PRIMARY_COLOR"}Ventajas\n\
					{"#SILVER_COLOR"}- Tener "#MAX_VIP_WORKS" trabajos.\n\
					{"#SILVER_COLOR"}- Tener "#MAX_VIP_VEHICLES" vehículos.\n\
					{"#SILVER_COLOR"}- Tener "#MAX_VIP_PROPERTIES" propiedades.\n\
					{"#SILVER_COLOR"}- No pagas seguro de propiedades ni vehículos en el Payday.\n\
					{"#SILVER_COLOR"}- Al vender un vehículo o propiedad al banco recibes un 50%%.\n\
					{"#SILVER_COLOR"}- Reduccion de la condena a la mitad.\n\
					{"#SILVER_COLOR"}- Cuando un médico te cura vida al 50%%.\n\
					\n\
					{"#SILVER_COLOR"}Visita {"#PRIMARY_COLOR"}"SERVER_WEBSITE" {"#SILVER_COLOR"}para más informacion.\n\
					\n\
				"
			
			, "Cerrar", "");
			return 1;
		}
		case DIALOG_ADMIN_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#SILVER_COLOR"}Rango\t{"#SILVER_COLOR"}ult. conexion\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for(new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, pid, admin_level;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "playerid", pid);
						cache_get_value_name_int(i, "admin_level", admin_level);

						if(connected)
						{
							if(pTemp(pid)[pt_ADMIN_SERVICE]) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Duty (%d)\n", start_pos + i, name, ADMIN_LEVELS[admin_level], pid);
							else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Conectado (%d)\n", start_pos + i, name, ADMIN_LEVELS[admin_level], pid);
						}
						else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, name, ADMIN_LEVELS[admin_level], last_connection);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Administradores", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, playerid, admin_level FROM player WHERE admin_level > 0 ORDER BY connected DESC, admin_level DESC LIMIT %d, %d;", PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_ADMIN_MODIFY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new name[24], admin_level;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "admin_level", admin_level);

						if(admin_level > PI[playerid][pADMIN_LEVEL]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este admin porque es un rango superior al tuyo.");
						else
						{
							new caption[45], dialog[45 * sizeof(ADMIN_LEVELS)], line_str[45];
							format(caption, sizeof caption, "Admin - %s", name);
							format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Normal (eliminar)\n");

							for(new i = 1; i != sizeof ADMIN_LEVELS; i ++)
							{
								if(i > PI[playerid][pADMIN_LEVEL])
								{
									if(admin_level == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", ADMIN_LEVELS[i]);
									else format(line_str, sizeof line_str, "{666666}%s\n", ADMIN_LEVELS[i]);
								}
								else
								{
									if(admin_level == i) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s (actual)\n", ADMIN_LEVELS[i]);
									else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\n", ADMIN_LEVELS[i]);
								}
								strcat(dialog, line_str);
							}
							
							ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, admin_level FROM player WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar clave", "Introduce tu clave actual.", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD_PASS:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Introduce tu nueva clave.\nLa clave debe contener entre %d-%d caracteres.", MIN_PASS_LENGTH, MAX_PASS_LENGTH);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar clave", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_ANTI_CHEAT:
		{
			if(PI[playerid][pADMIN_LEVEL] < 4) return 0;
			
			new dialog[115 * sizeof(ac_Info) + 1], line_str[115];
			dialog = "Tipo\tEstado\tAccionar\tAccion\n";
			
			for(new i = 0; i != sizeof(ac_Info); i ++)
			{
				format(line_str, sizeof line_str, "%02d %s\t%s\t%d:%d\t%s\n", i, ac_Info[i][ac_Name], ac_Info[i][ac_Enabled] ? "Activado" : "Desactivado", ac_Info[i][ac_Detections], ac_Info[i][ac_Interval], ac_Info[i][ac_Kick] ? "Kick" : "Aviso");
				strcat(dialog, line_str);
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Anticheat", dialog, "Continuar", "X");
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY:
		{
			if(PI[playerid][pADMIN_LEVEL] < 4) return 0;
			
			new caption[45], dialog[90];
			
			format(caption, sizeof caption, "ac %02d %s", PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM], ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Name]);
			format(dialog, sizeof dialog, "Estado\t%s\nAccionar\t(%d:%d)\nAccion\t%s", ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] ? "Activado" : "Desactivado", ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections], ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval], ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] ? "Kick" : "Aviso");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY_DETECT:
		{
			new caption[45], dialog[200];
			
			format(caption, sizeof caption, "ac %02d %s", PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM], ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Name]);
			format(dialog, sizeof dialog, "Estado actual de accioner en: (%d:%d)\n\nSintaxis: <detecciones>:<segundos>\nDeja segundos en 0 para que sea instantáneo.\n\nEjemplo de 2 detecciones en 10 segundos: 2:10", ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections], ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CRANE_SELECT_VEHICLE:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[95 * (MAX_VIP_VEHICLES + 2)], total_vehicles;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Vehículo\t{"#BLUE_COLOR"}Matrícula\t{"#SILVER_COLOR"}Precio\n");
			for(new i = 0; i != MAX_VEHICLES; i++)
			{
				if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
				if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
				if(total_vehicles > MAX_VIP_VEHICLES) break;
				
				if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][total_vehicles] = i;
					
					new line_str[95], veh_money = (VEHICLE_INFO[GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 100) + 350;
					format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%s$\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], number_format_thousand(veh_money));
					strcat(dialog, line_str);
					total_vehicles ++;
				}
			}
			if(total_vehicles == 0) strcat(dialog, "{"#SILVER_COLOR"}No tienes vehículos");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona el vehículo que quieres remolcar", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CREATE_CREW:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Banda", "No perteneces a ninguna banda.\n\n¿Quieres crear una?\nPara crear una banda necesitas ser nivel 5, además cuesta 600.000$.", "Sí", "No");
			return 1;
		}
		case DIALOG_CREATE_CREW_NAME:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Crear banda", "Introduce el nombre de tu banda.\nHasta 32 caracteres.", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CREATE_CREW_COLOR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona un color para tu banda", DIALOG_CREATE_CREW_COLOR_String, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CREATE_CREW_CONFIRM:
		{
			new dialog[360];
			format(dialog, sizeof dialog,
					
					"\
						{"#SILVER_COLOR"}Nombre de la banda: %s\n\
						{"#SILVER_COLOR"}Color de la banda: {%06x}color %d\n\
						{"#SILVER_COLOR"}Coste de creacion: 600.000$\n\
						\n\
						{"#SILVER_COLOR"}¿Quieres crear esta banda?\n\
						{"#SILVER_COLOR"}Una vez creada podrás crear rangos, modificarlos y mucho más.\n\
						\n\
					", 
						PlayerTemp[playerid][pt_CREATE_CREW_NAME],
						RandomColors[ PlayerTemp[playerid][pt_CREATE_CREW_COLOR] ] >>> 8, PlayerTemp[playerid][pt_CREATE_CREW_COLOR] + 1
			);
					
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Crear banda", dialog, "Crear", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_MENU:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new caption[64], dialog[360], listitem;
			format(caption, sizeof caption, "Mi banda -  {%06x}'%s'", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME]);
			
			format(dialog, sizeof dialog, "Ver miembros\n");
			PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_SIZE;
			listitem ++;

			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME])
			{
				strcat(dialog, "Cambiar nombre de la banda\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CHANGE_NAME;
				listitem ++;
			}
			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS])
			{
				strcat(dialog, "Echar a un miembro\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CAST_MEMBERS;
				listitem ++;
			}
			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS])
			{
				strcat(dialog, "Cambiar rango de un miembro\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_MODIFY_MEMBERS;
				listitem ++;
			}
			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS])
			{
				strcat(dialog, "Crear rangos o modificarlos\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_MODIFY_RANKS;
				listitem ++;
			}
			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR])
			{
				strcat(dialog, "Cambiar color de la banda\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CHANGE_COLOR;
				listitem ++;
			}
			if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE])
			{
				strcat(dialog, "Eliminar la banda\n");
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_DELETE;
				listitem ++;
			}
			
			strcat(dialog, "Abandonar banda\n");
			PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_SIZE + 1;
			listitem ++;
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[128 * 15], caption[64], line_str[128], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(caption, sizeof caption, "Miembros de la banda '%s'", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME]);
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#SILVER_COLOR"}Rango\t{"#SILVER_COLOR"}ult. conexion\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for(new i = 0; i != rows; i++)
					{
						new name[24], last_connection[24], connected, crew_rank;
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);

						if(connected) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						count++;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, last_connection, connected, crew_rank FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pCREW], PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_CREW_CHANGE_NAME:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Nombre actual de la banda:\n\t\"%s\"\n\nIndica el nuevo nombre.\nMáximo 32 caracteres.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Cambiar nombre de la banda", dialog, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST_DELETE:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#SILVER_COLOR"}Rango\t{"#SILVER_COLOR"}ult. conexion\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for(new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, crew_rank;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);

						if(connected) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Echar a un miembro", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, crew_rank FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pCREW], PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_CREW_CAST_MEMBER_CONFIRM:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Echar a un miembro", "¿Estás seguro de que quieres echar a este miembro de la banda?", "Echar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_INVITE_RANK:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[64 * MAX_CREW_RANKS], line_str[64], listitem;
			for(new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
				
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				if(i < PI[playerid][pCREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				strcat(dialog, line_str);
				
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Invitar", dialog, "Invitar", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_INVITE_ACCEPT:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Te han ofrecio unirte a una banda.\n\nBanda: %s\nRango: %s\n", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INVITE_INFO][1] ][crew_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INVITE_INFO][1] ][ PlayerTemp[playerid][pt_CREW_INVITE_INFO][2] ][crew_rank_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Invitacion", dialog, "Unirme", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_RANKS:
		{
			new dialog[64 * MAX_CREW_RANKS], line_str[64];
			for(new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID])
				{
					if(i < PI[playerid][pCREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", i + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
					else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\n", i + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				}
				else
				{
					if(i < PI[playerid][pCREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. Slot vacío\n", i + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
					else format(line_str, sizeof line_str, "{FFFFFF}%d. Slot vacío\n", i + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				}
				strcat(dialog, line_str);
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Rangos", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Modificar rango", "Cambiar nombre del rango\nModificar permisos\nEliminar rango", "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_NAME:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "Nombre actual del rango:\n\t\"%s\"\n\nIndica el nuevo nombre del rango.\nMáximo 32 caracteres.", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Modificar rango", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_PERMISS:
		{
			new caption[70];
			format(caption, sizeof caption, "Modificar permisos del rango '%s'", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			
			new dialog[64 * (CREW_RANK_SIZE + 1)], line_str[64];
			format(dialog, sizeof dialog, "Permiso\tActivado\n");
			
			for(new i = 0; i != CREW_RANK_SIZE; i ++)
			{
				if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][i]) format(line_str, sizeof line_str, "%s\t%s\n", CREW_RANKS_PERMISSIONS[i], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] ? "Sí" : "No");
				else format(line_str, sizeof line_str, "{666666}%s\t{666666}%s\n", CREW_RANKS_PERMISSIONS[i], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] ? "Sí" : "No");
				
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_CREATE:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Crear nuevo rango", "Indica el nombre del rango.\nMáximo 32 caracteres.", "Crear", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[64 * MAX_CREW_RANKS], line_str[64], listitem;
			for(new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
				if(i == PlayerTemp[playerid][pt_CREW_SELECTED_RANK]) continue;
				
				PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				if(i < PI[playerid][pCREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				strcat(dialog, line_str);
				
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Seleccionar nuevo rango", dialog, "Continuar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE_CONFIRM:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new affected_members;
						cache_get_value_index_int(0, 0, affected_members);
						
						new dialog[400];
						format(dialog, sizeof dialog, 
								
							"\
								Rango que se eliminará:\n\
									\t'%s'\n\
								\n\
								Miembros afectados: %d\n\
								El nuevo rango de estos miembros será:\n\
									\t'%s'\n\
								\n\
								¿Seguro que quieres eliminar el rango? Esta opcion no se puede deshacer.\n\
								\n\
							",
								CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME],
								affected_members,
								CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_NEW_RANK] ][crew_rank_NAME]
						);
						ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Eliminar rango", dialog, "Eliminar", "Cancelar");

					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = %d;", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ID], PlayerTemp[playerid][pt_CREW_SELECTED_RANK]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
			return 1;
		}
		case DIALOG_CREW_MODIFY_COLOR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona el nuevo color para tu banda", DIALOG_CREATE_CREW_COLOR_String, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_DELETE:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new affected_members, crew_territories;
						cache_get_value_index_int(0, 0, affected_members);
						cache_get_value_index_int(0, 0, crew_territories);

						new dialog[450];
						format(dialog, sizeof dialog, 
								
							"\
								Banda: %s\n\
								Miembros: %d\n\
								Territorios: %d\n\
								\n\
								¿De verdad quieres borrar la banda?\n\
								\n\
							",
								CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME],
								affected_members,
								crew_territories
						);
						ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Eliminar banda", dialog, "Eliminar", "Cancelar");
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(player.id), COUNT(territories.id) FROM player, territories WHERE player.crew = %d AND territories.id_crew = %d;", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ID], CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
			return 1;
		}
		case DIALOG_CREW_LEAVE:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Abandonar banda", "¿Quieres abandonar la banda?\nEsta opcion no se puede deshacer.", "Abandonar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBERS:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Nombre\t{"#SILVER_COLOR"}Rango\t{"#SILVER_COLOR"}ult. conexion\n");
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for(new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, crew_rank;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);

						if(connected) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Modificar rango de un miembro", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, crew_rank FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pCREW], PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBER:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						new name[24], crew_rank;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "crew_rank", crew_rank);

						if(crew_rank < PI[playerid][pCREW_RANK]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este miembro porque es un rango superior al tuyo.");
						else
						{
							if(crew_rank == 0)
							{
								inline OnCountQueryLoad()
								{
									if(cache_get_row_count(rows))
									{
										if(rows)
										{
											new total;
											cache_get_value_index_int(0, 0, total);
											if(total <= 1) SendClientMessagef(playerid, -1, "No se puede modificar el rango de este miembro ya que es el unico miembro con el rango fundador.");
											else
											{
												new caption[45], dialog[45 * CREW_RANK_SIZE], line_str[45], count;
												format(caption, sizeof caption, "Miembro - %s", name);
												for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
												for(new i = 0; i != CREW_RANK_SIZE; i ++)
												{
													if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
													
													if(i < PI[playerid][pCREW_RANK])
													{
														if(crew_rank == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
														else format(line_str, sizeof line_str, "{666666}%s\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
													}
													else
													{
														if(crew_rank == i) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s (actual)\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
														else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
													}
													strcat(dialog, line_str);
													PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = i;
												}
												ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
											}
										}
									}
								}
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
								mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
							}
							else
							{
								new caption[45], dialog[45 * CREW_RANK_SIZE], line_str[45], count;
								format(caption, sizeof caption, "Miembro - %s", name);
								for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
								for(new i = 0; i != CREW_RANK_SIZE; i ++)
								{
									if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
									
									if(i < PI[playerid][pCREW_RANK])
									{
										if(crew_rank == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
										else format(line_str, sizeof line_str, "{666666}%s\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
									}
									else
									{
										if(crew_rank == i) format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s (actual)\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
										else format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\n", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
									}
									strcat(dialog, line_str);
									PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = i;
								}
								ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "Continuar", "Atrás");
							}
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, crew_rank FROM player WHERE id = %d;",  PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
			return 1;
		}
		case DIALOG_POLICE_PENALTY:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "El policía %s te ha puesto una multa.\nImporte: %s$\n", PlayerTemp[ PlayerTemp[playerid][pt_POLICE_PEN_PID] ][pt_NAME], number_format_thousand(PlayerTemp[playerid][pt_POLICE_PEN_IM]));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Multa", dialog, "Pagar", "Cerrar");
			return 1;
		}
		case DIALOG_VIP_BUY:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "El coste del VIP es de %d "SERVER_COIN"\nDuracion: 30 días\n\n¿Comprar?", VIP_COINS_PRICE);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "VIP", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_VIP:
		{
			new dialog[256], current_date[24];
			getDateTime(current_date);
			format(dialog, sizeof dialog, 
				
				"\
					Fecha actual: %s\n\
					Fecha caducidad: %s\n\
					\n\
					Renuevalo 30 días más por %d "SERVER_COIN".\n\
					\n\
				",
					current_date,
					PI[playerid][pVIP_EXPIRE_DATE],
					VIP_COINS_PRICE
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "VIP", dialog, "Cerrar", "Renovar");
			return 1;
		}
		case DIALOG_PLAYER_CONFIG:
		{
			new dialog[512];
			format(dialog, sizeof dialog, 
				
				"\
					Audios del servidor\t%s\n\
					Ver sanciones, kicks, baneos\t%s\n\
					Numero en guía telefonica\t%s\n\
					Sonidos del servidor\t%s\n\
					Canal de dudas\t%s\n\
					Canal global\t%s\n\
				",
					(PI[playerid][pCONFIG_AUDIO] ? "Sí" : "No"),
					(PI[playerid][pCONFIG_ADMIN] ? "Sí" : "No"),
					(PI[playerid][pPHONE_VISIBLE_NUMBER] ? "Sí" : "No"),
					(PI[playerid][pCONFIG_SOUNDS] ? "Sí" : "No"),
					(PI[playerid][pDOUBT_CHANNEL] ? "Sí" : "No"),
					(pInfo(playerid)[pCONFIG_GLOBAL] ? "Sí" : "No")
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Panel de configuracion del usuario", dialog, "Cambiar", "Cerrar");	
			return 1;
		}
		case DIALOG_POLICE_BYC:
		{
			new caption[128];
			format(caption, sizeof caption, "Placa N.%d | %c. %s", PI[playerid][pPLACA_PD], PlayerTemp[playerid][pt_FIRST_NAME][0], PlayerTemp[playerid][pt_SUB_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, caption, "Ver ultimos registros a BYC\nBuscar BYC de una persona", "Continuar", "Cerrar");	
			return 1;
		}
		case DIALOG_POLICE_BYC_NAME_FIND:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Busqueda", "Introduce el nombre completo del sospechoso.\n\nUsa el guion bajo para separar nombre y apellido\nPor ejemplo: Nombre_Apellido.", "Buscar", "Cerrar");	
			return 1;
		}
		case DIALOG_POLICE_BYC_LAST_ALL:
		{
			inline OnPoliceHistoryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					new dialog[256 * 15], line_str[256], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Sospechoso\t{"#SILVER_COLOR"}agregado por\t{"#SILVER_COLOR"}Fecha\t{"#SILVER_COLOR"}Razon\n");
					for(new i = 0; i != rows; i ++)
					{
						new id, id_player, text[128], date[24], toname[24], fromname[24], bool:isnull_fromname;
						cache_get_value_name_int(i, "id_player", id);
						cache_get_value_name_int(i, "id_player", id_player);
						cache_get_value_name(i, "text", text);
						cache_get_value_name(i, "date", date);
						cache_get_value_name(i, "toname", toname);
						cache_is_value_name_null(i, "fromname", isnull_fromname);
						if(!isnull_fromname) cache_get_value_name(i, "fromname", fromname);

						format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, toname, fromname, date, text);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "BYC", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT police_history.*, player.name AS toname, player2.name AS fromname FROM police_history INNER JOIN player ON police_history.id_player = player.id LEFT JOIN player AS player2 ON police_history.by_id = player2.id ORDER BY police_history.date DESC LIMIT %d, %d;", PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPoliceHistoryLoad);
			return 1;
		}
		case DIALOG_POLICE_BYC_LAST_PLAYER:
		{
			inline OnPoliceHistoryLoad()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;
					new dialog[256 * 15], line_str[256], count, start_pos = PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Sospechoso\t{"#SILVER_COLOR"}agregado por\t{"#SILVER_COLOR"}Fecha\t{"#SILVER_COLOR"}Razon\n");
					for(new i = 0; i != rows; i ++)
					{
						new id, id_player, text[128], date[24], toname[24], fromname[24], bool:isnull_fromname;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name_int(i, "id_player", id_player);
						cache_get_value_name(i, "text", text);
						cache_get_value_name(i, "date", date);
						cache_get_value_name(i, "toname", toname);
						cache_is_value_name_null(i, "fromname", isnull_fromname);
						if(!isnull_fromname) cache_get_value_name(i, "fromname", fromname);

						format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%d. %s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s\n", start_pos + i, toname, fromname, date, text);
						strcat(dialog, line_str);
						PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "BYC", dialog, "Continuar", "Cerrar");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT police_history.*, player.name AS toname, player2.name AS fromname FROM police_history INNER JOIN player ON police_history.id_player = player.id LEFT JOIN player AS player2 ON police_history.by_id = player2.id WHERE police_history.id_player = %d ORDER BY police_history.date LIMIT %d, %d;", PlayerTemp[playerid][pt_SELECTED_BYC_USER_ID], PlayerTemp[playerid][pt_DIALOG_DB_PAGE] * PlayerTemp[playerid][pt_DIALOG_DB_LIMIT], PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPoliceHistoryLoad);
			return 1;
		}
		case DIALOG_POLICE_DELETE_BYC:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "BYC", "¿Borrar esto del historial?", "Borrar", "Cerrar");
			return 1;
		}
		case DIALOG_CHANGE_NAME:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar nombre", "Introduce tu clave actual.", "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_CHANGE_NAME_NAME:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Introduce tu nuevo nombre.\nEl nombre debe respear el formato Nombre_Apellido.\n\nEl coste por el cambio de nombre es de %d "SERVER_COIN"", CNAME_COINS_PRICE);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Cambiar nombre", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET:
		{
			for(new i = 0; i != MAX_LISTITEMS; i++ ) PlayerTemp[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new max_slots = MAX_CLOSET_SLOTS,
				dialog[128 * (MAX_CLOSET_SLOTS + 2)], line_str[128], listitem;

			format(dialog, sizeof dialog, "Tipo\tDescripcion\n");
			
			for(new i = 0; i != max_slots; i ++)
			{
				if(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_VALID])
				{
					switch(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_TYPE])
					{
						case CLOSET_TYPE_WEAPON:
						{
							format(line_str, sizeof line_str, "%s\t%s (%s balas)\n", GetClosetTypeName(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_TYPE]), WEAPON_INFO[ PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_INT] ][weapon_info_NAME], number_format_thousand(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_INT_EXTRA]));
							strcat(dialog, line_str);
						}
						case CLOSET_TYPE_MEDICINES, CLOSET_TYPE_CANNABIS, CLOSET_TYPE_CRACK:
						{
							format(line_str, sizeof line_str, "%s\t%s gramos\n", GetClosetTypeName(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_TYPE]), number_format_thousand(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i][property_closet_INT]));
							strcat(dialog, line_str);
						}
					}
					
					PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = i;
					listitem ++;
				}
			}

			new caption[64];
			format(caption, sizeof caption, "Armario (%d espacios disponibles)", max_slots - listitem);
			
			PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_CLOSET_SLOTS + 20;
			strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Continuar", "Cerrar");
		}
		case DIALOG_PROPERTY_CLOSET_DLT_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Armario - Eliminar todo", "¿Estás seguro de que quiere eliminar todo de su armario?\nEsta opcion no se puede deshacer.", "Eliminar", "Cancelar");	
		case DIALOG_PROPERTY_CLOSET_OPTIONS:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Armario", "{"#SILVER_COLOR"}1. Sacar\n{"#SILVER_COLOR"}2. Eliminar", "Continuar", "Atrás");	
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET_DELETE:
		{
			new dialog[190];
			switch(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_TYPE])
			{
				case CLOSET_TYPE_WEAPON: format(dialog, sizeof dialog, "Tipo: %s\nDescripcion: %s (%s balas)\n\n¿Estás seguro de que quiere eliminar esto de tu maletero?\nEsta opcion no se puede deshacer.", GetClosetTypeName(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_TYPE]), WEAPON_INFO[ PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT] ][weapon_info_NAME], number_format_thousand( PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT_EXTRA] ));
				case CLOSET_TYPE_MEDICINES, CLOSET_TYPE_CANNABIS, CLOSET_TYPE_CRACK: format(dialog, sizeof dialog, "Tipo: %s\nDescripcion: %s gramos\n\n¿Estás seguro de que quiere eliminar esto de tu maletero?\nEsta opcion no se puede deshacer.", GetClosetTypeName(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_TYPE]), number_format_thousand( PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT] ));
			}			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Armario - Eliminar", dialog, "Eliminar", "Atrás");
			return 1;
		}
		case DIALOG_FUEL_STATION: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Gasolinera - Opciones", "{d1d1d1}Opcion\t{d1d1d1}Precio\n{d1d1d1}Repostar\t{"#GREEN_COLOR"}5$/Litro\n{d1d1d1}Comprar Bidon\t{"#GREEN_COLOR"}100$", "Continuar", "Cerrar");
		case DIALOG_FUEL_DRUM_CONFIRM: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Gasolinera - Confirmar Compra", "{d1d1d1}¿Estas seguro que quieres comprar un bidon de 20 Litros por 100$?", "Comprar", "Atras");
		case DIALOG_FUEL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Gasolinera - Repostar", "{d1d1d1}Escribe la cantidad de litros que deseas repostar\n\n{d1d1d1}Precio: 5$/Litro.", "Confirmar", "Atras");
		case DIALOG_CONFIRM_ELEVATOR: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Elevador", "{d1d1d1}¿Estas seguro que quieres usar este elevador?", "Continuar", "Cancelar");
		case DIALOG_DRIVING_EXAM: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Auto Escuela", "{d1d1d1}¿Estas seguro que quieres realizar el examen de conduccion por 1500$?", "Pagar", "Cancelar");
		case DIALOG_DRIVING_SCHOOL_BRIBE:return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Auto Escuela", "{d1d1d1}¿Estas seguro que quieres sobornar al instructor por 3500$?", "Pagar", "Cancelar");
		case DIALOG_BLACK_MARKET:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Mercado Negro", "{"#SILVER_COLOR"}- Comprar articulos\n{"#SILVER_COLOR"}- Comprar Munición\n{"#SILVER_COLOR"}- Comprar Chalecos", "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_BLACK_MARKET_WEAPONS:
		{
			new dialog[64 * (sizeof(BLACK_MARKT_ARTICLES) + 2)];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Producto\t{"#SILVER_COLOR"}Precio\n");
			
			for(new i = 0; i != sizeof BLACK_MARKT_ARTICLES; i ++)
			{
				new line_str[64];

				switch(BLACK_MARKT_ARTICLES[i][black_market_TYPE])
				{
					case BLACK_MARKET_TYPE_WEAPON:
					{
						format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#SILVER_COLOR"}%s {"#GRAY_COLOR"}DN$\n", WEAPON_INFO[ BLACK_MARKT_ARTICLES[i][black_market_WEAPON_ID] ][weapon_info_NAME], number_format_thousand(BLACK_MARKT_ARTICLES[i][black_market_ARTICLE_PRICE]));
						strcat(dialog, line_str);
					}
				}
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Armas", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_BLACK_MARKET_SELECT_WEA:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[95 * 15], line_str[95], listitem;
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Arma\t{"#BLUE_COLOR"}Munición\t{"#SILVER_COLOR"}Slot\n");
			
			for(new i = 0; i < sizeof PLAYER_WEAPONS[]; i ++)
			{
				if(!PLAYER_WEAPONS[playerid][i][player_weapon_VALID]) continue;
				
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", WEAPON_INFO[ PLAYER_WEAPONS[playerid][i][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[playerid][i][player_weapon_AMMO]), i);
				strcat(dialog, line_str);
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i; 
				listitem ++;
			}
			if(listitem == 0) strcat(dialog, "{666666}No tienes armas");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la arma a la que quieres comprarle munición", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_BLACK_MARKET_AMMO:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Arma: %s\n{"#SILVER_COLOR"}Munición: %s\n\n{"#SILVER_COLOR"}El precio por bala es de 5 {"#GRAY_COLOR"}DN$\n{"#SILVER_COLOR"}¿Cuánto munición quiere comprar?", WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_AMMO]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Comprar munición", dialog, "Continuar", "Cerrar");
			return 1;
		}
		case DIALOG_BLACK_MARKET_ARMOUR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar Chaleco", "{d1d1d1}¿Estas seguro que quieres pagar 5000 {"#GRAY_COLOR"}DN${d1d1d1} por un chaleco anti balas?", "Comprar", "Cancelar");
		}
		case DIALOG_RENOUNCE:
		{
			LoopEx(i, MAX_LISTITEMS, 0) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[32 * sizeof(work_info)], line_str[145], listitem;

			LoopEx(i, sizeof(work_info), 0)
			{
				if(PLAYER_WORKS[playerid][i][pwork_SET])
				{
					format(line_str, sizeof line_str, "%s (%d)\n", work_info[i][work_info_NAME], i);
					strcat(dialog, line_str);
					
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i; 
					listitem ++;
				}
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Renunciar - Mís Trabajos", dialog, "Continuar", "Cancelar");
			return 1;
		}
		case DIALOG_SELECT_POLICE_DIVISION: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Policía - Trabajar", "Division Policial\nDivision S.W.A.T", "Continuar", "Cancelar");
		default: return 0;
	}
	return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	if(PlayerTemp[playerid][pt_DIALOG_RESPONDED] || PlayerTemp[playerid][pt_DIALOG_ID] != dialogid) return Y_HOOKS_BREAK_RETURN_0;
	PlayerTemp[playerid][pt_DIALOG_RESPONDED] = true;
	PlayerTemp[playerid][pt_DIALOG_ID] = -1;
 
	if(!isnull(inputtext))
	{
		for(new i = 0; i != strlen(inputtext); i ++)
		{
			if(inputtext[i] == '%') inputtext[i] = '#';
			if(inputtext[i] == '{') inputtext[i] = '#';
			if(inputtext[i] == '}') inputtext[i] = '#';
		}
	}
	
	switch(dialogid)
	{
		case DIALOG_INFO: return 1;
		case DIALOG_REGISTER:
		{
			if(response)
			{
				if(strlen(inputtext) < MIN_PASS_LENGTH || strlen(inputtext) > MAX_PASS_LENGTH) return ShowDialog(playerid, dialogid);
				format(PlayerTemp[playerid][pt_PASSWD], 24, "%s", inputtext);
				
				bcrypt_hash(playerid, "OnPlayerRegisterPassword", PlayerTemp[playerid][pt_PASSWD], BCRYPT_COST);	
			}
			else Kick(playerid);
			return 1;
		}
		case DIALOG_EMAIL:
		{
			if(!response) return Kick(playerid);

			new mail[32];
			format(mail, 32, "%s", inputtext);
			if(!IsValidEmail(mail))
			{
				SendMessage(playerid, "El correo no es valido.");
				ShowDialog(playerid, DIALOG_EMAIL);
				return 1;	
			}

			inline OnCheckEmail()
			{
				new rows;
				if(cache_get_row_count(rows))
				{
					if(rows)
					{
						SendMessage(playerid, "Este correco electronico ya está en uso, use otro distinto.");
						ShowDialog(playerid, dialogid);
					}
					else
					{
						format(PI[playerid][pEMAIL], 32, "%s", mail);
						ShowPlayerGenderSelector(playerid);
					}
				}
				else Kick(playerid);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE email = '%e';", mail);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCheckEmail);
			return 1;
		}
		case DIALOG_LOGIN:
		{
			if(!response) return Kick(playerid);
			if(!strlen(inputtext)) return ShowDialog(playerid, dialogid);
			
			bcrypt_verify(playerid, "OnPlayerLoginCheckPass", inputtext, PI[playerid][pPASS]);
			return 1;
		}
		case DIALOG_CLOTHES:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_INTERIOR_INDEX] == -1 && ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_NO_INFO) return 1;
				
				switch(listitem)
				{
					case 0:
					{
						PlayerTemp[playerid][pt_CLOTHING_SHOP] = GetClothingShopIndexByIntType(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE]);
						if(PlayerTemp[playerid][pt_CLOTHING_SHOP] == -1) return SendMessage(playerid, "No estás en el lugar adecuado.");

						PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
						SetPlayerPosEx(playerid, 257.251373, -40.797775, 1002.023437, 135.0, 14, playerid + MAX_PLAYERS, false); // World = Playerid + Max_players
						TogglePlayerControllableEx(playerid, false);
						
						SetPlayerCameraPos(playerid, 254.988632, -43.060516, 1002.9131);
						SetPlayerCameraLookAt(playerid, 257.251373, -40.797775, 1002.023437);
						
						UpdateClothingShop(playerid);
						ShowClothingShopTextdraws(playerid);
						
						SendMessage(playerid, "Pulsa 'ESCAPE' para dejar de probarte ropa.");
						SelectTextDrawEx(playerid, PRIMARY_COLOR2);
					}
				}
			}
			return 1;
		}
		case DIALOG_FOOD_PIZZA:
		{
			if(response)
			{
				if(PI[playerid][pCASH] >= PIZZA_FOOD[listitem][food_PRICE])
				{
					if(PI[playerid][pHUNGRY] >= 99.0 && PI[playerid][pTHIRST] >= 99.0) return SendClientMessagef(playerid, -1, "¿Es que quieres reventar?");
					
					if(GivePlayerCash(playerid, -PIZZA_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, PIZZA_FOOD[listitem][food_HUNGRY], PIZZA_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", PIZZA_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %d dolares para poder comprarlo.", PIZZA_FOOD[listitem][food_PRICE] - PI[playerid][pCASH]);
				}
			}
			else SendClientMessagef(playerid, -1, "Gracias por su visita a %s vuelva pronto.", ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_FOOD_BURGER:
		{
			if(response)
			{
				if(PI[playerid][pCASH] >= BURGER_SHOT_FOOD[listitem][food_PRICE])
				{
					if(PI[playerid][pHUNGRY] >= 99.0 && PI[playerid][pTHIRST] >= 99.0) return SendClientMessagef(playerid, -1, "¿Es que quieres reventar?");
					
					if(GivePlayerCash(playerid, -BURGER_SHOT_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, BURGER_SHOT_FOOD[listitem][food_HUNGRY], BURGER_SHOT_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", BURGER_SHOT_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %d dolares para poder comprarlo.", BURGER_SHOT_FOOD[listitem][food_PRICE] - PI[playerid][pCASH]);
				}
			}
			else SendClientMessagef(playerid, -1, "Gracias por su visita a %s vuelva pronto.", ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_FOOD_CLUCKIN:
		{
			if(response)
			{
				if(PI[playerid][pCASH] >= CLUCKIN_BELL_FOOD[listitem][food_PRICE])
				{
					if(PI[playerid][pHUNGRY] >= 99.0 && PI[playerid][pTHIRST] >= 99.0) return SendClientMessagef(playerid, -1, "¿Es que quieres reventar?");
					
					if(GivePlayerCash(playerid, -CLUCKIN_BELL_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, CLUCKIN_BELL_FOOD[listitem][food_HUNGRY], CLUCKIN_BELL_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", CLUCKIN_BELL_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %d dolares para poder comprarlo.", CLUCKIN_BELL_FOOD[listitem][food_PRICE] - PI[playerid][pCASH]);
				}
			}
			else SendClientMessagef(playerid, -1, "Gracias por su visita a %s vuelva pronto.", ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_BUY_PROPERTY:
		{
			if(response)
			{
				if(PI[playerid][pBANK_ACCOUNT] == 0) return SendMessage(playerid, "No puedes comprar una casa sin tener cuenta bancaria.");
				if(sscanf(inputtext, "d", inputtext[0])) return SendMessage(playerid, "Debes escribir el identificador de la propiedad (ID).");
				if(inputtext[0] <= 0) return SendMessage(playerid, "Esta casa no esta registrada en el sistema.");

				new player_properties = CountPlayerProperties(playerid);
				if(PI[playerid][pVIP])
				{
					if(player_properties >= MAX_VIP_PROPERTIES)
					{
						SendMessage(playerid, "No puedes comprar más propiedades.");
						return 1;
					}
				}
				else
				{
					if(player_properties >= MAX_NU_PROPERTIES)
					{
						SendClientMessagef(playerid, -1, "¡Los jugadores {"#GOLD_COLOR"}VIP{ffffff} pueden tener hasta %d propiedades! Usa {"#PURPLE_COLOR"}/ayuda{ffffff} si quieres ser {"#GOLD_COLOR"}VIP.", MAX_VIP_PROPERTIES);
						SendMessage(playerid, "No puedes comprar más propiedades.");
						return 1;
					}
				}
				
				new index = GetPropertyIndexByID(inputtext[0]);
				if(index == -1)
				{
					SendMessagef(playerid, "Esta casa no esta registrada en el sistema.");
				}
				
				if(PROPERTY_INFO[index][property_SOLD]) return SendMessage(playerid, "Está propiedad ya está vendida.");
				if(PROPERTY_INFO[index][property_LEVEL] > PI[playerid][pLEVEL]) return SendMessagef(playerid, "Necesitas ser como mínimo nivel %d para comprar esta propiedad.", PROPERTY_INFO[index][property_LEVEL]);
				if(PROPERTY_INFO[index][property_VIP_LEVEL] > PI[playerid][pVIP]) return SendMessagef(playerid, "Necesitas membresía VIP (%d) para comprar esta propiedad.", PROPERTY_INFO[index][property_VIP_LEVEL]);
				if(PROPERTY_INFO[index][property_EXTRA] > PI[playerid][pCOINS]) return SendMessagef(playerid, "Necesitas %d "SERVER_COIN" para comprar esta propiedad.", PROPERTY_INFO[index][property_EXTRA]);
				if(PI[playerid][pBANK_MONEY] >= PROPERTY_INFO[index][property_PRICE])
				{
					PlayerTemp[playerid][pt_BUY_HOUSE_INDEX] = index;
					ShowDialog(playerid, DIALOG_CONFIRM_BUY_PROPERTY);
				}
				else SendMessagef(playerid, "te faltan %s dolares para poder comprar esta propiedad.", number_format_thousand(PROPERTY_INFO[index][property_PRICE] - PI[playerid][pBANK_MONEY]));
			}
		}
		case DIALOG_BANK:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_BANK_WITHDRAW);
					case 1: ShowDialog(playerid, DIALOG_BANK_DEPOSIT);
					case 2: ShowDialog(playerid, DIALOG_BANK_TRANSFER);
					case 3: ShowDialog(playerid, DIALOG_BANK_TRANSACTIONS);
				}
			}
			else PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
			return 1;
		}
		case DIALOG_BANK_WITHDRAW:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] > PI[playerid][pBANK_MONEY])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Saldo insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(PlayerTemp[playerid][pt_PLAYER_IN_ATM])
				{
					if(inputtext[0] > 50000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendMessage(playerid, "Las operaciones de más de 50.000$ no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				if(GivePlayerCash(playerid, inputtext[0], true, false)) {
					PI[playerid][pBANK_MONEY] -= inputtext[0];
					
					RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_WITHDRAW, inputtext[0]);
					
					SendMessagef(playerid, "Operacion realizada con éxito, has retirado %s dolares.", number_format_thousand(inputtext[0]));
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				}
				PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_DEPOSIT:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] > PI[playerid][pCASH])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Dinero insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(PlayerTemp[playerid][pt_PLAYER_IN_ATM])
				{
					if(inputtext[0] > 50000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendMessage(playerid, "Las operaciones de más de 50.000$ no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				if(GivePlayerCash(playerid, -inputtext[0], true, true)) {
					PI[playerid][pBANK_MONEY] += inputtext[0];
					
					RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_DEPOSIT, inputtext[0]);
					
					SendMessagef(playerid, "Operacion realizada con éxito, has depositado %s dolares.", number_format_thousand(inputtext[0]));
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				}
				PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_TRANSFER:
		{
			if(response)
			{
				new to_bank_account;
				if(sscanf(inputtext, "d", to_bank_account))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(to_bank_account <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				inline OnBankAccountChecked()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							cache_get_value_index_int(0, 0, PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ID]);
							PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = to_bank_account;
							ShowDialog(playerid, DIALOG_BANK_TRANSFER_SEND);
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendMessage(playerid, "El numero de cuenta introducido no existe o no es correcto.");
							PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE bank_account = %d;", to_bank_account);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnBankAccountChecked);
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_TRANSFER_SEND:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] > PI[playerid][pBANK_MONEY])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessage(playerid, "Saldo insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(PlayerTemp[playerid][pt_PLAYER_IN_ATM])
				{
					if(inputtext[0] > 50000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendMessage(playerid, "Las operaciones de más de 50.000$ no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				PI[playerid][pBANK_MONEY] -= inputtext[0];
				new transfer_player_id = GetPlayerIdByBankAccountId(PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
				
				new message[64];
				format(message, sizeof message, "Tranferencia recibida: +%s$", number_format_thousand(inputtext[0]));
				if(transfer_player_id == -1)
				{
					inline OnPhoneChecked()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new id;
								cache_get_value_index_int(0, 0, id);
								if(id) RegisterPhoneMessage(0, id, message, true);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE bank_account = %d;", PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneChecked);
				}
				else
				{
					PI[transfer_player_id][pBANK_MONEY] += inputtext[0];
					
					if(PI[transfer_player_id][pPHONE_NUMBER])
					{
						RegisterPhoneMessage(0, PI[transfer_player_id][pID], message);
						if(PI[transfer_player_id][pPHONE_STATE] == PHONE_STATE_ON)
						{
							if((PlayerTemp[transfer_player_id][pt_GAME_STATE] == GAME_STATE_NORMAL || PlayerTemp[transfer_player_id][pt_GAME_STATE] == GAME_STATE_DEAD))
							{
								SendClientMessagef(transfer_player_id, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(transfer_player_id, 6740), message);
							}
						}
					}	
				}
				

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = bank_money + %d WHERE bank_account = %d;", inputtext[0], PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				RegisterBankAccountTransaction(PI[playerid][pID], PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ID], BANK_TRANSACTION_TRANSFER, inputtext[0]);
				
				SendClientMessagef(playerid, -1, "Operacion realizada con éxito, has transferido %s dolares al numero de cuenta %s.", number_format_thousand(inputtext[0]), number_format_thousand(PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = 0;
				PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else
			{
				PlayerTemp[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = 0;
				ShowDialog(playerid, DIALOG_BANK_TRANSFER);
			}
			return 1;
		}
		case DIALOG_CREATE_BANK_ACCOUNT:
		{
			if(response)
			{
				if(PI[playerid][pCASH] >= 500)
				{
					if(GivePlayerCash(playerid, -500, true, true)) 
					{
						PI[playerid][pBANK_MONEY] = 500;
						PI[playerid][pBANK_ACCOUNT] = getBankAccountNumber(PI[playerid][pID]);
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_account = %d, bank_money = %d WHERE id = %d;", PI[playerid][pBANK_ACCOUNT], PI[playerid][pBANK_MONEY], PI[playerid][pID]);
						mysql_tquery(handle_db, QUERY_BUFFER);
						
						RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_CREATE_ACCOUNT, 500);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						SendClientMessagef(playerid, -1, "Tu cuenta bancaria ha sido creada con éxito, tu numero de cuenta es %s.", number_format_thousand(PI[playerid][pBANK_ACCOUNT]));
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "No tienes dinero suficiente para crear la cuenta bancaria, te faltan %d dolares.", 500 - PI[playerid][pCASH]);
				}
			}
			return 1;
		}
		case DIALOG_BANK_TRANSACTIONS:
		{
			if(response) PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_247_LIST:
		{
			if(response)
			{
				switch(Supermarket_Product_List[listitem][product_TYPE])
				{
					case PRODUCT_TYPE_FOOD:
					{
						new index = GetPlayerFreePocketsSlot(playerid);
						if(index == -1) return SendMessage(playerid, "No te queda mas espacio en el inventario.");

						if(PI[playerid][pCASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if(GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) 
							{
								InsertPlayerPocket_Snacks(playerid, index);
								SendMessage(playerid, "Has comprado unos snacks, usa /n para consumir");
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendMessagef(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pCASH]));
						}
					}
					case PRODUCT_TYPE_DRINK:
					{
						new index = GetPlayerFreePocketsSlot(playerid);
						if(index == -1) return SendMessage(playerid, "No te queda mas espacio en el inventario.");

						if(PI[playerid][pCASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if(GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) 
							{
								InsertPlayerPocket_WaterBottle(playerid, index);
								SendMessage(playerid, "Has comprado unas botellas de agua, usa /n para consumir");
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendMessagef(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pCASH]));
						}
					}
					case PRODUCT_TYPE_PHONE:
					{						
						if(PI[playerid][pCASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if(PI[playerid][pPHONE_NUMBER])
							{
								SendMessage(playerid, "Ya tienes un teléfono.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
								return 1;
							}
							
							if(GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) 
							{
								PI[playerid][pPHONE_NUMBER] = getPhoneNumber(PI[playerid][pID]);
								PI[playerid][pPHONE_STATE] = PHONE_STATE_ON;
								PI[playerid][pPHONE_VISIBLE_NUMBER] = true;

								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET phone_number = %d, phone_state = %d, phone_visible_number = %d WHERE id = %d;", PI[playerid][pPHONE_NUMBER], PI[playerid][pPHONE_STATE], PI[playerid][pPHONE_VISIBLE_NUMBER], PI[playerid][pID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								
								SendClientMessagef(playerid, -1, "Has comprado un %s por %d dolares, tu numero es %d.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE], PI[playerid][pPHONE_NUMBER]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pCASH]));
							PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
						}
						
					}
					case PRODUCT_TYPE_GPS:
					{
						if(PI[playerid][pCASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if(PI[playerid][pGPS])
							{
								SendMessage(playerid, "Ya tienes un GPS.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
								return 1;
							}
							
							if(GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) 
							{	
								PI[playerid][pGPS] = true;
								SendClientMessagef(playerid, -1, "Has comprado un %s por %d dolares, usa /GPS para usarlo.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pCASH]));
							PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
						}
					}
					case PRODUCT_TYPE_PHONE_RESOLVER:
					{
						if(PI[playerid][pCASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if(PI[playerid][pPHONE_RESOLVER])
							{
								SendMessage(playerid, "Ya tienes una guía telefonica.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
								return 1;
							}
							
							if(GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) 
							{
								PI[playerid][pPHONE_RESOLVER] = true;
								SendClientMessagef(playerid, -1, "Has comprado una %s por %d dolares, usa /guia para usarla.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
								PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pCASH]));
							PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
						}
					}
				}

				PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
			}
			else PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
			return 1;
		}
		case DIALOG_PHONE:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: //Agenda
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF)
						{
							PI[playerid][pPHONE_STATE] = PHONE_STATE_ON;
							ShowDialog(playerid, dialogid);
							return 1;
						}
						ShowDialog(playerid, DIALOG_PHONE_BOOK);
					}
					case 1: //Llamar
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_CALL_NUMBER);
					}
					case 2: //Enviar mensaje
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_SMS_NUMBER);
					}
					case 3: //Ver mensajes recibidos
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_RECEIVED_MESSAGES);
					}
					case 4: //Ver mensajes enviados
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_SENT_MESSAGES);
					}
					case 5: //Apagar
					{
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_OFF) return SendClientMessagef(playerid, -1, "Tu teléfono está apagado, enciéndelo para usarlo.");
						
						if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
						PI[playerid][pPHONE_STATE] = PHONE_STATE_OFF;
						SendClientMessagef(playerid, -1, "Has apagado tu teléfono, ahora no recibirás llamadas.");
					}
				}
			}
			return 1;
		}
		case DIALOG_PHONE_BOOK:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, dialogid);
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PHONE_CONTACTS + 10) return ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NUMBER);
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PHONE_CONTACTS + 20) return ShowDialog(playerid, DIALOG_PHONE_BOOK_DELETE_ALL);
				
				PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			}
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NUMBER:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_ADD_NUMBER] = inputtext[0];
				ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NAME);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NAME:
		{
			if(response)
			{
				if(isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(strlen(inputtext) > 24)
				{
					SendClientMessagef(playerid, -1, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new slot = GetEmptyPlayerPhoneBookSlot(playerid);
				if(slot == -1) return SendClientMessagef(playerid, -1, "Memoria de la agenda llena.");
			
			
				PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
				format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "%s", inputtext);
				PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_ADD_NUMBER];
				RegisterNewPlayerPhoneBook(playerid, slot);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "Nuevo contacto agregado a la agenda: Nombre: %s Teléfono: %d.", PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER]);
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NUMBER);
			return 1;
		}
		case DIALOG_PHONE_BOOK_OPTIONS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:  SendClientMessagef(playerid, -1, "Usa /llamar");
					case 1: ShowDialog(playerid, DIALOG_PHONE_BOOK_SEND_MESSAGE);
					case 2: ShowDialog(playerid, DIALOG_PHONE_BOOK_CHANGE_NAME);
					case 3: ShowDialog(playerid, DIALOG_PHONE_BOOK_CONFIRM_DELET);
				}
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_BOOK_CHANGE_NAME:
		{
			if(response)
			{
				if(isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(strlen(inputtext) > 24)
				{
					SendClientMessagef(playerid, -1, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], 24, "%s", inputtext);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pbook SET name = '%e' WHERE id = %d;", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "Contacto modificado.");
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_BOOK_CONFIRM_DELET:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pbook WHERE id = %d;", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "Contacto \"%s\" eliminado de tu agenda.", PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
				
				PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_VALID] = false;
				PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID] = 0;
				format(PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], 24, "");
				PLAYER_PHONE_BOOK[playerid][ PlayerTemp[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER] = 0;
				
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_BOOK_DELETE_ALL:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pbook WHERE id_player = %d;", PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_PLAYER_PHONE_BOOK[Phone_Book_Enum]; 
				for(new i = 0; i != MAX_PHONE_CONTACTS; i ++) PLAYER_PHONE_BOOK[playerid][i] = temp_PLAYER_PHONE_BOOK;
				
				SendClientMessagef(playerid, -1, "Ha eliminado todos sus contactos.");
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_CALL_NUMBER:
		{
			if(response) SendClientMessagef(playerid, -1, "Usa /llamar");
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_SMS_NUMBER:
		{
			if(response) SendClientMessagef(playerid, -1, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_SMS_MESSAGE:
		{
			if(response) SendClientMessagef(playerid, -1, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE_SMS_MESSAGE);
			return 1;
		}
		case DIALOG_PHONE_BOOK_SEND_MESSAGE:
		{
			if(response) SendClientMessagef(playerid, -1, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_SENT_MESSAGES:
		{
			if(!response) ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_RECEIVED_MESSAGES:
		{
			if(!response) ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_CONFIRM_BUY_PROPERTY:
		{
			if(response)
			{
				if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_SOLD]) return SendClientMessagef(playerid, -1, "Está propiedad ya está vendida.");
				if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_LEVEL] > PI[playerid][pLEVEL]) return SendClientMessagef(playerid, -1, "Necesitas ser como mínimo nivel %d para comprar esta propiedad.", PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_LEVEL]);
				if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE] > PI[playerid][pBANK_MONEY]) return SendClientMessagef(playerid, -1, "No.");
				if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_VIP_LEVEL] > PI[playerid][pVIP]) return SendClientMessagef(playerid, -1, "No.");
				if(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA] > PI[playerid][pCOINS]) return SendClientMessagef(playerid, -1, "No.");
	
				if(!PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA])
				{
					if(PI[playerid][pPHONE_NUMBER])
					{
						new message[64]; format(message, sizeof message, "PROPIEDAD COMPRADA: -%s$", number_format_thousand(PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE]));
						RegisterPhoneMessage(0, PI[playerid][pID], message);
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
					}
					
					PI[playerid][pBANK_MONEY] -= PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE];
				
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_BUY_PROPERTY, PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE]);
				}
				else
				{
					PI[playerid][pCOINS] -= PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA];
					
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d WHERE id = %d;", PI[playerid][pCOINS], PI[playerid][pID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					
					SendClientMessagef(playerid, -1, "Has gastado %d "SERVER_COIN" en la compra de esta propiedad.", PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA]);
				}
				
				PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_SOLD] = true;
				PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_OWNER_ID] = PI[playerid][pID];
				CreatePropertyInfo(PlayerTemp[playerid][pt_BUY_HOUSE_INDEX], PI[playerid][pID]);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = %d WHERE id = %d;", PI[playerid][pID], PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				SendClientMessagef(playerid, -1, "¡Propiedad %d comprada!  Ahora puedes ir a tu casa, si no sabes donde es puedes marcarla con el /GPS.", PROPERTY_INFO[PlayerTemp[playerid][pt_BUY_HOUSE_INDEX]][property_ID]);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_PROPERTIES);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_VEHICLES);
					case 3: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
					case 4: ShowDialog(playerid, DIALOG_PLAYER_GPS_WORKS);
				}
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, dialogid);
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PLAYER_GPS_SAVES + 10) return ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_ADD);
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PLAYER_GPS_SAVES + 20) return ShowDialog(playerid, DIALOG_PLAYER_GPS_DELETE_ALL);
				
				PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_ADD:
		{
			if(response)
			{
				if(isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(strlen(inputtext) > 24)
				{
					SendClientMessagef(playerid, -1, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new slot = GetEmptyPlayer_GPS_Slot(playerid);
				if(slot == -1) return SendClientMessagef(playerid, -1, "Memoria del GPS llena.");
			
				PLAYER_GPS[playerid][slot][player_gps_VALID] = true;
				format(PLAYER_GPS[playerid][slot][player_gps_NAME], 24, "%s", inputtext);
				GetPlayerPos(playerid, PLAYER_GPS[playerid][slot][player_gps_X], PLAYER_GPS[playerid][slot][player_gps_Y], PLAYER_GPS[playerid][slot][player_gps_Z]);
				PLAYER_GPS[playerid][slot][player_gps_WORLD] = GetPlayerVirtualWorld(playerid);
				PLAYER_GPS[playerid][slot][player_gps_INTERIOR] = GetPlayerInterior(playerid);
				RegisterNewPlayer_GPS_Site(playerid, slot);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "Nuevo sitio agregado al GPS con el nombre: %s.", PLAYER_GPS[playerid][slot][player_gps_NAME]);
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_OPTION:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: SetPlayer_GPS_Checkpoint(playerid, PLAYER_GPS[playerid][PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_X], PLAYER_GPS[playerid][PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_Y], PLAYER_GPS[playerid][PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_Z], PLAYER_GPS[playerid][PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_WORLD], PLAYER_GPS[playerid][PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_INTERIOR]);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_CHANGE_NAME);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_CONFIRM_DELET);
				}
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_CHANGE_NAME:
		{
			if(response)
			{
				if(isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(strlen(inputtext) > 24)
				{
					SendClientMessagef(playerid, -1, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], 24, "%s", inputtext);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pgps SET name = '%e' WHERE id = %d;", PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "Has modificado el nombre de este lugar correctamente");
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			return 1;
		}
		case DIALOG_PLAYER_GPS_CONFIRM_DELET:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pgps WHERE id = %d;", PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_VALID] = false;
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID] = 0;
				format(PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], 24, "");
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_X] = 0.0;
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_Y] = 0.0;
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_Z] = 0.0;
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_WORLD] = 0;
				PLAYER_GPS[playerid][ PlayerTemp[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_INTERIOR] = 0;
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "Has eliminado este lugar de tu GPS.");
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			return 1;
		}
		case DIALOG_PLAYER_GPS_DELETE_ALL:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pgps WHERE id_player = %d;", PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_PLAYER_GPS[Player_GPS_Enum]; 
				for(new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++) PLAYER_GPS[playerid][i] = temp_PLAYER_GPS;
				
				SendClientMessagef(playerid, -1, "Ha eliminado todos tus lugares guardados.");
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITES:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_0);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_1);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_2);
					case 3: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_3);
					case 4: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_4);
					case 5: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_5);
					case 6: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_6);
					case 7: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_7);
					case 8: SetPlayer_GPS_Checkpoint(playerid, 1480.966918, -1772.065673, 18.795755, 0, 0);
					case 9: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_8);
					case 10: SetPlayer_GPS_Checkpoint(playerid, 1079.3434, -1756.8495, 13.9284, 0, 0);
					case 11: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_9);
				}
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_WORKS:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return true;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == WORK_MEDIC) SendClientMessagef(playerid, -1, "Este trabajo se puede conseguir en cualquier hospital.");
				else SetPlayer_GPS_Checkpoint(playerid, obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_X], obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Y], obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Z], 0, 0);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_0: //Hospitales
		{
			if(response) SetPlayer_GPS_Checkpoint(playerid, Hospital_Spawn_Positions[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][hspX], Hospital_Spawn_Positions[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][hspY], Hospital_Spawn_Positions[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][hspZ], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_1 .. DIALOG_PLAYER_GPS_SITE_4, DIALOG_PLAYER_GPS_SITE_8, DIALOG_PLAYER_GPS_SITE_9: //EE
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);
				SetPlayer_GPS_Checkpoint(playerid, ENTER_EXIT[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_X], ENTER_EXIT[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_Y], ENTER_EXIT[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_Z], ENTER_EXIT[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_WORLD], ENTER_EXIT[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_INTERIOR]);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_5: //Cajeros
		{
			if(response) SetPlayer_GPS_Checkpoint(playerid, ATM_BANK[listitem][atm_X], ATM_BANK[listitem][atm_Y], ATM_BANK[listitem][atm_Z], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_6: //Gasolineras
		{
			if(response) SetPlayer_GPS_Checkpoint(playerid, Fuel_Stations[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_X], Fuel_Stations[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_Y], Fuel_Stations[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_Z], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_WORKS_TELEPORTS:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return true;
				else SetPlayerPosEx(playerid, obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_X], obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Y], obtain_work_coords[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Z], 0.0, 0, 0, true);
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_7: //Concesionarios
		{
			if(response) SetPlayer_GPS_Checkpoint(playerid, SELL_VEHICLES_SHOPS_SPAWN[listitem][0], SELL_VEHICLES_SHOPS_SPAWN[listitem][1], SELL_VEHICLES_SHOPS_SPAWN[listitem][2], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PROPERTIES:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][listitem] == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);
				
				new index = GetPropertyIndexByID(PlayerTemp[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][listitem]);
				if(index != -1) SetPlayer_GPS_Checkpoint(playerid, PROPERTY_INFO[index][property_EXT_X], PROPERTY_INFO[index][property_EXT_Y], PROPERTY_INFO[index][property_EXT_Z], 0, PROPERTY_INFO[index][property_EXT_INTERIOR]);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_VEHICLES:
		{
			if(response)
			{
				new const vehicleid = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];

				if(vehicleid == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);

				if(!PI[playerid][pVIP])
				{
					if(!PLAYER_VEHICLES[vehicleid][player_vehicle_ACCESSIBLE])
					{
						SendClientMessagef(playerid, -1, "No podrás usar este vehículo hasta que no consigas VIP.");
					}
				}
				
				new Float:pos[3];
				GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
				SetPlayer_GPS_Checkpoint(playerid, pos[0], pos[1], pos[2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD], 0);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PROPERTY_OPTIONS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_PROPERTY_NAME);
					case 1:
					{
						new total;
						for(new i = 0; i != MAX_PLAYERS; i++)
						{
							if(IsPlayerConnected(i))
							{
								if( PI[i][pSTATE] == ROLEPLAY_STATE_GUEST_PROPERTY && PI[i][pLOCAL_INTERIOR] == PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID])
								{
									if(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_POLICE_FORCED] && (PLAYER_WORKS[i][WORK_POLICE][pwork_SET] && pTemp(i)[pt_WORKING_IN] == WORK_POLICE)) {
										continue;
									}

									PI[i][pSTATE] = ROLEPLAY_STATE_NORMAL;
									PI[i][pLOCAL_INTERIOR] = 0;
									pTemp(i)[pt_PROPERTY_INDEX] = -1;
									SetPlayerPosEx(i, PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_X], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Y], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Z], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_ANGLE], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_INTERIOR], 0, PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_FREEZE], false);
									StopAudioStreamForPlayer(i);
									SendClientMessagef(i, -1, "%s te ha echado de su propiedad.", PlayerTemp[playerid][pt_NAME]);
									total ++;
								}
							}
						}
						if(total == 0) SendClientMessagef(playerid, -1, "No hay nadie en tu propiedad.");
						else SendClientMessagef(playerid, -1, "Has echado %d personas de tu propiedad.", total);
					}
					case 2: ShowDialog(playerid, DIALOG_PROPERTY_DESCRIPTION);
				}
			}
			return 1;
		}
		case DIALOG_PROPERTY_NAME:
		{
			if(response)
			{
				if(!PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_VALID]) return 1;
				if(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pID]) return 1;
				
				if(isnull(inputtext)) return ShowDialog(playerid, dialogid);
				if(strlen(inputtext) > 24)
				{
					ShowDialog(playerid, dialogid);
					SendClientMessagef(playerid, -1, "{"#SILVER_COLOR"}Caracteres: 1-24.");
					return 1;
				}
				
				format(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], 24, "%s", inputtext);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET name = '%e' WHERE id = %d;", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "Nombre de la propiedad actualizado a '%s'.", inputtext);
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_OPTIONS);
			return 1;
		}
		case DIALOG_PROPERTY_DESCRIPTION:
		{
			if(response)
			{
				if(!PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_VALID]) return 1;
				if(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pID]) return 1;
				
				if(isnull(inputtext)) return ShowDialog(playerid, dialogid);
				if(strlen(inputtext) > 24)
				{
					ShowDialog(playerid, dialogid);
					SendClientMessagef(playerid, -1, "{"#SILVER_COLOR"}Caracteres: 1-24.");
					return 1;
				}
				
				format(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_DESCRIPTION], 24, "%s", inputtext);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET description = '%e' WHERE id = %d;", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_DESCRIPTION], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "Descripcion de la propiedad actualizada a '%s'.", inputtext);

				new label_str[1024];
				format(label_str, sizeof label_str, "Propiedad {"#PRIMARY_COLOR"}#%d\n\n{FFFFFF}Descripcion: {"#PRIMARY_COLOR"}%s\n{"#GOLD_COLOR"}Acercate {FFFFFF}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar.", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_DESCRIPTION]);
				UpdateDynamic3DTextLabelText(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_OPTIONS);
			return 1;
		}
		case DIALOG_BUY_VEHICLE:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] == INVALID_VEHICLE_ID) return 1;
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_TYPE] != VEHICLE_TYPE_SELL) return 1;
				if(!SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_VALID]) return 1;
				if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_VIP_LEVEL] > PI[playerid][pVIP]) return 1;
				if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_LEVEL] > PI[playerid][pLEVEL]) return 1;
				if(PI[playerid][pBANK_ACCOUNT] == 0) return 1;
				if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE] > PI[playerid][pBANK_MONEY]) return 1;
				if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA] > PI[playerid][pCOINS]) return 1;
			
				new vid = AddPersonalVehicle
				(
					playerid,
					GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID],
					SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][0],
					SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][1],
					SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][2],
					SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][3],
					GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_COLOR_1],
					GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_COLOR_2],
					VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_GAS]
				);
				if(!vid) return SendClientMessagef(playerid, -1, "No se pueden agregar más vehículos.");
				
				if(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA])
				{
					PI[playerid][pCOINS] -= SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA];
					
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d WHERE id = %d;", PI[playerid][pCOINS], PI[playerid][pID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					
					SendClientMessagef(playerid, -1, "Has gastado %d "SERVER_COIN" en la compra de este vehículo.", SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_EXTRA]);
				}
				else
				{
					if(PI[playerid][pPHONE_NUMBER])
					{
						new message[64]; format(message, sizeof message, "VEHICULO COMPRADO: -%s$", number_format_thousand(SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE]));
						RegisterPhoneMessage(0, PI[playerid][pID], message);
						if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
					}
					
					PI[playerid][pBANK_MONEY] -= SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE];
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_BUY_VEHICLE, SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_PRICE]);
				}	
				
				SendClientMessagef(playerid, -1, "¡Vehículo comprado!  Utiliza /ayuda vehiculos para ver que puedes hacer con tu vehículo.");
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				new Float:pos[4];
				pos[0] = SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][0];
				pos[1] = SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][1];
				pos[2] = SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][2];
				pos[3] = SELL_VEHICLES_SHOPS_SPAWN[ SELL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] ][sell_vehicle_SHOP] ][3];
				
				pos[0] += (2.0 * floatsin(-(pos[3] + 90.0), degrees));
				pos[1] += (2.0 * floatcos(-(pos[3] + 90.0), degrees));
				SetPlayerPosEx(playerid, pos[0], pos[1], pos[2], pos[3], 0, 0);
				
				if(!PI[playerid][pVIP]) ReLockPlayerVehicles(playerid);
			}
			return 1;
		}
		case DIALOG_CITYHALL_OPTIONS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_NOTARY);
					case 1: ShowDialog(playerid, DIALOG_CRANE_SELECT_VEHICLE);
				}
			}
		}
		case DIALOG_NOTARY:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						PlayerTemp[playerid][pt_NOTARY_OPTION] = 0;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
					}
					case 1:
					{
						PlayerTemp[playerid][pt_NOTARY_OPTION] = 0;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
					}
					case 2:
					{
						PlayerTemp[playerid][pt_NOTARY_OPTION] = 1;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
					}
					case 3:
					{
						PlayerTemp[playerid][pt_NOTARY_OPTION] = 1;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
					}
				}
			}
			else PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
			return 1;
		}
		case DIALOG_NOTARY_SELECT_PROPERTY:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] = GetPropertyIndexByID(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem]);
				if(PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] == -1) return SendClientMessagef(playerid, -1, "PROPIEDAD ID no encontrada.");
				
				switch(PlayerTemp[playerid][pt_NOTARY_OPTION])
				{
					case 0: ShowDialog(playerid, DIALOG_PROPERTY_BANK_SELL);
					case 1: ShowDialog(playerid, DIALOG_PROPERTY_SELL_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_NOTARY);
			return 1;
		}
		case DIALOG_PROPERTY_BANK_SELL:
		{
			if(response)
			{
				if(!PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_VALID]) return 1;
				if(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pID]) return 1;
				if(PI[playerid][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "Necesitas tener una cuenta bancaria para vender la propiedad.");

				PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_SOLD] = false;
				PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] = 0;
				format(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				
				new info[3];
				UpdateUnnocupiedPropertyLabel(PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]);
				
				DestroyDynamicPickup(PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID]);
				PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
				
				PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_X], PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_Y], PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_Z], 0, PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_INTERIOR]);
				info[0] = PICKUP_TYPE_PROPERTY;
				info[1] = PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]; // Index
				info[2] = 2; // Pickup Exterior
				Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
				
				new Float:price, payment;
				price = PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
				if(PI[playerid][pVIP]) payment = floatround( floatmul(price, 0.50) );
				else payment = floatround( floatmul(price, 0.25) );
				
				if(PI[playerid][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD VENDIDA: +%s$", number_format_thousand(payment));
					RegisterPhoneMessage(0, PI[playerid][pID], message);
					if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
				}
				
				PI[playerid][pBANK_MONEY] += payment;
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL WHERE id = %d;", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
						
				RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_SOLD_PROPERTY, payment);
				SendClientMessagef(playerid, -1, "Has vendido esta propiedad, has recibido %s$ en tu cuenta bancaria.", number_format_thousand(payment));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
			
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
			return 1;
		}
		case DIALOG_PROPERTY_SELL_PRICE:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				new Float:price, min_price, max_price;
				price = PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
				min_price = floatround( floatmul(price, 0.15) );
				max_price = floatround( floatmul(price, 6.0) );
				
				if(inputtext[0] < min_price || inputtext[0] > max_price)
				{
					SendClientMessagef(playerid, -1, "Este precio no está dentro del rango ofrecido.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PlayerTemp[playerid][pt_NOTARY_PRICE] = inputtext[0];
				ShowDialog(playerid, DIALOG_PROPERTY_SELL_TO_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
			return 1;
		}
		case DIALOG_PROPERTY_SELL_TO_PLAYER:
		{
			if(response)
			{
				if(sscanf(inputtext, "u", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				if(!IsPlayerConnected(inputtext[0])) return SendClientMessagef(playerid, -1, "Error, el comprador está desconectado.");
				if(inputtext[0] == playerid) return SendClientMessagef(playerid, -1, "¿Pero como te vas a vender algo a ti mismo?");
				if(PlayerTemp[inputtext[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "Error, el comprador no está disponible.");
				
				new Float:pos[3]; 
				GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
				if(!IsPlayerInRangeOfPoint(inputtext[0], 4.0, pos[0], pos[1], pos[2])) return SendClientMessagef(playerid, -1, "El comprador no está en la sala.");
				if(PI[inputtext[0]][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "El comprador no tiene cuenta bancaria.");
				
				new player_properties = CountPlayerProperties(inputtext[0]);
				if(player_properties >= MAX_VIP_PROPERTIES) return SendClientMessagef(playerid, -1, "El comprador no puede adquirir más propiedades.");
				if(!PI[inputtext[0]][pVIP])
				{
					if(player_properties >= MAX_NU_PROPERTIES) return SendClientMessagef(playerid, -1, "El comprador no puede adquirir más propiedades.");
				}
				
				if(PI[inputtext[0]][pLEVEL] < 2) return SendClientMessagef(playerid, -1, "Error, el comprador necesita ser al menos nivel 2.");
				if(PlayerTemp[playerid][pt_NOTARY_PRICE] > PI[inputtext[0]][pBANK_MONEY]) return SendClientMessagef(playerid, -1, "Error, el comprador no tiene el dinero que pides.");
				
				SendClientMessagef(playerid, -1, "Tu oferta se ha enviado al comprador, espera para ver si la acepta.");
				
				new action[64]; format(action, sizeof action, "quiere llegar a un acuerdo con %s.", PlayerTemp[inputtext[0]][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				PlayerTemp[inputtext[0]][pt_PLAYER_PROPERTY_SELECTED] = PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED];
				PlayerTemp[inputtext[0]][pt_NOTARY_PRICE] = PlayerTemp[playerid][pt_NOTARY_PRICE];
				PlayerTemp[inputtext[0]][pt_NOTARY_TO_PLAYER] = playerid;
				PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] = inputtext[0];
				
				ShowDialog(inputtext[0], DIALOG_SELL_CONFIRM_PROPERTY);
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_SELL_PRICE);
			return 1;
		}
		case DIALOG_SELL_CONFIRM_PROPERTY:
		{
			if(response)
			{
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])) return SendClientMessagef(playerid, -1, "El vendedor se ha desconectado.");
				if(pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_NOTARY_TO_PLAYER] != playerid) return SendClientMessagef(playerid, -1, "El vendedor ya no está.");
				if(pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "Error, el vendedor no está disponible.");
				if(ENTER_EXIT[ pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendClientMessagef(playerid, -1, "El vendedor no está en la sala.");
				if(!IsPlayerInRangeOfPoint(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER], 3.0, -474.596282, 289.679107, 2004.584960)) return SendClientMessagef(playerid, -1, "El vendedor no está en la sala.");
				if(PI[ PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] ][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "El vendedor no tiene cuenta bancaria.");
				
				// Traspasar
				new label_str[256];
				format
				(
					label_str, 
					sizeof label_str, 
					"\
						Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
						{FFFFFF}Descripcion: {"#PRIMARY_COLOR"}%s\n\
						{"#GOLD_COLOR"}Acercate {FFFFFF}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar.\
					", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_DESCRIPTION]
				);
				UpdateDynamic3DTextLabelText(PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				
				PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] = PI[playerid][pID];
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = %d WHERE id = %d;", PI[playerid][pID], PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				// Banco
				new price = PlayerTemp[playerid][pt_NOTARY_PRICE], seller = PlayerTemp[playerid][pt_NOTARY_TO_PLAYER];
				
				if(PI[playerid][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD COMPRADA: -%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[playerid][pID], message);
					if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
				}
				if(PI[seller][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD VENDIDA: +%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[seller][pID], message);
					if(PI[seller][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(seller, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(seller, 6740), message);
				}
				
				PI[playerid][pBANK_MONEY] -= price;
				PI[seller][pBANK_MONEY] += price;
				RegisterBankAccountTransaction(PI[playerid][pID], PI[seller][pID], BANK_TRANSACTION_TRANSFER, price);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[seller][pBANK_MONEY], PI[seller][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "¡Propiedad %d comprada! Ahora puedes ir a tu casa, si no sabes donde es puedes marcarla con el /GPS.", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				SendClientMessagef(seller, -1, "¡Propiedad %d vendida! Has recibido %s dolares en tu cuenta bancaria.", PROPERTY_INFO[ PlayerTemp[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID], number_format_thousand(price));
				PlayerPlaySoundEx(seller, 1058, 0.0, 0.0, 0.0);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				new action[64]; format(action, sizeof action, "y %s han llegado a un acuerdo.", PlayerTemp[seller][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
			}
			return 1;
		}
		case DIALOG_NOTARY_SELECT_VEHICLE:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				
				switch(PlayerTemp[playerid][pt_NOTARY_OPTION])
				{
					case 0: ShowDialog(playerid, DIALOG_VEHICLE_BANK_SELL);
					case 1: ShowDialog(playerid, DIALOG_VEHICLE_SELL_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_NOTARY);
			return 1;
		}
		case DIALOG_VEHICLE_BANK_SELL:
		{
			if(response)
			{
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_VALID]) return 1;
				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_OWNER_ID] != PI[playerid][pID]) return 1;
				if(PI[playerid][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "Necesitas tener una cuenta bancaria para vender el vehículo.");

				new Float:price, payment;
				price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
				if(PI[playerid][pVIP]) payment = floatround( floatmul(price, 0.50) );
				else payment = floatround( floatmul(price, 0.25) );
				
				//Destruir veh
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pvehicles WHERE id = %d;", PLAYER_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_ID]);
				mysql_query(handle_db, QUERY_BUFFER);
				
				DestroyVehicleEx(PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED]);
				
				
				if(PI[playerid][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO VENDIDO: +%s$", number_format_thousand(payment));
					RegisterPhoneMessage(0, PI[playerid][pID], message);
					if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
				}
				PI[playerid][pBANK_MONEY] += payment;
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				RegisterBankAccountTransaction(PI[playerid][pID], PI[playerid][pID], BANK_TRANSACTION_SOLD_VEHICLE, payment);
				
				SendClientMessagef(playerid, -1, "Has vendido este vehículo, has recibido %s$ en tu cuenta bancaria.", number_format_thousand(payment));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				if(!PI[playerid][pVIP]) ReLockPlayerVehicles(playerid);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
			return 1;
		}
		case DIALOG_VEHICLE_SELL_PRICE:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				new Float:price, min_price, max_price;
				price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
				min_price = floatround( floatmul(price, 0.15) );
				max_price = floatround( floatmul(price, 6.0) );
				
				if(inputtext[0] < min_price || inputtext[0] > max_price)
				{
					SendClientMessagef(playerid, -1, "Este precio no está dentro del rango ofrecido.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PlayerTemp[playerid][pt_NOTARY_PRICE] = inputtext[0];
				ShowDialog(playerid, DIALOG_VEHICLE_SELL_TO_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
			return 1;
		}
		case DIALOG_VEHICLE_SELL_TO_PLAYER:
		{
			if(response)
			{
				if(sscanf(inputtext, "u", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				if(!IsPlayerConnected(inputtext[0])) return SendClientMessagef(playerid, -1, "Error, el comprador está desconectado.");
				if(inputtext[0] == playerid) return SendClientMessagef(playerid, -1, "¿Pero como te vas a vender algo a ti mismo?");
				if(PlayerTemp[inputtext[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "Error, el comprador no está disponible.");
				
				new Float:pos[3]; 
				GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
				if(!IsPlayerInRangeOfPoint(inputtext[0], 4.0, pos[0], pos[1], pos[2])) return SendClientMessagef(playerid, -1, "El comprador no está en la sala.");
				if(PI[inputtext[0]][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "El comprador no tiene cuenta bancaria.");
				
				new pvehicles = CountPlayerVehicles(inputtext[0]);
				if(pvehicles >= MAX_VIP_VEHICLES) return SendClientMessagef(playerid, -1, "El comprador no puede adquirir más vehículos.");
				if(!PI[inputtext[0]][pVIP])
				{
					if(pvehicles >= MAX_NU_VEHICLES) return SendClientMessagef(playerid, -1, "El comprador no puede adquirir más vehículos.");
				}
				
				if(PI[inputtext[0]][pLEVEL] < 2) return SendClientMessagef(playerid, -1, "Error, el comprador necesita ser al menos nivel 2.");
				if(PlayerTemp[playerid][pt_NOTARY_PRICE] > PI[inputtext[0]][pBANK_MONEY]) return SendClientMessagef(playerid, -1, "Error, el comprador no tiene el dinero que pides.");
				
				if(PI[inputtext[0]][pDRIVE_LICENSE_POINTS] == 0)
				{
					SendClientMessagef(playerid, -1, "Tu oferta se ha enviado al comprador, pero el no tiene licencia de conducir y no puede aceptar tu oferta.");
					SendClientMessagef(inputtext[0], -1, "%s te ha ofrecido un vehículo, pero necesitas una licencia de conducir para aceptarlo.", PlayerTemp[playerid][pt_NAME]);
					return 1;
				}

				SendClientMessagef(playerid, -1, "Tu oferta se ha enviado al comprador, espera para ver si la acepta.");
				
				new action[64]; format(action, sizeof action, "quiere llegar a un acuerdo con %s.", PlayerTemp[inputtext[0]][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				PlayerTemp[inputtext[0]][pt_PLAYER_VEHICLE_SELECTED] = PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED];
				PlayerTemp[inputtext[0]][pt_NOTARY_PRICE] = PlayerTemp[playerid][pt_NOTARY_PRICE];
				PlayerTemp[inputtext[0]][pt_NOTARY_TO_PLAYER] = playerid;
				PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] = inputtext[0];
				
				ShowDialog(inputtext[0], DIALOG_SELL_CONFIRM_VEHICLE);
			}
			else ShowDialog(playerid, DIALOG_VEHICLE_SELL_PRICE);
			return 1;
		}
		case DIALOG_SELL_CONFIRM_VEHICLE:
		{
			if(response)
			{
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])) return SendClientMessagef(playerid, -1, "El vendedor se ha desconectado.");
				if(pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_NOTARY_TO_PLAYER] != playerid) return SendClientMessagef(playerid, -1, "El vendedor ya no está.");
				if(pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "Error, el vendedor no está disponible.");
				if(ENTER_EXIT[ pTemp(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER])[pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendClientMessagef(playerid, -1, "El vendedor no está en la sala.");
				if(!IsPlayerInRangeOfPoint(PlayerTemp[playerid][pt_NOTARY_TO_PLAYER], 3.0, -474.596282, 289.679107, 2004.584960)) return SendClientMessagef(playerid, -1, "El vendedor no está en la sala.");
				if(PI[ PlayerTemp[playerid][pt_NOTARY_TO_PLAYER] ][pBANK_ACCOUNT] == 0) return SendClientMessagef(playerid, -1, "El vendedor no tiene cuenta bancaria.");
				
				// Traspasar
				PLAYER_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_OWNER_ID] = PI[playerid][pID];
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pvehicles SET id_player = %d WHERE id = %d;", PI[playerid][pID], PLAYER_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				// Banco
				new price = PlayerTemp[playerid][pt_NOTARY_PRICE], seller = PlayerTemp[playerid][pt_NOTARY_TO_PLAYER];
				
				if(PI[playerid][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO COMPRADO: -%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[playerid][pID], message);
					if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 6740), message);
				}
				if(PI[seller][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO VENDIDO: +%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[seller][pID], message);
					if(PI[seller][pPHONE_STATE] == PHONE_STATE_ON) SendClientMessagef(seller, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(seller, 6740), message);
				}
				
				PI[playerid][pBANK_MONEY] -= price;
				PI[seller][pBANK_MONEY] += price;
				RegisterBankAccountTransaction(PI[playerid][pID], PI[seller][pID], BANK_TRANSACTION_TRANSFER, price);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pBANK_MONEY], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[seller][pBANK_MONEY], PI[seller][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				SendClientMessagef(playerid, -1, "¡Vehículo %s comprado! Utiliza /GPS para localizarlo.", VEHICLE_INFO[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
				SendClientMessagef(seller, -1, "¡Vehículo vendido! Has recibido %s dolares en tu cuenta bancaria.", number_format_thousand(price));
				PlayerPlaySoundEx(seller, 1058, 0.0, 0.0, 0.0);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				new action[64]; format(action, sizeof action, "y %s han llegado a un acuerdo.", PlayerTemp[seller][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				if(!PI[seller][pVIP]) ReLockPlayerVehicles(seller);
				if(!PI[playerid][pVIP]) ReLockPlayerVehicles(playerid);
			}
			return 1;
		}
		case DIALOG_SELECT_TRUCK_TYPE:
		{
			if(response)
			{
				if(Truck_Contents[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][truck_content_EXP] > PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL])
				{
					SendClientMessagef(playerid, -1, "Has realizado %d trabajos como camionero, necesitas %d para este viaje.", PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], Truck_Contents[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][truck_content_EXP]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new vehicleid = GetPlayerVehicleID(playerid);
				TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				
				PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], "");
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
				
				PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] = 35.0;
				UpdatePlayerLoadingTruckSize(playerid);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][7]);
				KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
				PlayerTemp[playerid][pt_TIMERS][9] = SetTimerEx("TruckLoadUp", 1000, false, "ii", playerid, vehicleid);
				
				SendClientMessage(playerid,-1, "{"#SILVER_COLOR"}El camion se está cargando, si sales de él se cancelará el viaje.");
			}
			else
			{
				KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
				PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
				PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
				PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
				PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
				SetVehicleToRespawnEx(GetPlayerVehicleID(playerid));
			}
			return 1;
		}
		case DIALOG_TUNING_MENU_PART:
		{
			if(response)
			{
				if(isnull(PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME])) return 1;
				
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
				
				format(PlayerTemp[playerid][pt_TUNING_SELECTED_PART], 24, "%s", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]);
				
				ShowDialog(playerid, DIALOG_TUNING_MENU_COMPONENT);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_TUNING_MENU_COMPONENT:
		{
			if(response)
			{
				if(isnull(PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]) || !PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID]) return 1;
				
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
				
				if(PI[playerid][pMECHANIC_PIECES] < PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES])
				{
					SendClientMessagef(playerid, -1, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
					return 1;
				}
				
				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					new vehicleid = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
					
					new slot = GetVehicleComponentType( PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] );
					new current_component = GetVehicleComponentInSlot(vehicleid, slot);
					if(current_component) RemoveVehicleComponent(vehicleid, current_component);
					
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][slot] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID];
					AddVehicleComponent(vehicleid, PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID]);
					
					PI[playerid][pMECHANIC_PIECES] -= PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					SendClientMessagef(playerid, -1, "Componente '%s' agregado, has necesitado %d piezas.", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME], PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES]);
				}
				else
				{
					format(PlayerTemp[playerid][pt_TUNING_SELECTED_COMPONENT], 24, "%s", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]);
					PlayerTemp[playerid][pt_TUNING_SELECTED_COMPONENT_ID] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID];
					
					PlayerTemp[playerid][pt_TUNING_SELECTED_PIECES] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					ShowDialog(playerid, DIALOG_MECHANIC_TUNING_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_TUNING_MENU_PART);
			return 1;
		}
		case DIALOG_MECHANIC_MENU:
		{
			if(response)
			{
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
				
				switch(listitem)
				{
					case 0: // Reparar
					{
						if(PI[playerid][pMECHANIC_PIECES] < 10) return SendClientMessagef(playerid, -1, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
						
						if(gettime() < GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_REPAIR_TIME] + 300)
						{
							new time = (300-(gettime()-GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_REPAIR_TIME]));
							SendClientMessagef(playerid, -1, "Tienes que esperar %s minutos para volver a reparar este vehículo.", TimeConvert(time));
							return 1;
						}
						
						if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
						{
							PI[playerid][pMECHANIC_PIECES] -= 10;
							RepairVehicleEx(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], playerid);
							
							SendClientMessagef(playerid, -1, "Este es tu vehículo por lo que no se cobrará.");
							SendClientMessagef(playerid, -1, "Has necesitado 10 piezas para la reparacion.");
							return 1;
						}
						else
						{
							if(!PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
							{
								if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_DRIVER] == playerid || GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] == playerid)
								{
									PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
									PI[playerid][pMECHANIC_PIECES] -= 10;
									RepairVehicleEx(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], playerid);
									
									SendClientMessagef(playerid, -1, "Eres el conductor o el ultimo conductor de este vehículo por lo que no se cobrará.");
									SendClientMessagef(playerid, -1, "Has necesitado 10 piezas para la reparacion.");
									return 1;
								}
							}
							ShowDialog(playerid, DIALOG_MECHANIC_REPAIR_PRICE);
						}
					}
					case 1:
					{
						if(PI[playerid][pMECHANIC_PIECES] < 5)
						{
							ShowDialog(playerid, dialogid);
							SendClientMessagef(playerid, -1, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
							return 1;
						}
						
						if(!PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendClientMessagef(playerid, -1, "Solo los vehículos personales se pueden pintar.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COL_SLOT);
					}
					case 2:
					{
						if(100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendClientMessagef(playerid, -1, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_MECHANIC_REMOVE_COMPONEN);
					}
					case 3:
					{
						if(100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendClientMessagef(playerid, -1, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if(!PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendClientMessagef(playerid, -1, "Solo los vehículos personales se pueden tunear.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_TUNING_MENU_PART);
					}
					case 4:
					{
						if(100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendClientMessagef(playerid, -1, "Has realizado %d reparaciones como mecánico, necesitas 100 para paintjobs.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if(!PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendClientMessagef(playerid, -1, "Solo los vehículos personales se le pueden cambiar el paintjob.");
							return 1;
						}
						ShowDialog(playerid, DIALOG_TUNING_PAINTJOB);
					}
				}
			}
			return 1;
		}
		case DIALOG_MECHANIC_REPAIR_PRICE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				new price;
				if(sscanf(inputtext, "d", price))
				{
					SendClientMessagef(playerid, -1, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(price < 0 || price > 2000)
				{
					SendClientMessagef(playerid, -1, "El rango del precio es: 0$ - 2.000$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
				{
					new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
					if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El propietario del vehículo no está cerca.");
					
					new Float:mechanic_pos[3];
					GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
					if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El propietario del vehículo está demasiado lejos.");
					
					PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
					PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
					PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
					format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Reparacion completa del vehículo");
					PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
					PlayerTemp[buyer][pt_MECHANIC_EXTRA] = 0;
					PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
					PlayerTemp[buyer][pt_MECHANIC_PIECES] = 10;
					PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
					
					ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
					SendClientMessagef(playerid, -1, "Le has ofrecido a %s reparar su vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
				}
				else
				{
					if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_OCCUPIED])
					{
						new buyer = GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_DRIVER];
						if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El conductor del vehículo no está cerca.");
					
						new Float:mechanic_pos[3];
						GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
						if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El conductor del vehículo está demasiado lejos.");
						
						PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
						PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
						PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
						format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Reparacion completa del vehículo");
						PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
						PlayerTemp[buyer][pt_MECHANIC_EXTRA] = 0;
						PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
						PlayerTemp[buyer][pt_MECHANIC_PIECES] = 10;
						PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
						
						ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
						SendClientMessagef(playerid, -1, "Le has ofrecido a %s reparar el vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
					}
					else
					{
						new buyer = GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER];
						if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "Este vehículo no tiene conductor.");
					
						new Float:mechanic_pos[3];
						GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
						if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El conductor del vehículo está demasiado lejos.");
						
						PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
						PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
						PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
						format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Reparacion completa del vehículo");
						PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
						PlayerTemp[buyer][pt_MECHANIC_EXTRA] = 0;
						PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
						PlayerTemp[buyer][pt_MECHANIC_PIECES] = 10;
						PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
						
						ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
						SendClientMessagef(playerid, -1, "Le has ofrecido a %s reparar el vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
					}
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_COLOR_PRICE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				new price;
				if(sscanf(inputtext, "d", price))
				{
					SendClientMessagef(playerid, -1, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(price < 0 || price > 1750)
				{
					SendClientMessagef(playerid, -1, "El rango del precio es: 0$ - 1.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El propietario del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El propietario del vehículo está demasiado lejos.");
				
				PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
				PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
				PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
				
				switch(PlayerTemp[playerid][pt_MECHANIC_COLOR_SLOT])
				{
					case 0:
					{
						format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Pintar color primario {%06x}(%d)", VEHICLE_COLORS[ PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR] ] >>> 8, PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR]);
						PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_COLOR_1;
					}
					case 1:
					{
						format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Pintar color secundario {%06x}(%d)", VEHICLE_COLORS[ PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR] ] >>> 8, PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR]);
						PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_COLOR_2;
					}
				}
				
				PlayerTemp[buyer][pt_MECHANIC_EXTRA] = PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR];
				PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PlayerTemp[buyer][pt_MECHANIC_PIECES] = 5;
				PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendClientMessagef(playerid, -1, "Le has ofrecido a %s pintar su vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_TUNING_PRICE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				new price;
				if(sscanf(inputtext, "d", price))
				{
					SendClientMessagef(playerid, -1, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(price < 0 || price > ((PlayerTemp[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000))
				{
					SendClientMessagef(playerid, -1, "El rango del precio es: 0$ - %s$.", number_format_thousand((PlayerTemp[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000));
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El propietario del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El propietario del vehículo está demasiado lejos.");
				
				PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
				PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
				PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
				format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "'%s' > '%s'", PlayerTemp[playerid][pt_TUNING_SELECTED_PART], PlayerTemp[playerid][pt_TUNING_SELECTED_COMPONENT]);
				PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_TUNING;
				PlayerTemp[buyer][pt_MECHANIC_EXTRA] = PlayerTemp[playerid][pt_TUNING_SELECTED_COMPONENT_ID];
				PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PlayerTemp[buyer][pt_MECHANIC_PIECES] = PlayerTemp[playerid][pt_TUNING_SELECTED_PIECES];
				PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendClientMessagef(playerid, -1, "Le has ofrecido a %s tunear su vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_PAINTJOB_PRICE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				new price;
				if(sscanf(inputtext, "d", price))
				{
					SendClientMessagef(playerid, -1, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(price < 0 || price > 2750)
				{
					SendClientMessagef(playerid, -1, "El rango del precio es: 0$ - 2.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El propietario del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El propietario del vehículo está demasiado lejos.");
				
				PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
				PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
				PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
				if(PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID] == 3)
					format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Eliminar Paintjob", PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID]);
				else
					format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Paintjob (%d)", PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID]);
				PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_PAINTJOB;
				PlayerTemp[buyer][pt_MECHANIC_EXTRA] = PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID];
				PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PlayerTemp[buyer][pt_MECHANIC_PIECES] = 15;
				PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendClientMessagef(playerid, -1, "Le has ofrecido a %s cambiar el paintjob de su vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_REM_COM_PRICE:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				new price;
				if(sscanf(inputtext, "d", price))
				{
					SendClientMessagef(playerid, -1, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(price < 0 || price > 2750)
				{
					SendClientMessagef(playerid, -1, "El rango del precio es: 0$ - 2.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if(buyer == INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "El propietario del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if(!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendClientMessagef(playerid, -1, "El propietario del vehículo está demasiado lejos.");

				inline OnComponentsInfoLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new part[24], name[24];
							cache_get_value_name(0, "part", part);
							cache_get_value_name(0, "name", name);

							PlayerTemp[buyer][pt_MECHANIC_PID] = playerid;
							PlayerTemp[buyer][pt_MECHANIC_AID] = PI[playerid][pID];
							PlayerTemp[buyer][pt_MECHANIC_PRICE] = price;
							format(PlayerTemp[buyer][pt_MECHANIC_TEXT], 64, "Eliminar componente (%s > %s)", part, name);
							PlayerTemp[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REMOVE_COMPONEN;
							PlayerTemp[buyer][pt_MECHANIC_EXTRA] = PlayerTemp[playerid][pt_MECHANIC_SELECTED_COMPONENT];
							PlayerTemp[buyer][pt_MECHANIC_VEHICLE_ID] = PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
							PlayerTemp[buyer][pt_MECHANIC_PIECES] = PLAYER_TUNING_MENU[playerid][ PlayerTemp[playerid][pt_MECHANIC_SELECTED_COMPONENT] ][tuning_menu_PIECES];
							PlayerTemp[buyer][pt_MECHANIC_TIME] = gettime();
							ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
							SendClientMessagef(playerid, -1, "Le has ofrecido a %s quitar un componente de su vehículo por %s$.", PlayerTemp[buyer][pt_NAME], number_format_thousand(PlayerTemp[buyer][pt_MECHANIC_PRICE]));
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vcomponents_info WHERE id = %d;", GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][ PlayerTemp[playerid][pt_MECHANIC_SELECTED_COMPONENT] ][tuning_menu_ID] ]);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnComponentsInfoLoad);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_ACCEPT:
		{
			if(response)
			{
				if(gettime() > PlayerTemp[playerid][pt_MECHANIC_TIME] + 20) return SendClientMessagef(playerid, -1, "Has tardardo mucho en aceptarlo.");
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_MECHANIC_PID])) return SendClientMessagef(playerid, -1, "El mecánico ya no está en el servidor.");
				if(PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pID] != PlayerTemp[playerid][pt_MECHANIC_AID]) return SendClientMessagef(playerid, -1, "El mecánico ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PlayerTemp[playerid][pt_MECHANIC_PID], pos[0], pos[1], pos[2]);
				if(!IsPlayerInRangeOfPoint(playerid, 10.0, pos[0], pos[1], pos[2])) return SendClientMessagef(playerid, -1, "El mecánico está demasiado lejos.");
				if(pTemp(PlayerTemp[playerid][pt_MECHANIC_PID])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "El mecánico no está disponible.");
				
				if(PlayerTemp[playerid][pt_MECHANIC_PRICE] > PI[playerid][pCASH])
				{
					SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}La persona no tiene suficiente dinero.");
					SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder aceptarlo.", number_format_thousand(PlayerTemp[playerid][pt_MECHANIC_PRICE] - PI[playerid][pCASH]));
					return 1;
				}
				if(PlayerTemp[playerid][pt_MECHANIC_PIECES] > PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES])
				{
					SendClientMessagef(playerid, -1, "Al mecánico no le quedan piezas para el trabajo.");
					SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}La persona ha aceptado pero no tienes piezas suficientes para el trabajo.");
					return 1;
				}
				
				if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID])
				{
					SendClientMessagef(playerid, -1, "El vehículo está muy lejos.");
					SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}La persona ha aceptado pero el vehículo está muy lejos.");
					return 1;
				}
				if(GetVehicleDistanceFromPoint(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], pos[0], pos[1], pos[2]) > 10.0)
				{
					SendClientMessagef(playerid, -1, "El vehículo está muy lejos del mecánico.");
					SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}La persona ha aceptado pero estás muy lejos del vehículo.");
					return 1;
				}
				
				if(GivePlayerCash(playerid, -PlayerTemp[playerid][pt_MECHANIC_PRICE], true, true) && GivePlayerCash(PlayerTemp[playerid][pt_MECHANIC_PID], PlayerTemp[playerid][pt_MECHANIC_PRICE], true, false)) {
					switch(PlayerTemp[playerid][pt_MECHANIC_TYPE])
					{
						case MECHANIC_OPTION_REPAIR:
						{
							PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] -= PlayerTemp[playerid][pt_MECHANIC_PIECES];
							PLAYER_WORKS[ PlayerTemp[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							
							RepairVehicleEx(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], playerid);
							SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}Has necesitado 10 piezas para la reparacion.");
						}
						case MECHANIC_OPTION_COLOR_1:
						{
							PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] -= 5;
							GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1] = PlayerTemp[playerid][pt_MECHANIC_EXTRA];
							ChangeVehicleColor(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
							
							SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}Has necesitado 5 piezas para pintar el vehículo.");
						}
						case MECHANIC_OPTION_COLOR_2:
						{
							PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] -= 5;
							GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2] = PlayerTemp[playerid][pt_MECHANIC_EXTRA];
							ChangeVehicleColor(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
							
							SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}Has necesitado 5 piezas para pintar el vehículo.");
						}
						case MECHANIC_OPTION_TUNING:
						{
							new slot = GetVehicleComponentType(PlayerTemp[playerid][pt_MECHANIC_EXTRA]);
							new current_component = GetVehicleComponentInSlot(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], slot);
							if(current_component) RemoveVehicleComponent(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], current_component);
							
							GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot] = PlayerTemp[playerid][pt_MECHANIC_EXTRA];
							AddVehicleComponent(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], PlayerTemp[playerid][pt_MECHANIC_EXTRA]);
							
							PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] -= PlayerTemp[playerid][pt_MECHANIC_PIECES];
							SendClientMessagef(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "Has necesitado %d piezas para tunear el vehículo.", PlayerTemp[playerid][pt_MECHANIC_PIECES]);
						}
						case MECHANIC_OPTION_PAINTJOB:
						{
							if(PlayerTemp[playerid][pt_MECHANIC_EXTRA] == 3)
							{
								PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] += 15;
								SendClientMessagef(playerid, -1, "Paintjob eliminado, piezas ganadas: 15, piezas totales: %d.", PI[playerid][pMECHANIC_PIECES]);
							}
							else
							{
								PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] -= 15;
								SendClientMessagef(playerid, -1, "Has necesitado 15 piezas para el paintjob de el vehículo.");
							}
							GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = PlayerTemp[playerid][pt_MECHANIC_EXTRA];
							ChangeVehiclePaintjob(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
						}

						case MECHANIC_OPTION_REMOVE_COMPONEN:
						{
							new slot = PLAYER_TUNING_MENU[ PlayerTemp[playerid][pt_MECHANIC_PID] ][ PlayerTemp[playerid][pt_MECHANIC_EXTRA] ][tuning_menu_ID];
							RemoveVehicleComponent(PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot]);
							GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot] = 0;
							
							PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] += PlayerTemp[playerid][pt_MECHANIC_PIECES];
							SendClientMessagef(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "Componente eliminado, piezas ganadas: %d, piezas totales: %d.", PlayerTemp[playerid][pt_MECHANIC_PIECES], PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES]);
						}
					}
					
					SendClientMessagef(playerid, -1, "Le has pagado %s$ al mecánico por su trabajo.", number_format_thousand(PlayerTemp[playerid][pt_MECHANIC_PRICE]));
					SendClientMessagef(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "%s te ha pagado %s dolares por tu trabajo.", PlayerTemp[playerid][pt_NAME], number_format_thousand(PlayerTemp[playerid][pt_MECHANIC_PRICE]));
				}
			}
			else
			{
				if(gettime() > PlayerTemp[playerid][pt_MECHANIC_TIME] + 30) return 1;
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_MECHANIC_PID])) return 1;
				if(PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pID] != PlayerTemp[playerid][pt_MECHANIC_AID]) return 1;

				SendClientMessage(PlayerTemp[playerid][pt_MECHANIC_PID], -1, "{"#SILVER_COLOR"}La persona no acepto lo que le ofreciste.");
			}
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COL_SLOT:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				PlayerTemp[playerid][pt_MECHANIC_COLOR_SLOT] = listitem;
				ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COLOR);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COLOR:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				if(PI[playerid][pMECHANIC_PIECES] < 5) return SendClientMessagef(playerid, -1, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");

				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					PI[playerid][pMECHANIC_PIECES] -= 5;
					switch(PlayerTemp[playerid][pt_MECHANIC_COLOR_SLOT])
					{
						case 0: GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1] = listitem;
						case 1: GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2] = listitem;
					}
					ChangeVehicleColor(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
					
					SendClientMessagef(playerid, -1, "Has necesitado 5 piezas para pintar el vehículo.");
				}
				else
				{
					PlayerTemp[playerid][pt_MECHANIC_SELECTED_COLOR] = listitem;
					ShowDialog(playerid, DIALOG_MECHANIC_COLOR_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COL_SLOT);
			return 1;
		}
		case DIALOG_MECHANIC_REMOVE_COMPONEN:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
			
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
		
			if(response)
			{
				if(100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
				{
					SendClientMessagef(playerid, -1, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] < 0) return ShowDialog(playerid, dialogid);

				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					RemoveVehicleComponent(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] ]);
					GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] ] = 0;
					
					PI[playerid][pMECHANIC_PIECES] += PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					SendClientMessagef(playerid, -1, "Componente eliminado, piezas ganadas: %d, piezas totales: %d.", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES], PI[playerid][pMECHANIC_PIECES]);
				}
				else
				{
					PlayerTemp[playerid][pt_MECHANIC_SELECTED_COMPONENT] = listitem;
					ShowDialog(playerid, DIALOG_MECHANIC_REM_COM_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_TUNING_PAINTJOB:
		{
			if(!GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
			
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if(!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendClientMessagef(playerid, -1, "El vehículo está demasiado lejos.");
			
			if(response)
			{
				if(100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
				{
					SendClientMessagef(playerid, -1, "Has realizado %d reparaciones como mecánico, necesitas 100 para cambiar el paintjob de vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(PI[playerid][pMECHANIC_PIECES] < 15) return SendClientMessagef(playerid, -1, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
				
				if(listitem == 0)
				{
					if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] == 3)
					{
						SendClientMessagef(playerid, -1, "El vehículo no tiene ningun paintjob.");
						return 1;
					}

					if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
					{
						GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = 3;
						ChangeVehiclePaintjob(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
						PI[ PlayerTemp[playerid][pt_MECHANIC_PID] ][pMECHANIC_PIECES] += 15;
						SendClientMessagef(playerid, -1, "Paintjob eliminado, piezas ganadas: 15, piezas totales: %d.", PI[playerid][pMECHANIC_PIECES]);
					}
					else
					{
						PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID] = 3;
						ShowDialog(playerid, DIALOG_MECHANIC_PAINTJOB_PRICE);
					}
					
					return 1;
				}
				
				if(PLAYER_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = listitem - 1;
					ChangeVehiclePaintjob(PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
					PI[playerid][pMECHANIC_PIECES] -= 15;
					SendClientMessagef(playerid, -1, "Has necesitado 15 piezas para el paintjob de el vehículo.");
				}
				else
				{
					PlayerTemp[playerid][pt_PAINTJOB_SELECTED_ID] = listitem - 1;
					ShowDialog(playerid, DIALOG_MECHANIC_PAINTJOB_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_SEED_LIST:
		{
			if(response)
			{
				if(seed_info[listitem][seed_info_EXP] > PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL]) return SendClientMessagef(playerid, -1, "Necesitas haber plantado al menos %d plantas como agricultor para poder comprar esta semilla.", seed_info[listitem][seed_info_EXP]);
				
				PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] = listitem;
				ShowDialog(playerid, DIALOG_SEED_BUY);
			}
			return 1;
		}
		case DIALOG_SEED_BUY:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0])) return SendClientMessagef(playerid, -1, "La cantidad de semillas no es correcta.");
				if(inputtext[0] <= 0 || inputtext[0] > 100000) return SendClientMessagef(playerid, -1, "La cantidad de semillas no es correcta.");
				
				new price = seed_info[ PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PRICE] * inputtext[0];
				if(price > PI[playerid][pCASH]) return SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar las semillas.", number_format_thousand(price - PI[playerid][pCASH]));
				
				if(GivePlayerCash(playerid, -price, true, true)) {
					switch(seed_info[ PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PLANT_TYPE])
					{
						case PLANT_TYPE_MEDICINE: PI[playerid][pSEED_MEDICINE] += inputtext[0];
						case PLANT_TYPE_CANNABIS: PI[playerid][pSEED_CANNABIS] += inputtext[0];
						case PLANT_TYPE_CRACK: PI[playerid][pSEED_CRACK] += inputtext[0];
					}
					
					SendClientMessagef(playerid, -1, "Has comprado %s semillas de %s por %s$.", number_format_thousand(inputtext[0]), seed_info[ PlayerTemp[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], number_format_thousand(price));
				}
			}
			else ShowDialog(playerid, DIALOG_SEED_LIST);
			return 1;
		}
		case DIALOG_PLANT_PLANTS:
		{
			if(response)
			{
				if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
				if(!IsPlayerInDynamicArea(playerid, Farmer_Area)) return SendClientMessagef(playerid, -1, "No estás en la zona para plantar, está marcada en el mapa con una bandera.");
				
				switch(seed_info[listitem][seed_info_PLANT_TYPE])
				{
					case PLANT_TYPE_MEDICINE:
					{
						if(plant_info[listitem][plant_info_SEEDS] > PI[playerid][pSEED_MEDICINE])
						{
							SendClientMessagef(playerid, -1, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pSEED_MEDICINE] -= plant_info[listitem][plant_info_SEEDS];
					}
					case PLANT_TYPE_CANNABIS:
					{
						if(plant_info[listitem][plant_info_SEEDS] > PI[playerid][pSEED_CANNABIS])
						{
							SendClientMessagef(playerid, -1, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pSEED_CANNABIS] -= plant_info[listitem][plant_info_SEEDS];
					}
					case PLANT_TYPE_CRACK:
					{
						if(plant_info[listitem][plant_info_SEEDS] > PI[playerid][pSEED_CRACK])
						{
							SendClientMessagef(playerid, -1, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pSEED_CRACK] -= plant_info[listitem][plant_info_SEEDS];
					}
				}
				
				SendClientMessagef(playerid, -1, "Vas a plantar '%s' y vas a necesitar %d semillas.", plant_info[listitem][plant_info_NAME], plant_info[listitem][plant_info_SEEDS]);
				
				
				new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL], 10);
				if(offset > 30.0) offset = 30.0;
				
				PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED] = listitem;
				PlayerTemp[playerid][pt_PLANTING] = true;
				PlayerTemp[playerid][pt_WORKING_IN] = WORK_FARMER;
				
				TogglePlayerControllableEx(playerid, false);
				SetCameraBehindPlayer(playerid);
				ApplyAnimation(playerid, "BOMBER", "BOM_Plant_Loop", 4.1, true, false, false, false, 0);
				SetPlayerKeyPress(playerid, plant_info[listitem][plant_info_SEEDS] * 7);
			}
			return 1;
		}
		case DIALOG_ANIMS:
		{
		    if(response)
		    {
		        switch(listitem)
		        {
		            case 0: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_HANDSUP);//rendirse
		            case 1: ApplyAnimation(playerid, "BLOWJOBZ", "BJ_COUCH_LOOP_W", 4.0, 1, 1, 1, 0, 0);//blowjob
		            case 2: ApplyAnimation(playerid,"PED","BIKE_fallR",4.0,0,1,1,1,0);//rodar
		            case 3: ApplyAnimation(playerid,"PED", "WALK_DRUNK",4.0,1,1,1,1,500);//borracho
		            case 4: ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0,0);//bomba
		            case 5: ApplyAnimation( playerid,"ped", "ARRESTgun", 4.0, 0, 1, 1, 1,500);//apuntar
		            case 6: ApplyAnimation(playerid, "RAPPING", "Laugh_01", 4.0, 0, 0, 0, 0,0);//reir
		            case 7: ApplyAnimation(playerid, "SHOP", "ROB_Loop_Threat", 4.0, 0, 0, 0, 1,500);//amenazar
		            case 8: ApplyAnimation(playerid, "PAULNMAC", "wank_loop", 4.0, 1, 0, 0, 1, 0);//paja
		            case 9: ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0);//herido
		            case 10: ApplyAnimation(playerid, "COP_AMBIENT", "Coplook_loop", 4.0, 1, 1, 1, 0, 4000);//cruzarbrazos
		            case 11: ApplyAnimation(playerid,"SUNBATHE", "Lay_Bac_in", 4.0, 0, 0, 0, 1, 0);//recostarse
		            case 12: ApplyAnimation(playerid, "ped", "cower", 4.0, 1, 0, 0, 0, 0);//crubrirse
		            case 13: ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);//vomitar
		            case 14: ApplyAnimation(playerid, "FOOD", "EAT_Burger", 3.00, 0, 0, 0, 0, 0);//comer
		            case 15: ApplyAnimation(playerid, "KISSING", "BD_GF_Wave", 3.0, 0, 0, 0, 0, 0);//despedir
		            case 16: ApplyAnimation(playerid, "SWEET", "sweet_ass_slap", 4.0, 0, 0, 0, 0, 0);//nalgada
		            case 17: ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0);//agonizar
		            case 18: ApplyAnimation(playerid, "KISSING", "Playa_Kiss_02", 4.0, 0, 0, 0, 0, 0);//besar
		            case 19: ApplyAnimation(playerid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);//crack
		            case 20: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_PISSING);//mear
		            case 21: ApplyAnimation(playerid, "SUNBATHE", "ParkSit_M_in", 4.000000, 0, 1, 1, 1, 0);//sentarse
		            case 22: ApplyAnimation( playerid,"ped", "fucku", 4.0, 0, 1, 1, 1, 1 );//fucku
		            case 23: ApplyAnimation(playerid, "ped", "phone_in", 4.000000, 0, 0, 0, 1, 4000);//llamar
		            case 24: ApplyAnimation(playerid, "PARK", "Tai_Chi_Loop",  4.1,7,5,1,1,1);//taichi
		            case 25: ApplyAnimation(playerid, "BAR", "dnk_stndM_loop", 4.0, 0, 1, 1, 0, 4000);//beber
		            case 26: ApplyAnimation(playerid, "GYMNASIUM", "gym_shadowbox",  4.1,7,5,1,1,1);//boxear
		            case 27: ApplyAnimation(playerid,"GANGS","hndshkfa_swt",4.1,0,0,0,0,0);//saludar
		            case 28: ApplyAnimation(playerid,"GRAVEYARD","mrnF_loop",4.1,0,0,0,0,0);//llorar
		            case 29: ApplyAnimation(playerid,"INT_HOUSE","BED_In_R",4.1,0,0,0,1,0);//dormir
		            case 30: ApplyAnimation(playerid,"RAPPING","RAP_B_Loop",4.0,1,0,0,0,8000);//rapear
		            case 31: ApplyAnimation(playerid,"STRIP","strip_A",4.1,7,5,1,1,1);//strip
		            case 32: ApplyAnimation(playerid,"DANCING","DAN_Down_A",4.1,7,5,1,1,1);//bailar
		            case 33: ApplyAnimation(playerid,"ON_LOOKERS","shout_02",4.1,7,5,1,1,1);//alentar
		            case 34: ApplyAnimation(playerid,"PED","IDLE_chat",4.1,7,5,1,1,1);//hablar
					case 35: ApplyAnimation(playerid, "ped", "SEAT_down", 4.000000, 0, 1, 1, 1, 0);//asiento
		        }
				SendClientMessagef(playerid, -1, "Para detener la animacion utiliza /parar.");
			}
			return 1;
		}
		case DIALOG_VEHICLE_BOOT:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_BOOT_SLOTS + 20)
				{
					ShowDialog(playerid, DIALOG_VEHICLE_BOOT_DELETE_ALL);
					return 1;
				}
				
				PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_VEHICLE_BOOT_OPTIONS);
			}
			
		}
		case DIALOG_VEHICLE_BOOT_DELETE_ALL:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM vboot WHERE id_vehicle = %d;", PLAYER_VEHICLES[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][player_vehicle_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_VEHICLE_BOOT[enum_VEHICLE_BOOT];
				for(new i = 0; i != MAX_BOOT_SLOTS; i ++) VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][i] = temp_VEHICLE_BOOT;
		
				SendClientMessagef(playerid, -1, "Ha eliminado todo de este maletero.");
				Auto_SendPlayerAction(playerid, "tira todas las armas de su maltero");
			}
			return 1;
		}
		case DIALOG_VEHICLE_BOOT_OPTIONS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(!VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_VALID]) return SendClientMessagef(playerid, -1, "No hay nada en ese slot.");

						new string[128];
						switch(VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_TYPE]) {
							case BOOT_TYPE_WEAPON: {
								new to_slot = WEAPON_INFO[ VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT] ][weapon_info_SLOT];
								if(PLAYER_WEAPONS[playerid][to_slot][player_weapon_VALID])
								{
									PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
									SendClientMessagef(playerid, -1, "Para sacar esta arma tienes que deshacerte de tu \"%s (%d)\" para tener espacio.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][ to_slot ][player_weapon_ID] ][weapon_info_NAME], to_slot);
									return 1;
								}
								GivePlayerWeaponEx(playerid, VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT], VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT_EXTRA]);
								RegisterNewPlayerWeapon(playerid, to_slot);
								format(string, sizeof string, "saca un(a) %s del maletero de su vehículo.", WEAPON_INFO[ VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT] ][weapon_info_NAME]);
							}
							case BOOT_TYPE_MEDICINES: {
								PI[playerid][pMEDICINE] += VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT];
								format(string, sizeof string, "saca medicamentos del maletero de su vehículo.");
							}
							case BOOT_TYPE_CANNABIS: {
								PI[playerid][pCANNABIS] += VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT];
								format(string, sizeof string, "saca marihuana del maletero de su vehículo.");
							}
							case BOOT_TYPE_CRACK: {
								PI[playerid][pCRACK] += VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_INT];
								format(string, sizeof string, "saca crack del maletero de su vehículo.");
							}
						}

						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM vboot WHERE id = %d;", VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_OBJECT_ID]);
						mysql_tquery(handle_db, QUERY_BUFFER);

						new temp_VEHICLE_BOOT[enum_VEHICLE_BOOT]; VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ] = temp_VEHICLE_BOOT;
						Auto_SendPlayerAction(playerid, string);
					}
					case 1: ShowDialog(playerid, DIALOG_VEHICLE_BOOT_DELETE);
				}
			}
			else ShowDialog(playerid, DIALOG_VEHICLE_BOOT);
			return 1;
		}
		case DIALOG_VEHICLE_BOOT_DELETE:
		{
			if(response)
			{
				SendClientMessagef(playerid, -1, "Eliminado.");
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM vboot WHERE id = %d;", VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ][vehicle_boot_OBJECT_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_VEHICLE_BOOT[enum_VEHICLE_BOOT]; VEHICLE_BOOT[ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] ][ PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE_BOOT_SLOT] ] = temp_VEHICLE_BOOT;
			}
			else ShowDialog(playerid, DIALOG_VEHICLE_BOOT_OPTIONS);
			return 1;
		}
		case DIALOG_SELECT_POLICE_SKIN:
		{
			if(response)
			{
				if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return 1;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if(POLICE_SKINS[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][police_skin_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) return ShowDialog(playerid, dialogid);

				PI[playerid][pPOLICE_DUTY] = POLICE_SKINS[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][police_skin_SKIN];

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pweapons WHERE id_player = %d;", PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				ResetPlayerWeaponsEx(playerid);

				CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_POLICE, INVALID_VEHICLE_ID);
			}
			return 1;
		}
		case DIALOG_POLICE_RADIOS:
		{
			if(response)
			{
				PlayerTemp[playerid][pt_POLICE_RADIO] = listitem;
				SendClientMessagef(playerid, -1, "Tu radio ha sido ajustada a la frecuencia %d.", listitem + 1);
			}
			return 1;
		}
		case DIALOG_POLICE_LIST:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id_player) FROM pworks WHERE pworks.id_work = %d AND pworks.`set` = 1;", WORK_POLICE);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id_player) FROM pworks WHERE pworks.id_work = %d AND pworks.`set` = 1;", WORK_POLICE);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else
				{
					if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] >= 11)
					{
						PlayerTemp[playerid][pt_SELECTED_DB_AC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
						ShowDialog(playerid, DIALOG_POLICE_MODIFY);
					}
				}
			}
			return 1;
		}
		case DIALOG_POLICE_MODIFY:
		{
			if(response)
			{
				if(listitem > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
				{
					SendClientMessagef(playerid, -1, "El rango que has seleccionado es superior al tuyo.");
					return 1;
				}

				inline OnDialogQueryLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new level, name[24], connected, pid;
							cache_get_value_name_int(0, "level", level);
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if(level > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este policía porque es un rango superior al tuyo.");
							else
							{
								SendClientMessagef(playerid, -1, "El nuevo rango de %s es: '%s'.", name, POLICE_RANKS[listitem]);
								if(listitem == 0)
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID], WORK_POLICE);
									mysql_tquery(handle_db, QUERY_BUFFER);

									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET police_duty = 0, placa_pd = 0 WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
									mysql_tquery(handle_db, QUERY_BUFFER);

									if(connected)
									{
										if(pTemp(pid)[pt_WORKING_IN] == WORK_POLICE) CallLocalFunction("EndPlayerJob", "iib", pid, pTemp(pid)[pt_WORKING_IN], true);
										SendClientMessagef(pid, -1, "El %s %s te ha expulsado del cuerpo de policía.", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PlayerTemp[playerid][pt_NAME]);

										PLAYER_WORKS[pid][WORK_POLICE][pwork_SET] = 0;
										PLAYER_WORKS[pid][WORK_POLICE][pwork_LEVEL] = 0;
										PI[pid][pPOLICE_DUTY] = 0;
										PI[pid][pPLACA_PD] = 0;
									}
								}
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", listitem, PlayerTemp[playerid][pt_SELECTED_DB_AC_ID], WORK_POLICE);
									mysql_tquery(handle_db, QUERY_BUFFER);

									if(connected)
									{
										PLAYER_WORKS[pid][WORK_POLICE][pwork_LEVEL] = listitem;
										SendClientMessagef(pid, -1, "{"#SILVER_COLOR"}El %s %s ha modificado tu rango del cuerpo de policía a '%s'.", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PlayerTemp[playerid][pt_NAME], POLICE_RANKS[listitem]);
									}
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.name, player.connected, player.playerid FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_player = %d AND pworks.id_work = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID], WORK_POLICE);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			}
			else ShowDialog(playerid, DIALOG_POLICE_LIST);
			return 1;
		}
		case DIALOG_POLICE_EQUIPMENT:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_POLICE_WEAPONS);
					case 1: ShowDialog(playerid, DIALOG_POLICE_SELECT_WEAPON);
					case 2: ShowDialog(playerid, DIALOG_POLICE_ARMOUR);
				}
			}
			return 1;
		}
		case DIALOG_POLICE_SELECT_WEAPON:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				
				if(!WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_AMMO])
				{
					SendClientMessagef(playerid, -1, "Este tipo de arma no necesita municion.");
					return 1;
				}
				
				ShowDialog(playerid, DIALOG_POLICE_AMMO);
			}
			return 1;
		}
		case DIALOG_POLICE_AMMO:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				if(inputtext[0] <= 0 || inputtext[0] > 9999) return SendClientMessagef(playerid, -1, "La cantidad de municion no es correcta.");
				
				new price = 0 * inputtext[0];
				if(price > PI[playerid][pCASH]) return SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar la municion.", number_format_thousand(price - PI[playerid][pCASH]));
				
				if(PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_AMMO] + inputtext[0] > 9999)
				{
					SendClientMessagef(playerid, -1, "A esta arma no le entra tanta municion.");
					return 1;
				}
				
				if(GivePlayerCash(playerid, -price, true, true)) {
					GivePlayerWeaponEx(playerid, PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID], inputtext[0]);
					
					SendClientMessagef(playerid, -1, "Has comprado \"%s\" balas para tu \"%s\" por \"%s$\".", number_format_thousand(inputtext[0]), WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PlayerTemp[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(price));
				}
			}
			return 1;
		}
		case DIALOG_POLICE_ARMOUR:
		{
			if(response)
			{
				GetPlayerArmour(playerid, PI[playerid][pARMOUR]);
				if(PI[playerid][pARMOUR] > 99.5) return SendMessage(playerid, "Ya tienes un chaleco antibalas");

				SetPlayerArmourEx(playerid, 100.0);
				SendClientMessagef(playerid, -1, "Has equipado un chaleco antibalas.");
			}
			return 1;
		}
		case DIALOG_POLICE_WEAPONS:
		{
			if(response)
			{
				if(POLICE_WEAPONS[listitem][police_weapons_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
				{
					SendClientMessagef(playerid, -1, "Necesitas el rango %s para poder equipar esta arma.", POLICE_RANKS[ POLICE_WEAPONS[listitem][police_weapons_RANK] ]);
					return 1;
				}
				

				new weapon_slot = WEAPON_INFO[ POLICE_WEAPONS[listitem][police_weapons_WEAPON_ID] ][weapon_info_SLOT];
				if(PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID] != 0)
				{
					SendMessagef(playerid, "Para equipar esta arma debes deshacerte de tu %s (%d) de tu inventario.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID] ][weapon_info_NAME], weapon_slot);
					return 1;
				}
				
				if(WEAPON_INFO[ POLICE_WEAPONS[listitem][police_weapons_WEAPON_ID] ][weapon_info_AMMO]) GivePlayerWeaponEx(playerid, POLICE_WEAPONS[listitem][police_weapons_WEAPON_ID], 100);
				else GivePlayerWeaponEx(playerid, POLICE_WEAPONS[listitem][police_weapons_WEAPON_ID], 1);
				RegisterNewPlayerWeapon(playerid, weapon_slot); 

				SendMessagef(playerid, "Arma %s Equipada.", WEAPON_INFO[ POLICE_WEAPONS[listitem][police_weapons_WEAPON_ID] ][weapon_info_NAME]);
			}
			return 1;
		}
		case DIALOG_HELP:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_HELP_GENERAL);
					case 1: ShowDialog(playerid, DIALOG_HELP_INFO);
					case 2: ShowDialog(playerid, DIALOG_HELP_CHARACTER);
					case 3: ShowDialog(playerid, DIALOG_HELP_PROPERTIES);
					case 4: ShowDialog(playerid, DIALOG_HELP_REPORT);
					case 5: ShowDialog(playerid, DIALOG_HELP_WORKS);
					case 6: ShowDialog(playerid, DIALOG_HELP_VEHICLES);
					case 7: ShowDialog(playerid, DIALOG_HELP_CREWS);
					case 8: ShowDialog(playerid, DIALOG_HELP_VIP);
				}
			}
			return 1;
		}
		case DIALOG_HELP_WORKS:
		{
			if(response)
			{
				new caption[45], dialog[1800], work = listitem + 1;
				format(caption, sizeof caption, "Trabajo - %c%s", toupper(work_info[work][work_info_NAME][0]), work_info[work][work_info_NAME][1]);
			
				new header[350];
				if(work_info[work][work_info_TYPE] != WORK_TYPE_FAMILY)
				{
					if(work_info[work][work_info_EXTRA_PAY] > 0 && work_info[work][work_info_EXTRA_PAY_EXP] > 0) // con paga extra
					{
						if(!work_info[work][work_info_EXTRA_PAY_LIMIT]) // sin limite
						{
							format(header, sizeof header, 
						
								"\
									Trabajo: %s\n\
									Tipo: %s\n\
									Nivel necesario: %d\n\
									Paga extra: por cada %s trabajos realizados recibes %s$ extra.\n\
									Puedes localizar donde adquirir este trabajo desde el GPS.\n\
								",
									work_info[work][work_info_NAME],
									(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
									work_info[work][work_info_LEVEL],
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_EXP]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY])
							);
						}
						else // con limite
						{
							format(header, sizeof header, 
						
								"\
									Trabajo: %s\n\
									Tipo: %s\n\
									Nivel necesario: %d\n\
									Paga extra: por cada %s trabajos realizados recibes %s$ extra con un límite de %s$.\n\
									Puedes localizar donde adquirir este trabajo desde el GPS.\n\
								",
									work_info[work][work_info_NAME],
									(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
									work_info[work][work_info_LEVEL],
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_EXP]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_LIMIT])
							);
						}
					}
					else
					{
						format(header, sizeof header, 
						
							"\
								Trabajo: %s\n\
								Tipo: %s\n\
								Nivel necesario: %d\n\
								Puedes localizar donde adquirir este trabajo desde el GPS.\n\
							",
								work_info[work][work_info_NAME],
								(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
								work_info[work][work_info_LEVEL]
						);
					}
				}
				
				switch(work)
				{
					case WORK_TAXI:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Solo subete a un taxi y empieza a trabajar, recibirás las llamadas de los clientes.\n\
							Las personas que hayan llamado a la central de taxi aparecerán marcados de color amarillo.\n\
							Si tienes un GPS puedes utilizar /mapa para ver las personas que necesitan un taxi.\n\
							\n\
							El taxímetro se pondrá en marcha para el primer pasajero que se suba al taxi, el precio se\n\
							mide en precio por km, puedes ajustarlo con el comando /tarifa.\n\
							\n\
							",
								header
						);
					}
					case WORK_TRUCK:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Subete a cualquier camion de la empresa y ve a cargarlo en cualquier punto de carga.\n\
							Segun tu experiencia en el trabajo podrás transportar diferentes productos de más valor.\n\
							\n\
							",
								header
						);
					}
					case WORK_MECHANIC:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para empezar a trabajar ve al taller y utiliza /mecanico para empezar a trabajar o dejar de trabajar.\n\
							Con este trabajo podrás reparar los vehículos estropeados en el taller o ir a arreglarlos por San Andreas.\n\
							Las personas que hayan llamado al mecánico aparecerán marcados en el mapa.\n\
							Si tienes un GPS puedes utilizar /mapa para ver las personas que necesitan un mecánico.\n\
							Para reparar o tunear un vehículo usa /vmenu tras elegir una opcion se le ofrecerá al propietario del vehículo\n\
							en caso de ser un vehículo personal, si no se le ofrecerá al conductor o el ultimo conductor del vehículo.\n\
							\n\
							Puedes utilizar los vehículos de tu trabajo o tu vehículo personal.\n\
							Para cualquier reparacion o modificacion necesitarás piezas que puedes comprar en el taller.\n\
							Para reparar o modificar un vehículo utiliza cerca del vehículo el comando /vmenu.\n\
							\n\
							Si el vehículo no está en el mecánico y se puede remolcar tendrás que remolcarlo hasta el mecánico\n\
							para repararlo, se usa el comando /remolcar.\n\
							\n\
							En el taller también podrás pintar los vehículos.\n\
							Para tunearlos o remover componentes tendrás que haber realizado al menos 100 reparaciones en vehículos ajenos.\n\
							\n\
							",
								header
						);
					}
					case WORK_HARVESTER:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Subete a una cosechadora y empieza a cosechar.\n\
							\n\
							",
								header
						);
					}
					case WORK_TRASH:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para este trabajo se necesitan 2 personas, uno que conduzca el camion y otro que recoja la basura.\n\
							Para empezar a trabajar sube a alguien a un camion y selecciona la ruta que queráis realizar.\n\
							\n\
							Dependiendo de tu experiencia recogerás más rápido la basura.\n\
							\n\
							",
								header
						);
					}
					case WORK_LUMBERJACK:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para empezar a trabajar ve a los árboles asignados y empieza a talar.\n\
							Dependiendo de tu experiencia tu velocidad talando irá aumentando.\n\
							\n\
							",
								header
						);
					}
					case WORK_FARMER:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Necesitarás semillas para poder plantar que puedes comprar en la granja.\n\
							Dependiendo de tu experiencia tu velocidad plantando irá aumentando.\n\
							\n\
							Después de que la planta crezca tienes 5 minutos para recogerla si no la planta se secará y se destruirá.\n\
							Cuando termines de plantar espera a que la planta termine de crecer, para recogerla.\n\
							Una vez recogida puedes vender el producto adquirido o usarlo para consumo propio.\n\
							\n\
							Cuida tus plantas, la gente puede destuirlas si le disparan.\n\
							\n\
							",
								header
						);
					}
					case WORK_POLICE:
					{
						format(dialog, sizeof dialog, "{"#POLICE_COLOR"}Policia{ffffff}\n\nEste trabajo es especial, y no se puede obtener de una manera común para mas informacion.\n\nVisita: {"#GOLD_COLOR"}"SERVER_WEBSITE"");
					}
					case WORK_PIZZA:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Subete a una moto y empieza a repartir pizzas.\n\
							\n\
							",
								header
						);
					}
					case WORK_MEDIC:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Ponte de servicio en cualquier hospital, tras esto verás a las personas que necesiten un médico\n\
							marcadas en el mapa, ve rápido hasta ellas para poder salvarlos a tiempo.\n\
							Para salvar la vida a alguien que este herido usa /curar.\n\
							\n\
							Cuando estás de servicio solo puedes conducir ambulancias.\n\
							\n\
							",
								header
						);
					}
				}
				
				ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, caption, dialog, "Cerrar", "");
			}
			return 1;
		}
		case DIALOG_ADMIN_LIST:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_tquery_inline(handle_db, "SELECT COUNT(id) FROM player WHERE admin_level > 0;", using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_tquery_inline(handle_db, "SELECT COUNT(id) FROM player WHERE admin_level > 0;", using inline OnCountQueryLoad);
				}
				else
				{
					if(PI[playerid][pADMIN_LEVEL] >= 4)
					{
						PlayerTemp[playerid][pt_SELECTED_DB_AC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
						ShowDialog(playerid, DIALOG_ADMIN_MODIFY);
					}
				}
			}
			return 1;
		}
		case DIALOG_ADMIN_MODIFY:
		{
			if(response)
			{
				if(listitem > PI[playerid][pADMIN_LEVEL])
				{
					SendClientMessagef(playerid, -1, "El rango que has seleccionado es superior al tuyo.");
					return 1;
				}					
				
				inline OnDialogQueryLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new name[24], connected, pid, admin_level;
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "admin_level", admin_level);

							if(admin_level > PI[playerid][pADMIN_LEVEL]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este admin porque es un rango superior al tuyo.");
							else
							{
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", listitem, PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								SendClientMessagef(playerid, -1, "El nuevo rango de %s es: '%s'.", name, ADMIN_LEVELS[listitem]);
								if(connected)
								{
									PI[pid][pADMIN_LEVEL] = listitem;
									SendClientMessagef(pid, -1, "%s cambio tu rango administrativo a: %s.", PI[playerid][pNAME], ADMIN_LEVELS[listitem]);
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, admin_level FROM player WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);				
			}
			else ShowDialog(playerid, DIALOG_ADMIN_LIST);
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD:
		{
			if(response)
			{
				if(!strlen(inputtext)) return ShowDialog(playerid, dialogid);
				
				bcrypt_verify(playerid, "OnChangePasswordCheck", inputtext, PI[playerid][pPASS]);
			}
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD_PASS:
		{
			if(response)
			{
				if(strlen(inputtext) < MIN_PASS_LENGTH || strlen(inputtext) > MAX_PASS_LENGTH) return ShowDialog(playerid, dialogid);
				
				bcrypt_hash(playerid, "OnChangePasswordHash", inputtext, BCRYPT_COST);
			}
			return 1;
		}
		case DIALOG_ANTI_CHEAT:
		{
			if(PI[playerid][pADMIN_LEVEL] < 4) return 1;
			
			if(response)
			{
				PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] = listitem;
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY:
		{
			if(PI[playerid][pADMIN_LEVEL] < 4) return 1;
			
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled]) ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] = false;
						else ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] = true;
					}
					case 1: return ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY_DETECT);
					case 2:
					{
						if(ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick]) ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] = false;
						else ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] = true;
					}
				}
				WriteAnticheatRules();
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			else ShowDialog(playerid, DIALOG_ANTI_CHEAT);
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY_DETECT:
		{
			if(PI[playerid][pADMIN_LEVEL] < 4) return 1;
			
			if(response)
			{
				new detections, seconds;
				if(sscanf(inputtext, "p<:>dd", detections, seconds))
				{
					SendClientMessagef(playerid, -1, "Sintaxis no válida.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(detections < 1 || detections > 99999)
				{
					SendClientMessagef(playerid, -1, "El numero de detecciones debe ser 1 o mayor.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if(seconds < 0 || seconds > 99999)
				{
					SendClientMessagef(playerid, -1, "Los segundos no pueden ser un valor negativo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections] = detections;
				ac_Info[ PlayerTemp[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval] = seconds;
				
				WriteAnticheatRules();
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			else ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			return 1;
		}
		case DIALOG_CRANE_SELECT_VEHICLE:
		{
			if(response)
			{
				new const vehicleid = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];

				if(vehicleid == -1) return 1;

				new veh_money = (VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 100) + 350;
				if(veh_money > PI[playerid][pCASH])
				{
					SendClientMessagef(playerid, -1, "Necesitas %s$ para remolcar este vehículo al deposito municipal.", veh_money);
					return 1;
				}
				
				if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED])
				{
					SendClientMessagef(playerid, -1, "No podemos remolcar tu vehículo porque hay alguien conduciéndolo.");
					return 1; 
				}
				
				if(GivePlayerCash(playerid, -veh_money, true, true)) {
					new crane_point = random(sizeof(CRANE_POINTS[]));
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X] = CRANE_POINTS[crane_point][0];
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y] = CRANE_POINTS[crane_point][1];
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z] = CRANE_POINTS[crane_point][2];
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE] = CRANE_POINTS[crane_point][3];
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD] = 0;

					GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] = gettime();
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 1;
					UpdateVehicleParams(vehicleid);
					SetVehicleToRespawnEx(vehicleid);

					SendClientMessagef(playerid, -1, "Tu vehículo %s ha sido remolcado hasta el deposito municipal.", VEHICLE_INFO[GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][gb_vehicle_MODELID] - 400][vehicle_info_NAME]);
				}
			}
			return 1;
		}
		case DIALOG_CREATE_CREW:
		{
			if(response)
			{
				if(PI[playerid][pLEVEL] < 5) return SendClientMessagef(playerid, -1, "Necesitas ser nivel 5 para poder crear una banda.");
				ShowDialog(playerid, DIALOG_CREATE_CREW_NAME);
			}
			return 1;
		}
		case DIALOG_CREATE_CREW_NAME:
		{
			if(response)
			{
				if(strlen(inputtext) >= 32)
				{
					SendClientMessagef(playerid, -1, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new crew_name[32];
				if(sscanf(inputtext, "s[32]", crew_name))
				{
					SendClientMessagef(playerid, -1, "Introduce un nombre para tu banda.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PlayerTemp[playerid][pt_CREATE_CREW_NAME], 32, "%s", crew_name);
				ShowDialog(playerid, DIALOG_CREATE_CREW_COLOR);
			}
			return 1;
		}
		case DIALOG_CREATE_CREW_COLOR:
		{
			if(response)
			{
				PlayerTemp[playerid][pt_CREATE_CREW_COLOR] = listitem;
				ShowDialog(playerid, DIALOG_CREATE_CREW_CONFIRM);
			}
			else ShowDialog(playerid, DIALOG_CREATE_CREW_NAME);
			return 1;
		}
		case DIALOG_CREATE_CREW_CONFIRM:
		{
			if(response)
			{
				new index = GetAvaibleCrewIndex();
				if(index == -1)
				{
					SendClientMessagef(playerid, -1, "No se puede crear la banda porque no hay espacio disponible, el límite de bandas es %d.", MAX_CREWS);
					return 1;
				}
				
				if(600000 > PI[playerid][pCASH])
				{
					SendClientMessagef(playerid, -1, "Necesitas 600.000$ para crear la banda.");
					return 1;
				}
				
				if(GivePlayerCash(playerid, -600000, true, true)) {
					CREW_INFO[index][crew_VALID] = true;
					format(CREW_INFO[index][crew_NAME], 32, "%s", PlayerTemp[playerid][pt_CREATE_CREW_NAME]);
					CREW_INFO[index][crew_COLOR] = RandomColors[ PlayerTemp[playerid][pt_CREATE_CREW_COLOR] ];
		
					CREW_RANK_INFO[index][0][crew_rank_VALID] = true;
					format(CREW_RANK_INFO[index][0][crew_rank_NAME], 32, "Fundador");
					
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_INVITE] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_DELETE] =
						
					NewCrewRegister(index, playerid);
					SetPlayerGangZones(playerid);				
					SendClientMessagef(playerid, -1, "La banda '%s' se ha creado correctamente, usa /banda para administrarla.", CREW_INFO[index][crew_NAME]);
				}
			}
			return 1;
		}
		case DIALOG_CREW_MENU:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				switch(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem])
				{
					case CREW_RANK_SIZE: //Lista de miembros
					{
						PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST);
					}
					case CREW_RANK_CHANGE_NAME:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No se puede cambiar el nombre de la banda cuando la banda está en combate.");
						ShowDialog(playerid, DIALOG_CREW_CHANGE_NAME);
					}
					case CREW_RANK_CAST_MEMBERS:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						
						PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST_DELETE);
					}
					
					case CREW_RANK_MODIFY_RANKS:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						
						ShowDialog(playerid, DIALOG_CREW_RANKS);
					}
					case CREW_RANK_CHANGE_COLOR:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						
						if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No se puede cambiar el color cuando la banda está en combate.");
						ShowDialog(playerid, DIALOG_CREW_MODIFY_COLOR);
					}
					case CREW_RANK_DELETE:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						
						ShowDialog(playerid, DIALOG_CREW_DELETE);
					}
					case CREW_RANK_MODIFY_MEMBERS:
					{
						if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
						
						PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBERS);
					}
					case CREW_RANK_SIZE + 1: //Abandonar banda
					{
						if(PI[playerid][pCREW_RANK] == 0)
						{
							inline OnCrewInfoLoad()
							{
								new rows;
								if(cache_get_row_count(rows))
								{
									new total;
									cache_get_value_index_int(0, 0, total);
									if(total <= 1) SendClientMessagef(playerid, -1, "No puedes abandonar la banda porque eres el unico miembro con el rango fundador.");
									else ShowDialog(playerid, DIALOG_CREW_LEAVE);
								}
							}
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
							mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
						}
						else ShowDialog(playerid, DIALOG_CREW_LEAVE);
					}
				}
			}
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_CHANGE_NAME:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No se puede cambiar el nombre de la banda cuando la banda está en combate.");
				if(strlen(inputtext) >= 32)
				{
					SendClientMessagef(playerid, -1, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new crew_name[32];
				if(sscanf(inputtext, "s[32]", crew_name))
				{
					SendClientMessagef(playerid, -1, "Introduce un nombre para tu banda.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME], 32, "%s", crew_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crews SET name = '%e' WHERE id = %d;", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME], CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) cambio el nombre de la banda a '%s'.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME]);
				SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
				
				ShowDialog(playerid, DIALOG_CREW_MENU);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST_DELETE:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else
				{
					PlayerTemp[playerid][pt_SELECTED_DB_AC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
					
					inline OnCrewInfoLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new name[24], crew_rank;
								cache_get_value_index(0, 0, name);
								cache_get_value_index_int(0, 1, crew_rank);

								if(crew_rank < PI[playerid][pCREW_RANK]) SendClientMessagef(playerid, -1, "No puedes echar a este miembro porque es un rango superior al tuyo.");
								else
								{
									if(crew_rank == 0)
									{
										inline OnCountQueryLoad()
										{
											if(cache_get_row_count(rows))
											{
												if(rows)
												{
													new total;
													cache_get_value_index_int(0, 0, total);
													if(total <= 1) SendClientMessagef(playerid, -1, "No se puede echar a este miembro ya que es el unico miembro con el rango fundador.");
													else ShowDialog(playerid, DIALOG_CREW_CAST_MEMBER_CONFIRM);
												}
											}
										}
										mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
										mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);										
									}
									else ShowDialog(playerid, DIALOG_CREW_CAST_MEMBER_CONFIRM);
								}
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, crew_rank FROM player WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_CAST_MEMBER_CONFIRM:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				inline OnCrewInfoLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						new name[24], connected, pid, crew_rank;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);
						cache_get_value_name_int(0, "crew_rank", crew_rank);
						if(crew_rank < PI[playerid][pCREW_RANK]) SendClientMessagef(playerid, -1, "No puedes echar a este miembro porque es un rango superior al tuyo.");
						else
						{
							if(crew_rank == 0)
							{
								inline OnCountQueryLoad()
								{
									if(cache_get_row_count(rows))
									{
										if(rows)
										{
											new total;
											cache_get_value_index_int(0, 0, total);
											if(total <= 1) SendClientMessagef(playerid, -1, "No se puede echar a este miembro ya que es el unico miembro con el rango fundador.");
											else
											{
												new message[145];
												format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) ha echado a %s de la banda.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], name);
												SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
											
												mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
												mysql_tquery(handle_db, QUERY_BUFFER);
												
												CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
												if(connected)
												{
													CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
													
													if(PlayerTemp[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
													{
														TextDrawHideForPlayer(pid, Textdraws[textdraw_TERRITORY_BOX]);
														TextDrawHideForPlayer(pid, TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW]);
													}

													PI[pid][pCREW] = 0;
													PI[pid][pCREW_RANK] = 0;
													pTemp(pid)[pt_CREW_INDEX] = 0;
													HidePlayerGangZones(pid);
												}
											}
										}
									}
								}
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
								mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
							}
							else
							{
								new message[145];
								format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) ha echado a %s de la banda.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], name);
								SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
							
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								
								CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
								if(connected)
								{
									CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
									
									if(PlayerTemp[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
									{
										TextDrawHideForPlayer(pid, Textdraws[textdraw_TERRITORY_BOX]);
										TextDrawHideForPlayer(pid, TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW]);
									}

									PI[pid][pCREW] = 0;
									PI[pid][pCREW_RANK] = 0;
									pTemp(pid)[pt_CREW_INDEX] = 0;
									HidePlayerGangZones(pid);
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, crew_rank FROM player WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
			}
			else ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST_DELETE);
			return 1;
		}
		case DIALOG_CREW_INVITE_RANK:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pCREW_RANK])
				{
					SendClientMessagef(playerid, -1, "No puedes invitar con este rango porque es superior al tuyo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_CREW_INVITE_PID])) return SendClientMessagef(playerid, -1, "El jugador está desconectado.");
				
				new Float:pos[3]; GetPlayerPos(PlayerTemp[playerid][pt_CREW_INVITE_PID], pos[0], pos[1], pos[2]);
				if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
				if(PLAYER_WORKS[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Esta persona es policía y no puede tener banda.");
				if(PI[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pCREW]) return SendClientMessagef(playerid, -1, "Esta persona pertenece a otra banda.");
				if(PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes invitar a este jugador ahora.");
				if(PI[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pID] != PlayerTemp[playerid][pt_CREW_INVITE_AID]) return SendClientMessagef(playerid, -1, "El jugador está desconectado.");
				
				SendClientMessagef(playerid, -1, "Has ofrecido a %s unirse a la banda con el rango %s.", PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
				
				PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][0] = PI[playerid][pCREW];
				PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][1] = PlayerTemp[playerid][pt_CREW_INDEX];
				PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][2] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				PlayerTemp[ PlayerTemp[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][3] = gettime();
				ShowDialog(PlayerTemp[playerid][pt_CREW_INVITE_PID], DIALOG_CREW_INVITE_ACCEPT);
			}
			return 1;
		}
		case DIALOG_CREW_INVITE_ACCEPT:
		{
			if(response)
			{
				if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INVITE_INFO][1] ][crew_VALID]) return SendClientMessagef(playerid, -1, "Esta banda ya no existe.");
				if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INVITE_INFO][1] ][ PlayerTemp[playerid][pt_CREW_INVITE_INFO][2] ][crew_rank_VALID]) return SendClientMessagef(playerid, -1, "El rango que te han ofrecio ya no existe.");
				if(gettime() > PlayerTemp[playerid][pt_CREW_INVITE_INFO][3] + 20) return SendClientMessagef(playerid, -1, "Has tardado mucho en aceptar.");
				if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INVITE_INFO][1] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No puedes unirte a la banda cuando la banda está en combate.");
				
				PI[playerid][pCREW] = PlayerTemp[playerid][pt_CREW_INVITE_INFO][0];
				PI[playerid][pCREW_RANK] = PlayerTemp[playerid][pt_CREW_INVITE_INFO][2];
				PlayerTemp[playerid][pt_CREW_INDEX] = PlayerTemp[playerid][pt_CREW_INVITE_INFO][1];
				CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_MEMBERS] ++;
				CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] ++;
				PlayerTemp[playerid][pt_LAST_GOT_CREW] = gettime();
				SetPlayerGangZones(playerid);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = %d, crew_rank = %d WHERE id = %d;", PI[playerid][pCREW], PI[playerid][pCREW_RANK], PI[playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s se ha unido a la banda con el rango %s.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME]);
				SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
			}
			return 1;
		}
		case DIALOG_CREW_RANKS:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(listitem < PI[playerid][pCREW_RANK])
				{
					if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][listitem][crew_rank_VALID]) SendClientMessagef(playerid, -1, "No puedes modificar este rango porque es un rango superior al tuyo.");
					else SendClientMessagef(playerid, -1, "No puedes crear un rango en este puesto porque es superior al tuyo.");
					return 1;
				}
				
				PlayerTemp[playerid][pt_CREW_SELECTED_RANK] = listitem;
				if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][listitem][crew_rank_VALID]) ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
				else ShowDialog(playerid, DIALOG_CREW_RANK_CREATE);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY_NAME);
					case 1:
					{
						if(PlayerTemp[playerid][pt_CREW_SELECTED_RANK] == 0)
						{
							SendClientMessagef(playerid, -1, "No se pueden modificar los permisos de este rango porque es el rango fundador.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY_PERMISS);
					}
					case 2:
					{
						if(PlayerTemp[playerid][pt_CREW_SELECTED_RANK] == 0)
						{
							SendClientMessagef(playerid, -1, "No se puede eliminar este rango porque es el rango fundador.");
							return 1;
						}
						
						SendClientMessagef(playerid, -1, "[Atencion] Selecciona el nuevo rango para los miembros que actualmente tienen el rango '%s'.", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
						ShowDialog(playerid, DIALOG_CREW_RANK_DELETE);
					}
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_NAME:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(strlen(inputtext) >= 32)
				{
					SendClientMessagef(playerid, -1, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new rank_name[32];
				if(sscanf(inputtext, "s[32]", rank_name))
				{
					SendClientMessagef(playerid, -1, "Introduce el nuevo nombre para el rango.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				SendClientMessagef(playerid, -1, "Has modificado el nombre del rango '%s' a '%s'.", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], rank_name);
				format(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], 32, "%s", rank_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crew_ranks SET rank_name = '%e' WHERE id = %d;",  CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
			return 1;
		}
		case DIALOG_CREW_RANK_CREATE:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(strlen(inputtext) >= 32)
				{
					SendClientMessagef(playerid, -1, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new rank_name[32];
				if(sscanf(inputtext, "s[32]", rank_name))
				{
					SendClientMessagef(playerid, -1, "Introduce un nombre para el rango.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID])
				{
					SendClientMessagef(playerid, -1, "Parece que alguien ya ha creado un rango en este espacio.");
					return 1;
				}
				
				
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID] = true;
				format(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], 32, "%s", rank_name);
				
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR] =
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE] = 0;
				RegisterNewCrewRank(PlayerTemp[playerid][pt_CREW_INDEX], PlayerTemp[playerid][pt_CREW_SELECTED_RANK]);
								
				SendClientMessagef(playerid, -1, "El rango '%s' ha sido creado, ahora puedes editarlo y darle permisos.", rank_name);
				ShowDialog(playerid, DIALOG_CREW_RANKS);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_PERMISS:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][listitem])
				{
					SendClientMessagef(playerid, -1, "No puedes cambiar este permiso porque tu no tienes este permiso.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if(CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem]) CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem] = false;
				else CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem] = true;
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crew_ranks SET permission%d = %d WHERE id = %d;", listitem, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				ShowDialog(playerid, dialogid);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pCREW_RANK])
				{
					SendClientMessagef(playerid, -1, "No puedes seleccionar este rango porque es superior al tuyo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PlayerTemp[playerid][pt_CREW_SELECTED_NEW_RANK] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_CREW_RANK_DELETE_CONFIRM);
			}
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE_CONFIRM:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE crew = %d AND crew_rank = %d;", PlayerTemp[playerid][pt_CREW_SELECTED_NEW_RANK], PI[playerid][pCREW], PlayerTemp[playerid][pt_CREW_SELECTED_RANK]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM crew_ranks WHERE id = %d;", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			
				SendClientMessagef(playerid, -1, "Has eliminado el rango '%s'.", CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) cambio tu rango al rango '%s'.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_NEW_RANK] ][crew_rank_NAME]);
				for(new i = 0; i != MAX_PLAYERS; i++)
				{
					if(IsPlayerConnected(i))
					{
						if(PI[i][pCREW])
						{
							if(PI[i][pCREW] == PI[playerid][pCREW])
							{
								if(PI[i][pCREW_RANK] == PlayerTemp[playerid][pt_CREW_SELECTED_RANK])
								{
									PI[i][pCREW_RANK] = PlayerTemp[playerid][pt_CREW_SELECTED_NEW_RANK];
									SendClientMessage(i, -1, message);
								}
							}
						}
					}
				}
				
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID] = false;
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID] = 0;
				CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME][0] = EOS;
				for(new i = 0; i != CREW_RANK_SIZE; i ++) CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] = 0;
			
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_MODIFY_COLOR:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No se puede cambiar el color cuando la banda está en combate.");
				
				CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] = RandomColors[listitem];
				
				new r, g, b, a,		new_territory_color;
				HexToRGBA(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR], r, g, b, a);
				new_territory_color = RGBAToHex(r, g, b, 135);
				for(new i = 0; i != MAX_TERRITORIES; i ++)
				{
					if(!TERRITORIES[i][territory_VALID]) continue;
					if(!TERRITORIES[i][territory_OCCUPIED]) continue;
					
					if(TERRITORIES[i][territory_CREW_ID] == PI[playerid][pCREW])
					{
						TERRITORIES[i][territory_COLOR] = new_territory_color;
						UpdateGangZoneColor(i);
					}
				}
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crews SET color = %d WHERE id = %d;", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR], CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "El color de la banda se ha cambiado.");
				ShowDialog(playerid, DIALOG_CREW_MENU);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_DELETE:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No se puede borrar la banda cuando está en combate.");

				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) ha eliminado la banda.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME]);
				
				new tmp_CREW_RANK_INFO[enum_CREW_RANK_INFO];
				for(new i = 0; i != MAX_CREW_RANKS; i ++) CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][i] = tmp_CREW_RANK_INFO;

				new tmp_crew_id = PI[playerid][pCREW];
				new tmp_CREW_INFO[enum_CREW_INFO], old_crew_id = PI[playerid][pCREW];

				for(new i = 0; i != MAX_PLAYERS; i++)
				{
					if(IsPlayerConnected(i))
					{
						if(PI[i][pCREW])
						{
							if(PI[i][pCREW] == PI[playerid][pCREW])
							{
								
								HidePlayerGangZones(i);
								if(pTemp(i)[pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
								{
									TextDrawHideForPlayer(i, Textdraws[textdraw_TERRITORY_BOX]);
									TextDrawHideForPlayer(i, TERRITORIES[ pTemp(i)[pt_LAST_TERRITORY] ][territory_TEXTDRAW]);
								}
								PI[i][pCREW] = 0;
								PI[i][pCREW_RANK] = 0;
								pTemp(i)[pt_CREW_INDEX] = 0;
								SendClientMessage(i, -1, message);
							}
						}
					}
				}
				
				for(new i = 0; i != MAX_TERRITORIES; i ++)
				{
					if(!TERRITORIES[ i ][territory_VALID]) continue;
					if(!TERRITORIES[ i ][territory_OCCUPIED]) continue;
					if(TERRITORIES[ i ][territory_CREW_ID] != old_crew_id) continue;
					
					TERRITORIES[ i ][territory_OCCUPIED] = false;
					TERRITORIES[ i ][territory_CREW_ID] = 0;
					TERRITORIES[ i ][territory_CREW_INDEX] = 0;
					TERRITORIES[ i ][territory_COLOR] = 0xCCCCCC55;
					UpdateGangZoneColor(i);
				}

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM crews WHERE id = %d;", tmp_crew_id);
				mysql_tquery(handle_db, QUERY_BUFFER);

				CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ] = tmp_CREW_INFO;
				
				CallLocalFunction("OnCrewDeleted", "i", tmp_crew_id);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_LEAVE:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			
			if(response)
			{
				if(PI[playerid][pCREW_RANK] == 0)
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new total;
								cache_get_value_index_int(0, 0, total);
								if(total <= 1) SendClientMessagef(playerid, -1, "No puedes abandonar la banda porque eres el unico miembro con el rango fundador.");
								else
								{
									new message[145];
									format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) ha abandonado la banda.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME]);
									SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
									
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PI[playerid][pID]);
									mysql_tquery(handle_db, QUERY_BUFFER);
									
									
									CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
									CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
									HidePlayerGangZones(playerid);
									
									PI[playerid][pCREW] = 0;
									PI[playerid][pCREW_RANK] = 0;
									PlayerTemp[playerid][pt_CREW_INDEX] = 0;
								}
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else
				{
					new message[145];
					format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) ha abandonado la banda.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME]);
					SendMessageToCrewMembers(PI[playerid][pCREW], -1, message);
					
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PI[playerid][pID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					
					
					CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
					CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
					HidePlayerGangZones(playerid);
					
					PI[playerid][pCREW] = 0;
					PI[playerid][pCREW_RANK] = 0;
					PlayerTemp[playerid][pt_CREW_INDEX] = 0;
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBERS:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d", PI[playerid][pCREW]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else
				{
					PlayerTemp[playerid][pt_SELECTED_DB_AC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
					ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBER);
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBER:
		{
			if(!PI[playerid][pCREW]) return SendClientMessagef(playerid, -1, "No perteneces a ninguna banda.");
			if(!CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendClientMessagef(playerid, -1, "La banda ya no existe.");
			if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendClientMessagef(playerid, -1, "No tienes permiso.");
			
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pCREW_RANK])
				{
					SendClientMessagef(playerid, -1, "No puedes dar este rango porque es un rango superior al tuyo.");
					return 1;
				}
				
				inline OnCrewInfoLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new name[24], connected, pid, crew_rank;
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "crew_rank", crew_rank);

							if(crew_rank < PI[playerid][pCREW_RANK]) SendClientMessagef(playerid, -1, "No puedes modificar el rango de este miembro porque es un rango superior al tuyo.");
							else
							{
								if(crew_rank == 0)
								{
									inline OnCountQueryLoad()
									{
										if(cache_get_row_count(rows))
										{
											if(rows)
											{
												new total;
												cache_get_value_index_int(0, 0, total);
												if(total <= 1) SendClientMessagef(playerid, -1, "No se puede modificar el rango de este miembro ya que es el unico miembro con el rango fundador.");
												else
												{
													mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE id = %d;", PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem], PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
													mysql_tquery(handle_db, QUERY_BUFFER);

													new message[145];
													if(connected)
													{
														PI[pid][pCREW_RANK] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
														format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) cambio tu rango al rango '%s'.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
														SendClientMessage(pid, -1, message);
													}
													format(message, sizeof message, "Has modificado el rango de '%s' al rango '%s'.", name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
													SendClientMessage(playerid, -1, message);
												}
											}
										}
									}
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pCREW]);
									mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
								}
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE id = %d;", PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem], PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
									mysql_tquery(handle_db, QUERY_BUFFER);

									new message[145];
									if(connected)
									{
										PI[pid][pCREW_RANK] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
										format(message, sizeof message, "{%06x}[Banda] {FFFFFF}%s (%s) cambio tu rango al rango '%s'.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
										SendClientMessage(pid, -1, message);
									}
									format(message, sizeof message, "Has modificado el rango de '%s' al rango '%s'.", name, CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
									SendClientMessage(playerid, -1, message);
								}
							}							
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, crew_rank FROM player WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_DB_AC_ID]);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInfoLoad);
			}
			else ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBERS);
			return 1;
		}
		case DIALOG_POLICE_PENALTY:
		{
			if(response)
			{
				if(gettime() > PlayerTemp[playerid][pt_POLICE_PEN_TIME] + 20) return SendClientMessagef(playerid, -1, "Has tardardo mucho en aceptarlo.");
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_POLICE_PEN_PID])) return SendClientMessagef(playerid, -1, "El policía ya no está en el servidor.");
				if(PI[ PlayerTemp[playerid][pt_POLICE_PEN_PID] ][pID] != PlayerTemp[playerid][pt_POLICE_PEN_AID]) return SendClientMessagef(playerid, -1, "El policía ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PlayerTemp[playerid][pt_POLICE_PEN_PID], pos[0], pos[1], pos[2]);
				if(!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendClientMessagef(playerid, -1, "El policía no está cerca tuya.");
				
				if(PlayerTemp[playerid][pt_POLICE_PEN_IM] > PI[playerid][pCASH])
				{
					SendClientMessagef(playerid, -1, "No tienes dinero para pagar la multa.");
					SendClientMessage(PlayerTemp[playerid][pt_POLICE_PEN_PID], -1, "{"#SILVER_COLOR"}La persona ha aceptado la multa pero no tiene dinero para pagarla.");
					return 1;
				}
				
				if(GivePlayerCash(playerid, -PlayerTemp[playerid][pt_POLICE_PEN_IM], true, true) && GivePlayerCash(PlayerTemp[playerid][pt_POLICE_PEN_PID], PlayerTemp[playerid][pt_POLICE_PEN_IM]/2, true, false)) {
					SetPlayerWantedLevelEx(playerid, 0);

					SendClientMessagef(playerid, -1, "La multa ha sido pagada.");
					SendClientMessage(PlayerTemp[playerid][pt_POLICE_PEN_PID], -1, "{"#SILVER_COLOR"}La persona ha pagado la multa, la mitad del importe es para ti.");
				}
			
			}
			else
			{
				if(gettime() > PlayerTemp[playerid][pt_POLICE_PEN_TIME] + 20) return 1;
				if(!IsPlayerConnected(PlayerTemp[playerid][pt_POLICE_PEN_PID])) return 1;
				if(PI[ PlayerTemp[playerid][pt_POLICE_PEN_PID] ][pID] != PlayerTemp[playerid][pt_POLICE_PEN_AID]) return 1;
				
				SendClientMessage(PlayerTemp[playerid][pt_POLICE_PEN_PID], -1, "{"#SILVER_COLOR"}La persona se ha negado a pagar la multa.");
				if(PI[playerid][pWANTED_LEVEL] < 6) SetPlayerWantedLevelEx(playerid, PI[playerid][pWANTED_LEVEL] + 1);
			}
			return 1;
		}
		case DIALOG_VIP_BUY:
		{
			if(response)
			{
				if(VIP_COINS_PRICE > PI[playerid][pCOINS])
				{
					SendClientMessagef(playerid, -1, "Te faltan %d "SERVER_COIN" para poder comprar VIP.", VIP_COINS_PRICE - PI[playerid][pCOINS]);
					return 1;
				}
				
				SetPlayerVip(playerid, 1, VIP_COINS_PRICE, 30);
			}
			return 1;
		}
		case DIALOG_VIP:
		{
			if(!response)
			{
				if(VIP_COINS_PRICE > PI[playerid][pCOINS])
				{
					SendClientMessagef(playerid, -1, "Te faltan %d "SERVER_COIN" para poder comprar VIP.", VIP_COINS_PRICE - PI[playerid][pCOINS]);
					return 1;
				}
				
				PI[playerid][pCOINS] -= VIP_COINS_PRICE;
				inline OnInfoQueryLoad()
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								cache_get_value_index(0, 0, PI[playerid][pVIP_EXPIRE_DATE]);
								SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}¡Felicidades! {FFFFFF}Has renovado tu VIP (%d) por 30 días, fecha de caducidad: %s.", PI[playerid][pVIP], PI[playerid][pVIP_EXPIRE_DATE]);
								SendClientMessage(playerid, -1, "Puedes utilizar {"#PRIMARY_COLOR"}/vip {FFFFFF}para ver el tiempo restante o renovar.");
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vip_expire_date FROM player WHERE id = %d;", PI[playerid][pID]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d, vip = %d, vip_expire_date = DATE_ADD(NOW(), INTERVAL 30 DAY) WHERE id = %d;", PI[playerid][pCOINS], PI[playerid][pVIP], PI[playerid][pID]);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
			}
			return 1;
		}
		case DIALOG_PLAYER_CONFIG:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(PI[playerid][pCONFIG_AUDIO])
						{
							PI[playerid][pCONFIG_AUDIO] = false;
							StopAudioStreamForPlayer(playerid);
						}
						else PI[playerid][pCONFIG_AUDIO] = true;
					}
					case 1:
					{
						if(PI[playerid][pCONFIG_ADMIN]) PI[playerid][pCONFIG_ADMIN] = false;
						else PI[playerid][pCONFIG_ADMIN] = true;
					}
					case 2:
					{
						if(PI[playerid][pPHONE_VISIBLE_NUMBER]) PI[playerid][pPHONE_VISIBLE_NUMBER] = false;
						else PI[playerid][pPHONE_VISIBLE_NUMBER] = true;
					}
					case 3:
					{
						if(PI[playerid][pCONFIG_SOUNDS]) PI[playerid][pCONFIG_SOUNDS] = false;
						else PI[playerid][pCONFIG_SOUNDS] = true;
					}
					case 4:
					{
						if(PI[playerid][pDOUBT_CHANNEL]) PI[playerid][pDOUBT_CHANNEL] = false;
						else PI[playerid][pDOUBT_CHANNEL] = true;
					}
					case 5:
					{
						PI[playerid][pCONFIG_GLOBAL] = !PI[playerid][pCONFIG_GLOBAL];
					}
				}
				ShowDialog(playerid, dialogid);
			}
			return 1;
		}
		case DIALOG_POLICE_BYC:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_POLICE_BYC_LAST_ALL);
					}
					case 1: ShowDialog(playerid, DIALOG_POLICE_BYC_NAME_FIND);
				}
			}
			return 1;
		}
		case DIALOG_POLICE_BYC_NAME_FIND:
		{
			if(response)
			{
				new name[24];
				if(sscanf(inputtext, "s[24]", name)) return ShowDialog(playerid, dialogid);
				
				inline OnDialogQueryLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							cache_get_value_index_int(0, 0, PlayerTemp[playerid][pt_SELECTED_BYC_USER_ID]);
							PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
							PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
							ShowDialog(playerid, DIALOG_POLICE_BYC_LAST_PLAYER);
						}
						else SendClientMessagef(playerid, -1, "No se ha encontrado a esa persona.");
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", name);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad);
			}
			return 1;
		}
		case DIALOG_POLICE_BYC_LAST_ALL:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_tquery_inline(handle_db, "SELECT COUNT(id) FROM police_history;", using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_tquery_inline(handle_db, "SELECT COUNT(id) FROM police_history;", using inline OnCountQueryLoad);
				}
				else
				{
					PlayerTemp[playerid][pt_SELECTED_BYC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
					ShowDialog(playerid, DIALOG_POLICE_DELETE_BYC);
				}
			}
			return 1;
		}
		case DIALOG_POLICE_BYC_LAST_PLAYER:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM police_history WHERE id_player = %d;", PlayerTemp[playerid][pt_SELECTED_BYC_USER_ID]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if(cache_get_row_count(rows))
						{
							if(rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PlayerTemp[playerid][pt_DIALOG_DB_LIMIT]);

								if(PlayerTemp[playerid][pt_DIALOG_DB_PAGE] <= 0) PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PlayerTemp[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM police_history WHERE id_player = %d;", PlayerTemp[playerid][pt_SELECTED_BYC_USER_ID]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
				}
				else
				{
					PlayerTemp[playerid][pt_SELECTED_BYC_ID] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
					ShowDialog(playerid, DIALOG_POLICE_DELETE_BYC);
				}
			}
			return 1;
		}
		case DIALOG_POLICE_DELETE_BYC:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM police_history WHERE id = %d;", PlayerTemp[playerid][pt_SELECTED_BYC_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				SendClientMessagef(playerid, -1, "Registro borrado del historial policial.");
			}
			return 1;
		}
		case DIALOG_CHANGE_NAME:
		{
			if(response)
			{
				if(!strlen(inputtext)) return ShowDialog(playerid, dialogid);
		
				bcrypt_verify(playerid, "OnChangeNamePassCheck", inputtext, PI[playerid][pPASS]);
			}
			return 1;
		}
		case DIALOG_CHANGE_NAME_NAME:
		{
			if(response)
			{
				new length = strlen(inputtext);
				if(length < 3 || length > 20) return ShowDialog(playerid, dialogid);

				new name[24];
				format(name, 24, "%s", inputtext);
				if(!IsValidRPName(name)) return SendClientMessagef(playerid, -1, "El nombre '%s' no cumple con el formato Nombre_Apellido.", name);
	
				inline OnDialogQueryLoad(newName[])
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows) SendClientMessagef(playerid, -1, "El nombre '%s' está en uso.", newName);
						else
						{
							printf("/cname: %d, '%s'", PI[playerid][pID], newName);
							if(SetPlayerName(playerid, newName) == 1) {
								format(PlayerTemp[playerid][pt_NAME], 24, "%s", newName);
								format(PI[playerid][pNAME], 24, "%s", newName);
								
								for(new i = 0; i != MAX_PROPERTIES; i ++)
								{
									if(!PROPERTY_INFO[i][property_VALID]) continue;
									if(PROPERTY_INFO[i][property_OWNER_ID] != PI[playerid][pID]) continue;
									
									new label_str[256];
									format
									(
										label_str, 
										sizeof label_str, 
										"\
											Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
											{FFFFFF}Descripcion: {"#PRIMARY_COLOR"}%s\n\
											{"#GOLD_COLOR"}Acercate {FFFFFF}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar.\
										", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_DESCRIPTION]
									);
									UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
								}

								PI[playerid][pCOINS] -= CNAME_COINS_PRICE;

								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e', coins = %d WHERE id = %d;", PI[playerid][pNAME], PI[playerid][pCOINS], PI[playerid][pID]);
								printf(QUERY_BUFFER);
								mysql_tquery(handle_db, QUERY_BUFFER);
								SendClientMessagef(playerid, -1, "Tu nombre ha sido cambiado a '%s' por %d "SERVER_COIN"", name, CNAME_COINS_PRICE);
							}
							else SendClientMessagef(playerid, -1, "No se ha podido cambiar tu nombre.");
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", name);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnDialogQueryLoad, "s", name);
			}
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET:
		{
			if(response)
			{
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if(PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_CLOSET_SLOTS + 20)
				{
					ShowDialog(playerid, DIALOG_PROPERTY_CLOSET_DLT_ALL);
					return 1;
				}
				
				PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] = PlayerTemp[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_PROPERTY_CLOSET_OPTIONS);
			}
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET_DLT_ALL:
		{
			if(response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM property_closet WHERE id_property = %d;", PROPERTY_INFO[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new tmp_PROPERTY_CLOSET[enum_PROPERTY_CLOSET];
				for(new i = 0; i != MAX_CLOSET_SLOTS; i ++) PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][i] = tmp_PROPERTY_CLOSET;
		
				SendClientMessagef(playerid, -1, "Ha eliminado todo de este armario.");
				Auto_SendPlayerAction(playerid, "tira todas las armas de su armario");
			}
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET_OPTIONS:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(!PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_VALID]) return SendClientMessagef(playerid, -1, "No hay nada en ese slot.");
						
						new string[128];
						switch(PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_TYPE]) {
							case BOOT_TYPE_WEAPON: {
								if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Los policías solo pueden tener armas de la base.");

								new to_slot = WEAPON_INFO[ PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT] ][weapon_info_SLOT];
								if(PLAYER_WEAPONS[playerid][to_slot][player_weapon_VALID])
								{
									PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
									SendClientMessagef(playerid, -1, "Para sacar esta arma tienes que deshacerte de tu \"%s (%d\" para tener espacio.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][ to_slot ][player_weapon_ID] ][weapon_info_NAME], to_slot);
									return 1;
								}
								GivePlayerWeaponEx(playerid, PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT], PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT_EXTRA]);
								RegisterNewPlayerWeapon(playerid, to_slot);
								format(string, sizeof string, "saca un(a) %s del armario.", WEAPON_INFO[ PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT] ][weapon_info_NAME]);
							}
							case BOOT_TYPE_MEDICINES: {
								PI[playerid][pMEDICINE] += PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT];
								format(string, sizeof string, "saca medicamentos del armario.");
							}
							case BOOT_TYPE_CANNABIS: {
								PI[playerid][pCANNABIS] += PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT];
								format(string, sizeof string, "saca marihuana del armario.");
							}
							case BOOT_TYPE_CRACK: {
								PI[playerid][pCRACK] += PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_INT];
								format(string, sizeof string, "saca crack del armario.");
							}
						}

						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM property_closet WHERE id = %d;", PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_OBJECT_ID]);
						mysql_tquery(handle_db, QUERY_BUFFER);

						new tmp_PROPERTY_CLOSET[enum_PROPERTY_CLOSET];
						PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ] = tmp_PROPERTY_CLOSET;
						Auto_SendPlayerAction(playerid, string);
					}
					case 1: ShowDialog(playerid, DIALOG_PROPERTY_CLOSET_DELETE);
				}
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_CLOSET);
			return 1;
		}
		case DIALOG_PROPERTY_CLOSET_DELETE:
		{
			if(response)
			{
				SendClientMessagef(playerid, -1, "Eliminado.");
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM property_closet WHERE id = %d;", PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ][property_closet_OBJECT_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new tmp_PROPERTY_CLOSET[enum_PROPERTY_CLOSET];
				PROPERTY_CLOSET[ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY] ][ PlayerTemp[playerid][pt_DIALOG_CLOSET_PROPERTY_SLOT] ] = tmp_PROPERTY_CLOSET;
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_CLOSET_OPTIONS);
			return 1;
		}
		case DIALOG_FUEL_STATION:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0: //repostar
					{
						if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) ShowDialog(playerid, DIALOG_FUEL);
						else
						{
							SendMessage(playerid, "No estas conduciendo ningun vehiculo.");
						}
					}
					case 1: //comprar bidon
					{
						ShowDialog(playerid, DIALOG_FUEL_DRUM_CONFIRM);
					}
				}
			}
		}
		case DIALOG_FUEL_DRUM_CONFIRM:
		{
			if(response)
			{
				if(PI[playerid][pFUEL_DRUM] <= 0)
				{
					PI[playerid][pFUEL_DRUM] = 0;
					if(GivePlayerCash(playerid, -100, true, true)) 
					{
						PI[playerid][pFUEL_DRUM] = 20;
						SendInfoMessage(playerid, "Bidon de Gasolina~n~~n~Has comprado un bidon de gasolina de ~r~20 litros~w~ por ~g~100$~w~.~n~~n~usa ~b~/vertir~w~ para repostar un vehículo.~n~~n~");
					}
					else SendMessage(playerid, "No tienes suficiente dinero para comprar el bidon.");
				}
				else
				{
					if(PI[playerid][pFUEL_DRUM] >= 20) return SendMessage(playerid, "Tu bidon de gasolina está lleno.");
					
					new amount = (20 - PI[playerid][pFUEL_DRUM]);
					new price = (5 * amount);
					
					if(PI[playerid][pCASH] >= price)
					{
						if(GivePlayerCash(playerid, -price, true, true)) 
						{
							PI[playerid][pFUEL_DRUM] += amount;
							SendInfoMessagef(playerid, "Bidon de Gasolina~n~~n~Has llenado tu bidon de gasolina con ~r~20 litros~w~ por ~g~%d$~w~.~n~~n~usa ~b~/vertir~w~ para repostar un vehículo.~n~~n~", price);
						}
					}
					else SendMessage(playerid, "No tienes suficiente dinero para comprar el bidon.");
				}
			}
			else
			{
				ShowDialog(playerid, DIALOG_FUEL_STATION);
			}
		}
		case DIALOG_FUEL:
		{
			if(response)
			{
				new vehicleid = GetPlayerVehicleID(playerid);

				if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] >= GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) return SendMessage(playerid, "Al vehiculo no le entra mas gasolina.");

				if(!sscanf(inputtext, "d", strval(inputtext[0])))
				{
					new Float:amount = float(strval(inputtext[0]));

					if(amount < 0.0) return SendMessage(playerid, "Debes escribir una cantidad de litros.");
					if(amount + GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) amount = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] - GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS];
					
					new price = floatround( floatmul(amount, 5.0) );
					
					if(PI[playerid][pCASH] >= price)
					{
						if(GivePlayerCash(playerid, -price, true, true)) 
						{
							GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] += amount;
							
							PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
							SendInfoMessagef(playerid, "Gasolinera~n~~n~Cantidad: ~b~%.1f litros~w~~n~Precio: ~g~%s~w~ dolares.~n~~n~", amount, number_format_thousand(price));
							Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
						}
					}
					else
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan {"#GREEN_COLOR"}%s${ffffff} para poder repostar {588dc9}%.1f.", number_format_thousand(price - PI[playerid][pCASH]), amount);
					}
					return 1;
				}
				else if(!sscanf(inputtext, "s[24]", inputtext[0]))
				{
					if(!strcmp(inputtext[0], "lleno", true))
					{
						new Float:amount = floatsub(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS]);
						new price = floatround(floatmul(amount, 5.0));

						if(PI[playerid][pCASH] >= price)
						{
							if(GivePlayerCash(playerid, -price, true, true)) 
							{
								GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS];
								
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
								SendInfoMessagef(playerid, "Gasolinera~n~~n~Cantidad: ~b~%.1f litros~w~~n~Precio: ~g~%s~w~ dolares.~n~~n~", amount, number_format_thousand(price));
								Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan {"#GREEN_COLOR"}%s${ffffff} para poder repostar {588dc9}%.1f.", number_format_thousand(price - PI[playerid][pCASH]), amount);
						}
					}
					else SendMessage(playerid, "Debes escribir una cantidad de litros.");
					return 1;
				}
			}
			else
			{
				ShowDialog(playerid, DIALOG_FUEL_STATION);
			}
		}
		case DIALOG_CONFIRM_ELEVATOR:
		{
			if(response)
			{
				switch(PlayerTemp[playerid][pt_ELEVATOR_OPTION])
				{
					case 0:
					{
						SetPlayerPosEx
						(
							playerid, 
							
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][secondary_pos_x], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][secondary_pos_y], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][secondary_pos_z], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][secondary_pos_angle], 
							
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][elevator_interior], 
							GetPlayerVirtualWorld(playerid), 
							
							1, 0
						);
					}
					case 1:
					{
						SetPlayerPosEx
						(
							playerid, 
							
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][initial_pos_x], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][initial_pos_y], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][initial_pos_z], 
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][initial_pos_angle], 
							
							ELEVATOR_INFO[ PlayerTemp[playerid][pt_ELEVATOR_INDEX] ][elevator_interior], 
							GetPlayerVirtualWorld(playerid), 
							
							1, 0
						);
					}
				}
			}
		}
		case DIALOG_DRIVING_EXAM:
		{
			if(response)
			{
				if(GivePlayerCash(playerid, -1500, false, true)) 
				{
					PlayerTemp[playerid][pt_DL_EXAM] = true;
					PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] = 0;
					SendInfoMessage(playerid, "Auto Escuela~n~~n~Has pagado: ~g~1500$~w~ para hacer el examen de conduccion.~n~~n~Para comenzar con el examen subete a un vehículo de la autoescuela, están en el aparcamiento.");
				}
				else SendClientMessagef(playerid, -1, "No tienes suficiente dinero.");
			}
		}
		case DIALOG_DRIVING_SCHOOL_BRIBE:
		{
			if(response)
			{
				if(GivePlayerCash(playerid, -3500, false, true)) 
				{
					PI[playerid][pDRIVE_LICENSE_POINTS] = 2;
					SendInfoMessage(playerid, "Auto Escuela~n~~n~Has pagado: ~g~3500$~w~ has sobornado al instructor.~n~~n~Este te ha dado una licencia de conducir con unicamente 2 puntos.");
				}
				else SendClientMessagef(playerid, -1, "No tienes suficiente dinero.");
			}
		}
		case DIALOG_BLACK_MARKET:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						if(PI[playerid][pLEVEL] < 3)
						{
							SendMessage(playerid, "Necesitas ser al menos nivel 3 para poder comprar armas.");
							return 1;
						}
						if(!PI[playerid][pCREW] && !PI[playerid][pVIP])
						{
							SendMessage(playerid, "Solo puedes comprar armas aquí si perteneces a una banda o eres VIP (/ayuda).");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_BLACK_MARKET_WEAPONS);
					}
					case 1: ShowDialog(playerid, DIALOG_BLACK_MARKET_SELECT_WEA);
					case 2: ShowDialog(playerid, DIALOG_BLACK_MARKET_ARMOUR);
				}
			}
			return 1;
		}
		case DIALOG_BLACK_MARKET_WEAPONS:
		{
			if(response)
			{
				if(PI[playerid][pBLACK_CASH] >= BLACK_MARKT_ARTICLES[listitem][black_market_ARTICLE_PRICE])
				{
					switch(BLACK_MARKT_ARTICLES[listitem][black_market_TYPE])
					{
						case BLACK_MARKET_TYPE_WEAPON:
						{
							new weapon_slot = WEAPON_INFO[ BLACK_MARKT_ARTICLES[listitem][black_market_WEAPON_ID] ][weapon_info_SLOT];
							if(PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID] != 0)
							{
								SendMessagef(playerid, "Para comprar esta arma debes deshacerte de tu \"%s (%d)\" para tener espacio.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID] ][weapon_info_NAME], weapon_slot);

								return 1;
							}

							PI[playerid][pBLACK_CASH] -= BLACK_MARKT_ARTICLES[listitem][black_market_ARTICLE_PRICE];

							if(WEAPON_INFO[ BLACK_MARKT_ARTICLES[listitem][black_market_WEAPON_ID] ][weapon_info_AMMO]) GivePlayerWeaponEx(playerid, BLACK_MARKT_ARTICLES[listitem][black_market_WEAPON_ID], 50);
							else GivePlayerWeaponEx(playerid, BLACK_MARKT_ARTICLES[listitem][black_market_WEAPON_ID], 1);

							RegisterNewPlayerWeapon(playerid, weapon_slot); 
							SendMessagef(playerid, "Arma \"%s\" comprada por \"%s$\"", WEAPON_INFO[ BLACK_MARKT_ARTICLES[listitem][black_market_WEAPON_ID] ][weapon_info_NAME], number_format_thousand(BLACK_MARKT_ARTICLES[listitem][black_market_ARTICLE_PRICE]));
							ShowDialog(playerid, DIALOG_BLACK_MARKET);
						}
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendMessagef(playerid, "No tienes dinero suficiente, te faltan %s DN$ para poder comprar este articulo.", number_format_thousand(BLACK_MARKT_ARTICLES[listitem][black_market_ARTICLE_PRICE] - PI[playerid][pBLACK_CASH]));
					ShowDialog(playerid, DIALOG_BLACK_MARKET);
				}
			}
			else ShowDialog(playerid, DIALOG_BLACK_MARKET);
			return 1;
		}
		case DIALOG_BLACK_MARKET_SELECT_WEA:
		{
			if(response)
			{
				if(PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				
				if(!WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_AMMO]) return SendMessage(playerid, "Este tipo de arma no necesita munición.");
				
				ShowDialog(playerid, DIALOG_BLACK_MARKET_AMMO);
			}
			else ShowDialog(playerid, DIALOG_BLACK_MARKET);
			return 1;
		}
		case DIALOG_BLACK_MARKET_AMMO:
		{
			if(response)
			{
				if(sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				if(inputtext[0] <= 0 || inputtext[0] > 5000)
				{
					SendMessage(playerid, "La cantidad de munición no es correcta, Max: 5000.");
					
					return 1;
				}
				
				new price = 5 * inputtext[0];
				if(price > PI[playerid][pBLACK_CASH])
				{
					SendMessagef(playerid, "No tienes dinero suficiente, te faltan %s DN$ para poder comprar la munición.", number_format_thousand(price - PI[playerid][pBLACK_CASH]));
					
					return 1;
				}
				
				if(PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_AMMO] + inputtext[0] > 9999)
				{
					SendMessage(playerid, "A esta arma no le entra tanta munición.");
					
					return 1;
				}
				
				PI[playerid][pBLACK_CASH] -= price;
				GivePlayerWeaponEx(playerid, PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID], inputtext[0]);
				SendMessagef(playerid, "Has comprado %s balas para tu %s por %s DN$.", number_format_thousand(inputtext[0]), WEAPON_INFO[ PLAYER_WEAPONS[playerid][ PLAYER_TEMP[playerid][pt_SELECTED_DIALOG_WEAPON_SLOT] ][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(price));
				ShowDialog(playerid, DIALOG_BLACK_MARKET);
			}
			else ShowDialog(playerid, DIALOG_BLACK_MARKET);
			return 1;
		}
		case DIALOG_BLACK_MARKET_ARMOUR:
		{
			if(response)
			{
				if(5000 > PI[playerid][pBLACK_CASH])
				{
					SendMessagef(playerid, "No tienes dinero suficiente, te faltan %s DN$ para poder comprar el chaleco.", number_format_thousand(5000 - PI[playerid][pBLACK_CASH]));
					
					return 1;
				}

				GetPlayerArmour(playerid, PI[playerid][pARMOUR]);
				if(PI[playerid][pARMOUR] > 99.5)
				{
					SendMessage(playerid, "Ya tienes un chaleco antibalas");
					
					return 1;
				}

				PI[playerid][pBLACK_CASH] -= 5000;
				SetPlayerArmourEx(playerid, 100.0);
				SendClientMessagef(playerid, -1, "Acabas de comprar un {"#BLUE_COLOR"}chaleco antibalas {ffffff}por 5000 {"#GRAY_COLOR"}DN$");
				ShowDialog(playerid, DIALOG_BLACK_MARKET);
			}
			else ShowDialog(playerid, DIALOG_BLACK_MARKET);
		}
		case DIALOG_RENOUNCE:
		{
			if(response)
			{
				if(PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] < 1 || PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] >= sizeof work_info) return SendClientMessagef(playerid, -1, "El trabajo no es válido.");
				
				if(!PLAYER_WORKS[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][pwork_SET]) return SendMessagef(playerid, "No eres %s.", work_info[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][work_info_NAME]);
				if(PlayerTemp[playerid][pt_WORKING_IN] == PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem]) return SendClientMessagef(playerid, -1, "Ahora mismo estás de servicio en ese trabajo, deja de trabajar para abandonar el trabajo.");
				
				if(PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == WORK_POLICE)
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pID], PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					PLAYER_WORKS[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][pwork_LEVEL] = 0;
				}
				else
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pID], PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem]);
					mysql_tquery(handle_db, QUERY_BUFFER);
				}

				SendClientMessagef(playerid, -1, "Has abandonado tu trabajo de %s.", work_info[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][work_info_NAME]);
				PLAYER_WORKS[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][pwork_SET] = false;
			}
		}
		case DIALOG_SELECT_POLICE_DIVISION:
		{
			if(response)
			{
				switch(listitem)
				{
					case 0:
					{
						ShowDialog(playerid, DIALOG_SELECT_POLICE_SKIN);
						pTemp(playerid)[pt_POLICE_SWAT] = false;
					}
					case 1:
					{
						if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 2) return SendClientMessagef(playerid, -1, "Los cadetes no pueden ser SWAT.");

						pTemp(playerid)[pt_POLICE_SWAT] = true;
						PI[playerid][pPOLICE_DUTY] = 285;

						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pweapons WHERE id_player = %d;", PI[playerid][pID]);
						mysql_tquery(handle_db, QUERY_BUFFER);
						ResetPlayerWeaponsEx(playerid);

						CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_POLICE, INVALID_VEHICLE_ID);
					}
				}
			}
		}
	}
	return 0;
}//OnDialogResponse

public OnModelSelectionResponse(playerid, extraid, index, modelid, response)
{
	switch(extraid)
	{
		case MENU_SELECT_POLICE_VEHICLE:
		{
			if(response == MODEL_RESPONSE_SELECT)
			{
				if(pTemp(playerid)[pt_VEHICLE_SPAWNED] != INVALID_VEHICLE_ID)
				{
					ClearVehicleGlobalInfo(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
					DestroyVehicleEx(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
					pTemp(playerid)[pt_VEHICLE_SPAWNED] = INVALID_VEHICLE_ID;
				}

				if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < POLICE_VEHICLES_INFO[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][index] ][1]) return SendClientMessagef(playerid, -1, "No tienes el rango adecuado para este vehiculo.");

				new vehicle_id = INVALID_VEHICLE_ID;
				vehicle_id = CreateVehicle(POLICE_VEHICLES_INFO[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][index] ][0], POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][0], POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][1], POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][2], POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][3], 0, 1, -1, false);
				if(vehicle_id == INVALID_VEHICLE_ID) return SendMessage(playerid, "No se pueden crear mas vehiculos, Intenta de nuevo mas tarde...");
				
				pTemp(playerid)[pt_VEHICLE_SPAWNED] = vehicle_id;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_WORK;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = POLICE_VEHICLES_INFO[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][index] ][0];
				format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "P-%04d", getRandomLetter(), getRandomLetter(), getRandomLetter(), random(9999));
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][0];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][1];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][2];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = POLICE_VEHICLES_SPAWN[ PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] ][3];
				
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
				
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = 1;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[ GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_MAX_GAS];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VIP] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;

				WORK_VEHICLES[vehicle_id][work_vehicle_VALID] = true;
				WORK_VEHICLES[vehicle_id][work_vehicle_WORK] = WORK_POLICE;
				WORK_VEHICLES[vehicle_id][work_vehicle_EXP] = POLICE_VEHICLES_INFO[ PlayerTemp[playerid][pt_PLAYER_LISTITEM][index] ][1];
				WORK_VEHICLES[vehicle_id][work_vehicle_NEED_DUTY] = true;
				
				SetVehicleToRespawnEx(vehicle_id);
				PutPlayerInVehicleEx(playerid, vehicle_id, 0);
			}
		}
	}
	return 1;
} //OnModelSelectionResponse

GetDatabasePages(count, limit)
{
	return floatround(floatdiv(count, limit), floatround_ceil);
}

GetEmptyPlayer_GPS_Slot(playerid)
{
	for(new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++)
	{
		if(!PLAYER_GPS[playerid][i][player_gps_VALID]) return i;
	}
	return -1;
}

SetPlayer_GPS_Checkpoint(playerid, Float:x, Float:y, Float:z, world, interior)
{
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]);
		PlayerTemp[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	PlayerTemp[playerid][pt_GPS_CHECKPOINT] = CreateDynamicCP(x, y, z, 5.0, world, interior, playerid, 9999999999.0);
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_GPS;
	Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_GPS_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	Streamer_Update(playerid, STREAMER_TYPE_CP);

	if(GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if(WORK_VEHICLES[vehicleid][work_vehicle_VALID])
		{
			if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TAXI)
			{
				if(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED])
				{
					if(IsPlayerConnected(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER]))
					{
						if(IsValidDynamicCP(PlayerTemp[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]))
						{
							DestroyDynamicCP(PlayerTemp[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]);
							PlayerTemp[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
						}
						PlayerTemp[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = CreateDynamicCP(x, y, z, 5.0, world, interior, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], 9999999999.0);
						
						new taxi_info[1];
						taxi_info[0] = CHECKPOINT_TYPE_GPS;
						Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT], E_STREAMER_EXTRA_ID, taxi_info);
						
						Streamer_Update(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], STREAMER_TYPE_CP);
						Auto_SendPlayerAction(playerid, "configura su GPS y se lo muestra al taxista.");
						return 1;
					}
				}
			}
		}
	}
	
	Auto_SendPlayerAction(playerid, "configura su GPS.");
	return 1;
}
	
public OnPlayerEnterDynamicArea(playerid, areaid)
{
	PlayerTemp[playerid][pt_LAST_AREA_ID] = areaid;

	new info[2];
	Streamer_GetArrayData(STREAMER_TYPE_AREA, areaid, E_STREAMER_EXTRA_ID, info);
	switch(info[0])
	{
		case AREA_TYPE_GANGZONE:
		{
			new index = info[1];
			
			if(TERRITORIES[index][territory_VALID])
			{
				PlayerTemp[playerid][pt_LAST_TERRITORY] = index;
				if(PI[playerid][pCREW])
				{
					if(TERRITORIES[index][territory_WAR])
					{
						SendClientMessagef(playerid, -1, "Este territorio está siendo atacado por la banda '%s'.",CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);
						
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_TERRITORY_BOX]);
						TextDrawShowForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW]);
					}
				}
			}
		}
		case AREA_TYPE_SAFE_ZONE:
		{
			if(pTemp(playerid)[pt_USER_LOGGED]) TextDrawShowForPlayer(playerid, Textdraws[textdraw_SAFE_ZONE]);
		}
	}

	return 1;
}

public OnPlayerLeaveDynamicArea(playerid, areaid)
{
	new info[2];
	Streamer_GetArrayData(STREAMER_TYPE_AREA, areaid, E_STREAMER_EXTRA_ID, info);
	
	switch(info[0])
	{
		case AREA_TYPE_NONE:
		{
			if(areaid == Lumberjack_Area)
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_LUMBERJACK)
				{
					SendClientMessagef(playerid, -1, "Has abandonado el trabajo de talador porque te has alejado demasiado de la zona.");
					CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
				}
			}
			else if(areaid == Farmer_Area)
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_FARMER) CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
			}
			else if(areaid == Harvest_Area)
			{
				if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
				{
					if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_HARVESTER)
					{
						SendClientMessagef(playerid, -1, "Has abandonado tu trabajo de cosechador porque te has alejado demasiado de la zona.");
						CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
					}
				}
			}
			
			if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL)
			{
				if(areaid == Jail_Areas[0] || areaid == Jail_Areas[1] || areaid == Jail_Areas[2] || areaid == Jail_Areas[3] )
				{
					SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				}
			}
		}
		case AREA_TYPE_GANGZONE:
		{
			new index = info[1];
			
			if(TERRITORIES[index][territory_VALID])
			{
				if(PI[playerid][pCREW])
				{
					TextDrawHideForPlayer(playerid, Textdraws[textdraw_TERRITORY_BOX]);
					TextDrawHideForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW]);
				}
			}
		}
		case AREA_TYPE_SAFE_ZONE:
		{
			if(!IsPlayerInSafeZone(playerid)) TextDrawHideForPlayer(playerid, Textdraws[textdraw_SAFE_ZONE]);
		}
	}
	return 1;
}

public OnPlayerEnterDynamicCP(playerid, checkpointid)
{
	new info[1];
	Streamer_GetArrayData(STREAMER_TYPE_CP, checkpointid, E_STREAMER_EXTRA_ID, info);

	switch(info[0])
	{
		case CHECKPOINT_TYPE_GPS:
		{
			DestroyDynamicCP(PlayerTemp[playerid][pt_GPS_CHECKPOINT]);
			PlayerTemp[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
		}
		case CHECKPOINT_TYPE_UNLOAD_TRUCK:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if(!PLAYER_WORKS[playerid][WORK_TRUCK][pwork_SET]) return 1;
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRUCK) return 1;
	
			new vehicleid = GetPlayerVehicleID(playerid);
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_WORK) return 1;
			if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_TRUCK) return 1;
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) return 1;
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return 1;
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Solo aceptaremos la carga del conductor de este camion.");
			
			DestroyDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]);
			PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
				
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
			UpdateVehicleParams(vehicleid);
			
			TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING] = true;
			PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], "");
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
				
			PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] = 40.0;
			UpdatePlayerLoadingTruckSize(playerid);
			KillTimer(PlayerTemp[playerid][pt_TIMERS][7]);
			KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
			PlayerTemp[playerid][pt_TIMERS][9] = SetTimerEx("TruckUnLoadUp", 1000, false, "ii", playerid, vehicleid);
		}
		case CHECKPOINT_TYPE_FINISH_TRUCK:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if(!PLAYER_WORKS[playerid][WORK_TRUCK][pwork_SET]) return 1;
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRUCK) return 1;
	
			new vehicleid = GetPlayerVehicleID(playerid);
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_WORK) return 1;
			if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_TRUCK) return 1;
			if(!TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) return 1;
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return 1;
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Solo le pagaremos al conductor que entrego la mercancía.");
			
			DestroyDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]);
			PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
			
			new work_extra_payment;
			if(work_info[WORK_TRUCK][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_TRUCK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP])));
				if(work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT];
			}
			
			if(GivePlayerCash(playerid, Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_MONEY] + work_extra_payment, true, false)) {
				PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL] ++;
				
				new string[64];
				format(string, sizeof string, "+%s$", number_format_thousand(Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_MONEY] + work_extra_payment));
				GameTextForPlayer(playerid, string, 5000, 1);
				SetVehicleToRespawnEx(vehicleid);
			}
		}
		case CHECKPOINT_TYPE_TRASH:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 1;
			if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
			if(!PlayerTemp[playerid][pt_TRASH_PASSENGER]) return 1;
			
			new driver = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
			SendClientMessage(driver, -1, "{"#SILVER_COLOR"}Espera mientras tu amigo recoge la basura.");
			
			new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], 10);
			if(offset > 30.0) offset = 30.0;
			
			PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] = 10.0 + offset;
			UpdatePlayerTrashRecycleSize(playerid);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
			
			TogglePlayerControllableEx(playerid, false);
			SetCameraBehindPlayer(playerid);
			ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
			
			KillTimer(PlayerTemp[playerid][pt_TIMERS][10]);
			PlayerTemp[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
		}
		case CHECKPOINT_TYPE_FINISH_TRASH:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
			if(!PlayerTemp[playerid][pt_TRASH_DRIVER]) return 1;
			
			new route = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
			new money = TRASH_OBJECTS[route][trash_route_MONEY];
			
			new driver_work_extra_payment, passenger_work_extra_payment;
			if(work_info[WORK_TRASH][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP] > 0)
			{
				driver_work_extra_payment = (work_info[WORK_TRASH][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP])));
				if(work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT] != 0) if(driver_work_extra_payment > work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT]) driver_work_extra_payment = work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT];
				
				passenger_work_extra_payment = (work_info[WORK_TRASH][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[ TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][WORK_TRASH][pwork_LEVEL], work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP])));
				if(work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT] != 0) if(passenger_work_extra_payment > work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT]) passenger_work_extra_payment = work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT];
			}
			
			GivePlayerCash(playerid, money + driver_work_extra_payment, true, false);
			SendClientMessagef(playerid, -1, "Trabajo finalizado, has ganado %s dolares.", number_format_thousand(money + driver_work_extra_payment));
			PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL] ++;
			
			GivePlayerCash(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], money + passenger_work_extra_payment, true, false);
			SendClientMessagef(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], -1, "Trabajo finalizado, has ganado %s dolares.", number_format_thousand(money + passenger_work_extra_payment));
			PLAYER_WORKS[ TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][WORK_TRASH][pwork_LEVEL] ++;
			
			CancelTrashWork(playerid, TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
		}
		case CHECKPOINT_TYPE_LUMBERJACK:
		{
			if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_LUMBERJACK)
			{
				DestroyDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]);
				PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
				
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
				RemovePlayerAttachedObject(playerid, 8);
				PlayerTemp[playerid][pt_PLAYER_CARRYING_TREE] = false;
				ApplyAnimation(playerid, "CARRY", "putdwn05", 4.1, 0, 1, 1, 0, 0, 1);
				
				new work_extra_payment;
				if(work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY] > 0 && work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_LEVEL], work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_EXP])));
					if(work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT];
				}
				PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_LEVEL] ++;
				
				new amount = minrand(40, 50) + work_extra_payment;
				GivePlayerCash(playerid, amount, true, false);
				
				new string[64];
				format(string, sizeof string, "+%d$", amount);
				GameTextForPlayer(playerid, string, 5000, 1);
			}
			else
			{
				DestroyDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]);
				PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
			}
		}
		case CHECKPOINT_TYPE_PIZZA_DEL:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 1;
			PlayerTemp[playerid][pt_PIZZA_PROCCESS] --;
			PlayerTemp[playerid][pt_DELIVERED_PIZZAS] ++;
			RemovePlayerAttachedObject(playerid, 9);
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
			ApplyDynamicActorAnimation(PlayerTemp[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
			ApplyDynamicActorAnimation(PlayerTemp[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
			DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
			PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT_DELI] = true;
			PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SendClientMessagef(playerid, -1, "Genial, vuelve a subir a la moto para continuar.");
		}
		case CHECKPOINT_TYPE_PIZZA_FINISH:
		{
			if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			
			new vehicleid = GetPlayerVehicleID(playerid);
			if(!PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED]) return 1;
			if(PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Solo le pagaremos al conductor que realizo el trabajo.");
		
			new work_extra_payment;
			if(work_info[WORK_PIZZA][work_info_EXTRA_PAY] > 0 && work_info[WORK_PIZZA][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_PIZZA][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_PIZZA][pwork_LEVEL], work_info[WORK_PIZZA][work_info_EXTRA_PAY_EXP])));
				if(work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT];
			}
			
			PLAYER_WORKS[playerid][WORK_PIZZA][pwork_LEVEL] ++;
			new money = (PlayerTemp[playerid][pt_DELIVERED_PIZZAS] * 200) + work_extra_payment;
			GivePlayerCash(playerid, money, true, false);
			SendClientMessagef(playerid, -1, "Gracias por tu trabajo, has repartido %d pizzas y has ganado %s dolares.", PlayerTemp[playerid][pt_DELIVERED_PIZZAS], number_format_thousand(money));
			
			CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
		}
		default: return 1;
	}
	return 1;
}

RegisterNewPlayer_GPS_Site(playerid, slot)
{
	inline OnPgpsInserted()
	{
		PLAYER_GPS[playerid][slot][player_gps_ID] = cache_insert_id();
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pgps (id_player, name, x, y, z, world, interior) VALUES(%d, '%e', %f, %f, %f, %d, %d);", PI[playerid][pID], PLAYER_GPS[playerid][slot][player_gps_NAME], PLAYER_GPS[playerid][slot][player_gps_X], PLAYER_GPS[playerid][slot][player_gps_Y], PLAYER_GPS[playerid][slot][player_gps_Z], PLAYER_GPS[playerid][slot][player_gps_WORLD], PLAYER_GPS[playerid][slot][player_gps_INTERIOR]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPgpsInserted);
	return 1;
}

public OnQueryError(errorid, const error[], const callback[], const query[], MySQL:handle)
{
	switch(errorid) 
	{
		case CR_SERVER_GONE_ERROR: printf("[MySQL] [ERROR]: Se ha perdido la conexion con el servidor (%d)", _:handle);
		case ER_SYNTAX_ERROR: printf("[MySQL] [ERROR]: Syntax error, query: %s (%d)", query, _:handle);
		default: printf("[MySQL] [ERROR] errorid: %d, error: %s, callback: %s, query: %s, handle: %d", errorid, error, callback, query, _:handle);
	}
	return 1;
}

ClearPlayerChat(playerid)
{
	for(new i = 0; i != 32; i++) SendClientMessage(playerid, -1, " ");
	return 1;
}

RegisterBankAccountTransaction(from_id, to_id, transaction_type, amount)
{
	new date[24];
	getDateTime(date);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bank_movements (date, type, from_id, to_id, amount) VALUES('%e', %d, %d, %d, %d);", date, transaction_type, from_id, to_id, amount);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

RegisterNewPlayer(playerid)
{
	if(PlayerTemp[playerid][pt_USER_EXIST]) return 0;
	
	inline OnPlayerInserted()
	{
		PI[playerid][pID] = cache_insert_id();
		if(PI[playerid][pID])
		{
			PlayerTemp[playerid][pt_USER_EXIST] = true;
			PI[playerid][pPHONE_NUMBER] = getPhoneNumber(PI[playerid][pID]);
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET phone_number = %d WHERE id = %d;", PI[playerid][pPHONE_NUMBER], PI[playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
			CreateDefaultContacts(playerid);
			CallLocalFunction("OnPlayerRegister", "i", playerid);
		}
		else Kick(playerid);
		return 1;
	}

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
		"\
			INSERT INTO player\
			(\
				name,\
				ip,\
				email,\
				pass,\
				reg_date,\
				last_connection,\
				last_connection_timestamp,\
				level,\
				rep,\
				connected,\
				playerid,\
				time_for_rep,\
				skin,\
				cash,\
				pos_x,\
				pos_y,\
				pos_z,\
				angle,\
				state,\
				fight_style,\
				health,\
				hungry,\
				thirst,\
				config_sounds,\
				config_audio,\
				config_admin,\
				phone_visible_number,\
				doubt_channel,\
				global_channel,\
				vip_expire_date\
			) \
			VALUES\
			(\
				'%e', '%e', '%e', '%e', '%e', '%e', %d, %d, %d, %d, %d, %d, %d, %d, %f, %f, %f, %f, %d, %d, %f, %f, %f, %d, %d, %d, %d, %d, %d, '0000-00-00 00:00:00'\
			);\
		",
			PI[playerid][pNAME], PI[playerid][pIP], PI[playerid][pEMAIL], PI[playerid][pPASS], 
			PI[playerid][pREG_DATE], PI[playerid][pLAST_CONNECTION], PI[playerid][pLAST_CONNECTION_TIMESTAMP],
			PI[playerid][pLEVEL], PI[playerid][pREP], PI[playerid][pCONNECTED], PI[playerid][pPLAYERID],
			PI[playerid][pTIME_FOR_REP], PI[playerid][pSKIN], PI[playerid][pCASH], PI[playerid][pPOS_X],
			PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], PI[playerid][pSTATE],
			PI[playerid][pFIGHT_STYLE], PI[playerid][pHEALTH], PI[playerid][pHUNGRY], PI[playerid][pTHIRST],
			PI[playerid][pCONFIG_SOUNDS], PI[playerid][pCONFIG_AUDIO], PI[playerid][pCONFIG_ADMIN], 
			PI[playerid][pPHONE_VISIBLE_NUMBER], PI[playerid][pDOUBT_CHANNEL], pInfo(playerid)[pCONFIG_GLOBAL]
	);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPlayerInserted);
	return 1;
}

CreateDefaultContacts(playerid)
{
	new slot;
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Policia");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 911;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Banco");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 6740;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Aseguradora");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 38350;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Taxi");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 450;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	return 1;
}

stock TimeConvert(seconds)
{
	new tmp[16];
 	new minutes = floatround(seconds/60);
  	seconds -= minutes*60;
   	format(tmp, sizeof(tmp), "%d:%02d", minutes, seconds);
   	return tmp;
}

stock TimeConvertEx(sec, &days, &hours, &minutes, &seconds)
{
	days = floatround(sec / 86400);
	hours = floatround((sec - (days * 86400)) / 3600);
	minutes = floatround((sec - (days * 86400) - (hours * 3600)) / 60);
	seconds = sec % 60;
   	return 1;
}

stock TimeConvertExAsText(sec, bool:lastMinute = false)
{
	new string[128] = "", auxString[32];
	
	if(lastMinute && sec < 60) {
		string = "menos de 1 minuto";
		return string;
	}

	if(sec <= 0) {
		string = "nada";
		return string;
	}

	new days, hours, minutes, seconds;
	TimeConvertEx(sec, days, hours, minutes, seconds);

	if(days) {
		format(auxString, sizeof auxString, "%d días", days);
		strcat(string, auxString);
	}

	if(hours) {
		if(strlen(string) > 0) strcat(string, " ");
		format(auxString, sizeof auxString, "%d horas", hours);
		strcat(string, auxString);
	}

	if(minutes) {
		if(strlen(string) > 0) strcat(string, " ");
		format(auxString, sizeof auxString, "%d minutos", minutes);
		strcat(string, auxString);
	}

	if(seconds) {
		if(strlen(string) > 0) strcat(string, " ");
		format(auxString, sizeof auxString, "%d segundos", seconds);
		strcat(string, auxString);
	}
   	return string;
}

ProxDetector(playerid, Float:radi, string[], col1, col2, col3, col4, col5, div = 0)
{
	new line1_str[165], line2_str[165], bool:line2_used;
	
	if(div)
	{
		format(line1_str, div + 1, "%s", string);
		if(strlen(string) > div)
		{
			format(line2_str, sizeof line2_str, "— %s", string[div]);
			line2_used = true;
		}
	}
	else format(line1_str, sizeof line1_str, "%s", string);
	
	new Float:oldposx, Float:oldposy, Float:oldposz, current_vw = GetPlayerVirtualWorld(playerid), current_int = GetPlayerInterior(playerid);
	GetPlayerPos(playerid, oldposx, oldposy, oldposz);
	
	for(new i = 0; i != MAX_PLAYERS; i++) 					
	{
		if(!IsPlayerConnected(i)) continue;
		if(!pTemp(i)[pt_USER_LOGGED]) continue;
		if(GetPlayerVirtualWorld(i) != current_vw) continue;
		if(GetPlayerInterior(i) != current_int) continue;
		
		if(IsPlayerInRangeOfPoint(i, radi/16, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col1, line1_str);
			if(div && line2_used) SendClientMessage(i, col1, line2_str);
		}
		else if(IsPlayerInRangeOfPoint(i, radi/8, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col2, line1_str);
			if(div && line2_used) SendClientMessage(i, col2, line2_str);
		}
		else if(IsPlayerInRangeOfPoint(i, radi/4, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col3, line1_str);			
			if(div && line2_used) SendClientMessage(i, col3, line2_str);
		}
		else if(IsPlayerInRangeOfPoint(i, radi/2, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col4, line1_str);	
			if(div && line2_used) SendClientMessage(i, col4, line2_str);
		}
		else if(IsPlayerInRangeOfPoint(i, radi, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col5, line1_str);
			if(div && line2_used) SendClientMessage(i, col5, line2_str);
		}
	}
	return 1;
}

NearbyMessage(Float:pos_x, Float:pos_y, Float:pos_z, current_int, current_vw, Float:radi, col, const string[])
{
	for(new i = 0; i != MAX_PLAYERS; i++) 					
	{
		if(!IsPlayerConnected(i)) continue;
		if(!pTemp(i)[pt_USER_LOGGED]) continue;
		if(GetPlayerVirtualWorld(i) != current_vw) continue;
		if(GetPlayerInterior(i) != current_int) continue;
		
		if(IsPlayerInRangeOfPoint(i, radi, pos_x, pos_y, pos_z)) SendClientMessage(i, col, string);
	}
	return 1;
}

IsValidRPName(const string[])
{
	new Regex:reg_exp = Regex_New("[A-Z][a-z]+_[A-Z][a-z]{1,3}[A-Z]?[a-z]*");
	new result = Regex_Check(string, reg_exp);
	Regex_Delete(reg_exp);
	return result;
}

IsValidEmail(const string[])
{
	new Regex:reg_exp = Regex_New("[a-zA-Z0-9_\\.]+@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,4}"); 
	new result = Regex_Check(string, reg_exp); 
	Regex_Delete(reg_exp); 
	return result; 
}

KickEx(playerid, time = 0)
{
	PlayerTemp[playerid][pt_KICKED] = true;
	if(!time) Kick(playerid);
	else
	{
		KillTimer(PlayerTemp[playerid][pt_TIMERS][0]);
		PlayerTemp[playerid][pt_TIMERS][0] = SetTimerEx("KickPlayer", time, false, "i", playerid);
	}
	return 1;
}

forward KickPlayer(playerid);
public KickPlayer(playerid)
{
	return Kick(playerid);
}

SetRolePlayNames(playerid)
{
	if(isnull(PlayerTemp[playerid][pt_NAME])) return 0;
	
	new name[24], bool:underscore;
	format(name, 24, "%s", PlayerTemp[playerid][pt_NAME]);
	for(new i = 0; i < 24; i++) 
	{
		if(name[i] == '_')
		{
			if(!underscore)
			{
				strmid(PlayerTemp[playerid][pt_FIRST_NAME], name, 0, i);
				strmid(PlayerTemp[playerid][pt_SUB_NAME], name, i + 1, 24);
				underscore = true;
			}
		}
	}
	return 1;
}

LoadPlayerPhoneBook(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	inline OnPhoneBookLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				new id, name[24], number;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "number", number);
				
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID] = true;
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_ID] = id;
				format(PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME], 24, "%s", name);
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER] = number;
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pbook WHERE id_player = %d LIMIT %d;", PI[playerid][pID], MAX_PHONE_CONTACTS);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPhoneBookLoad);
	return 1;
}

RegisterNewPlayerPhoneBook(playerid, slot)
{
	inline OnContactInserted()
	{
		PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_ID] = cache_insert_id();
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pbook (id_player, name, number) VALUES (%d, '%e', %d);", PI[playerid][pID], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnContactInserted);
	return 1;
}

RegisterPhoneMessage(from_id, to_id, message[], offline = 0)
{
	new date[24], from_id_insert[24] = "NULL", to_id_insert[24] = "NULL";
	getDateTime(date);
	if(from_id) format(from_id_insert, 24, "%d", from_id);
	if(to_id) format(to_id_insert, 24, "%d", to_id);

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pmessages (from_id, to_id, message, date, offline) VALUES (%s, %s, '%e', '%e', %d);", from_id_insert, to_id_insert, message, date, offline);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}


forward NoCallResponse(playerid);
public NoCallResponse(playerid)
{
	if(!PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return 0;
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return 0;
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] != CALL_STATE_WAITING_RESPONSE) return 0;
	
	EndPhoneCall(playerid);
	return 1;
}

EndPhoneCall(playerid)
{
	if(!PlayerTemp[playerid][pt_PLAYER_IN_CALL]) return 0;
	
	if(PlayerTemp[playerid][pt_POLICE_CALL_NAME] || PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PlayerTemp[playerid][pt_PLAYER_IN_CALL] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_NAME] = false;
		PlayerTemp[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		return 1;
	}
	
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return 0;
	if(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] == CALL_GAME_STATE_NONE) return 0;
	
	new to_playerid = PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID];
	switch(PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE])
	{
		case CALL_STATE_WAITING_RESPONSE:
		{
			KillTimer(PlayerTemp[playerid][pt_TIMERS][6]);
			
			pTemp(to_playerid)[pt_PLAYER_IN_CALL] = false;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
		}
		case CALL_STATE_INCOMING_CALL:
		{
			SendClientMessage(to_playerid, -1, "{"#SILVER_COLOR"}No respondieron el teléfono...");
			KillTimer(pTemp(to_playerid)[pt_TIMERS][6]);
			
			pTemp(to_playerid)[pt_PLAYER_IN_CALL] = false;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
		}
		case CALL_STATE_ESTABLISHED:
		{
			SendClientMessage(to_playerid, -1, "{"#PRIMARY_COLOR"}Llamada finalizada.");
			pTemp(to_playerid)[pt_PLAYER_IN_CALL] = false;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			pTemp(to_playerid)[pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
			
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			SetPlayerSpecialAction(to_playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
		}
	}
	
	PlayerTemp[playerid][pt_PLAYER_IN_CALL] = false;
	PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
	PlayerTemp[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
	return 1;
}

convertPhoneNumber(playerid, number)
{
	new f_string[24], bool:exists;
	for(new i = 0; i != MAX_PHONE_CONTACTS; i ++)
	{
		if(!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) continue;
		if(number == PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER])
		{
			exists = true;
			format(f_string, sizeof f_string, "%s", PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME]);
			break;
		}
	}

	if(!exists) format(f_string, sizeof f_string, "%d", number);
	return f_string;
}

GetEmptyPlayerPhoneBookSlot(playerid)
{
	for(new i = 0; i != MAX_PHONE_CONTACTS; i ++)
	{
		if(!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) return i;
	}
	return -1;
}

LoadPlayerGPSData(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	inline OnPgpsLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				PLAYER_GPS[playerid][i][player_gps_VALID] = true;
				cache_get_value_name_int(i, "id", PLAYER_GPS[playerid][i][player_gps_ID]);
				cache_get_value_name(i, "name", PLAYER_GPS[playerid][i][player_gps_NAME]);
				cache_get_value_name_float(i, "x", PLAYER_GPS[playerid][i][player_gps_X]);
				cache_get_value_name_float(i, "y", PLAYER_GPS[playerid][i][player_gps_Y]);
				cache_get_value_name_float(i, "z", PLAYER_GPS[playerid][i][player_gps_Z]);
				cache_get_value_name_int(i, "world", PLAYER_GPS[playerid][i][player_gps_WORLD]);
				cache_get_value_name_int(i, "interior", PLAYER_GPS[playerid][i][player_gps_INTERIOR]);
				
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pgps WHERE id_player = %d;", PI[playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPgpsLoad);
	return 1;
}

stock minrand(min, max) //By Alex "Y_Less" Cole
{
	return random(max - min) + min;
}

stock ConvertTime_SecondsToHours(sec, &hours, &minutes, &seconds)
{
	hours = floatround(sec / 3600);
	minutes = floatround((sec - (hours * 3600)) / 60);
	seconds = sec % 60;
   	return 1;
}

CreatePlayerBars(playerid)
{
	static const tmp_pbar[E_PBARS];
	PlayerBars[playerid] = tmp_pbar;

	if(IsPlayerUsingMobile(playerid)) PlayerBars[playerid][pbHEALTH] = CreatePlayerProgressBar(playerid, 512.000000, 64.000000, 55.500000, 13.000000, 0xFF0000FF, 100.000000, 0);
	else PlayerBars[playerid][pbHEALTH] = CreatePlayerProgressBar(playerid, 545.000000, 68.000000, 69.000000, 7.000000, 0xFF0000FF, 100.000000, 0);
}

CreatePlayerTextDraws(playerid)
{
	for(new i; i < sizeof(PlayerTextdraws[]); i++) PlayerTextdraws[playerid][Player_Textdraws_Enum:i] = INVALID_TEXT_DRAW;

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0] = CreatePlayerTextDraw(playerid, 320.000000, 350.000000, "I");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 27.410259, 5.897183);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 145);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1] = CreatePlayerTextDraw(playerid, 320.000000, 358.000000, "Tienda");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0.361666, 1.400889);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 1);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 90);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2] = CreatePlayerTextDraw(playerid, 320.000000, 377.000000, "COMPRAR");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -201); // Money = 9306312   ,  -1459617611  No money
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3] = CreatePlayerTextDraw(playerid, 363.000000, 377.000000, "SIGUIENTE");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], -132);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4] = CreatePlayerTextDraw(playerid, 277.000000, 377.000000, "ANTERIOR");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], -132);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5] = CreatePlayerTextDraw(playerid, 320.000000, 398.000000, "Precio:_0$ Ropa:_0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0.171666, 0.782815);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], -86);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0] = CreatePlayerTextDraw(playerid, 553.000000, 176.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0.000000, 8.766664);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0.000000, 108.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1] = CreatePlayerTextDraw(playerid, 505.000000, 181.000000, "Interior:_0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0.300000, 1.438221);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2] = CreatePlayerTextDraw(playerid, 505.000000, 206.000000, "Anterior");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 546.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3] = CreatePlayerTextDraw(playerid, 555.000000, 206.000000, "Siguiente");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 600.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4] = CreatePlayerTextDraw(playerid, 505.000000, 230.000000, "Crear");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 533.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5] = CreatePlayerTextDraw(playerid, 542.000000, 230.000000, "Cancelar");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 583.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], true);
	
	PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0] = CreatePlayerTextDraw(playerid, 320.000000, 317.000000, "Cargando_camion...");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 0.255666, 1.176888);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0], 0);

	PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1] = CreatePlayerTextDraw(playerid, 250.000000, 332.000000, "Borde");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 0.000000, 3.766666);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 390.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1], 0);

	PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2] = CreatePlayerTextDraw(playerid, 253.000000, 336.000000, "Abajo");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 0.000000, 2.866667);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 387.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], -594542436);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2], 0);

	PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3] = CreatePlayerTextDraw(playerid, 253.000000, 336.000000, "Sellena");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 0.000000, 2.866667);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 250.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], -594542357);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 0);
	
	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0] = CreatePlayerTextDraw(playerid, 320.000000, 315.000000, "");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0.298999, 1.483852);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], -161);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);

	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1] = CreatePlayerTextDraw(playerid, 320.000000, 333.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0.000000, 0.766669);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0.000000, 130.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 2021161125);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);

	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2] = CreatePlayerTextDraw(playerid, 320.000000, 333.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.000000, 0.766669);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1988896255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);

    PlayerTextdraws[playerid][ptextdraw_HUD][0] = CreatePlayerTextDraw(playerid, 74.000, 429.000, "Nivel_0_Exp_(0/0)");
    PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0.300, 1.500);
    PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 1);
    PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], -1);
    PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0);
    PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0);
    PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 150);
    PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 2);
    PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 1);

    PlayerTextdraws[playerid][ptextdraw_HUD][1] = CreatePlayerTextDraw(playerid, 496.000, 429.000, "hambre");
    PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 0.300, 1.500);
    PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 1);
    PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], -1);
    PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 0);
    PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 0);
    PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 150);
    PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 2);
    PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], 1);

    PlayerTextdraws[playerid][ptextdraw_HUD][2] = CreatePlayerTextDraw(playerid, 542.000, 429.000, "sed");
    PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 0.300, 1.500);
    PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 1);
    PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], -1);
    PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 0);
    PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 0);
    PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 150);
    PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 2);
    PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], 1);
	return 1;
}

DestroyPlayerTextDraws(playerid)
{
	for(new i; i < sizeof(PlayerTextdraws[]); i++)
	{
		if(PlayerTextdraws[playerid][Player_Textdraws_Enum:i] == INVALID_TEXT_DRAW) continue;
		PlayerTextDrawDestroy(playerid, PlayerText:PlayerTextdraws[playerid][Player_Textdraws_Enum:i]);
		PlayerTextdraws[playerid][Player_Textdraws_Enum:i] = INVALID_TEXT_DRAW;
	}
	return 1;
}

#define OnClickTextDraw OnPlayerClickTextDraw
public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
    if(clickedid == Text:INVALID_TEXT_DRAW)
    {
		PlayerTemp[playerid][pt_SELECT_TEXTDRAW] = false;

		if(PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED])
		{
			ExitPlayerPropertyConstructor(playerid);
			return 1;
		}
		
		if(PlayerTemp[playerid][pt_CLOTHING_SHOP] != -1) // Tiene abierto el menu de ropa
		{
			ClosePlayerClothingMenu(playerid);
			ExitPlayerWardrobe(playerid);
		}
		
		if(IsPlayerInGenderSelector(playerid)) KickEx(playerid, 500);
		if(IsPlayerInPlayButton(playerid)) KickEx(playerid, 500);
		return 1;
	}

	if(IsPlayerInGenderSelector(playerid))
	{
		if(clickedid == Textdraws[textdraw_GENDER][5])
        {
            PI[playerid][pGENDER] = SEX_MALE;
            PI[playerid][pSKIN] = 250;
        }
        if(clickedid == Textdraws[textdraw_GENDER][6])
        {
            PI[playerid][pGENDER] = SEX_FEMALE;
            PI[playerid][pSKIN] = 11;
        }

        HidePlayerGenderSelector(playerid);

        SetPlayerScore(playerid, PI[playerid][pLEVEL]);
        PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
		PlayerTemp[playerid][pt_GLOBAL_TIMER] = gettime();
        ResetPlayerWeapons(playerid);
        ResetPlayerMoney(playerid);
        GivePlayerMoney(playerid, PI[playerid][pCASH]);
        SetPlayerFightingStyle(playerid, PI[playerid][pFIGHT_STYLE]);
        SetPlayerHealthEx(playerid, PI[playerid][pHEALTH]);
        SetPlayerArmourEx(playerid, PI[playerid][pARMOUR]);
        SetPlayerVirtualWorld(playerid, 0);
        SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pSKIN], PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], 0, 0, 0, 0, 0, 0);
        SetPlayerInterior(playerid, PI[playerid][pINTERIOR]);
        RegisterNewPlayer(playerid);
		return 1;
	}

	if(IsPlayerInPlayButton(playerid))
	{
		for(new i = 0; i != 4; i ++)
		{
			if(clickedid == Textdraws[textdraw_PLAY][i])
			{
				HidePlayerPlayButton(playerid);

				/*TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][1]);
				TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][2]);
				TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][3]);*/

				if(PlayerTemp[playerid][pt_USER_EXIST])
				{
					if(!strcmp(PlayerTemp[playerid][pt_IP], PI[playerid][pIP]))
					{
						SendClientMessage(playerid, PRIMARY_COLOR2, "[*] {ffffff}Tu direccion IP no ha cambiado desde tu ultima conexion.");
						OnPlayerLoginCheckPass(playerid, true);
					}
					else
					{
						ShowDialog(playerid, DIALOG_LOGIN);
					}
				}
				else ShowDialog(playerid, DIALOG_REGISTER);
			}
		}
		return 1;
	}

	return Y_HOOKS_CONTINUE_RETURN_1;
}

public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid)
{
	if(PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED])
	{
		if(playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2]) //Anterior
		{
			if(PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] == 0) PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] = sizeof(PROPERTY_INTERIORS) - 1;
			else PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] --;
			UpdatePlayerPropertyContructor(playerid);
			return 1;
		}
		else if(playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3]) //Siguiente
		{
			if(PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] == (sizeof(PROPERTY_INTERIORS) - 1)) PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] = 0;			
			else PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ++;
			UpdatePlayerPropertyContructor(playerid);
			return 1;
		}
		else if(playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4]) //Crear
		{
			Create_PlayerPropertyConstructo(playerid);
			return 1;
		}
		else if(playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5]) //Cancelar
		{
			ExitPlayerPropertyConstructor(playerid);
			return 1;
		}
		return 1;
	}
	
	if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return 0;
	
	if(PlayerTemp[playerid][pt_CLOTHING_SHOP] != -1)
	{
		if(playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]) // Comprar
		{
			new clothe_info[3];
			switch(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Binco_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Binco_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_VIPBURBAN:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Suburban_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Suburban_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Prolaps_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Prolaps_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Didier_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Didier_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Victim_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Victim_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE: clothe_info = Zip_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Zip_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
			}
			
			if(PI[playerid][pCASH] >= clothe_info[2])
			{
				if(GivePlayerCash(playerid, -clothe_info[2], true, true)) {
					PI[playerid][pSKIN] = clothe_info[0];
					
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "Gracias por comprar ropa en %s, vuelva pronto.", Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_NAME]);
					
					ClosePlayerClothingMenu(playerid);
					ExitPlayerWardrobe(playerid);
				}
			}
			else
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "No tienes dinero suficiente, te faltan %s$ para poder comprar esta ropa.", number_format_thousand(clothe_info[2] - PI[playerid][pCASH]));
			}
			return 1;
		}
		else if(playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]) // Siguiente
		{
			PlayerPlaySoundEx(playerid, 1052, 0.0, 0.0, 0.0);
			
			switch(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Binco_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Binco_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_VIPBURBAN:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Suburban_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Suburban_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Prolaps_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Prolaps_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Didier_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Didier_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Victim_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Victim_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Zip_Shop_Male_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Zip_Shop_Female_Skins) - 1)) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
			}
			
			UpdateClothingShop(playerid);
			return 1;
		}
		else if(playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]) // Anterior
		{
			PlayerPlaySoundEx(playerid, 1053, 0.0, 0.0, 0.0);
			
			switch(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Binco_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Binco_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_VIPBURBAN:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Suburban_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Suburban_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Prolaps_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Prolaps_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Didier_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Didier_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Victim_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Victim_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pGENDER])
					{
						case SEX_MALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Zip_Shop_Male_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if(PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Zip_Shop_Female_Skins) - 1;
							else PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
			}
			
			UpdateClothingShop(playerid);
			return 1;
		}
	}
    return 1;
}

UpdateReputationTextDraws(playerid)
{
	new neccessary_rep = PI[playerid][pLEVEL] * REP_MULTIPLIER, str[64];
	format(str, sizeof str, "Nivel_%d_Exp_%d/%d", PI[playerid][pLEVEL], PI[playerid][pREP], neccessary_rep);
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], str);
	return 1;
}

forward AddPlayerReputation(playerid);
public AddPlayerReputation(playerid)
{
	new neccessary_rep = PI[playerid][pLEVEL] * REP_MULTIPLIER;

	if(PI[playerid][pREP] >= neccessary_rep)
	{
		PI[playerid][pREP] = 1;
		PI[playerid][pLEVEL] ++;
		UpdateReputationTextDraws(playerid);
		SetPlayerSkillLevels(playerid);
		
		SendInfoMessagef(playerid, "~g~¡Felicidades!~n~~n~~w~Has subido al ~y~Nivel %d~w~ por tu actividad en "SERVER_SHORT_NAME".~n~~n~", PI[playerid][pLEVEL]);
		SetPlayerScore(playerid, PI[playerid][pLEVEL]);
		PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);

		ShowPlayerHudInfo(playerid);
		
		PI[playerid][pTIME_FOR_REP] = TIME_FOR_REP;
		PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[playerid][pTIME_PLAYING], PI[playerid][pLEVEL], PI[playerid][pREP], TIME_FOR_REP, PI[playerid][pPAYDAY_REP], PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
		
		KillTimer(PlayerTemp[playerid][pt_TIMERS][2]);
		PlayerTemp[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pTIME_FOR_REP], false, "i", playerid);
		return 1;
	}

	PI[playerid][pREP] ++;
	UpdateReputationTextDraws(playerid);
	
	PI[playerid][pPAYDAY_REP] ++;
	if(PI[playerid][pPAYDAY_REP] >= REP_FOR_PAYDAY)
	{
		PlayerPayday(playerid);
		PI[playerid][pPAYDAY_REP] = 0;
	}
	
	ShowPlayerHudInfo(playerid);

	PI[playerid][pTIME_FOR_REP] = TIME_FOR_REP;
	PlayerTemp[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[playerid][pTIME_PLAYING], PI[playerid][pLEVEL], PI[playerid][pREP], TIME_FOR_REP, PI[playerid][pPAYDAY_REP], PI[playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	KillTimer(PlayerTemp[playerid][pt_TIMERS][2]);
	PlayerTemp[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pTIME_FOR_REP], false, "i", playerid);
	return 1;
}

stock SetPlayerCash(playerid, amount, bool:update = true)
{
	PI[playerid][pCASH] = amount;
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pCASH]);
	
	if(update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET cash = %d WHERE id = %d;", PI[playerid][pCASH], PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

stock GivePlayerCash(playerid, amount, bool:update = true, bool:negative = false)
{
	if(amount == 0) return 1;
	if(!negative && amount < 0) return 0;
	if(negative && amount > 0) return 0;
	if(negative && (PI[playerid][pCASH] + amount) < 0) return 0;

	PI[playerid][pCASH] += amount;
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pCASH]);
	
	if(update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET cash = %d WHERE id = %d;", PI[playerid][pCASH], PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

stock GivePlayerBlackCash(playerid, amount, bool:update = true, bool:negative = false)
{
	if(amount == 0) return 1;
	if(!negative && amount < 0) return 0;
	if(negative && amount > 0) return 0;
	if(negative && (PI[playerid][pBLACK_CASH] + amount) < 0) return 0;

	PI[playerid][pBLACK_CASH] += amount;
	
	if(update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET black_cash = %d WHERE id = %d;", PI[playerid][pBLACK_CASH], PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

LoadEnterExits()
{
	new total_enterexits, label_str[512], info[3];
		
	for(new i = 0; i != sizeof ENTER_EXIT; i ++)
	{
		ENTER_EXIT[total_enterexits][ee_ID] = total_enterexits + 1;

		format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%s\n{FFFFFF}{"#GOLD_COLOR"}Acercate {ffffff}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar", ENTER_EXIT[total_enterexits][ee_NAME]);

		ENTER_EXIT[total_enterexits][ee_INT_LABEL_ID] = CreateDynamic3DTextLabel("{"#RED_COLOR"}Salida\n{FFFFFF}"COME_INTERACTION_MESSAGE"o pulsa {"#PRIMARY_COLOR"}'Y' {FFFFFF}para salir", 0xFFFFFFFF, ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z] + 0.25, 10.0, .testlos = true, .worldid = ENTER_EXIT[total_enterexits][ee_INT_WORLD], .interiorid = ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		ENTER_EXIT[total_enterexits][ee_EXT_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z] + 0.25, 10.0, .testlos = true, .worldid = ENTER_EXIT[total_enterexits][ee_EXT_WORLD], .interiorid = ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);
		
		if(ENTER_EXIT[total_enterexits][ee_INT_MAPICON] != -1) ENTER_EXIT[total_enterexits][ee_INT_MAPICON_ID] = CreateDynamicMapIcon(ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z], ENTER_EXIT[total_enterexits][ee_INT_MAPICON], -1, ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		if(ENTER_EXIT[total_enterexits][ee_EXT_MAPICON] != -1) ENTER_EXIT[total_enterexits][ee_EXT_MAPICON_ID] = CreateDynamicMapIcon(ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z], ENTER_EXIT[total_enterexits][ee_EXT_MAPICON], -1, ENTER_EXIT[total_enterexits][ee_EXT_WORLD], ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);
		
		ENTER_EXIT[total_enterexits][ee_INT_PICKUP_ID] = CreateDynamicPickup(0, 1, ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z], ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		ENTER_EXIT[total_enterexits][ee_EXT_PICKUP_ID] = CreateDynamicPickup(19607, 1, ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z] - 0.35, ENTER_EXIT[total_enterexits][ee_EXT_WORLD], ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);

		info[0] = PICKUP_TYPE_ENTER_EXIT;
		info[1] = total_enterexits; // Index
		info[2] = 1; // Pickup Interior
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, ENTER_EXIT[total_enterexits][ee_INT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

		info[0] = PICKUP_TYPE_ENTER_EXIT;
		info[1] = total_enterexits; // Index
		info[2] = 2; // Pickup Exterior
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, ENTER_EXIT[total_enterexits][ee_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
		ENTER_EXIT[total_enterexits][ee_MAIN_ACTOR] = CreateInteriorActor(ENTER_EXIT[total_enterexits][ee_INTERIOR_TYPE], ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);

		//textdraw intimidacion
		if(ENTER_EXIT[total_enterexits][ee_ROBBABLE]) {
			ENTER_EXIT[total_enterexits][ee_TEXTDRAW] = TextDrawCreate(320.000000, 406.000000, "Intimidacion:_0.00%%");
			TextDrawLetterSize(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 0.286000, 1.276444);
			TextDrawAlignment(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 2);
			TextDrawColor(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], -76);
			TextDrawSetShadow(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 0);
			TextDrawSetOutline(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 0);
			TextDrawBackgroundColor(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 255);
			TextDrawFont(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 1);
			TextDrawSetProportional(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 1);
			TextDrawSetShadow(ENTER_EXIT[total_enterexits][ee_TEXTDRAW], 0);
		}
		
		total_enterexits ++;
	}
	return 1;
}

CreatePropertyInfo(i, pid)
{
	if(PROPERTY_INFO[i][property_EXT_LABEL_ID] != Text3D:INVALID_STREAMER_ID)
	{
		DestroyDynamic3DTextLabel(PROPERTY_INFO[i][property_EXT_LABEL_ID]);
		PROPERTY_INFO[i][property_EXT_LABEL_ID] = Text3D:INVALID_STREAMER_ID;
	}
	if(PROPERTY_INFO[i][property_INT_LABEL_ID] != Text3D:INVALID_STREAMER_ID)
	{
		DestroyDynamic3DTextLabel(PROPERTY_INFO[i][property_INT_LABEL_ID]);
		PROPERTY_INFO[i][property_INT_LABEL_ID] = Text3D:INVALID_STREAMER_ID;
	}
	if(PROPERTY_INFO[i][property_EXT_PICKUP_ID] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PROPERTY_INFO[i][property_EXT_PICKUP_ID]);
		PROPERTY_INFO[i][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
	}
	if(PROPERTY_INFO[i][property_INT_PICKUP_ID] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PROPERTY_INFO[i][property_INT_PICKUP_ID]);
		PROPERTY_INFO[i][property_INT_PICKUP_ID] = INVALID_STREAMER_ID;
	}

	new info[3], label_str[512], pickup_modelid;
	if(pid)
	{
		pickup_modelid = 0;
		PROPERTY_INFO[i][property_SOLD] = true;
		PROPERTY_INFO[i][property_OWNER_ID] = pid;
		format(label_str, sizeof label_str, "Propiedad {"#PRIMARY_COLOR"}#%d\n\n{FFFFFF}Descripcion: {"#PRIMARY_COLOR"}%s\n{"#GOLD_COLOR"}Acercate {FFFFFF}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_DESCRIPTION]);
	}
	else
	{
		pickup_modelid = 1273;
		PROPERTY_INFO[i][property_SOLD] = false;
		PROPERTY_INFO[i][property_OWNER_ID] = 0;
		format(PROPERTY_INFO[i][property_NAME], 24, "Propiedad %d", PROPERTY_INFO[i][property_ID]);
		if(PROPERTY_INFO[i][property_VIP_LEVEL])
		{
			if(PROPERTY_INFO[i][property_EXTRA]) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Membresía VIP requerida\n\n{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n{FFFFFF}Nivel necesario: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], PROPERTY_INFO[i][property_EXTRA], PROPERTY_INFO[i][property_LEVEL]);
			else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Membresía VIP requerida\n\n{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]);
		}
		else
		{
			if(PROPERTY_INFO[i][property_EXTRA]) format(label_str, sizeof label_str, "{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n{FFFFFF}Nivel necesario: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], PROPERTY_INFO[i][property_EXTRA], PROPERTY_INFO[i][property_LEVEL]);
			else format(label_str, sizeof label_str, "{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\n{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]);
		}
	}
	
	PROPERTY_INFO[i][property_EXT_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z] + 0.25, 5.0, .testlos = true, .worldid = 0, .interiorid = PROPERTY_INFO[i][property_EXT_INTERIOR]);

	new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Z];
	
	PROPERTY_INFO[i][property_INT_LABEL_ID] = CreateDynamic3DTextLabel("Presiona {"#PRIMARY_COLOR"}Y {FFFFFF}para salir\n\nEscribe {"#PRIMARY_COLOR"}/casa {FFFFFF}para más opciones", 0xFFFFFFFF, PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Y], z_pos + 0.25, 3.0, .testlos = true, .worldid = PROPERTY_INFO[i][property_ID], .interiorid = PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_INTERIOR]);

	PROPERTY_INFO[i][property_EXT_PICKUP_ID] = CreateDynamicPickup(pickup_modelid, 1, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z], 0, PROPERTY_INFO[i][property_EXT_INTERIOR]);
	PROPERTY_INFO[i][property_INT_PICKUP_ID] = CreateDynamicPickup(0, 1, PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INFO[i][property_ID], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_INTERIOR]);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = i; // Index
	info[2] = 1; // Pickup Interior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_INT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = i; // Index
	info[2] = 2; // Pickup Exterior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

	PROPERTY_INFO[i][property_POLICE_FORCING] = false;
	PROPERTY_INFO[i][property_POLICE_FORCED] = false;
	PROPERTY_INFO[i][property_POLICE_FORCE_TIMER] = -1;
	return 1;
}

forward OnPropertiesLoaded();
callbackp:LoadProperties()
{
	new rows;
	if(cache_get_row_count(rows))
	{
		for(new i = 0; i != rows; i ++)
		{
			if(i >= MAX_PROPERTIES)
			{
				printf("---> Límite superado en array 'PROPERTY_INFO' al intentar cargar de la base de datos.");
				break;
			}

			TOTAL_PROPERTIES_LOADED ++;

			new bool:isnull_name;
			PROPERTY_INFO[i][property_VALID] = true;
			cache_get_value_name_int(i, "id", PROPERTY_INFO[i][property_ID]);
			cache_is_value_name_null(i, "name", isnull_name);
			if(!isnull_name) cache_get_value_name(i, "name", PROPERTY_INFO[i][property_NAME]);
			cache_get_value_name_float(i, "ext_x", PROPERTY_INFO[i][property_EXT_X]);
			cache_get_value_name_float(i, "ext_y", PROPERTY_INFO[i][property_EXT_Y]);
			cache_get_value_name_float(i, "ext_z", PROPERTY_INFO[i][property_EXT_Z]);
			cache_get_value_name_float(i, "ext_angle", PROPERTY_INFO[i][property_EXT_ANGLE]);
			cache_get_value_name_int(i, "ext_interior", PROPERTY_INFO[i][property_EXT_INTERIOR]);
			cache_get_value_name_int(i, "ext_freeze", PROPERTY_INFO[i][property_EXT_FREEZE]);
			cache_get_value_name_int(i, "id_interior", PROPERTY_INFO[i][property_ID_INTERIOR]);
			cache_get_value_name_int(i, "price", PROPERTY_INFO[i][property_PRICE]);
			cache_get_value_name_int(i, "level", PROPERTY_INFO[i][property_LEVEL]);
			cache_get_value_name_int(i, "extra", PROPERTY_INFO[i][property_EXTRA]);
			cache_get_value_name_int(i, "vip_level", PROPERTY_INFO[i][property_VIP_LEVEL]);
			cache_get_value_name(i, "description", PROPERTY_INFO[i][property_DESCRIPTION]);

			if(PROPERTY_INFO[i][property_EXTRA]) PROPERTY_INFO[i][property_PRICE] = 0;
			if(PROPERTY_INFO[i][property_VIP_LEVEL]) PROPERTY_INFO[i][property_LEVEL] = 1;

			new id_player, bool:isnull_id_player;
			cache_is_value_name_null(i, "id_player", isnull_id_player);
			if(!isnull_id_player) cache_get_value_name_int(i, "id_player", id_player);

			if(id_player) CreatePropertyInfo(i, id_player);
			else CreatePropertyInfo(i, 0);

			inline OnPropertyClosetLoad()
			{
				new crows;
				if(cache_get_row_count(crows))
				{
					for(new x = 0; x != crows; x ++)
					{
						PROPERTY_CLOSET[i][x][property_closet_VALID] = true;
						cache_get_value_name_int(x, "id", PROPERTY_CLOSET[i][x][property_closet_OBJECT_ID]);
						cache_get_value_name_int(x, "type", PROPERTY_CLOSET[i][x][property_closet_TYPE]);
						cache_get_value_name_int(x, "int", PROPERTY_CLOSET[i][x][property_closet_INT]);
						cache_get_value_name_int(x, "int_extra", PROPERTY_CLOSET[i][x][property_closet_INT_EXTRA]);
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM property_closet WHERE id_property = %d LIMIT %d;", PROPERTY_INFO[i][property_ID], MAX_CLOSET_SLOTS);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPropertyClosetLoad);
		}
		CallLocalFunction("OnPropertiesLoaded", "");
	}
	return 1;
}

GetOwnerIntProperty(id_house)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PI[i][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
			{
				if(PI[i][pLOCAL_INTERIOR] == id_house)
				{
					return i;
				}
			}
		}
	}
	return -1;
}

callbackp:LoadCrews()
{
	new rows;
	if(cache_get_row_count(rows))
	{
		for(new i = 0; i != rows; i ++)
		{
			if(i >= MAX_CREWS)
			{
				printf("---> Límite superado en array 'CREW_INFO' al intentar cargar de la base de datos.");
				break;
			}

			CREW_INFO[i][crew_VALID] = true;
			cache_get_value_name_int(i, "id", CREW_INFO[i][crew_ID]);
			cache_get_value_name(i, "name", CREW_INFO[i][crew_NAME]);
			cache_get_value_name_int(i, "color", CREW_INFO[i][crew_COLOR]);
			CREW_INFO[i][crew_ONLINE_MEMBERS] = 0;

			//count
			inline OnCountQueryLoad()
			{
				new crows;
				if(cache_get_row_count(crows))
				{
					if(crows)
					{
						cache_get_value_index_int(0, 0, CREW_INFO[i][crew_MEMBERS]);
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d;", CREW_INFO[i][crew_ID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);

			//ranks
			inline OnCrewRanksLoad()
			{
				new crows;
				if(cache_get_row_count(crows))
				{
					for(new x = 0; x != crows; x ++)
					{
						new rank_pos;
						cache_get_value_name_int(x, "rank_pos", rank_pos);
						if(rank_pos < 0 || rank_pos > MAX_CREW_RANKS) continue;

						CREW_RANK_INFO[i][rank_pos][crew_rank_VALID] = true;
						cache_get_value_name_int(x, "id", CREW_RANK_INFO[i][rank_pos][crew_rank_ID]);
						cache_get_value_name(x, "rank_name", CREW_RANK_INFO[i][rank_pos][crew_rank_NAME]);
						cache_get_value_name_int(x, "permission0", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][0]);
						cache_get_value_name_int(x, "permission1", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][1]);
						cache_get_value_name_int(x, "permission2", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][2]);
						cache_get_value_name_int(x, "permission3", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][3]);
						cache_get_value_name_int(x, "permission4", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][4]);
						cache_get_value_name_int(x, "permission5", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][5]);
						cache_get_value_name_int(x, "permission6", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][6]);

						if(rank_pos == 0) 
						{
							for(new j = 0; j < CREW_RANK_SIZE; j ++)
							{
								CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][j] = 1;
							}
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM crew_ranks WHERE id_crew = %d;", CREW_INFO[i][crew_ID]);
			mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewRanksLoad);
		}
	}
	return 1;
}


callbackp:LoadGangZones()
{
	new rows;
	if(cache_get_row_count(rows))
	{
		for(new i = 0; i != rows; i ++)
		{
			if(i >= MAX_TERRITORIES)
			{
				printf("---> Límite superado en array 'TERRITORIES' al intentar cargar de la base de datos.");
				break;
			}

			new crewid, color, bool:isnull_crewid;
			TERRITORIES[i][territory_VALID] = true;
			cache_get_value_name_int(i, "id", TERRITORIES[i][territory_ID]);
			cache_get_value_name_float(i, "min_x", TERRITORIES[i][territory_MIN_X]);
			cache_get_value_name_float(i, "min_y", TERRITORIES[i][territory_MIN_Y]);
			cache_get_value_name_float(i, "max_x", TERRITORIES[i][territory_MAX_X]);
			cache_get_value_name_float(i, "max_y", TERRITORIES[i][territory_MAX_Y]);
			cache_is_value_name_null(i, "id_crew", isnull_crewid);
			if(!isnull_crewid) 
			{
				cache_get_value_name_int(i, "id_crew", crewid);
				cache_get_value_name_int(i, "color", color);
			}
			TERRITORIES[i][territory_WAR] = false;
			TERRITORIES[i][territory_ATTACKER_CREW_INDEX] = 0;

			if(crewid)
			{
				TERRITORIES[i][territory_OCCUPIED] = true;
				TERRITORIES[i][territory_CREW_ID] = crewid;
				
				new r, g, b, a;
				HexToRGBA(color, r, g, b, a);
				TERRITORIES[i][territory_COLOR] = RGBAToHex(r, g, b, 135);
				TERRITORIES[i][territory_CREW_INDEX] = GetCrewIndexById(crewid);
			}
			else
			{
				TERRITORIES[i][territory_OCCUPIED] = false;
				TERRITORIES[i][territory_CREW_ID] = 0;
				TERRITORIES[i][territory_CREW_INDEX] = 0;
				TERRITORIES[i][territory_COLOR] = 0xCCCCCC55;
			}

			new city[445], zone[445];
			GetPointZone(TERRITORIES[i][territory_MIN_X], TERRITORIES[i][territory_MAX_Y], city, zone);
			format(TERRITORIES[i][territory_NAME], 64, "%s", city);
		
			TERRITORIES[i][territory_AREA] = CreateDynamicRectangle(TERRITORIES[i][territory_MIN_X], TERRITORIES[i][territory_MIN_Y], TERRITORIES[i][territory_MAX_X], TERRITORIES[i][territory_MAX_Y], 0, 0);
			
			new info[2];
			info[0] = AREA_TYPE_GANGZONE;
			info[1] = i;
			Streamer_SetArrayData(STREAMER_TYPE_AREA, TERRITORIES[i][territory_AREA], E_STREAMER_EXTRA_ID, info);
			TERRITORIES[i][territory_GANG_ZONE] = GangZoneCreate(TERRITORIES[i][territory_MIN_X], TERRITORIES[i][territory_MIN_Y], TERRITORIES[i][territory_MAX_X], TERRITORIES[i][territory_MAX_Y]);
			
			TERRITORIES[i][territory_TEXTDRAW] = TextDrawCreate(320.000000, 406.000000, "Conquista:_0");
			TextDrawLetterSize(TERRITORIES[i][territory_TEXTDRAW], 0.286000, 1.276444);
			TextDrawAlignment(TERRITORIES[i][territory_TEXTDRAW], 2);
			TextDrawColor(TERRITORIES[i][territory_TEXTDRAW], -76);
			TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW], 0);
			TextDrawSetOutline(TERRITORIES[i][territory_TEXTDRAW], 0);
			TextDrawBackgroundColor(TERRITORIES[i][territory_TEXTDRAW], 255);
			TextDrawFont(TERRITORIES[i][territory_TEXTDRAW], 1);
			TextDrawSetProportional(TERRITORIES[i][territory_TEXTDRAW], 1);
			TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW], 0);
		}
		CallLocalFunction("OnTerritoriesLoaded", "");
	}
	return 1;
}

GetCrewIndexById(id)
{
	for(new x = 0; x != MAX_CREWS; x ++)
	{
		if(!CREW_INFO[x][crew_VALID]) continue;
		
		if(CREW_INFO[x][crew_ID] == id)
		{
			return x;
		}
	}
	return -1;
}

#define NECESSARY_TIME_BETWEEN_WORKS	600 //segundos
#define NECESSARY_TIME_BETWEEN_PICKUPS 	8 //segundos

public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{
	PlayerTemp[playerid][pt_LAST_PICKUP_ID] = pickupid;

	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(PlayerTemp[playerid][pt_LAST_PICKUP_ID] == 0) return 1;
	
	if(gettime() < PlayerTemp[playerid][pt_PICKUP_TIMER] + NECESSARY_TIME_BETWEEN_PICKUPS) return 1;
	if(PlayerTemp[playerid][pt_PLAYER_IN_ATM]) return 1;
	if(PlayerTemp[playerid][pt_DIALOG_OPENED]) return 1;

	new info[3];
	new Float:pos[3];
	Streamer_GetArrayData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	if(info[0] == PICKUP_TYPE_NONE) return 1;

	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_X, pos[0]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Y, pos[1]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Z, pos[2]);

	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return 1;

	switch(info[0])
	{
		case PICKUP_TYPE_ENTER_EXIT: EnterExit(playerid);
		case PICKUP_TYPE_PROPERTY: EnterExit(playerid);
		case PICKUP_TYPE_CLOTHING_SHOP: ShowDialog(playerid, DIALOG_CLOTHES);
		case PICKUP_TYPE_FAST_FOOD:
		{
			switch(Fast_Food_Positions[info[1]][fast_food_INTERIOR_TYPE])
			{
				case INTERIOR_BURGER_SHOT: ShowDialog(playerid, DIALOG_FOOD_BURGER);
				case INTERIOR_PIZZA: ShowDialog(playerid, DIALOG_FOOD_PIZZA);
				case INTERIOR_CLUCKIN_BELL: ShowDialog(playerid, DIALOG_FOOD_CLUCKIN);
				case -1: ShowDialog(playerid, DIALOG_FOOD_BURGER);
			}
		}
		case PICKUP_TYPE_BANK:
		{
			if(PlayerTemp[playerid][pt_INTERIOR_INDEX] != -1 && ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_NO_INFO)
			{
				if(PI[playerid][pBANK_ACCOUNT] == 0) // no tiene cuenta bancaria
				{
					ShowDialog(playerid, DIALOG_CREATE_BANK_ACCOUNT);
				}
				else ShowDialog(playerid, DIALOG_BANK);
			}
		}
		case PICKUP_TYPE_ATM:
		{
			if(PI[playerid][pBANK_ACCOUNT] == 0) SendMessage(playerid, "No tienes cuenta bancaria, puedes crearla en cualquier Banco.");
			else
			{
				PlayerTemp[playerid][pt_PLAYER_IN_ATM] = true;
				ShowDialog(playerid, DIALOG_BANK);
			}
		}
		case PICKUP_TYPE_BUY_PROPERTY:
		{
			PlayerTemp[playerid][pt_DIALOG_OPENED] = true;
			if(PI[playerid][pBANK_ACCOUNT] == 0) SendMessage(playerid, "No tienes cuenta bancaria."); 
			else ShowDialog(playerid, DIALOG_BUY_PROPERTY);
		}
		case PICKUP_TYPE_PRODUCT_LIST:
		{
			if(PlayerTemp[playerid][pt_INTERIOR_INDEX] != -1 && ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_247)
			{
				PlayerTemp[playerid][pt_DIALOG_OPENED] = true;
				ShowDialog(playerid, DIALOG_247_LIST);
			}
		}
		case PICKUP_TYPE_CITYHALL_OPTIONS:
		{
			if(PlayerTemp[playerid][pt_INTERIOR_INDEX] != -1 && ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_CITY_HALL_LS)
			{
				if(PI[playerid][pLEVEL] >= 3)
				{
					if(PI[playerid][pBANK_ACCOUNT] == 0) SendMessage(playerid, "Necesitas tener una cuenta bancaria para poder realizar estas operaciones.");
					else ShowDialog(playerid, DIALOG_CITYHALL_OPTIONS);
				}
				else SendMessage(playerid, "Debes ser al menos nivel 3.");
			}
		}
		case PICKUP_TYPE_POLICE_WORK:
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
				{
					SendMessagef(playerid, "Sal de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
				}
				else
				{
					if(!PlayerTemp[playerid][pt_WORKING_IN])
					{
						PlayerTemp[playerid][pt_DIALOG_OPENED] = true;
						ShowDialog(playerid, DIALOG_SELECT_POLICE_DIVISION); //DIALOG_SELECT_POLICE_SKIN
					}
					else
					{
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pweapons WHERE id_player = %d;", PI[playerid][pID]);
						mysql_tquery(handle_db, QUERY_BUFFER);
						ResetPlayerWeaponsEx(playerid);

						CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
					}
				}
			}
			else SendMessage(playerid, "No eres policía.");
		}
		case PICKUP_TYPE_EQUIPMENT:
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) SendMessage(playerid, "No estas de servicio como policia.");
				else
				{
					PlayerTemp[playerid][pt_DIALOG_OPENED] = true;
					ShowDialog(playerid, DIALOG_POLICE_EQUIPMENT);
				}
			}
			else SendMessage(playerid, "No eres policía.");
		}
		case PICKUP_TYPE_OBTAIN_WORK:
		{
			if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
			{
				if(PI[playerid][pWANTED_LEVEL] > 0) SendMessage(playerid, "No puedes obtener un trabajo cuando estás en busqueda.");
				else
				{
					if(gettime() < PlayerTemp[playerid][pt_LAST_GOT_WORK_TIME] + NECESSARY_TIME_BETWEEN_WORKS)
					{
						new time = NECESSARY_TIME_BETWEEN_WORKS - (gettime() - PlayerTemp[playerid][pt_LAST_GOT_WORK_TIME]);
						SendMessagef(playerid, "Debes de esperar %s minutos para conseguir otro trabajo.", TimeConvert(time));
					}
					else
					{
						new player_jobs = CountPlayerJobs(playerid), bool:setwork;
						if(PI[playerid][pVIP])
						{
							if(player_jobs >= MAX_VIP_WORKS)
							{
								SendMessagef(playerid, "Actualmente tienes %d trabajos, usa /renunciar para dejar un trabajo.", player_jobs);
								setwork = false;
							}
							else setwork = true;
						}
						else
						{
							if(player_jobs >= MAX_NU_WORKS)
							{
								SendMessagef(playerid, "Actualmente tienes %d trabajos, usa /renunciar para dejar un trabajo.", player_jobs);
								setwork = false;
							}
							else setwork = true;
						}

						if(setwork)
						{
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1;", PI[playerid][pID], info[1]);
							mysql_tquery(handle_db, QUERY_BUFFER);
					
							PLAYER_WORKS[playerid][info[1]][pwork_SET] = 1;
							SendClientMessagef(playerid, PRIMARY_COLOR2, "[Nuevo mensaje recibido] {FFFFFF}Bienvenido al trabajo de {"#GOLD_COLOR"}%s.", work_info[info[1]][work_info_NAME]);
							SendClientMessage(playerid, PRIMARY_COLOR2, "[*] {ffffff}Puedes utilizar {"#PURPLE_COLOR"}/ayuda trabajos {FFFFFF}para ver como trabajar aquí.");
						
							PlayerTemp[playerid][pt_LAST_GOT_WORK_TIME] = gettime();
						}
					}
				}
			}
			else SendClientMessagef(playerid, -1, "Debes estar a pie.");
		}
		case PICKUP_TYPE_HELP:
		{
			ShowDialog(playerid, DIALOG_HELP);
		}
		case PICKUP_TYPE_FUELSTATION:
		{
			ShowDialog(playerid, DIALOG_FUEL_STATION);
		}
		case PICKUP_TYPE_PHARMACY:
		{
			ShowPharmacyDialog(playerid, DIALOG_PHARMACY);
		}
		case PICKUP_TYPE_ELEVATOR:
		{
			PlayerTemp[playerid][pt_ELEVATOR_INDEX] = info[1];
			PlayerTemp[playerid][pt_ELEVATOR_OPTION] = info[2];
			ShowDialog(playerid, DIALOG_CONFIRM_ELEVATOR);
		}
		case PICKUP_TYPE_DRIVING_EXAM:
		{
			if(PlayerTemp[playerid][pt_DL_EXAM]) SendMessage(playerid, "Ya estás en el examen, sal afuera y toma un vehículo para empezar con el examen.");
			else
			{
				if(PI[playerid][pDRIVE_LICENSE_POINTS] > 6) SendMessage(playerid, "Para renovar tu licencia debes tener 6 puntos o menos.");
				else ShowDialog(playerid, DIALOG_DRIVING_EXAM);	
			}
		}
		case PICKUP_TYPE_DS_VEHICLE:
		{
			if(pTemp(playerid)[pt_VEHICLE_SPAWNED] != INVALID_VEHICLE_ID)
			{
				ClearVehicleGlobalInfo(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
				DestroyVehicleEx(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
				pTemp(playerid)[pt_VEHICLE_SPAWNED] = INVALID_VEHICLE_ID;
			}

			if(PlayerTemp[playerid][pt_DL_EXAM])
			{
				new vehicle_id = INVALID_VEHICLE_ID;
				vehicle_id = CreateVehicle(551, 1064.2238, -1736.8141, 13.4836, 270.0, 3, 3, -1, false);
				if(vehicle_id == INVALID_VEHICLE_ID) return SendMessage(playerid, "No se pueden crear mas vehiculos, Intenta de nuevo mas tarde...");
				
				pTemp(playerid)[pt_VEHICLE_SPAWNED] = vehicle_id;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_DRIVING_SCHOOL;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = 551;
				format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "ESCUELA-%04d", getRandomLetter(), getRandomLetter(), getRandomLetter(), random(9999));
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = 1064.2238;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = -1736.8141;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = 13.4836;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = 270.0;
				
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
				
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = 3;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = 3;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[ GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_MAX_GAS];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VIP] = 0;
				GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
				
				SetVehicleToRespawnEx(vehicle_id);
				PutPlayerInVehicleEx(playerid, vehicle_id, 0);
			}
			else
			{
				SendMessage(playerid, "No estas en el examen, entra a la auto escuela.");
			}
		}
		case PICKUP_TYPE_DS_BRIBE:
		{
			if(PlayerTemp[playerid][pt_DL_EXAM]) SendMessage(playerid, "Ya estás en el examen, sal afuera y toma un vehículo para empezar con el examen.");
			else
			{
				if(PI[playerid][pDRIVE_LICENSE_POINTS] >= 2) SendMessage(playerid, "No es necesario sobornar al instructor.");
				else
				{
					ShowDialog(playerid, DIALOG_DRIVING_SCHOOL_BRIBE);
				}
			}
		}
		case PICKUP_TYPE_BLACK_MARKET:
		{
			ShowDialog(playerid, DIALOG_BLACK_MARKET);
		}
		case PICKUP_TYPE_POLICE_VEHICLES:
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) SendMessage(playerid, "No estas de servicio como policia.");
				else
				{
					PlayerTemp[playerid][pt_VEHICLE_SPAWN_INDEX] = info[1];
					ShowMenu(playerid, MENU_SELECT_POLICE_VEHICLE);
				}
			}
			else SendMessage(playerid, "No eres policía.");
		}
	}

	PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
	return 1;
} //No usar return en los pickups, porfavor.

hook OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return 1;
	
	if(newkeys &  KEY_CTRL_BACK)
	{
		if(IsPlayerInDynamicArea(playerid, Farmer_Area))
		{
			for(new i = 0; i != MAX_PLANTS; i ++)
			{
				new Float:pos[3];
				GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);

				if(IsPlayerInRangeOfPoint(playerid, 1.5, pos[0], pos[1], pos[2]))
				{
					PC_EmulateCommand(playerid, "/recoger");
					return 1;
				}
			}
		}
	}
	else if(newkeys & KEY_FIRE)
	{
		if(PI[playerid][pLEVEL] == 1 && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT && GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_NONE) ApplyAnimation(playerid, "PED", "IDLE_tired", 4.1, false, false, false, false, 0);
	
		if(PlayerTemp[playerid][pt_CUFFED] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT && GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_CUFFED)
		{
			FreezePlayer(playerid, 500);
			ApplyAnimation(playerid, "PED", "IDLE_tired", 4.1, false, false, false, false, 0);
		}	
	}
	else if(newkeys & KEY_JUMP)
	{
		if(PlayerTemp[playerid][pt_CUFFED] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT && GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_CUFFED)
		{
			FreezePlayer(playerid, 500);
			ApplyAnimation(playerid, "PED", "IDLE_tired", 4.1, false, false, false, false, 0);
		}
	}
	else if(newkeys & KEY_CROUCH)
	{
		if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
		{
			if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
				for(new i = 0; i < sizeof Fuel_Stations; i++)
				{
					if(IsPlayerInRangeOfPoint(playerid, 5.0, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z]))
					{
						ShowDialog(playerid, DIALOG_FUEL_STATION);
						return 1;
					}
				}

				for(new i = 0; i != sizeof San_Andreas_Barriers; i ++)
				{
					if(IsPlayerInRangeOfPoint(playerid, San_Andreas_Barriers[i][barrier_DISTANCE], San_Andreas_Barriers[i][barrier_PLAYER_X], San_Andreas_Barriers[i][barrier_PLAYER_Y], San_Andreas_Barriers[i][barrier_PLAYER_Z]))
					{
						if(GetPlayerInterior(playerid) == San_Andreas_Barriers[i][barrier_INTERIOR] && GetPlayerVirtualWorld(playerid) == San_Andreas_Barriers[i][barrier_WORLD])
						{
							if(San_Andreas_Barriers[i][barrier_VEHICLE_TYPE] == VEHICLE_TYPE_WORK)
							{
								if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
								{
									if(San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN2] != WORK_NONE)
									{
										if(!PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][pwork_SET] && !PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN2] ][pwork_SET]) break;
									}
									else
									{
										if(!PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][pwork_SET]) break;
									}
								}
							}
							if(IsDynamicObjectMoving(San_Andreas_Barriers[i][barrier_OBJECT_ID]) && !San_Andreas_Barriers[i][barrier_CLOSING]) break;
							if(San_Andreas_Barriers[i][barrier_PRICE] > 0) {
								if(GivePlayerCash(playerid, -San_Andreas_Barriers[i][barrier_PRICE], false, true)) {
									SendClientMessagef(playerid, -1, "Has pagado el peaje por %s dolares.", number_format_thousand(San_Andreas_Barriers[i][barrier_PRICE]));
								}
								else {
									SendClientMessagef(playerid, -1, "No tienes suficiente dinero para pagar el peaje.");
									break;
								}
							}
							
							KillTimer(San_Andreas_Barriers[i][barrier_TIMER]);
							San_Andreas_Barriers[i][barrier_TIMER] = SetTimerEx("CloseBarrier", 5000, false, "i", i);
							MoveDynamicObject(San_Andreas_Barriers[i][barrier_OBJECT_ID], San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967 + 0.01, 0.0065, 0.0, 0.0, San_Andreas_Barriers[i][barrier_ROTATION]);
							San_Andreas_Barriers[i][barrier_CLOSING] = false;
							break;
						}
						else break;
					}
				}
			}
			
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				if(GetPlayerInterior(playerid) == 0 && GetPlayerVirtualWorld(playerid) == 0)
				{
					for(new i = 0; i != sizeof POLICE_GARAGE_DOORS; i ++)
					{
						if(IsPlayerInRangeOfPoint(playerid, 20.0, POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_X], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_Y], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_Z]))
						{
							if(IsDynamicObjectMoving(POLICE_GARAGE_DOORS[i][police_gdoor_OBJECT_ID]) && !POLICE_GARAGE_DOORS[i][police_gdoor_CLOSING]) break;
							
							KillTimer(POLICE_GARAGE_DOORS[i][police_gdoor_TIMER]);
							POLICE_GARAGE_DOORS[i][police_gdoor_TIMER] = SetTimerEx("ClosePoliceGarageDoor", 5000, false, "i", i);
							MoveDynamicObject(POLICE_GARAGE_DOORS[i][police_gdoor_OBJECT_ID], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_X], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_Y], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_Z], POLICE_GARAGE_DOORS[i][police_gdoor_MOVE_SPEED], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_RX], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_RY], POLICE_GARAGE_DOORS[i][police_gdoor_OPENED_RZ]);
							POLICE_GARAGE_DOORS[i][police_gdoor_CLOSING] = false;
							break;
						}
					}
				}
			}
		}
	}
	else if(newkeys & KEY_SECONDARY_ATTACK)
	{
		if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				for(new i = 0; i != sizeof POLICE_DOORS; i ++)
				{
					if(GetPlayerInterior(playerid) != POLICE_DOORS[i][police_door_INTERIOR] || GetPlayerVirtualWorld(playerid) != POLICE_DOORS[i][police_door_WORLD]) continue;
					if(IsDynamicObjectMoving(POLICE_DOORS[i][police_door_OBJECT_ID]) || !POLICE_DOORS[i][police_door_CLOSED]) continue;
					
					new Float:pos[4];
					
					pos[0] = POLICE_DOORS[i][police_door_X] + (1.0 * floatsin(-POLICE_DOORS[i][police_door_RZ], degrees));
					pos[1] = POLICE_DOORS[i][police_door_Y] + (1.0 * floatcos(-POLICE_DOORS[i][police_door_RZ], degrees));
					pos[2] = POLICE_DOORS[i][police_door_X] + (-1.0 * floatsin(-POLICE_DOORS[i][police_door_RZ], degrees));
					pos[3] = POLICE_DOORS[i][police_door_Y] + (-1.0 * floatcos(-POLICE_DOORS[i][police_door_RZ], degrees));
					
					if(IsPlayerInRangeOfPoint(playerid, 1.8, pos[0], pos[1], POLICE_DOORS[i][police_door_Z]))
					{
						KillTimer(POLICE_DOORS[i][police_door_TIMER]);
						POLICE_DOORS[i][police_door_TIMER] = SetTimerEx("ClosePoliceDoor", 3000, false, "i", i);
						MoveDynamicObject(POLICE_DOORS[i][police_door_OBJECT_ID], POLICE_DOORS[i][police_door_X], POLICE_DOORS[i][police_door_Y], POLICE_DOORS[i][police_door_Z] + 0.01, 0.0125, 0.0, 0.0, POLICE_DOORS[i][police_door_RZ] - 85.0);
						POLICE_DOORS[i][police_door_CLOSED] = false;
						break;
					}
					else if(IsPlayerInRangeOfPoint(playerid, 1.8, pos[2], pos[3], POLICE_DOORS[i][police_door_Z]))
					{
						KillTimer(POLICE_DOORS[i][police_door_TIMER]);
						POLICE_DOORS[i][police_door_TIMER] = SetTimerEx("ClosePoliceDoor", 3000, false, "i", i);
						MoveDynamicObject(POLICE_DOORS[i][police_door_OBJECT_ID], POLICE_DOORS[i][police_door_X], POLICE_DOORS[i][police_door_Y], POLICE_DOORS[i][police_door_Z] + 0.01, 0.0125, 0.0, 0.0, POLICE_DOORS[i][police_door_RZ] + 85.0);
						POLICE_DOORS[i][police_door_CLOSED] = false;
						break;
					}
				}
			}
		}
	}
	else if(newkeys & KEY_NO)
	{
		if(IsPlayerInDynamicArea(playerid, Lumberjack_Area))
		{
			if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_LUMBERJACK)
				{
					if(PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] == -1)
					{
						if(PlayerTemp[playerid][pt_PLAYER_CARRYING_TREE]) return SendClientMessage(playerid,-1, "{"#SILVER_COLOR"}Lleva la troncos cortada al punto marcado para talar más árboles.");
						
						for(new i = 0; i != sizeof LUMBER_TREES; i ++)
						{
							if(IsPlayerInRangeOfPoint(playerid, 2.0, LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z]))
							{
								if(LUMBER_TREES[i][lumber_tree_STATE] == LUMBER_TREE_STATE_NORMAL)
								{
									TogglePlayerControllableEx(playerid, false);
									SetCameraBehindPlayer(playerid);
									ApplyAnimation(playerid, "CHAINSAW", "WEAPON_csaw", 4.1, true, false, false, false, 0);
									LUMBER_TREES[i][lumber_tree_STATE] = LUMBER_TREE_STATE_CUTTING;
									PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] = i;
									
									RemovePlayerAttachedObject(playerid, 9);
									SetPlayerAttachedObject(playerid, 9, 341, 6);
									SetPlayerArmedWeapon(playerid, 0);
									
									new label_str[256];
									format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{FFFFFF}Talando... {"#SILVER_COLOR"}(%.1f%%)", PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE], 0.0);
									UpdateDynamic3DTextLabelText(LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_LABEL], -1, label_str);
									SetPlayerKeyPress(playerid, minrand(30, 50));
								}
								return Y_HOOKS_BREAK_RETURN_1;
							}
						}
					}
				}
			}
		}
	}
	else if(newkeys & KEY_YES) 
	{
		switch(GetPlayerState(playerid)) 
		{
			case PLAYER_STATE_DRIVER: 
			{
				PC_EmulateCommand(playerid, "/motor");
			}
			case PLAYER_STATE_ONFOOT:
			{
				new vehicleid = GetNearVehicle(playerid);
				if(vehicleid != INVALID_VEHICLE_ID)
				{
					if(IsPlayerWork(playerid, WORK_MECHANIC))
					{
						if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_MECHANIC)
						{
							PC_EmulateCommand(playerid, "/vmenu");
						}
					}
					return 1;
				}

				EnterExit(playerid);
			}
		}
	}
	return Y_HOOKS_CONTINUE_RETURN_1;
}

forward ClosePoliceDoor(i);
public ClosePoliceDoor(i)
{
	POLICE_DOORS[i][police_door_CLOSED] = true;
	MoveDynamicObject(POLICE_DOORS[i][police_door_OBJECT_ID], POLICE_DOORS[i][police_door_X], POLICE_DOORS[i][police_door_Y], POLICE_DOORS[i][police_door_Z], 0.0125, 0.0, 0.0, POLICE_DOORS[i][police_door_RZ]);
	return 1;
}

forward ClosePoliceGarageDoor(index);
public ClosePoliceGarageDoor(index)
{
	POLICE_GARAGE_DOORS[index][police_gdoor_CLOSING] = true;
	MoveDynamicObject(POLICE_GARAGE_DOORS[index][police_gdoor_OBJECT_ID], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_X], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_Y], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_Z], POLICE_GARAGE_DOORS[index][police_gdoor_MOVE_SPEED], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_RX], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_RY], POLICE_GARAGE_DOORS[index][police_gdoor_CLOSED_RZ]);
	return 1;
}

forward CloseBarrier(i);
public CloseBarrier(i)
{
	San_Andreas_Barriers[i][barrier_CLOSING] = true;
	MoveDynamicObject(San_Andreas_Barriers[i][barrier_OBJECT_ID], San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967, 0.0065, 0.0, -90.0, San_Andreas_Barriers[i][barrier_ROTATION]);
	return 1;
}

callbackp:EnterExit(playerid)
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(PlayerTemp[playerid][pt_LAST_PICKUP_ID] == 0) return 1;
	
	new info[3];
	new Float:pos[3];
	Streamer_GetArrayData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	if(info[0] == PICKUP_TYPE_NONE) return 1;

	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_X, pos[0]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Y, pos[1]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Z, pos[2]);

	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return 1;

	switch(info[0])
	{
		case PICKUP_TYPE_ENTER_EXIT:
		{
			if(info[2] == 1) // Está en el Pickup Interior y quiere ir al exterior
			{
				PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
				PI[playerid][pLOCAL_INTERIOR] = 0;
				PlayerTemp[playerid][pt_INTERIOR_INDEX] = -1;
				SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_EXT_X], ENTER_EXIT[info[1]][ee_EXT_Y], ENTER_EXIT[info[1]][ee_EXT_Z], ENTER_EXIT[info[1]][ee_EXT_ANGLE], ENTER_EXIT[info[1]][ee_EXT_INTERIOR], ENTER_EXIT[info[1]][ee_EXT_WORLD], false /*ENTER_EXIT[info[1]][ee_EXT_FREEZE]*/);
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
				StopAudioStreamForPlayer(playerid);
				FreezePlayer(playerid);
				CallLocalFunction("OnPlayerExitInterior", "ii", playerid, info[1]);

				PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
				PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
			}
			else if(info[2] == 2) // Está en el Pickup Exterior y quiere ir al interior
			{
				if(ENTER_EXIT[info[1]][ee_TIME_OPEN] == 0 && ENTER_EXIT[info[1]][ee_TIME_CLOSE] == 0) // 24 horas
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_INTERIOR;
					PI[playerid][pLOCAL_INTERIOR] = ENTER_EXIT[info[1]][ee_ID];
					PlayerTemp[playerid][pt_INTERIOR_INDEX] = info[1];
					SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_INT_X], ENTER_EXIT[info[1]][ee_INT_Y], ENTER_EXIT[info[1]][ee_INT_Z], ENTER_EXIT[info[1]][ee_INT_ANGLE], ENTER_EXIT[info[1]][ee_INT_INTERIOR], ENTER_EXIT[info[1]][ee_INT_WORLD], false /*ENTER_EXIT[info[1]][ee_INT_FREEZE]*/, true);
					FreezePlayer(playerid);
					CallLocalFunction("OnPlayerEnterInterior", "ii", playerid, info[1]);

					PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
					PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
				}
				else
				{
					if(is_open(GetMyWorldHour(), ENTER_EXIT[info[1]][ee_TIME_OPEN], ENTER_EXIT[info[1]][ee_TIME_CLOSE]))
					{
						PI[playerid][pSTATE] = ROLEPLAY_STATE_INTERIOR;
						PI[playerid][pLOCAL_INTERIOR] = ENTER_EXIT[info[1]][ee_ID];
						PlayerTemp[playerid][pt_INTERIOR_INDEX] = info[1];
						SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_INT_X], ENTER_EXIT[info[1]][ee_INT_Y], ENTER_EXIT[info[1]][ee_INT_Z], ENTER_EXIT[info[1]][ee_INT_ANGLE], ENTER_EXIT[info[1]][ee_INT_INTERIOR], ENTER_EXIT[info[1]][ee_INT_WORLD], false /*ENTER_EXIT[info[1]][ee_INT_FREEZE]*/, true);
						FreezePlayer(playerid);
						CallLocalFunction("OnPlayerEnterInterior", "ii", playerid, info[1]);

						PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();	
						PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;				
					}
					else 
					{
						if(ENTER_EXIT[info[1]][ee_TIME_OPEN] == -1 && ENTER_EXIT[info[1]][ee_TIME_CLOSE] == -1) SendMessagef(playerid, "%s abrirá proximamente.", ENTER_EXIT[info[1]][ee_NAME]);
						SendMessagef(playerid, "%s está cerrado, su horario es: %02d:00h - %02d:00h.", ENTER_EXIT[info[1]][ee_NAME], ENTER_EXIT[info[1]][ee_TIME_OPEN], ENTER_EXIT[info[1]][ee_TIME_CLOSE]);
					
						PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
						PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
					}
				}
			}
			else return 1;
		}
		case PICKUP_TYPE_PROPERTY:
		{
			if(info[2] == 1) // Está en el Pickup Interior y quiere ir al exterior
			{
				PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
				PI[playerid][pLOCAL_INTERIOR] = 0;
				PlayerTemp[playerid][pt_PROPERTY_INDEX] = -1;
				SetPlayerPosEx(playerid, PROPERTY_INFO[info[1]][property_EXT_X], PROPERTY_INFO[info[1]][property_EXT_Y], PROPERTY_INFO[info[1]][property_EXT_Z], PROPERTY_INFO[info[1]][property_EXT_ANGLE], PROPERTY_INFO[info[1]][property_EXT_INTERIOR], 0, false /*PROPERTY_INFO[info[1]][property_EXT_FREEZE]*/, false);
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
				StopAudioStreamForPlayer(playerid);
				FreezePlayer(playerid);

				PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
				PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
			}
			else if(info[2] == 2) // Está en el Pickup Exterior y quiere ir al interior
			{
				if(PROPERTY_INFO[info[1]][property_POLICE_FORCED] && (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE)) 
				{
					new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Z];
					
					SetPlayerPosEx(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[info[1]][property_ID], false /*PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_FREEZE]*/, true);
					FreezePlayer(playerid);

					PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
					PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
					return 1;
				}
				if(!PROPERTY_INFO[info[1]][property_SOLD]) return SendMessage(playerid, "Esta propiedad está en venta.");

				if(PROPERTY_INFO[info[1]][property_OWNER_ID] == PI[playerid][pID])
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_OWN_PROPERTY;
					PI[playerid][pLOCAL_INTERIOR] = PROPERTY_INFO[info[1]][property_ID];
					PlayerTemp[playerid][pt_PROPERTY_INDEX] = info[1];

					new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Z];
					
					SetPlayerPosEx(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[info[1]][property_ID], false /*PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_FREEZE]*/, true);
					FreezePlayer(playerid);

					PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
					PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
				}
				else
				{
					if(gettime() < PlayerTemp[playerid][pt_ANTIFLOOD_KNOCK_PROPERTY] + 10) return 1;//SendClientMessagef(playerid, -1, "Espera para volver a tocar, si no te quieren abrir, vete.");
								
					new owner_playerid = GetOwnerIntProperty(PROPERTY_INFO[info[1]][property_ID]);
					if(owner_playerid == -1) return SendMessage(playerid, "Esta no es tu propiedad y el propietario no está dentro para dejarte entrar.");
								
					PlayerTemp[playerid][pt_ANTIFLOOD_KNOCK_PROPERTY] = gettime();
					PlayerTemp[owner_playerid][pt_KNOCK_PLAYER_ID] = playerid;
					SendMessagef(owner_playerid, "%s está tocando la puerta, para dejarle entrar ve a la puerta y usa /puerta.", PlayerTemp[playerid][pt_NAME]);
					SendMessage(playerid, "Has tocado en la puerta, espera para que te abran o vete.");
				
					PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
					PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
				}
			}
			else return 1;
		}
		default: return 1;
	}
	return 1;
}

public OnPlayerUpdate(playerid)
{
	if(PlayerTemp[playerid][pt_KICKED] || PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL || PI[playerid][pID] <= 0 || PI[playerid][pLEVEL] <= 0) return 0;
	
	new player_state = GetPlayerState(playerid);
	if(player_state == PLAYER_STATE_SPAWNED || player_state == PLAYER_STATE_SPECTATING) return 1;
	
	new player_action = GetPlayerSpecialAction(playerid), Float:player_armour, player_weapon = GetPlayerWeapon(playerid), current_gettime = gettime();
	GetPlayerArmour(playerid, player_armour);
	if(player_weapon) CheckWeaponAndAmmo(playerid, player_weapon);
	
	if(ac_Info[CHEAT_PLAYER_ARMOUR][ac_Enabled])
	{
		if(player_armour > PI[playerid][pARMOUR] + 5.0)
		{
			if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY])
			{
				if(!ac_Info[CHEAT_PLAYER_ARMOUR][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_ARMOUR);
				else
				{
					if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_ARMOUR][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_LAST_DETECTION] = current_gettime;
					if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_ARMOUR][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_ARMOUR);
				}
			}
		}
	}
	
	if(ac_Info[CHEAT_JETPACK][ac_Enabled])
	{
		if(player_action == SPECIAL_ACTION_USEJETPACK)
		{
			if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_IMMUNITY])
			{
				if(!ac_Info[CHEAT_JETPACK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_JETPACK);
				else
				{
					if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_JETPACK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_LAST_DETECTION] = current_gettime;
					if(PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_JETPACK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_JETPACK);
				}
			}
		}
	}
	
	new Float:dis, Float:vehicle_health, vehicleid = GetPlayerVehicleID(playerid);
	if(!vehicleid) dis = GetPlayerDistanceFromPoint(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
	else
	{
		dis = GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2]);
		GetVehicleHealth(vehicleid, vehicle_health);
	}
	
	if(ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Enabled] && vehicleid && player_state == PLAYER_STATE_PASSENGER)
	{
		if(floatabs(dis) > 20.0)
		{
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == INVALID_PLAYER_ID)
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = current_gettime + 5;
			}
		}
	}
	
	if(ac_Info[CHEAT_HIGH_POS][ac_Enabled])
	{
		if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
		{
			if(floatabs(dis) > 80.0 && PI[playerid][pPOS_Z] > -97.0)
			{
				if(player_state != PLAYER_STATE_PASSENGER)
				{
					if(!ac_Info[CHEAT_HIGH_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_HIGH_POS, dis);
					else
					{
						if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_HIGH_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_LAST_DETECTION] = current_gettime;
						if(PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_HIGH_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_HIGH_POS, dis);
					}
				}
			}
		}
	}

	switch(player_state)
	{
		case PLAYER_STATE_ONFOOT:
		{
			if(ac_Info[CHEAT_PLAYER_SPEED][ac_Enabled])
			{
				if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_IMMUNITY])
				{
					new speed = GetPlayerSpeed(playerid);
					if(speed > 1000)
					{
						if(!ac_Info[CHEAT_PLAYER_SPEED][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_SPEED, speed);
						else
						{
							if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_SPEED][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_LAST_DETECTION] = current_gettime;
							if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_SPEED][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_SPEED, speed);
						}
					}
				}
			}
			
			if(ac_Info[CHEAT_POS][ac_Enabled])
			{
				if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
				{
					if(GetPlayerSurfingVehicleID(playerid) == INVALID_VEHICLE_ID && GetPlayerSurfingObjectID(playerid) == INVALID_OBJECT_ID && player_action != SPECIAL_ACTION_ENTER_VEHICLE && player_action != SPECIAL_ACTION_EXIT_VEHICLE)
					{
						if(floatabs(dis) > 6.0 && PI[playerid][pPOS_Z] > -97.0)
						{
							if(!ac_Info[CHEAT_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
							else
							{
								if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] = current_gettime;
								if(PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
							}
						}
					}
				}
			}
		}
		case PLAYER_STATE_DRIVER:
		{	
			new Float:vspeed = GetVehicleSpeed(vehicleid);
			
			if(ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Enabled])
			{
				if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_IMMUNITY])
				{
					if(vspeed > 1000.0)
					{
						if(!ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_SPEED_HACK);
						else
						{
							if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_LAST_DETECTION] = current_gettime;
							if(PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_SPEED_HACK);
						}
					}
				}
			}
			
			if(ac_Info[CHEAT_VEHICLE_HEALTH][ac_Enabled])
			{
				if(vehicle_health > (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] + 20.0))
				{
					if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY])
					{						
						if(!ac_Info[CHEAT_VEHICLE_HEALTH][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_HEALTH, (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] + 5.0) - vehicle_health);
						else
						{
							if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_HEALTH][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_LAST_DETECTION] = current_gettime;
							if(PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_HEALTH][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_HEALTH);
						}
					}
				}
			}
			
			if(ac_Info[CHEAT_POS][ac_Enabled])
			{
				if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
				{
					if(vspeed < 20.0 && floatabs(dis) >= 10.0 && GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] > -97.0)
					{
						if(!ac_Info[CHEAT_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
						else
						{
							if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] = current_gettime;
							if(PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
						}
					}
				}
			}
			
			if(ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Enabled])
			{
				new Keys, ud, lr;
				GetPlayerKeys(playerid, Keys, ud, lr);
				if(Keys == KEY_SPRINT)
				{
					if(!GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] && vspeed > 60.0 && GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] > -97.0 && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_ENGINE])
					{
						if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY])
						{
							if(!ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_NOFUEL);
							else
							{
								if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_LAST_DETECTION] = current_gettime;
								if(PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_NOFUEL);
							}
						}
					}
				}
			}
		}
	}

	if(current_gettime > PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED])
	{
		if(PlayerTemp[playerid][pt_LAST_PICKUP_ID] != PICKUP_TYPE_NONE)
		{
			new info[3];
			new Float:pos[3];
			Streamer_GetArrayData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_X, pos[0]);
			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Y, pos[1]);
			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PlayerTemp[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Z, pos[2]);

			if(!IsPlayerInRangeOfPoint(playerid, 2.2, pos[0], pos[1], pos[2]))
			{
				PlayerTemp[playerid][pt_LAST_PICKUP_ID] = PICKUP_TYPE_NONE;
				PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
				PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
				PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 2;
			}
		}

		if(PlayerTemp[playerid][pt_LAST_PICKUP_ID] == PICKUP_TYPE_NONE)
		{
			PlayerTemp[playerid][pt_PICKUP_TIMER] = 0;
			PlayerTemp[playerid][pt_DIALOG_OPENED] = false;
			PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
		}
		else
		{
			PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
		}
	}
	
	PI[playerid][pARMOUR] = player_armour;
	GetPlayerPos(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
	if(vehicleid)
	{
		GetVehiclePos(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = vehicle_health;
	}
	return 1;
}

stock SetPlayerPosEx(playerid, Float:x, Float:y, Float:z, Float:angle, interior, world, freeze = 0, addoffset = 0)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY] = gettime() + 5;
	
	if(addoffset)
	{
		x += (1.5 * floatsin(-angle, degrees));
		y += (1.5 * floatcos(-angle, degrees));
	}
	
	PI[playerid][pPOS_X] = x;
	PI[playerid][pPOS_Y] = y;
	PI[playerid][pPOS_Z] = z;
	PI[playerid][pANGLE] = angle;
	
	SetPlayerPos(playerid, x, y, z);
	SetPlayerFacingAngle(playerid, angle);
	SetPlayerInterior(playerid, interior);
	SetPlayerVirtualWorld(playerid, world);
	SetCameraBehindPlayer(playerid);

	PlayerTemp[playerid][pt_LAST_PICKUP_CHECKED] = gettime() + 3;
	
	if(freeze)
	{
		TogglePlayerControllableEx(playerid, false);
		KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
		PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
	}
	return 1;
}

forward TogglePlayerControl(playerid, bool:controlable);
public TogglePlayerControl(playerid, bool:controlable)
{
	return TogglePlayerControllableEx(playerid, controlable);
}

TogglePlayerSpectatingEx(playerid, bool:spectate)
{
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_IMMUNITY] = gettime() + 3;
	PlayerTemp[playerid][pt_PLAYER_SPECTATE] = spectate;
	return TogglePlayerSpectating(playerid, spectate);
}

#define MAX_INTERIOR_ACTORS 5
enum Interior_Actor_Enum
{
	bool:ia_VALID,
	ia_SKIN,
	Float:ia_POS_X,
	Float:ia_POS_Y,
	Float:ia_POS_Z,
	Float:ia_POS_A,
}

CreateInteriorActor(interior_type, world, interior)
{
	if(interior_type == INTERIOR_NO_INFO) return INVALID_ACTOR_ID;
	
	new InteriorActorInfo[MAX_INTERIOR_ACTORS][Interior_Actor_Enum];
	
	switch(interior_type)
	{
		case INTERIOR_BINCO:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 119;
			InteriorActorInfo[0][ia_POS_X]	= 208.376373;
			InteriorActorInfo[0][ia_POS_Y]	= -98.703956;
			InteriorActorInfo[0][ia_POS_Z]	= 1005.257812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_VIPBURBAN:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 191;
			InteriorActorInfo[0][ia_POS_X]	= 203.826187;
			InteriorActorInfo[0][ia_POS_Y]	= -41.667518;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.804687;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_PROLAPS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 190;
			InteriorActorInfo[0][ia_POS_X]	= 207.139907;
			InteriorActorInfo[0][ia_POS_Y]	= -127.805473;
			InteriorActorInfo[0][ia_POS_Z]	= 1003.507812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_DIDIER_SACHS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 169;
			InteriorActorInfo[0][ia_POS_X]	= 204.275909;
			InteriorActorInfo[0][ia_POS_Y]	= -157.829010;
			InteriorActorInfo[0][ia_POS_Z]	= 1000.523437;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_VICTIM:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 217;
			InteriorActorInfo[0][ia_POS_X]	= 204.853225;
			InteriorActorInfo[0][ia_POS_Y]	= -8.764448;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.210937;
			InteriorActorInfo[0][ia_POS_A]	= 270.0;
		}
		case INTERIOR_ZIP:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 211;
			InteriorActorInfo[0][ia_POS_X]	= 162.226135;
			InteriorActorInfo[0][ia_POS_Y]	= -81.191978;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.804687;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_247:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 184;
			InteriorActorInfo[0][ia_POS_X]	= -27.483411;
			InteriorActorInfo[0][ia_POS_Y]	= -91.628837;
			InteriorActorInfo[0][ia_POS_Z]	= 1003.546875;
			InteriorActorInfo[0][ia_POS_A]	= 0.0;
		}
		case INTERIOR_PIZZA:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 155;
			InteriorActorInfo[0][ia_POS_X] 	= 375.114501;
			InteriorActorInfo[0][ia_POS_Y] 	= -117.272621;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.492187;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_CLUCKIN_BELL:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 167;
			InteriorActorInfo[0][ia_POS_X] 	= 368.652679;
			InteriorActorInfo[0][ia_POS_Y] 	= -4.492218;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.851562;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BURGER_SHOT:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 205;
			InteriorActorInfo[0][ia_POS_X] 	= 376.114227;
			InteriorActorInfo[0][ia_POS_Y] 	= -65.848991;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.507812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BANK_LS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 1407.526489;
			InteriorActorInfo[0][ia_POS_Y] 	= 1321.833496;
			InteriorActorInfo[0][ia_POS_Z] 	= 1501.091918;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BANK_SF:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 1104.802001;
			InteriorActorInfo[0][ia_POS_Y] 	= 1531.275634;
			InteriorActorInfo[0][ia_POS_Z] 	= 1452.475097;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BANK_LV:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 2692.497558;
			InteriorActorInfo[0][ia_POS_Y] 	= -610.933593;
			InteriorActorInfo[0][ia_POS_Z] 	= -71.658203;
			InteriorActorInfo[0][ia_POS_A]	= 90.0;
		}
		case INTERIOR_CITY_HALL_LS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 186;
			InteriorActorInfo[0][ia_POS_X] 	= 945.8759;
			InteriorActorInfo[0][ia_POS_Y] 	= -1464.4989;
			InteriorActorInfo[0][ia_POS_Z] 	= 2761.0164;
			InteriorActorInfo[0][ia_POS_A]	= 85.0;
		}
		case INTERIOR_UNITY_STATION:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 184;
			InteriorActorInfo[0][ia_POS_X] 	= 1489.038818;
			InteriorActorInfo[0][ia_POS_Y] 	= 1305.631591;
			InteriorActorInfo[0][ia_POS_Z] 	= 1093.296386;
			InteriorActorInfo[0][ia_POS_A]	= 270.0;
		}
		case INTERIOR_TRUCK:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 127;
			InteriorActorInfo[0][ia_POS_X] 	= 1297.120117;
			InteriorActorInfo[0][ia_POS_Y] 	= -66.351226;
			InteriorActorInfo[0][ia_POS_Z] 	= 1002.497375;
			InteriorActorInfo[0][ia_POS_A]	= 0.0;
		}
		case INTERIOR_PHARMACY:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 70;
			InteriorActorInfo[0][ia_POS_X] 	= 425.1694;
			InteriorActorInfo[0][ia_POS_Y] 	= -1723.1028;
			InteriorActorInfo[0][ia_POS_Z] 	= 2244.3611;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BLACK_MARKET:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 73;
			InteriorActorInfo[0][ia_POS_X] 	= -720.0476;
			InteriorActorInfo[0][ia_POS_Y] 	= 1462.8925;
			InteriorActorInfo[0][ia_POS_Z] 	= -90.5046;
			InteriorActorInfo[0][ia_POS_A]	= 175.0;
		}
		default: return INVALID_ACTOR_ID;
	}

	new mainActor = INVALID_ACTOR_ID;
	for(new i; i != sizeof InteriorActorInfo; i++) 
	{
		if(InteriorActorInfo[i][ia_VALID]) 
		{
			new tmp = CreateDynamicActor(InteriorActorInfo[i][ia_SKIN], InteriorActorInfo[i][ia_POS_X], InteriorActorInfo[i][ia_POS_Y], InteriorActorInfo[i][ia_POS_Z], InteriorActorInfo[i][ia_POS_A], true, 100.0, world, interior);
			if(i == 0) 
			{
				mainActor = tmp;
			}
		}
	}

	return mainActor;
}

GetClothingShopIndexByIntType(interior_type)
{
	for(new i = 0; i != sizeof Clothing_Shop_Positions; i ++)
	{
		if(Clothing_Shop_Positions[i][clothing_shop_INTERIOR_TYPE] == interior_type) return i;
	}
	return -1;
}

ShowClothingShopTextdraws(playerid)
{
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5]);
	return 1;
}

HideClothingShopTextdraws(playerid)
{
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5]);
	return 1;
}

ClosePlayerClothingMenu(playerid)
{
	PI[playerid][pPOS_X] = Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_X];
	PI[playerid][pPOS_Y] = Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_Y];
	PI[playerid][pPOS_Z] = Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_Z];
	PI[playerid][pANGLE] = Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_ANGLE];
	SetPlayerSkin(playerid, PI[playerid][pSKIN]);
	TogglePlayerControllableEx(playerid, true);
	
	HideClothingShopTextdraws(playerid);
	PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
	PlayerTemp[playerid][pt_CLOTHING_SHOP] = -1;
	CancelSelectTextDrawEx(playerid);
	return 1;
}

ExitPlayerWardrobe(playerid)
{
	SetPlayerPosEx(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INT_INTERIOR], ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INT_WORLD], false, true);
	return 1;
}

UpdateClothingShop(playerid)
{
	if(PlayerTemp[playerid][pt_CLOTHING_SHOP] == -1) return 0;
	
	new cost, textdraw_str[128];
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], Clothing_Shop_Positions[PlayerTemp[playerid][pt_CLOTHING_SHOP]][clothing_shop_NAME]);
	
	switch(ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
	{
		case INTERIOR_BINCO:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Binco_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Binco_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Binco_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Binco_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Binco_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Binco_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_VIPBURBAN:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Suburban_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Suburban_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Suburban_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Suburban_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Suburban_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Suburban_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_PROLAPS:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Prolaps_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Prolaps_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Prolaps_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Prolaps_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Prolaps_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Prolaps_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_DIDIER_SACHS:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Didier_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Didier_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Didier_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Didier_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Didier_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Didier_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_VICTIM:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Victim_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Victim_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Victim_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Victim_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Victim_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Victim_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_ZIP:
		{
			switch(PI[playerid][pGENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Zip_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Zip_Shop_Male_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Zip_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Zip_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Zip_Shop_Female_Skins[PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][2];
					
					if(PI[playerid][pCASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$ Ropa:_%d/%d", number_format_thousand(cost), PlayerTemp[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Zip_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
	}
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	return 1;
}

stock number_format_thousand(e_number)
{
	new f_string[24], bool:negative;
	format(f_string, sizeof f_string, "%d", e_number);
	if(e_number < 0)
	{
		negative = true;
		strdel(f_string, 0, 1);
	}
	
	new numbers = strlen(f_string);
	while(numbers > 3)
	{
		numbers -= 3;
		strins(f_string, ".", numbers);
	}
	
	if(negative) strins(f_string, "-", 0);
	return f_string;
}

stock number_format_dash(e_number) /* By adri1 - SFR3 4.3 */
{
	new f_string[24], bool:negative;
	format(f_string, sizeof f_string, "%d", e_number);
	if(e_number < 0)
	{
		negative = true;
		strdel(f_string, 0, 1);
	}
	
	new numbers = strlen(f_string);
	while(numbers > 3)
	{
		numbers -= 3;
		strins(f_string, "-", numbers);
	}
	
	if(negative) strins(f_string, "- ", 0);
	return f_string;
}

SelectTextDrawEx(playerid, color)
{
	PlayerTemp[playerid][pt_SELECT_TEXTDRAW] = true;
	return SelectTextDraw(playerid, color);
}

CancelSelectTextDrawEx(playerid)
{
	PlayerTemp[playerid][pt_SELECT_TEXTDRAW] = false;
	return CancelSelectTextDraw(playerid);
}

UpdatePlayerHud(playerid)
{
	if(!PlayerTemp[playerid][pt_HUD_TEXTDRAWS]) return 0;
	
	new str[445];
	format(str, sizeof str, "%d", floatround(PI[playerid][pHUNGRY]));
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][1], str);

	format(str, sizeof str, "%d", floatround(PI[playerid][pTHIRST]));
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][2], str);
	return 1;
}

#define INTERVAL_HUNGRY_THIRST_DOWN	2 // 2 segundos de timer
#define THIRST_HOURS_STOPPED	9 // 9 horas parado si agua esta a 100 va a 0
#define HUNGRY_HOURS_STOPPED	12 // 12 horas parado si alimentacion esta a 100 va a 0

forward HungryThirstDown(playerid);
public HungryThirstDown(playerid)
{
	if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return HidePlayerHud(playerid);
	if(!PlayerTemp[playerid][pt_HUD_TEXTDRAWS]) return HidePlayerHud(playerid);
	
	new current_gettime = gettime();
	
	if(PI[playerid][pVIP])
	{
		if(current_gettime - PlayerTemp[playerid][pt_LAST_VIP_CHECK] > 300)
		{
			CheckPlayerSuperUser(playerid);
		}
	}

	if(PI[playerid][pWANTED_LEVEL] > 0 && PI[playerid][pSTATE] == ROLEPLAY_STATE_NORMAL && !PlayerTemp[playerid][pt_CUFFED])
	{
		if(gettime() - PlayerTemp[playerid][pt_LAST_SET_WANTED_LEVEL] > 300)
		{
			if(PI[playerid][pWANTED_LEVEL] == 1)
			{
				SendClientMessagef(playerid, -1, "Has perdido de vista a la policía.");
				SetPlayerWantedLevelEx(playerid, 0);
			}
			else SetPlayerWantedLevelEx(playerid, PI[playerid][pWANTED_LEVEL] - 1);
		}
	}

	PI[playerid][pTHIRST] -= floatdiv(float(INTERVAL_HUNGRY_THIRST_DOWN), floatmul(THIRST_HOURS_STOPPED, 36));
	PI[playerid][pHUNGRY] -= floatdiv(float(INTERVAL_HUNGRY_THIRST_DOWN), floatmul(HUNGRY_HOURS_STOPPED, 36));
	
	if(PI[playerid][pTHIRST] <= 0.5) PI[playerid][pTHIRST] = 0.5;
	if(PI[playerid][pHUNGRY] <= 0.5) PI[playerid][pHUNGRY] = 0.5;
	if(PI[playerid][pTHIRST] < 20.0)
	{
		PI[playerid][pHEALTH] -= 0.2;
		
		if(PI[playerid][pTHIRST] <= 1.0 || PI[playerid][pHEALTH] <= 0.5)
		{
			SendClientMessagef(playerid, -1, "Te has desmayado por deshidratacion.");
			SetPlayerHealthEx(playerid, 0.0);
			PI[playerid][pTHIRST] = 75.0;
			return 1;
		}
		
		SetPlayerHealthEx(playerid, PI[playerid][pHEALTH]);
		
		if(!PlayerTemp[playerid][pt_THIRST_MESSAGE])
		{
			ShowPlayerHudInfo(playerid);
			SendClientMessagef(playerid, -1, "Tienes sed, si no bebes agua pronto acabarás muriendo.");
			PlayerTemp[playerid][pt_THIRST_MESSAGE] = true;
		}
	}
	
	if(PI[playerid][pHUNGRY] < 20.0)
	{
		PI[playerid][pHEALTH] -= 0.2;
		
		if(PI[playerid][pHUNGRY] <= 1.0 || PI[playerid][pHEALTH] <= 0.5)
		{
			SendClientMessagef(playerid, -1, "Te has desmayado por hambre.");
			SetPlayerHealthEx(playerid, 0.0);
			PI[playerid][pHUNGRY] = 55.0;
			return 1;
		}
		
		SetPlayerHealthEx(playerid, PI[playerid][pHEALTH]);
		
		if(!PlayerTemp[playerid][pt_HUNGRY_MESSAGE])
		{
			ShowPlayerHudInfo(playerid);
			SendClientMessagef(playerid, -1, "Tienes hambre, si no comes nada pronto acabarás muriendo.");
			PlayerTemp[playerid][pt_HUNGRY_MESSAGE] = true;
		}
	}
	
	UpdatePlayerHud(playerid);
	return 1;
}

SetPlayerHud(playerid)
{
	PlayerTemp[playerid][pt_HUD_TEXTDRAWS] = true;
	UpdatePlayerHud(playerid);
	UpdateReputationTextDraws(playerid);
	
	ShowPlayerHudInfo(playerid);

	KillTimer(PlayerTemp[playerid][pt_TIMERS][5]);
	PlayerTemp[playerid][pt_TIMERS][5] = SetTimerEx("HungryThirstDown", INTERVAL_HUNGRY_THIRST_DOWN * 1000, true, "i", playerid);

	ShowPlayerProgressBar(playerid, PlayerBars[playerid][pbHEALTH]);
	return 1;
}

HidePlayerHud(playerid)
{
	KillTimer(PlayerTemp[playerid][pt_TIMERS][5]);
	PlayerTemp[playerid][pt_HUD_TEXTDRAWS] = false;
	
	HidePlayerHudInfo(playerid);

	HidePlayerProgressBar(playerid, PlayerBars[playerid][pbHEALTH]);
	return 1;
}

stock ShowPlayerHudInfo(playerid, time = 5) //segundos
{
	if(PlayerTemp[playerid][pt_TIMERS][23] != -1) return 0;

	UpdatePlayerHud(playerid);
	UpdateReputationTextDraws(playerid);

	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SERVER_MARK]);

	for(new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) 
	{
		TextDrawShowForPlayer(playerid, Textdraws[textdraw_HUD][i]);	
	}
		
	for(new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) 
	{
		PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
	}

	TextDrawShowForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);

	KillTimer(PlayerTemp[playerid][pt_TIMERS][23]);
	PlayerTemp[playerid][pt_TIMERS][23] = -1;
	
	PlayerTemp[playerid][pt_TIMERS][23] = SetTimerEx("HidePlayerHudInfo", (time * 1000), false, "i", playerid);
	return 1;
}

callbackp:HidePlayerHudInfo(playerid)
{
	for(new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) 
	{
		TextDrawHideForPlayer(playerid, Textdraws[textdraw_HUD][i]);	
	}
	
	for(new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) 
	{
		PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
	}

	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);
	TextDrawShowForPlayer(playerid, Textdraws[textdraw_SERVER_MARK]);

	KillTimer(PlayerTemp[playerid][pt_TIMERS][23]);
	PlayerTemp[playerid][pt_TIMERS][23] = -1;
	return 1;
}

is_open(hour, open, close)
{
	if(open < 0 || close < 0) return false;
	if(open > close)
	{
		if( ( (hour >= open) && (hour < 24) ) || ( (hour >= 0) && (hour < close) ) )
		{													
			return true;			
		}
		else
		{
			return false;
		}
	}
	else if(open < close)
	{
		if((hour >= open) && (hour < close))
		{
			return true;
		}
		else
		{
			return false;
		}
	}
	return false;
}

Add_Hungry_Thirst(playerid, Float:hungry, Float:thirst)
{
	PI[playerid][pHUNGRY] += hungry;
	if(PI[playerid][pHUNGRY] > 30.0) PlayerTemp[playerid][pt_HUNGRY_MESSAGE] = false;
	if(PI[playerid][pHUNGRY] > 100.0) PI[playerid][pHUNGRY] = 100.0;
	
	PI[playerid][pTHIRST] += thirst;
	if(PI[playerid][pTHIRST] > 30.0) PlayerTemp[playerid][pt_THIRST_MESSAGE] = false;
	if(PI[playerid][pTHIRST] > 100.0) PI[playerid][pTHIRST] = 100.0;
	
	UpdatePlayerHud(playerid);
	ShowPlayerHudInfo(playerid);
	return 1;
}

GetPlayerIdByBankAccountId(account_id)
{
	for(new i = 0; i != sizeof(PI); i ++)
	{
		if(PI[i][pBANK_ACCOUNT] == 0) continue;
		if(PI[i][pBANK_ACCOUNT] == account_id) return i;
	}
	return -1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	if(PlayerTemp[playerid][pt_KICKED]) return 1;
	
	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		if(newstate != PLAYER_STATE_SPAWNED && oldstate != PLAYER_STATE_SPAWNED)
		{
			if(ac_Info[CHEAT_STATE_SPAMMER][ac_Enabled])
			{
				if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY])
				{
					new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_ANTIFLOOD_STATE]);
					
					if(interval < 50)
					{
						if(!ac_Info[CHEAT_STATE_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_STATE_SPAMMER, float(interval));
						else
						{
							if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_STATE_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
							if(PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_STATE_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_STATE_SPAMMER, float(interval));
						}
					}
					PlayerTemp[playerid][pt_ANTIFLOOD_STATE] = GetTickCount();
				}
			}
		}
	}
	
    if(newstate == PLAYER_STATE_DRIVER)
    {
		new vehicleid = GetPlayerVehicleID(playerid);
		if(ac_Info[CHEAT_CAR_JACKING][ac_Enabled])
		{
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
			{
				if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_IMMUNITY])
				{
					if(!ac_Info[CHEAT_CAR_JACKING][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_JACKING);
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_JACKING][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_JACKING][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_JACKING);
					}
					
					PlayerTemp[playerid][pt_LAST_VEHICLE_ID] = INVALID_VEHICLE_ID;
					return 1;
				}
			}
		}

		SetPlayerArmedWeapon(playerid, 0);
		PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		PlayerTemp[playerid][pt_LAST_VEHICLE_ID] = vehicleid;
		
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = playerid;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = playerid;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = true;
		UpdateVehicleParams(vehicleid);

		if(PI[playerid][pDRIVE_LICENSE_POINTS] == 0 && !PlayerTemp[playerid][pt_DL_EXAM] && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_NORMAL_SPEEDO])
		{
			SendClientMessagef(playerid, YELLOW_COLOR2, "Deberias sacar una licencia de conducir para evitar multas.");
		}

		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_DRIVER_DOOR]) //cerrado
		{
			if(gettime() - GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] > 5) // Si el tiempo que paso desde que cerro es mayor a 5
			{
				if(ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Enabled])
				{
					if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY])
					{
						if(!ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						else
						{
							if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] = gettime();
							if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						}
					}
				}
			}
		}
		
		switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
		{
			case VEHICLE_TYPE_NONE:
			{
				if(!VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_ENGINE])
				{
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
					UpdateVehicleParams(vehicleid);
				}
			}
			case VEHICLE_TYPE_DRIVING_SCHOOL:
			{
				if(PlayerTemp[playerid][pt_DL_EXAM])
				{
					SendClientMessagef(playerid, -1, "Sigue los puntos de control para completar el examen.");
					SetPlayerDrivingSchoolCP(playerid);
				}
			}
			case VEHICLE_TYPE_SELL:
			{
				PlayerTemp[playerid][pt_SELECTED_BUY_VEHICLE_ID] = vehicleid;
				new pvehicles = CountPlayerVehicles(playerid);
				if(pvehicles >= MAX_VIP_VEHICLES) return SendClientMessagef(playerid, -1, "No puedes comprar más vehículos, el límite es %d.", MAX_VIP_VEHICLES);
				if(!PI[playerid][pVIP])
				{
					if(pvehicles >= MAX_NU_VEHICLES)
					{
						SendClientMessagef(playerid, -1, "¡Los jugadores VIP pueden tener hasta %d vehículos! Usa /ayuda si quieres ser VIP.", MAX_VIP_VEHICLES);
						return 1;
					}
				}
				
				ShowDialog(playerid, DIALOG_BUY_VEHICLE);
				return 1;
			}
			case VEHICLE_TYPE_WORK:
			{
				if(!PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_SET])
				{
					if(ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if(!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				if(PlayerTemp[playerid][pt_WORKING_IN] && PlayerTemp[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					if(ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if(!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				if(WORK_VEHICLES[vehicleid][work_vehicle_NEED_DUTY])
				{
					if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
					{
						if(ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
						{
							if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
							{
								if(!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
								else
								{
									if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
									else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
									
									PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
									if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
								}
							}
						}
						return 1;
					}
				}
				
				if(WORK_VEHICLES[vehicleid][work_vehicle_EXP] > PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL])
				{
					if(ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if(!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					case WORK_TAXI, WORK_HARVESTER: CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
					case WORK_TRUCK:
					{
						if(TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED])
						{
							if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pID])
							{
								SendMessage(playerid, "No eres el conductor de este vehículo.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							else CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
						}
						else CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
					}
					case WORK_TRASH:
					{
						if(TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
						{
							if(TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] != playerid)
							{
								SendMessage(playerid, "No eres el conductor de este camion.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							SetPlayerTrashCheckpoint(playerid, vehicleid);
						}
						else
						{
							if(PlayerTemp[playerid][pt_TRASH_DRIVER] || PlayerTemp[playerid][pt_TRASH_PASSENGER])
							{
								SendClientMessagef(playerid, -1, "Ya estás trabajando con otro amigo.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							PlayerTemp[playerid][pt_TRASH_DRIVER] = true;
							PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] = vehicleid;
							TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] = playerid;
							
							if(TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] == INVALID_PLAYER_ID) SendClientMessagef(playerid, -1, "Necesitas un amigo para empezar con el trabajo.");
							else
							{
								new route = random(MAX_ROUTES);
								while(!TRASH_OBJECTS[route][trash_route_VALID])
								{
									route = random(MAX_ROUTES);
								}
								
								TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED] = true;
								TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] = route;
								TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] = 0;
								
								SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
								SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
								
								CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], route);
								CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], route);
								
								SendClientMessagef(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], -1, "Ruta #%d establecida, pueden comenzar.", TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);
								SendClientMessagef(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], -1, "Ruta #%d establecida, pueden comenzar.", TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);

							}
						}
					}
					case WORK_PIZZA:
					{
						if(PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED])
						{
							if(PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] != PI[playerid][pID])
							{
								if(GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]) < 20.0)
								{
									SetVehicleToRespawnEx(vehicleid);
								}
								
								SendMessage(playerid, "No eres el conductor de esta moto.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							if(!PlayerTemp[playerid][pt_PIZZA_PROCCESS])
							{
								SendClientMessagef(playerid, -1, "Ya has repartido todas las pizzas, vuelve a la pizzería para cobrar.");
								SetPlayer_Pizza_Checkpoint(playerid, -1);
							}
							else
							{
								SendClientMessagef(playerid, -1, "Te quedan %d pizzas por repartir.", PlayerTemp[playerid][pt_PIZZA_PROCCESS]);
								if(PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI])
								{
									PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT] = randomEx(sizeof(PIZZA_DELIVERY_POINT), PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
									PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI] = false;
								}
								SetPlayer_Pizza_Checkpoint(playerid, PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
							}
						}
						else
						{
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED] = true;
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] = PI[playerid][pID];
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS] = minrand(3, 6);
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT] = random( sizeof(PIZZA_DELIVERY_POINT) );
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI] = false;
							PlayerTemp[playerid][pt_PIZZA_PROCCESS] = PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS];
							PlayerTemp[playerid][pt_DELIVERED_PIZZAS] = 0;
							
							SendClientMessagef(playerid, -1, "Esta moto tiene %d pizzas, repartelas todas y vuelve a la pizzería para cobrar.", PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS]);
							SetPlayer_Pizza_Checkpoint(playerid, PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
						}
					}
				}
			}
		}
		
		if(PlayerTemp[playerid][pt_WANT_TAXI])
		{
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_NORMAL)
			{
				PlayerTemp[playerid][pt_WANT_TAXI] = false;
				DisablePlayerTaxiMark(playerid);
				
				SendClientMessagef(playerid, -1, "Tu taxi se ha cancelado porque te has subido a un vehículo.");
			}
		}
    }
	else if(newstate == PLAYER_STATE_PASSENGER)
	{
		if(IsValidDriveByWeapon(playerid) != -1 && IsValidDriveByWeapon(playerid) == 0) SetPlayerArmedWeapon(playerid, 0);
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		
		new vehicleid = GetPlayerVehicleID(playerid);
		PlayerTemp[playerid][pt_LAST_VEHICLE_ID] = vehicleid;
		
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_PASSENGER_DOOR]) //cerrado
		{
			if(gettime() - GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] > 5) // Si el tiempo que paso desde que cerro es mayor a 5
			{
				if(ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Enabled])
				{
					if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY])
					{
						if(!ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						else
						{
							if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] = gettime();
							if(PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						}
					}
				}
			}
		}
		
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				case WORK_TAXI:
				{
					if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == INVALID_PLAYER_ID) return 1;
					if(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED])
					{
						if(PlayerTemp[playerid][pt_WANT_TAXI])
						{
							PlayerTemp[playerid][pt_WANT_TAXI] = false;
							DisablePlayerTaxiMark(playerid);
						}
						return 1;
					}
					
					ShowPlayerTaxiMeter(playerid);
					if(PlayerTemp[playerid][pt_WANT_TAXI])
					{
						PlayerTemp[playerid][pt_WANT_TAXI] = false;
						DisablePlayerTaxiMark(playerid);
					}
					
					TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED] = true;
					GetVehiclePos(vehicleid, TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Z]);
					KillTimer(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER]);
					TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], playerid);
				}
				case WORK_TRASH:
				{
					if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET])
					{
						SendClientMessagef(playerid, -1, "Necesitas ser %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
						RemovePlayerFromVehicle(playerid);
						return 1;
					}
					
					if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRASH)
					{
						SendMessage(playerid, "No estás de servicio como basurero, ve a vestirte en el puesto de la entrada del vertedero.");
						RemovePlayerFromVehicle(playerid);
						return 1;
					}
					
					if(TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
					{
						if(TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] != playerid)
						{
							SendClientMessagef(playerid, -1, "No tienes autorizacion para usar este camion.");
							RemovePlayerFromVehicle(playerid);
							return 1;
						}
						
						SetPlayerTrashCheckpoint(playerid, vehicleid);
					}
					else
					{
						if(PlayerTemp[playerid][pt_TRASH_DRIVER] || PlayerTemp[playerid][pt_TRASH_PASSENGER])
						{
							SendClientMessagef(playerid, -1, "Ya estás trabajando con otro amigo.");
							RemovePlayerFromVehicle(playerid);
							return 1;
						}
						
						PlayerTemp[playerid][pt_TRASH_PASSENGER] = true;
						PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] = vehicleid;
						TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] = playerid;
						
						if(TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] == INVALID_PLAYER_ID) SendClientMessagef(playerid, -1, "Necesitas un amigo para empezar con el trabajo.");
						else
						{
							new route = random(MAX_ROUTES);
							while(!TRASH_OBJECTS[route][trash_route_VALID])
							{
								route = random(MAX_ROUTES);
							}
							
							TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED] = true;
							TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] = route;
							TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] = 0;
							
							SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
							SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
							
							CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], route);
							CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], route);
							
							SendClientMessagef(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], -1, "Ruta #%d establecida, pueden comenzar.", TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);
							SendClientMessagef(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], -1, "Ruta #%d establecida, pueden comenzar.", TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);

						}
					}
				}
			}
		}
		
		if(PlayerTemp[playerid][pt_WANT_TAXI])
		{
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_NORMAL)
			{
				PlayerTemp[playerid][pt_WANT_TAXI] = false;
				DisablePlayerTaxiMark(playerid);
				
				SendClientMessagef(playerid, -1, "Tu taxi se ha cancelado porque te has subido a un vehículo.");
			}
		}
	}
	else if(newstate == PLAYER_STATE_SPECTATING)
	{
		if(!PlayerTemp[playerid][pt_PLAYER_SPECTATE])
		{
			if(ac_Info[CHEAT_SPECTATE][ac_Enabled])
			{
				if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_IMMUNITY])
				{
					if(!ac_Info[CHEAT_SPECTATE][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_SPECTATE);
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_SPECTATE][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_SPECTATE][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_SPECTATE);
					}
				}
			}
		}
	}
	
	if(oldstate == PLAYER_STATE_DRIVER)
	{
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
		{
			KillTimer(PlayerTemp[playerid][pt_TIMERS][7]);
			
			if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]))
			{
				DestroyDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]);
				PlayerTemp[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
			}
			
			if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] != INVALID_VEHICLE_ID)
			{
				if(GLOBAL_VEHICLES[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
				{
					PLAYER_AC_INFO[ GLOBAL_VEHICLES[ GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] 	][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY] = gettime() + 5;
				}
				GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
				DetachTrailerFromVehicle(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
			}
			
			GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
			GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] = playerid;
			GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_OCCUPIED] = false;
			
			StopAudioStreamForPlayer(playerid);
			
			if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
			{
				switch(WORK_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][work_vehicle_WORK])
				{
					case WORK_TAXI, WORK_HARVESTER, WORK_TRUCK: CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
					case WORK_PIZZA:
					{
						if(PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_STARTED])
						{
							if(PlayerTemp[playerid][pt_PIZZA_PROCCESS])
							{
								new Float:distance =	GetPlayerDistanceFromPoint
																(
																	playerid,
																	PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][0],
																	PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][1],
																	PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][2]
																);
										
								if(distance > 20.0)
								{
									SendClientMessagef(playerid, -1, "Vuelve a subir a la moto, aun estás muy lejos del cliente.");
									if(IsValidDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]))
									{
										DestroyDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]);
										PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
									}
									if(IsValidDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
									{
										DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
										PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
									}
								}
								else
								{
									if(IsPlayerInDynamicCP(playerid, PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
									{
										PlayerTemp[playerid][pt_PIZZA_PROCCESS] --;
										PlayerTemp[playerid][pt_DELIVERED_PIZZAS] ++;
										RemovePlayerAttachedObject(playerid, 9);
										SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
										ApplyDynamicActorAnimation(PlayerTemp[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
										ApplyDynamicActorAnimation(PlayerTemp[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
										DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
										PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
										PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT_DELI] = true;
										SendClientMessagef(playerid, -1, "Genial, vuelve a subir a la moto para continuar.");
									}
									else
									{
										SetPlayerArmedWeapon(playerid, 0);
										SetPlayerAttachedObject(playerid, 9, 1582, 6, 0.094, 0.077999, -0.165999, 72.0, 8.799999, 9.899992, 0.73, 0.774999, 1.0);
										SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CARRY);
									}
								}
							}
							else
							{
								if(IsValidDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]))
								{
									DestroyDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]);
									PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
								}
								if(IsValidDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
								{
									DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
									PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
								}
								SendClientMessagef(playerid, -1, "Vuelve a subir a la moto y ve a la pizzería para cobrar.");
							}
						}
					}
				}
			}
			if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] == PlayerTemp[playerid][pt_TRASH_VEHICLE_ID])
			{
				if(PlayerTemp[playerid][pt_TRASH_DRIVER])
				{
					if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
					{
						if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID] == playerid) SendClientMessagef(playerid, -1, "Si quieres dejar de trabajar ve al vertedero y ponte tu ropa.");
					}
					else
					{
						TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID] = INVALID_PLAYER_ID;
						PlayerTemp[playerid][pt_TRASH_DRIVER] = false;
						PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
					}
				}
			}
		}
	}
	else if(oldstate == PLAYER_STATE_PASSENGER)
	{
		if(PlayerTemp[playerid][pt_TAXI_METER_ENABLED])
		{
			new driver = GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER];
			
			if(driver != INVALID_PLAYER_ID)
			{
				new work_extra_payment;
				if(work_info[WORK_TAXI][work_info_EXTRA_PAY] > 0 && work_info[WORK_TAXI][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_TAXI][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[ driver ][WORK_TAXI][pwork_LEVEL], work_info[WORK_TAXI][work_info_EXTRA_PAY_EXP])));
					if(work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT];
				}
				PLAYER_WORKS[driver][WORK_TAXI][pwork_LEVEL] ++;
				
				SendClientMessagef(driver, -1, "Has ganado %s dolares con este viaje.", number_format_thousand(TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT] + work_extra_payment));
				GivePlayerCash(driver, TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT] + work_extra_payment, true, false);
				GivePlayerCash(playerid, -TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT], true, true);
				
				SendClientMessagef(playerid, -1, "El taxi te costo %s$.", number_format_thousand(TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT]));
				ResetVehicleTaxiMeter(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
				HidePlayerTaxiMeter(playerid);
				UpdatePlayerTaxiMeterTextdraws(driver);
			}

			new passenger = GetVehicleFirstPassenger( PlayerTemp[playerid][pt_LAST_VEHICLE_ID] );
			if(passenger != INVALID_PLAYER_ID)
			{
				ShowPlayerTaxiMeter(passenger);
				if(PlayerTemp[passenger][pt_WANT_TAXI])
				{
					PlayerTemp[passenger][pt_WANT_TAXI] = false;
					DisablePlayerTaxiMark(passenger);
				}
				
				TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_ENABLED] = true;
				GetVehiclePos(PlayerTemp[playerid][pt_LAST_VEHICLE_ID], TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_Z]);
				KillTimer(TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_TIMER]);
				TAXI_METER_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", PlayerTemp[playerid][pt_LAST_VEHICLE_ID], GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER], passenger);
			}
		}
		if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] == PlayerTemp[playerid][pt_TRASH_VEHICLE_ID])
		{
			if(PlayerTemp[playerid][pt_TRASH_PASSENGER])
			{
				if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
				{
					if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] == playerid)
					{
						if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] >= TRASH_OBJECTS[ TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] ][trash_route_OBJECTS]) SendClientMessagef(playerid, -1, "Sube al camion para volver al vertedero y recibir la paga.");
						else
						{
							new cp = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP];
							new route = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
							new Float:distance =	GetPlayerDistanceFromPoint
													(
														playerid,
														TRASH_OBJECTS[ route ][trash_object_X][ cp ],
														TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
														TRASH_OBJECTS[ route ][trash_object_Z][ cp ]
													);
							
							if(distance > 10.0) SendClientMessagef(playerid, -1, "Vuelve a subir al camion, aun estás demasiado lejos del punto de recogida.");
							else
							{
								if(IsPlayerInDynamicCP(playerid, PlayerTemp[playerid][pt_TRASH_CHECKPOINT]))
								{
									if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
									if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
									if(!PlayerTemp[playerid][pt_TRASH_PASSENGER]) return 1;
									
									new driver = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
									SendClientMessage(driver, -1, "{"#SILVER_COLOR"}Espera mientras tu amigo recoge la basura.");
									
									new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], 10);
									if(offset > 30.0) offset = 30.0;
									
									PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] = 10.0 + offset;
									UpdatePlayerTrashRecycleSize(playerid);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
									
									TogglePlayerControllableEx(playerid, false);
									SetCameraBehindPlayer(playerid);
									ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
									
									KillTimer(PlayerTemp[playerid][pt_TIMERS][10]);
									PlayerTemp[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
									return 1;
								}
								SendClientMessagef(playerid, -1, "Recoge la basura y vuelve al camion para continuar.");
							}
						}
					}
				}
				else
				{
					TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] = INVALID_PLAYER_ID;
					PlayerTemp[playerid][pt_TRASH_PASSENGER] = false;
					PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
				}
			}
		}
	}
    return 1;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	return 1;
}

const CRASHER_PACKET = 228;
IPacket:CRASHER_PACKET(playerid, BitStream:bs)
{
	printf("[ADVERTENCIA] Packet 228 recibido!");
	KickEx(playerid);
}


forward ResyncPlayer(playerid);
public ResyncPlayer(playerid)
{
	new Float:x, Float:y, Float:z, Float:angle;
	GetPlayerFacingAngle(playerid, angle);

	new BitStream:bsr = BS_New();
	new BitStream:bsa = BS_New();

	BS_WriteValue(bsr, PR_UINT16, playerid);

	BS_WriteValue(
		bsa,
		PR_UINT16, playerid,
		PR_UINT8, NO_TEAM,
		PR_UINT32, GetPlayerSkin(playerid),
		PR_FLOAT, x,
		PR_FLOAT, y,
		PR_FLOAT, z,
		PR_FLOAT, angle,
		PR_UINT32, PLAYER_COLOR,
		PR_UINT8, GetPlayerFightingStyle(playerid)
	);

	for(new i, j = GetPlayerPoolSize(); i <= j; i++)
	{
		if(IsPlayerStreamedIn(playerid, i))
		{
			PR_SendRPC(bsr, i, 163); // RPC_WorldPlayerRemove
			PR_SendRPC(bsa, i, 32); // RPC_WorldPlayerAdd
		}
	}

	BS_Delete(bsr);
	BS_Delete(bsa);
}

hook OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	
	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		if(ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Enabled])
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_IMMUNITY])
			{
				new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_ANTIFLOOD_ENTER_VEHICLE]);
				
				if(interval < 50)
				{
					if(!ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_ENTER_SPAMMER, float(interval));
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_ENTER_SPAMMER, float(interval));
					}
				}
				PlayerTemp[playerid][pt_ANTIFLOOD_ENTER_VEHICLE] = GetTickCount();
			}
		}
	}
	
	new Float:sx, Float:sy, Float:sz;
	GetPlayerPos(playerid, sx, sy, sz);
	
	if(PlayerTemp[playerid][pt_WORKING_IN] == WORK_MEDIC)
	{
		if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_MEDIC)
		{
			SendClientMessagef(playerid, -1, "Estando de servicio como médico solo puedes llevar ambulancias.");
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);
			return 1;
		}
	}

	if(PlayerTemp[playerid][pt_CUFFED])
	{
		RemovePlayerFromVehicle(playerid);
		SetPlayerPos(playerid, sx, sy, sz);
		return 1;
	}
	
	if(!ispassenger)
	{
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED])
		{
			if(PlayerTemp[playerid][pt_CJ_WARNINGS] >= 5)
			{
				KickEx(playerid);
				return 1;
			}
			PlayerTemp[playerid][pt_CJ_WARNINGS] ++;
			SendClientMessagef(playerid, -1, "No puedes robar vehículos así, congelado 5 segundos, aviso %d/5.", PlayerTemp[playerid][pt_CJ_WARNINGS]);
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);

			TogglePlayerControllableEx(playerid, false);
			KillTimer(PlayerTemp[playerid][pt_TIMERS][19]);
			PlayerTemp[playerid][pt_TIMERS][19] = SetTimerEx("CarJackingFinish", 5000, false, "i", playerid);

			SetTimerEx("ResyncPlayer", 0, false, "d", playerid);
			return 1;
		}
		
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			if(!PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_SET])
			{
				SendClientMessagef(playerid, -1, "Necesitas ser %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_VIP] && !PI[playerid][pVIP])
			{
				SendClientMessagef(playerid, -1, "Necesitas adquirir membresía VIP para usar este vehículo. (/ayuda > membresía VIP)");
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if(PlayerTemp[playerid][pt_WORKING_IN] && PlayerTemp[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio de %s.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if(WORK_VEHICLES[vehicleid][work_vehicle_NEED_DUTY])
			{
				if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					SendClientMessagef(playerid, -1, "Necesitas estar de servicio de %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
					RemovePlayerFromVehicle(playerid);
					SetPlayerPos(playerid, sx, sy, sz);
					return 1;
				}
			}
			
			if(WORK_VEHICLES[vehicleid][work_vehicle_EXP] > PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL])
			{
				SendClientMessagef(playerid, -1, "Necesitas más experiencia en este trabajo para llevar este vehículo. (%d/%d)", PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL], WORK_VEHICLES[vehicleid][work_vehicle_EXP]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
		}
		else if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_DRIVING_SCHOOL)
		{
			if(!PlayerTemp[playerid][pt_DL_EXAM])
			{
				SendClientMessagef(playerid, -1, "Necesitas estar haciendo el examen de conducir.");
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;	
			}
		}
	}
	else
	{
		if(WORK_VEHICLES[vehicleid][work_vehicle_VALID] && WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TRASH)
		{
			if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET])
			{
				SendClientMessagef(playerid, -1, "Necesitas ser %s para poder entrar a este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				SendClientMessagef(playerid, -1, "Necesitas estar de servicio como %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
		}
	}
	return 1;
}

AddTestVehicle(bool:static_veh, modelid, Float:X, Float:Y, Float:Z, Float:Angle, Color1, Color2, interior = 0, world = 0)
{
	new vehicle_id = INVALID_VEHICLE_ID;
	if(static_veh) vehicle_id = AddStaticVehicleEx(modelid, X, Y, Z, Angle, Color1, Color2, -1, false);
	else vehicle_id = CreateVehicle(modelid, X, Y, Z, Angle, Color1, Color2, -1, false);
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_TEST;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
	format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "Test Vehicle");
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = X;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = Y;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = Z;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = Angle;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = Color1;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = Color2;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[modelid - 400][vehicle_info_MAX_GAS];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = interior;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
	SetVehicleVirtualWorldEx(vehicle_id, world);
	SetVehicleToRespawnEx(vehicle_id);
	return vehicle_id;
}

AddPersonalVehicle(playerid, modelid, Float:X, Float:Y, Float:Z, Float:Angle, Color1, Color2, Float:max_gas)
{
	new vehicle_id = INVALID_VEHICLE_ID;
	vehicle_id = CreateVehicle(modelid, X, Y, Z, Angle, Color1, Color2, -1);
	
	if(vehicle_id == INVALID_VEHICLE_ID) return false;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_PERSONAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = X;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = Y;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = Z;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = Angle;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = Color1;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = Color2;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = max_gas;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = max_gas;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
	
	PLAYER_VEHICLES[vehicle_id][player_vehicle_VALID] = true;
	PLAYER_VEHICLES[vehicle_id][player_vehicle_OWNER_ID] = PI[playerid][pID];
	RegisterNewPlayerVehicle(playerid, vehicle_id);
	
	SetVehicleToRespawnEx(vehicle_id);
	return vehicle_id;
}

RegisterNewPlayerVehicle(playerid, vehicleid)
{
	inline OnVehicleInserted()
	{
		PLAYER_VEHICLES[vehicleid][player_vehicle_ID] = cache_insert_id();
		if(PLAYER_VEHICLES[vehicleid][player_vehicle_ID])
		{
			format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], 32, "%04d %c%c%c", PLAYER_VEHICLES[vehicleid][player_vehicle_ID], getRandomLetter(), getRandomLetter(), getRandomLetter());
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pvehicles SET plate = '%e' WHERE id = %d;", GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	}

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			INSERT INTO pvehicles (id_player, modelid, spawn_x, spawn_y, spawn_z, spawn_angle, color1, color2, gas, max_gas)\
			VALUES(%d, %d, %f, %f, %f, %f, %d, %d, %f, %f);\
		",
			PI[playerid][pID], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]
	);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnVehicleInserted);
	return 1;
}

LoadPlayerVehicles(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	inline OnPlayerVehiclesLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				if(i >= MAX_VIP_VEHICLES)
				{
					printf("---> MAX_VIP_VEHICLES superado al cargar de base de datos.");
					break;
				}

				new id, plate[32], modelid, Float:spawn_x, Float:spawn_y, Float:spawn_z, Float:spawn_angle,
					Float:health, damage_panels, damage_doors, damage_lights, damage_tires, color1, color2,
					paintjob, Float:gas, Float:max_gas, closed, interior, eworld, veh_state,
					components[MAX_VEHICLE_COMPONENTS], vClamp,
					bool:isnull_plate;

				cache_get_value_name_int(i, "id", id);
				cache_is_value_name_null(i, "plate", isnull_plate);
				if(!isnull_plate) cache_get_value_name(i, "plate", plate, 32);
				cache_get_value_name_int(i, "modelid", modelid);
				cache_get_value_name_float(i, "spawn_x", spawn_x);
				cache_get_value_name_float(i, "spawn_y", spawn_y);
				cache_get_value_name_float(i, "spawn_z", spawn_z);
				cache_get_value_name_float(i, "spawn_angle", spawn_angle);
				cache_get_value_name_float(i, "health", health);
				cache_get_value_name_int(i, "damage_panels", damage_panels);
				cache_get_value_name_int(i, "damage_doors", damage_doors);
				cache_get_value_name_int(i, "damage_lights", damage_lights);
				cache_get_value_name_int(i, "damage_tires", damage_tires);
				cache_get_value_name_int(i, "color1", color1);
				cache_get_value_name_int(i, "color2", color2);
				cache_get_value_name_int(i, "paintjob", paintjob);
				cache_get_value_name_float(i, "gas", gas);
				cache_get_value_name_float(i, "max_gas", max_gas);
				cache_get_value_name_int(i, "closed", closed);
				cache_get_value_name_int(i, "interior", interior);
				cache_get_value_name_int(i, "world", eworld);
				cache_get_value_name_int(i, "state", veh_state);
				cache_get_value_name_int(i, "slot0", components[0]);
				cache_get_value_name_int(i, "slot1", components[1]);
				cache_get_value_name_int(i, "slot2", components[2]);
				cache_get_value_name_int(i, "slot3", components[3]);
				cache_get_value_name_int(i, "slot4", components[4]);
				cache_get_value_name_int(i, "slot5", components[5]);
				cache_get_value_name_int(i, "slot6", components[6]);
				cache_get_value_name_int(i, "slot7", components[7]);
				cache_get_value_name_int(i, "slot8", components[8]);
				cache_get_value_name_int(i, "slot9", components[9]);
				cache_get_value_name_int(i, "slot10", components[10]);
				cache_get_value_name_int(i, "slot11", components[11]);
				cache_get_value_name_int(i, "slot12", components[12]);
				cache_get_value_name_int(i, "slot13", components[13]);
				cache_get_value_name_int(i, "clamp", vClamp);

				new vehicle_id = CreateVehicle(modelid, spawn_x, spawn_y, spawn_z, spawn_angle, color1, color2, -1);
				if(vehicle_id != INVALID_VEHICLE_ID)
				{
					PLAYER_VEHICLES[vehicle_id][player_vehicle_VALID] = true;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_OWNER_ID] = PI[playerid][pID];
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ID] = id;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = true;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_CLAMP] = vClamp;

					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_PERSONAL;
					format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "%s", plate);
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = spawn_x;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = spawn_y;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = spawn_z;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = spawn_angle;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = health;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = damage_panels;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = damage_doors;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = damage_lights;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = damage_tires;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = color1;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = color2;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = paintjob;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = max_gas;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = gas;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = closed;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = veh_state;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = interior;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COMPONENTS] = components;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_LAST_REPAIR_TIME] = gettime();

					if(!PI[playerid][pVIP]) 
					{
						if(i >= MAX_NU_VEHICLES)
						{
							GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = 1;
							PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = false;
						}
					}

					//vboot
					inline OnVbootLoad()
					{
						new vb_rows;
						if(cache_get_row_count(vb_rows))
						{
							for(new x = 0; x != vb_rows; x ++)
							{
								new vboot_id, type, int, int_extra;
								cache_get_value_name_int(x, "id", vboot_id);
								cache_get_value_name_int(x, "type", type);
								cache_get_value_name_int(x, "int", int);
								cache_get_value_name_int(x, "int_extra", int_extra);

								VEHICLE_BOOT[vehicle_id][x][vehicle_boot_VALID] = true;
								VEHICLE_BOOT[vehicle_id][x][vehicle_boot_OBJECT_ID] = vboot_id;
								VEHICLE_BOOT[vehicle_id][x][vehicle_boot_TYPE] = type;
								VEHICLE_BOOT[vehicle_id][x][vehicle_boot_INT] = int;
								VEHICLE_BOOT[vehicle_id][x][vehicle_boot_INT_EXTRA] = int_extra;
							}
						}

						SetVehicleToRespawnEx(vehicle_id);
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vboot WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS]);
					mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnVbootLoad);
				}
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pvehicles WHERE id_player = %d;", PI[playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPlayerVehiclesLoad);
	return 1;
}

SavePlayerVehicles(playerid, destroy = false)
{
	if(PI[playerid][pID] == 0) return 0;
	
	for(new i = 0; i != MAX_VEHICLES; i++)
	{
		if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] != PI[playerid][pID]) continue;
		
		GetVehiclePos(i, GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Z]);
		GetVehicleZAngle(i, GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_ANGLE]);
		GetVehicleHealth(i, GLOBAL_VEHICLES[i][gb_vehicle_HEALTH]);
		if(GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] > 1000.0) GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] = 1000.0;
		if(GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] < MIN_VEHICLE_HEALTH) GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
		GetVehicleDamageStatus(i, GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_TIRES]);
		GLOBAL_VEHICLES[i][gb_vehicle_WORLD] = 0;//GetVehicleVirtualWorld(i);
		
		mysql_format
		(
			handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
			"\
				UPDATE pvehicles SET \
					id_player = %d,\
					plate = '%e',\
					modelid = %d,\
					spawn_x = %f,\
					spawn_y = %f,\
					spawn_z = %f,\
					spawn_angle = %f,\
					health = %f,\
					damage_panels = %d,\
					damage_doors = %d,\
					damage_lights = %d,\
					damage_tires = %d,\
					color1 = %d,\
					color2 = %d,\
					paintjob = %d,\
					gas = %f,\
					max_gas = %f,\
					closed = %d,\
					interior = %d,\
					world = %d,\
					state = %d,\
					slot0 = %d,\
					slot1 = %d,\
					slot2 = %d,\
					slot3 = %d,\
					slot4 = %d,\
					slot5 = %d,\
					slot6 = %d,\
					slot7 = %d,\
					slot8 = %d,\
					slot9 = %d,\
					slot10 = %d,\
					slot11 = %d,\
					slot12 = %d,\
					slot13 = %d,\
					clamp = %d \
				WHERE id = %d;\
			",
				PLAYER_VEHICLES[i][player_vehicle_OWNER_ID], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], GLOBAL_VEHICLES[i][gb_vehicle_MODELID], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_X],
				GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Z], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_ANGLE], GLOBAL_VEHICLES[i][gb_vehicle_HEALTH],
				GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_TIRES],
				GLOBAL_VEHICLES[i][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[i][gb_vehicle_COLOR_2], GLOBAL_VEHICLES[i][gb_vehicle_PAINTJOB], GLOBAL_VEHICLES[i][gb_vehicle_GAS], GLOBAL_VEHICLES[i][gb_vehicle_MAX_GAS],
				GLOBAL_VEHICLES[i][gb_vehicle_PARAMS_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_INTERIOR], GLOBAL_VEHICLES[i][gb_vehicle_WORLD], GLOBAL_VEHICLES[i][gb_vehicle_STATE],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][0], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][1], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][2], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][3],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][4], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][5], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][6], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][7],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][8], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][9], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][10], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][11],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][12], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][13], PLAYER_VEHICLES[i][player_vehicle_CLAMP],

				PLAYER_VEHICLES[i][player_vehicle_ID]
		);
		mysql_tquery(handle_db, QUERY_BUFFER);

		if(destroy) DestroyVehicleEx(i);
	}
	return 1;
}

stock ClearVehicleGlobalInfo(vehicleid)
{
	ResetVehicleTaxiMeter(vehicleid);
	ResetTruckInfo(vehicleid);
	ResetTrashInfo(vehicleid);
	ResetPizzaInfo(vehicleid);
}

public OnVehicleSpawn(vehicleid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = true;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = false;
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] < MIN_VEHICLE_HEALTH) GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
	
	if(IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
	{
		DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
	{
		if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TRASH)
		{
			if(TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
			{
				CancelTrashWork(TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID], TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID], vehicleid);
			}
		}
		
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = 0.0;
		else GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = frandom(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] / 3, 2);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
		
		switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
		{
			case WORK_TAXI: ResetVehicleTaxiMeter(vehicleid);
			case WORK_TRUCK: ResetTruckInfo(vehicleid);
			case WORK_TRASH: ResetTrashInfo(vehicleid);
			case WORK_PIZZA: ResetPizzaInfo(vehicleid);
		}
	}
	SetVehicleNumberPlate(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE]);
	SetVehicleHealthEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH]);
	UpdateVehicleDamageStatus(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES]);
    ChangeVehicleColor(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2]);
	ChangeVehiclePaintjob(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PAINTJOB]);
	SetVehiclePosEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]);
	SetVehicleZAngle(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE]);
	LinkVehicleToInteriorEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_INTERIOR]);
	SetVehicleVirtualWorldEx(vehicleid, 0);//GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD]);
	AddVehicleComponents(vehicleid);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ALARM] = 0;
	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BOOT] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_OBJECTIVE] = 0;
	UpdateVehicleParams(vehicleid);
	SetClampVehicleLabel(vehicleid);
	return 1;
}

SetClampVehicleLabel(vehicleid) {
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) {
		if(IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
		{
			DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
		}

		if(PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0) {
			new string[256];
			format(string, sizeof string, "Cepo\nUsa {"#PRIMARY_COLOR"}/pagar {FFFFFF}para pagar la multa por %s$", number_format_thousand(PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP]));

			new Float:wX, Float:wY, Float:wZ;
			GetVehicleModelInfo(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID], VEHICLE_MODEL_INFO_WHEELSREAR, wX, wY, wZ);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = CreateDynamic3DTextLabel(string, -1, wX, wY, wZ, 20.0, .attachedvehicle = vehicleid);
		}
	}
}

UpdateVehicleParams(vehicleid)
{
	return SetVehicleParamsEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ALARM], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BOOT], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_OBJECTIVE]);
}

SetVehicleHealthEx(vehicleid, Float:health, forplayerid = INVALID_PLAYER_ID)
{
	if(forplayerid != INVALID_PLAYER_ID) PLAYER_AC_INFO[forplayerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = health;
	SetVehicleHealth(vehicleid, health);
	return 1;
}

RepairVehicleEx(vehicleid, forplayerid = INVALID_PLAYER_ID, Float:health = 1000.0)
{
	if(forplayerid != INVALID_PLAYER_ID) PLAYER_AC_INFO[forplayerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_REPAIR_TIME] = gettime();
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = health;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
	SetVehicleHealthEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH]);
	if(health >= 1000.0) RepairVehicle(vehicleid);
	return 1;
}

SetVehiclePosEx(vehicleid, Float:x, Float:y, Float:z)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0] = x;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1] = y;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] = z;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return SetVehiclePos(vehicleid, x, y, z);
}

LinkVehicleToInteriorEx(vehicleid, interior)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_INTERIOR] = interior;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return LinkVehicleToInterior(vehicleid, interior);
}

SetVehicleToRespawnEx(vehicleid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return SetVehicleToRespawn(vehicleid);
}

public OnVehicleDeath(vehicleid, killerid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	
	if(IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
	{
		DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	
	switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
	{
		case VEHICLE_TYPE_TEST: DestroyVehicleEx(vehicleid);
		case VEHICLE_TYPE_PERSONAL:
		{
			if(VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_NORMAL_SPEEDO])
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_DAMAGED;
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
			}
			else
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
			}
			
			new playerid = GetPlayerIdFromAccountId(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID]);
			if(playerid != INVALID_PLAYER_ID)
			{
				if(PI[playerid][pPHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "Vehículo de sustitucion entregado en ult. estacionamiento.");
					RegisterPhoneMessage(0, PI[playerid][pID], message);
					if(PI[playerid][pPHONE_STATE] == PHONE_STATE_ON)
					{
						if((PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL || PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_DEAD))
						{
							SendClientMessagef(playerid, -1, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {"#SILVER_COLOR"}Remitente: {FFFFFF}%s {"#SILVER_COLOR"}Mensaje: {FFFFFF}%s", convertPhoneNumber(playerid, 38350), message);
						}
					}
				}
			}
		}
		default:
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = 0.0;
			else GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = frandom(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] / 3, 2);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
		}
	}
    return 1;
}

public OnTrailerUpdate(playerid, vehicleid)
{
    new towing_vehicle;
	towing_vehicle = GetPlayerVehicleID(playerid);
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] != towing_vehicle)
	{
		if(ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Enabled])
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY])
			{
				if(!ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_FAKE_TRAILER_SYNC, vehicleid);
				else
				{
					if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_LAST_DETECTION] = gettime();
					if(PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_FAKE_TRAILER_SYNC, vehicleid);
					return 0;
				}
				
			}
		}
	}
	return 1;
}

public OnUnoccupiedVehicleUpdate(vehicleid, playerid, passenger_seat, Float:new_x, Float:new_y, Float:new_z, Float:vel_x, Float:vel_y, Float:vel_z)
{
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_VALID])
	{
		if(ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Enabled])
		{
			if(PlayerTemp[playerid][pt_KICKED]) return 0;
			
			new Float:veh_x, Float:veh_y, Float:veh_z, Float:veh_dis;
			GetVehiclePos(vehicleid, veh_x, veh_y, veh_z);
			veh_dis = GetVehicleDistanceFromPoint(vehicleid, new_x, new_y, new_z);
			
			if(gettime() > GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED])
			{
				if(veh_dis > 20.0 && veh_z > -70.0)
				{
					if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY])
					{
						if(!ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_UNOCCUPIED_VEHICLE_TP, veh_dis);
						else
						{
							if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_LAST_DETECTION] = gettime();
							if(PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_UNOCCUPIED_VEHICLE_TP, veh_dis);
						}
					}
					
					SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
					return 0;
				}
			} 
		}
		
		new Float:spawn_distance = GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]);
		switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
		{
			case VEHICLE_TYPE_SELL:
			{
				if(spawn_distance > 10.0) SetVehicleToRespawnEx(vehicleid);
			}
			case VEHICLE_TYPE_WORK:
			{
				if(TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED]) return 1;
				if(spawn_distance < 10.0)
				{
					if(spawn_distance > 5.0) SetVehicleToRespawnEx(vehicleid);
				}
			}
			case VEHICLE_TYPE_DRIVING_SCHOOL:
			{
				if(spawn_distance > 5.0) DestroyVehicleEx(vehicleid);
			}
		}
	}
    return 1;
}

GetPlayerIdFromAccountId(accountid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PI[i][pID] == accountid)
			{
				return i;
			}
		}
	}
	return INVALID_PLAYER_ID;
}

CMD:dimitir(playerid, params[])
{
	new player_jobs = CountPlayerJobs(playerid);
	if(!player_jobs) return SendClientMessagef(playerid, -1, "No tienes ningun trabajo.");
	
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	ShowDialog(playerid, DIALOG_RENOUNCE);
	return 1;
}
alias:dimitir("renunciar");

CMD:pagar(playerid, params[])
{
	new vehicleid = INVALID_VEHICLE_ID;
	if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");

	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] || PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] <= 0) return SendClientMessagef(playerid, -1, "Este vehículo no tiene ninguna multa.");

	if(GivePlayerCash(playerid, -PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP], true, true)) {
		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = 0;
		SendClientMessagef(playerid, -1, "Has pagado la multa y se ha quitado el cepo.");
		SetClampVehicleLabel(vehicleid);
	}
	else SendClientMessagef(playerid, -1, "No tienes suficiente dinero para pagar la multa.");
	return 1;
}

CMD:cepo(playerid, params[]) {
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 1) return SendClientMessagef(playerid, -1, "Tienes que ser %s para poder hacer esto.", POLICE_RANKS[1]);

	new price;
	if(sscanf(params, "d", price)) return ErrorCommandParams(playerid, "/cepo [multa]");
	if(price < 0 || price > 2000) return SendClientMessagef(playerid, -1, "El precio de la multa no es válido.");

	new vehicleid = INVALID_VEHICLE_ID;
	if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás cerca de un vehículo.");

	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "No puedes multar a este vehículo.");
	if(!VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_NORMAL_SPEEDO]) return SendClientMessagef(playerid, -1, "No puedes multar a este vehículo.");
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0 && price != 0) return SendClientMessagef(playerid, -1, "Este vehículo ya tiene una multa.");

	if(PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0 && price == 0) {
		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = 0;
		SetClampVehicleLabel(vehicleid);

		SendClientMessagef(playerid, -1, "Se ha quitado la multa a este vehículo.");
		Streamer_Update(playerid, STREAMER_TYPE_3D_TEXT_LABEL);
	}
	else {
		if(price == 0) return SendClientMessagef(playerid, -1, "El precio de la multa no es válido.");
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) return SendClientMessagef(playerid, -1, "No puedes multar a un vehículo si hay un conductor en él.");

		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
		UpdateVehicleParams(vehicleid);

		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = price;
		SetClampVehicleLabel(vehicleid);

		SendClientMessagef(playerid, -1, "Vehículo multado.");
		Streamer_Update(playerid, STREAMER_TYPE_3D_TEXT_LABEL);
	}
	return 1;
}

CMD:seguro(playerid, params[])
{
	new vehicleid = INVALID_VEHICLE_ID;
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER) vehicleid = GetPlayerVehicleID(playerid);
	else if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetNearVehicle(playerid);
		
	if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás en tu vehículo o cerca de él para abrirlo.");
	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS])
	{
		if(!PI[playerid][pVIP] && !PLAYER_VEHICLES[vehicleid][player_vehicle_ACCESSIBLE])
		{
			SendClientMessagef(playerid, -1, "Este vehículo está bloqueado, desbloquealo con VIP.");
			SendClientMessagef(playerid, -1, "¡Los jugadores VIP pueden tener hasta %d vehículos! Usa /ayuda si quieres ser VIP.", MAX_VIP_VEHICLES);
			return 1;
		}

		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 0;
		UpdateVehicleParams(vehicleid);

		SendClientMessagef(playerid, -1, "Has abierto las puertas de tu vehículo.");
		Auto_SendPlayerAction(playerid, "ha abierto las puertas de su vehículo.");
	}
	else
	{
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] = gettime();
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 1;
		UpdateVehicleParams(vehicleid);

		SendClientMessagef(playerid, -1, "Has cerrado las puertas de tu vehículo.");
		Auto_SendPlayerAction(playerid, "ha cerrado las puertas de su vehículo.");
	}

	return 1;
}

CMD:aparcar(playerid, params[])
{
	new vehicleid = INVALID_VEHICLE_ID;
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER) vehicleid = GetPlayerVehicleID(playerid);
		
	if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás en tu vehículo para aparcarlo.");
	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
	
	new Float:pos[3], Float:angle;
	GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
	GetVehicleZAngle(vehicleid, angle);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X] = pos[0];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y] = pos[1];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z] = pos[2];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE] = angle;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] = gettime();
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 1;
	UpdateVehicleParams(vehicleid);
	SendClientMessagef(playerid, -1, "Has estacionado tu vehículo, cuando sea destruido volverá a aparecer aquí.");
	return 1;
}
alias:aparcar("estacionar");

CMD:luces(playerid, params[])
{
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS])
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
			UpdateVehicleParams(vehicleid);
			
			if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pID]) Auto_SendPlayerAction(playerid, "ha apagado las luces de su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha apagado las luces de el vehículo.");
		}
		else
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 1;
			UpdateVehicleParams(vehicleid);
			
			if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pID]) Auto_SendPlayerAction(playerid, "ha encendido las luces de su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha encendido las luces de el vehículo.");
		}
	}
	else SendClientMessagef(playerid, -1, "No estás conduciendo ningun vehículo.");
	return 1;
}

CMD:motor(playerid, params[])
{
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);

		if(!GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE]) 
		{
			if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
			{
				if(TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING]) return SendClientMessagef(playerid, -1, "Debes esperar a que se cargue el camion para arrancar.");
				if(TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return SendClientMessagef(playerid, -1, "Debes esperar a que se descargue el camion para arrancar.");
			}
		}
		
		KillTimer(PlayerTemp[playerid][pt_TIMERS][7]);
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE])
		{
			PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
			UpdateVehicleParams(vehicleid);
			
			if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pID]) Auto_SendPlayerAction(playerid, "ha detenido su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha detenido el vehículo.");
		}
		else
		{
			if(PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] && PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0) {
				SendClientMessagef(playerid, -1, "El vehículo tiene un cepo y no puede arrancar.");
				return 1;
			}
			SendClientMessagef(playerid, -1, "Encendiendo...");
			PlayerTemp[playerid][pt_TIMERS][7] = SetTimerEx("StartVehicleEngine", 1000, false, "ii", playerid, vehicleid);
		}
	}
	else SendClientMessagef(playerid, -1, "No estás conduciendo ningun vehículo.");
	return 1;
}
alias:motor("arrancar");

forward StartVehicleEngine(playerid, vehicleid);
public StartVehicleEngine(playerid, vehicleid)
{
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_DAMAGED) return Auto_SendPlayerAction(playerid, "intento arrancar el vehículo pero el motor está estropeado.");
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] <= 0.1) return Auto_SendPlayerAction(playerid, "intento arrancar el vehículo pero no tiene gasolina.");
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] != INVALID_VEHICLE_ID)
	{
		if(GLOBAL_VEHICLES[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
			PLAYER_AC_INFO[ GLOBAL_VEHICLES[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] ][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY] = gettime() + 5;

		GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
		DetachTrailerFromVehicle(vehicleid);
	}
	
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pID]) Auto_SendPlayerAction(playerid, "ha arrancado su vehículo.");
	else Auto_SendPlayerAction(playerid, "ha arrancado el vehículo.");
	return 1;
}

AddVehicleComponents(vehicleid)
{
	for(new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
	{
		RemoveVehicleComponent(vehicleid, i);
		
		if(!GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i]) continue;
		AddVehicleComponent(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i]);
	}
	return 1;
}

public OnEnterExitModShop(playerid, enterexit, interiorid)
{
    if(enterexit) // Entra
    {
		SendClientMessage(playerid, -1, " ");
		SendClientMessagef(playerid, -1, "Solo puedes tunear vehículos en el mecánico, buscalo con el /GPS.");
		SendClientMessage(playerid, -1, "{ffff35}[ATENCION] {"#SILVER_COLOR"}Si realizas alguna modificacion al vehículo en este garaje serás expulsado.");
    }
	else
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if(vehicleid != INVALID_VEHICLE_ID)
		{
			ChangeVehicleColor(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2]);
			ChangeVehiclePaintjob(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PAINTJOB]);
			AddVehicleComponents(vehicleid);
		}
	}
    return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	if(ac_Info[CHEAT_CAR_MOD][ac_Enabled])
	{
		if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_IMMUNITY])
		{
			if(!ac_Info[CHEAT_CAR_MOD][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
			else
			{
				if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_MOD][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] = 0;
				else PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] ++;
				
				PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] = gettime();
				if(PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_MOD][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
			}
		}
	}
    return 0;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	if(ac_Info[CHEAT_CAR_MOD][ac_Enabled])
	{
		if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_IMMUNITY])
		{
			if(!(-1 < paintjobid < 3) && paintjobid != 255)
			{
				if(!ac_Info[CHEAT_CAR_MOD][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
				else
				{
					if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_MOD][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] = gettime();
					if(PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_MOD][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
				}
			}
		}
	}
	return 1;
}

DestroyVehicleEx(vehicleid)
{
	if(!GLOBAL_VEHICLES[vehicleid][gb_vehicle_VALID]) return false;
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
	{
		PLAYER_AC_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	}
	
	if(DestroyVehicle(vehicleid))
	{
		if(IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
		{
			DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
		}

		new temp_GLOBAL_VEHICLES[Global_Vehicles_Info]; GLOBAL_VEHICLES[vehicleid] = temp_GLOBAL_VEHICLES;
		new temp_PLAYER_VEHICLES[Player_Vehicles_Info]; PLAYER_VEHICLES[vehicleid] = temp_PLAYER_VEHICLES;
		new temp_SELL_VEHICLES[SELL_VEHICLES_Enum]; SELL_VEHICLES[vehicleid] = temp_SELL_VEHICLES;
		
		new temp_VEHICLE_BOOT[enum_VEHICLE_BOOT];
		for(new i = 0; i != MAX_BOOT_SLOTS; i ++) VEHICLE_BOOT[vehicleid][i] = temp_VEHICLE_BOOT;
		
		return true;
	}
	return false;
}

stock getRandomLetter() 
{
    return 65 + random(25);
}

UpdatePlayerPropertyContructor(playerid)
{
	SetPlayerPosEx
	(
		playerid, 
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_X],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_Y],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_Z],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_ANGLE],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_INTERIOR],
		0, false, true
	);
	
	new td_str[45]; format(td_str, sizeof td_str, "Interior:_%d/%d", PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO], sizeof PROPERTY_INTERIORS - 1);
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], td_str);
	SelectTextDrawEx(playerid, 0xe8d08fFF);
	return 1;
}

ExitPlayerPropertyConstructor(playerid)
{
	CancelSelectTextDrawEx(playerid);
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED] = false;
	
	SetPlayerPosEx
	(
		playerid, 
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT],
		0, false, true
	);
	
	for(new i = 0; i != 6; i ++) PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][i]);
	return 1;
}

Create_PlayerPropertyConstructo(playerid)
{
	new slot = GetEmptyPropertySlot();
	if(slot == -1)
	{
		SendClientMessagef(playerid, -1, "No hay mas slots.");
		ExitPlayerPropertyConstructor(playerid);
		return 1;
	}
	
	PROPERTY_INFO[slot][property_VALID] = true;
	PROPERTY_INFO[slot][property_EXT_X] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X];
	PROPERTY_INFO[slot][property_EXT_Y] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y];
	PROPERTY_INFO[slot][property_EXT_Z] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z];
	PROPERTY_INFO[slot][property_EXT_ANGLE] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG];
	PROPERTY_INFO[slot][property_EXT_INTERIOR] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT];
	PROPERTY_INFO[slot][property_EXT_FREEZE] = false;
	PROPERTY_INFO[slot][property_ID_INTERIOR] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO];
	
	PROPERTY_INFO[slot][property_SOLD] = false;
	PROPERTY_INFO[slot][property_OWNER_ID] = 0;
	PROPERTY_INFO[slot][property_PRICE] = PlayerTemp[playerid][pt_PROPERTY_CINFO][1];
	PROPERTY_INFO[slot][property_LEVEL] = PlayerTemp[playerid][pt_PROPERTY_CINFO][0];
	PROPERTY_INFO[slot][property_EXTRA] = PlayerTemp[playerid][pt_PROPERTY_CINFO][3];
	PROPERTY_INFO[slot][property_VIP_LEVEL] = PlayerTemp[playerid][pt_PROPERTY_CINFO][2];
	
	if(PROPERTY_INFO[slot][property_EXTRA]) PROPERTY_INFO[slot][property_PRICE] = 0;
	if(PROPERTY_INFO[slot][property_VIP_LEVEL]) PROPERTY_INFO[slot][property_LEVEL] = 1;
	
	inline OnPropertyInserted()
	{
		PROPERTY_INFO[slot][property_ID] = cache_insert_id();
		CreatePropertyInfo(slot, 0);

		SendClientMessagef(playerid, -1, "Propiedad creada, id: %d (%d/%d).", PROPERTY_INFO[slot][property_ID], slot, MAX_PROPERTIES);
		ExitPlayerPropertyConstructor(playerid);
	}
	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			INSERT INTO properties (ext_x, ext_y, ext_z, ext_angle, ext_interior, ext_freeze, id_interior, price, level, extra, vip_level)\
			VALUES (%f, %f, %f, %f, %d, %d, %d, %d, %d, %d, %d);\
		",
			PROPERTY_INFO[slot][property_EXT_X], PROPERTY_INFO[slot][property_EXT_Y], PROPERTY_INFO[slot][property_EXT_Z], PROPERTY_INFO[slot][property_EXT_ANGLE], 
			PROPERTY_INFO[slot][property_EXT_INTERIOR], PROPERTY_INFO[slot][property_EXT_FREEZE], PROPERTY_INFO[slot][property_ID_INTERIOR],
			PROPERTY_INFO[slot][property_PRICE], PROPERTY_INFO[slot][property_LEVEL], PROPERTY_INFO[slot][property_EXTRA], PROPERTY_INFO[slot][property_VIP_LEVEL]
	);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPropertyInserted);
	return 1;
}

GetEmptyPropertySlot()
{
	for(new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if(!PROPERTY_INFO[i][property_VALID]) return i;
	}
	return -1;
}

stock GivePlayerDrunkLevel(playerid, amount)
{
	return SetPlayerDrunkLevel(playerid, GetPlayerDrunkLevel(playerid) + amount);
}

stock Float:frandom(Float:max, Float:min, dp)
{
	new
		Float:mul = floatpower(10.0, dp),
		imin = floatround(min * mul),
		imax = floatround(max * mul);
	return float(random(imax - imin) + imin) / mul;
}

SendAlertToTaxiDrivers(playerid)
{
	new Float:pos[3];
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(GetPlayerState(i) != PLAYER_STATE_DRIVER) continue;
				if(!PLAYER_WORKS[i][WORK_TAXI][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_TAXI) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, 0xf2f224FF);
				SendClientMessagef(i, -1, "Hay un nuevo cliente solicitando un taxi, distancia: {"#PRIMARY_COLOR"}%.2f Km.", (GetPlayerDistanceFromPoint(i, pos[0], pos[1], pos[2]) * 0.01));
			}
		}
	}
	return 1;
}

stock SetPlayerNormalColour(playerid)
{
	format(PlayerTemp[playerid][pt_PLAYER_COLOR], 10, "{ffffff}");
	SetPlayerColor(playerid, PLAYER_COLOR);
	return 1;
}

stock DisablePlayerGlobalMarker(playerid)
{
	//PlayerTemp[playerid][pt_PLAYER_COLOR] = "{ffffff}";

	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
		}
	}
}

DisablePlayerTaxiMark(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(GetPlayerState(i) != PLAYER_STATE_DRIVER) continue;
				if(!PLAYER_WORKS[i][WORK_TAXI][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_TAXI) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

SetTaxiPlayerMarkers(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(pTemp(i)[pt_WANT_TAXI])
				{
					SetPlayerMarkerForPlayer(playerid, i, 0xf2f224FF);
				}
			}
		}
	}
	return 1;
}

SetNormalPlayerMarkers(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			SetPlayerMarkerForPlayer(playerid, i, PLAYER_COLOR);
		}
	}
	return 1;
}

LoadPlayerCrewInfo(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	if(PI[playerid][pCREW])
	{
		new crew_index = GetCrewIndexById(PI[playerid][pCREW]);
		if(crew_index == -1)
		{
			PI[playerid][pCREW] = 0;
			PI[playerid][pCREW_RANK] = 0;
			PlayerTemp[playerid][pt_CREW_INDEX] = 0;
			SendClientMessagef(playerid, -1, "La banda a la que pertenecías ya no existe.");

			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL WHERE id = %d;", PI[playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
		else
		{
			PlayerTemp[playerid][pt_CREW_INDEX] = crew_index;
			CREW_INFO[crew_index][crew_ONLINE_MEMBERS] ++;
		}
	}
	return 1;
}

LoadPlayerWorks(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	inline OnPworksLoad()
	{
		new rows, count;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				new work;
				cache_get_value_name_int(i, "id_work", work);
				cache_get_value_name_int(i, "set", PLAYER_WORKS[playerid][work][pwork_SET]);
				cache_get_value_name_int(i, "level", PLAYER_WORKS[playerid][work][pwork_LEVEL]);

				if(PLAYER_WORKS[playerid][work][pwork_SET] && !PI[playerid][pVIP])
				{
					if(count >= MAX_NU_WORKS)
					{
						PLAYER_WORKS[playerid][work][pwork_SET] = false;
						if(work == WORK_POLICE)
						{
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pID], work);
							mysql_tquery(handle_db, QUERY_BUFFER);
							PLAYER_WORKS[playerid][work][pwork_LEVEL] = 0;
						}
						else
						{
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pID], work);
							mysql_tquery(handle_db, QUERY_BUFFER);
						}
					}
					count ++;
				}
				
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pworks WHERE id_player = %d;", PI[playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPworksLoad);
	return 1;
}

ResetTruckInfo(vehicleid)
{
	new tmp_TRUCK_VEHICLE[TRUCK_VEHICLE_Info]; TRUCK_VEHICLE[vehicleid] = tmp_TRUCK_VEHICLE;
	return 1;
}

ResetPizzaInfo(vehicleid)
{
	new tmp_PIZZA_VEHICLE[PIZZA_VEHICLE_Info]; PIZZA_VEHICLE[vehicleid] = tmp_PIZZA_VEHICLE;
	return 1;
}

ResetTrashInfo(vehicleid)
{
	new tmp_TRASH_VEHICLES[TRASH_VEHICLES_INFO]; TRASH_VEHICLES[vehicleid] = tmp_TRASH_VEHICLES;
	
	TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] = INVALID_PLAYER_ID;
	TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] = INVALID_PLAYER_ID;
	return 1;
}

forward TruckLoadUp(playerid, vehicleid);
public TruckLoadUp(playerid, vehicleid)
{
	if(PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] < 100.0)
	{
		PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] += 10.0;
		if(PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] > 100.0) PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] = 100.0;
		
		UpdatePlayerLoadingTruckSize(playerid);
		KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
		PlayerTemp[playerid][pt_TIMERS][9] = SetTimerEx("TruckLoadUp", 1000, false, "ii", playerid, vehicleid);
		return 1;
	}
	
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED] = true;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING] = false;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED] = false;
	
	SendClientMessage(playerid,-1, "{"#SILVER_COLOR"}El camion ha sido cargado, dirígite al checkpoint para entregar la mercancía.");
	SetPlayerTruckCheckpoint(playerid, vehicleid);
	return 1;
}

forward TruckUnLoadUp(playerid, vehicleid);
public TruckUnLoadUp(playerid, vehicleid)
{
	if(PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] < 100.0)
	{
		PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] += 10.0;
		if(PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] > 100.0) PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] = 100.0;
		
		UpdatePlayerLoadingTruckSize(playerid);
		KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
		PlayerTemp[playerid][pt_TIMERS][9] = SetTimerEx("TruckUnLoadUp", 1000, false, "ii", playerid, vehicleid);
		return 1;
	}
	
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING] = false;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED] = true;
	
	SendClientMessagef(playerid, -1, "La mercancía ha sido entregada, regresa al punto de partida para cobrar.");
	SetPlayerTruckCheckpoint(playerid, vehicleid);
	return 1;
}

SetPlayerTruckCheckpoint(playerid, vehicleid)
{
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]);
		PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	}

	if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED])
	{
		PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = CreateDynamicCP(Truck_Return_Positions[0], Truck_Return_Positions[1], Truck_Return_Positions[2], 5.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_FINISH_TRUCK;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = CreateDynamicCP(Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_X], Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_Y], Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_Z], 5.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_UNLOAD_TRUCK;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	Streamer_Update(playerid, STREAMER_TYPE_CP);
	return 1;
}

UpdatePlayerLoadingTruckSize(playerid)
{
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3], 253.0 + ( PlayerTemp[playerid][pt_TRUCK_LOADING_VALUE] * 1.34), 0.000000);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
	return 1;
}

CMD:basurero(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return SendMessage(playerid, "No eres basurero.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_TRASH)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInRangeOfPoint(playerid, 1.0, -1906.577514, -1756.457519, 22.079319)) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	
	if(!PlayerTemp[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_TRASH, INVALID_VEHICLE_ID);
	else CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
	return 1;
}

CMD:reparar(playerid, params[]) 
{
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(PI[playerid][pMECHANIC_KITS] <= 0) return SendClientMessagef(playerid, -1, "No tienes un kit de reparacion, compra uno en el taller.");

	new vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendMessage(playerid, "No estás cerca de ningun vehículo.");
	
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] != VEHICLE_STATE_DAMAGED) return SendClientMessagef(playerid, -1, "El vehículo no está estropeado.");

	RepairVehicleEx(vehicleid, playerid, MIN_VEHICLE_HEALTH + 50.0);
	PI[playerid][pMECHANIC_KITS] --;
	SendClientMessagef(playerid, -1, "Has usado 1 kit de reparacion para arreglar este vehículo.");
	return 1;
}

CMD:vmenu(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return SendMessage(playerid, "No eres mecánico.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_MECHANIC) return SendMessage(playerid, "No estás de servicio como mecánico.");
	
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	new vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendMessage(playerid, "No estás cerca de ningun vehículo.");
	
	/*new bool:in_mechanic_area;
	for(new i; i != sizeof Mechanic_Areas; i++)
		if(IsPlayerInDynamicArea(playerid, Mechanic_Areas[i]))
		{
			in_mechanic_area = true;
			break;
		}


	if(!in_mechanic_area)
	{
		SendClientMessagef(playerid, -1, "Para reparar este vehículo tienes que estar en el taller.");
		return 1;
	}*/

	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE]) return SendClientMessagef(playerid, -1, "Para trabajar sobre el vehículo el motor debe estar apagado.");
	if(!VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_NORMAL_SPEEDO] || GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) return SendClientMessagef(playerid, -1, "No se puede modificar este vehículo aquí.");
	
	PlayerTemp[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] = vehicleid;
	ShowDialog(playerid, DIALOG_MECHANIC_MENU);
	return 1;
}

CMD:remolcar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return SendMessage(playerid, "No eres mecánico.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_MECHANIC) return SendMessage(playerid, "No estás de servicio como mecánico.");

	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessagef(playerid, -1, "No estás en una grua.");

	new towing_vehicle = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[towing_vehicle][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "No estás en una grua.");
	if(WORK_VEHICLES[towing_vehicle][work_vehicle_WORK] != WORK_MECHANIC) return SendClientMessagef(playerid, -1, "No estás en una grua.");

	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return SendInfoMessage(playerid, "Aviso~n~~n~Error en los parametros~n~~n~Usa: ~r~/remolcar [ID del Usuario]~w~ para poder remolcar uno de sus vehiculos.");
	
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 15.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	return 1;
}

CMD:talar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_SET]) return SendMessage(playerid, "No eres talador.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_LUMBERJACK)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInRangeOfPoint(playerid, 1.0, -527.670349, -97.338562, 63.176174)) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	
	if(!PlayerTemp[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_LUMBERJACK, INVALID_VEHICLE_ID);
	else CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
	return 1;
}

CMD:mecanico(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return SendMessage(playerid, "No eres mecánico.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_MECHANIC)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");

	for(new i; i != sizeof MechanicStartWorkingCoords; i++)
		if(IsPlayerInRangeOfPoint(playerid, 1.0, MechanicStartWorkingCoords[i][0], MechanicStartWorkingCoords[i][1], MechanicStartWorkingCoords[i][2]))
		{
			if(!PlayerTemp[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_MECHANIC, INVALID_VEHICLE_ID);
			else CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);

			return 1;
		}


	SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	return 1;
}

CMD:medico(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_MEDIC][pwork_SET]) return SendMessage(playerid, "No eres médico.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_MEDIC)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(PlayerTemp[playerid][pt_INTERIOR_INDEX] == -1 || ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_HOSPITAL) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInRangeOfPoint(playerid, 1.0, -2029.751342, -114.503044, 1035.171875)) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");

	if(!PlayerTemp[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_MEDIC, INVALID_VEHICLE_ID);
	else CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
	return 1;
}

CMD:pizzero(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_PIZZA][pwork_SET]) return SendMessage(playerid, "No eres pizzero, el trabajo se consigue dentro de la pizzería.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_NONE && PlayerTemp[playerid][pt_WORKING_IN] != WORK_PIZZA)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInRangeOfPoint(playerid, 1.0, 2097.355712, -1818.040771, 13.382812)) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	
	if(!PlayerTemp[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_PIZZA, INVALID_VEHICLE_ID);
	else CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
	return 1;
}

CMD:semillas(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_FARMER][pwork_SET]) return SendMessage(playerid, "No eres agricultor.");
	if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInRangeOfPoint(playerid, 1.0, 1566.521606, 31.370532, 24.16406)) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	
	ShowDialog(playerid, DIALOG_SEED_LIST);
	return 1;
}

CMD:plantar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_FARMER][pwork_SET]) return SendMessage(playerid, "No eres agricultor.");
	if(PlayerTemp[playerid][pt_WORKING_IN] && PlayerTemp[playerid][pt_WORKING_IN] != WORK_FARMER)
	{
		SendClientMessagef(playerid, -1, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PlayerTemp[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if(GetPlayerVirtualWorld(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(!IsPlayerInDynamicArea(playerid, Farmer_Area)) return SendClientMessagef(playerid, -1, "No estás en la zona para plantar, está marcada en el mapa con una bandera.");
	if(PlayerTemp[playerid][pt_PLANTING]) return SendClientMessagef(playerid, -1, "Ahora mismo ya estás plantando algo.");
	
	if(gettime() < PlayerTemp[playerid][pt_LAST_PLANT_TIME] + 30)//tiempo en agricultor
	{
		new time = (30-(gettime()-PlayerTemp[playerid][pt_LAST_PLANT_TIME]));
		SendClientMessagef(playerid, -1, "Tienes que esperar %s segundos para volver a plantar.", TimeConvert(time));
		return 1;
	}
	
	if(GetPlayerPlantedPlants(playerid) > 10) return SendClientMessagef(playerid, -1, "Por favor, recoge tus otras plantas para poder plantar más.");
	
	for(new i = 0; i != MAX_PLANTS; i ++)
	{
		if(!PLANTS[i][plant_VALID]) continue;
		
		new Float:pos[3];
		GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
		if(IsPlayerInRangeOfPoint(playerid, 3.0, pos[0], pos[1], pos[2]))
		{
			SendClientMessagef(playerid, -1, "Aquí ya hay una planta, aléjate un poco para plantar.");
			return 1;
		}
	}
	
	ShowDialog(playerid, DIALOG_PLANT_PLANTS);
	return 1;
}

CMD:piezas(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return SendMessage(playerid, "No eres mecánico.");
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(PI[playerid][pMECHANIC_PIECES] >= 1000) return SendClientMessagef(playerid, -1, "No puedes tener mas de 1000 piezas.");

	for(new i; i != sizeof MechanicBuyPiecesCoords; i++)
		if(IsPlayerInRangeOfPoint(playerid, 1.0, MechanicBuyPiecesCoords[i][0], MechanicBuyPiecesCoords[i][1], MechanicBuyPiecesCoords[i][2]))
		{
			if(sscanf(params, "d", params[0])) return ErrorCommandParams(playerid, "/piezas [cantidad]");
			if(params[0] <= 0 || params[0] > 1000) return ErrorCommandParams(playerid, "/piezas [cantidad > 1000]");

			new price = params[0] * 50;
			if(price > PI[playerid][pCASH])
			{
				SendClientMessagef(playerid, -1, "Necesitas %s$ para poder comprar %d piezas.", number_format_thousand(price), params[0]);
				return 1;
			}
			if(price < 0) return 1;

			if(GivePlayerCash(playerid, -price, true, true)) 
			{
				PI[playerid][pMECHANIC_PIECES] += params[0];
				SendClientMessagef(playerid, -1, "Has comprado %s piezas por %s$, ahora tienes %s piezas.", number_format_thousand(params[0]), number_format_thousand(price), number_format_thousand(PI[playerid][pMECHANIC_PIECES]));
			}
			return 1;
		}

	SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	return 1;
}

CMD:kit(playerid, params[])
{
	if(GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	for(new i; i != sizeof MechanicBuyKitsCoords; i++)
		if(IsPlayerInRangeOfPoint(playerid, 1.0, MechanicBuyKitsCoords[i][0], MechanicBuyKitsCoords[i][1], MechanicBuyKitsCoords[i][2]))
		{
			if(GivePlayerCash(playerid, -1000, true, true)) {
				PI[playerid][pMECHANIC_KITS] += 1;
				SendClientMessagef(playerid, -1, "Has comprado un kit de reparacion, para usararlo usa /reparar cerca del vehículo que quieras reparar.");
			}
			else SendClientMessagef(playerid, -1, "No tienes suficiente dinero.");
			return 1;
		}

	SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	return 1;
}

VehiclePaintjob(modelid)
{
	switch(modelid)
	{
		case 483: return 1;
		case 534..536: return 3;
		case 558..562: return 3;
		case 565, 567: return 3;
		case 575: return 2;
		case 576: return 3;
	}
	return false;
}

Set_HARVEST_Checkpoint(playerid)
{
	if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]))
	{
		DestroyDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]);
		PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	
	if(PlayerTemp[playerid][pt_HARVERT_PROCCESS] == sizeof(HARVEST_CHECKPOINTS) - 1)
	{
		PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] =	CreateDynamicRaceCP
														(
															1,
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][0],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][1],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][2],
															0.0,
															0.0,
															0.0,
															5.0, 
															0,
															0,
															playerid
														);
	}
	else
	{
		PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] =	CreateDynamicRaceCP
														(
															0,
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][0],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][1],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] ][2],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] + 1 ][0],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] + 1 ][1],
															HARVEST_CHECKPOINTS[ PlayerTemp[playerid][pt_HARVERT_PROCCESS] + 1 ][2],
															5.0, 
															0,
															0,
															playerid
														);
	}
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_HARVEST;
	Streamer_SetArrayData(STREAMER_TYPE_RACE_CP, PlayerTemp[playerid][pt_HARVERT_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	
	return 1;
}

public OnPlayerEnterDynamicRaceCP(playerid, checkpointid)
{
	new info[1];
	Streamer_GetArrayData(STREAMER_TYPE_RACE_CP, checkpointid, E_STREAMER_EXTRA_ID, info);
	
	switch(info[0])
	{
		case CHECKPOINT_TYPE_HARVEST:
		{
			if(PlayerTemp[playerid][pt_HARVERT_PROCCESS] == sizeof(HARVEST_CHECKPOINTS) - 1)
			{
				new vehicleid = GetPlayerVehicleID(playerid);
				if(vehicleid == INVALID_VEHICLE_ID) return 1;
				
				new work_extra_payment;
				if(work_info[WORK_HARVESTER][work_info_EXTRA_PAY] > 0 && work_info[WORK_HARVESTER][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_HARVESTER][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_HARVESTER][pwork_LEVEL], work_info[WORK_HARVESTER][work_info_EXTRA_PAY_EXP])));
					if(work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT];
				}
				
				new money = minrand(350, 410) + WORK_HARVESTER;
				GivePlayerCash(playerid, money, true, false);
				
				PLAYER_WORKS[playerid][WORK_HARVESTER][pwork_LEVEL] ++;

				SendClientMessagef(playerid, -1, "Has ganado %s$ con esta cosecha.", number_format_thousand(money));
				
				CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
				return 1;
			}
			
			new str[50];
			format(str, sizeof str, " Control_%d/%d", PlayerTemp[playerid][pt_HARVERT_PROCCESS] + 1, sizeof(HARVEST_CHECKPOINTS));
			GameTextForPlayer(playerid, str, 2000, 3);
			
			PlayerTemp[playerid][pt_HARVERT_PROCCESS] ++;
			Set_HARVEST_Checkpoint(playerid);
		}
		case CHECKPOINT_TYPE_DRIVING_SCHOOL:
		{
			if(GLOBAL_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TYPE] == VEHICLE_TYPE_DRIVING_SCHOOL)
			{
				if(PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] == sizeof(Driving_School_Points) - 1)
				{
					new Float:vhealth;
					GetVehicleHealth(PlayerTemp[playerid][pt_LAST_VEHICLE_ID], vhealth);

					if(vhealth >= 800.0)
					{
						PI[playerid][pDRIVE_LICENSE_POINTS] = 12;
						SendInfoMessage(playerid, "Auto Escuela~n~~n~Felicitaciones, has completado el examen de conducción, ahora tienes una ~r~licencia de conducir~w~ con ~y~12 puntos~w~.");
					}
					else SendClientMessagef(playerid, -1, "No has superado el examen.");

					if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]))
					{
						DestroyDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]);
						PlayerTemp[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
					}

					PlayerTemp[playerid][pt_DL_EXAM] = false;
					PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] = 0;

					if(pTemp(playerid)[pt_VEHICLE_SPAWNED] != INVALID_VEHICLE_ID)
					{
						ClearVehicleGlobalInfo(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
						DestroyVehicleEx(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
						DestroyVehicleEx(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
						pTemp(playerid)[pt_VEHICLE_SPAWNED] = INVALID_VEHICLE_ID;
					}
					return 1;
				}

				SendMessagef(playerid, "Punto de Control ~r~%d~w~/~g~%d", PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] + 1, sizeof(Driving_School_Points));

				PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ++;
				SetPlayerDrivingSchoolCP(playerid);
			}
		}
	}
	return 1;
}

SetPlayerTrashCheckpoint(playerid, vehicleid)
{
	DestroyPlayerTrashCheckpoint(playerid);
	
	new cp = TRASH_VEHICLES[ vehicleid ][trash_vehicle_CP];
	new route = TRASH_VEHICLES[ vehicleid ][trash_vehicle_ROUTE];
	
	if(cp >= TRASH_OBJECTS[route][trash_route_OBJECTS])
	{
		PlayerTemp[playerid][pt_TRASH_CHECKPOINT] = CreateDynamicCP(-1872.575073, -1720.129394, 22.30542, 5.0, 0, 0, playerid, 9999999999.0);
		new info[1];
		info[0] = CHECKPOINT_TYPE_FINISH_TRASH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PlayerTemp[playerid][pt_TRASH_CHECKPOINT] = CreateDynamicCP(TRASH_OBJECTS[ route ][trash_object_X][ cp ], TRASH_OBJECTS[ route ][trash_object_Y][ cp ], TRASH_OBJECTS[ route ][trash_object_Z][ cp ], 1.5, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_TRASH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	return 1;
}

DestroyPlayerTrashCheckpoint(playerid)
{
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_TRASH_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_TRASH_CHECKPOINT]);
		PlayerTemp[playerid][pt_TRASH_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	return 1;
}

CancelTrashWork(driver, mate, vehicleid)
{
	DestroyPlayerTrashCheckpoint(driver);
	DestroyPlayerTrashCheckpoint(mate);
	
	DestroyPlayerTrashRouteObjects(driver);
	DestroyPlayerTrashRouteObjects(mate);
	
	PlayerTemp[driver][pt_TRASH_DRIVER] = false;
	PlayerTemp[driver][pt_TRASH_PASSENGER] = false;
	PlayerTemp[driver][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	
	PlayerTemp[mate][pt_TRASH_DRIVER] = false;
	PlayerTemp[mate][pt_TRASH_PASSENGER] = false;
	PlayerTemp[mate][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	
	KillTimer(PlayerTemp[mate][pt_TIMERS][10]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][0]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][1]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][2]);
	ClearAnimations(mate);
	TogglePlayerControllableEx(mate, true);
	
	ResetTrashInfo(vehicleid);
	SetVehicleToRespawnEx(vehicleid);
	return 1;
}

UpdatePlayerTrashRecycleSize(playerid)
{
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.0, PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] * 1.3);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
	return 1;
}

forward RecycleUp(playerid);
public RecycleUp(playerid)
{
	if(PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] < 100.0)
	{
		PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] += 15.0;
		if(PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] > 100.0) PlayerTemp[playerid][pt_RECYCLE_BIN_VALUE] = 100.0;
		
		ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
		UpdatePlayerTrashRecycleSize(playerid);
		KillTimer(PlayerTemp[playerid][pt_TIMERS][10]);
		PlayerTemp[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
		return 1;
	}
	
	TogglePlayerControllableEx(playerid, true);
	ClearAnimations(playerid);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
	
	new driver = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
	new cp = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP];
	new route = TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
	
	DestroyDynamicObject(TRASH_PLAYER_OBJECTS[playerid][cp]);
	TRASH_PLAYER_OBJECTS[playerid][cp] = INVALID_STREAMER_ID;
	
	DestroyDynamicObject(TRASH_PLAYER_OBJECTS[driver][cp]);
	TRASH_PLAYER_OBJECTS[driver][cp] = INVALID_STREAMER_ID;
	
	CreatePlayerFlashObject(
								playerid, 
								TRASH_OBJECTS[ route ][trash_object_X][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Z][ cp ] - 1.5
							);
	
	CreatePlayerFlashObject(
								driver, 
								TRASH_OBJECTS[ route ][trash_object_X][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Z][ cp ] - 1.5
							);
							
	PlayerPlaySoundEx(playerid, 1190, 0.0, 0.0, 0.0);
	
	TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] ++;
	if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] >= TRASH_OBJECTS[ TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] ][trash_route_OBJECTS])
	{
		SendClientMessagef(playerid, -1, "Sube al camion para volver al vertedero y recibir la paga.");
		SendClientMessagef(driver, -1, "Espera a que se suba tu amigo y vuelve al vertedero para recibir la paga.");
	}
	else SendClientMessagef(playerid, -1, "Sube al camion y sigue con la ruta.");

	SetPlayerTrashCheckpoint(driver, PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
	SetPlayerTrashCheckpoint(playerid, PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
	
	Streamer_Update(driver);
	Streamer_Update(playerid);
	return 1;
}

CancelLumberjackWork(playerid)
{
	if(PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] != -1)
	{
		DestroyDynamicObject(LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_OBJECT_ID]);
		LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_MODELID], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_X], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_Y], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_Z], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RX], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RY], LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RZ], 0, 0);
		LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_STATE] = LUMBER_TREE_STATE_NORMAL;
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{FFFFFF}Pulsa {f9d834}[ N ] {FFFFFF}para talar el árbol.", PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE]);
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_LABEL], -1, label_str);
	}
	
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	
	RemovePlayerAttachedObject(playerid, 8);
	RemovePlayerAttachedObject(playerid, 9);
	KillTimer(PlayerTemp[playerid][pt_TIMERS][11]);
	//ClearAnimations(playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	TogglePlayerControllableEx(playerid, true);
	PlayerTemp[playerid][pt_PLAYER_CARRYING_TREE] = false;
	PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	DestroyPlayerKeyPress(playerid);
	return 1;
}

forward ContinueTreeAnimation(playerid, tree, Float:rotation);
public ContinueTreeAnimation(playerid, tree, Float:rotation)
{
	new Float:pos[3];
	pos[0] = LUMBER_TREES[ tree ][lumber_tree_X];
	pos[1] = LUMBER_TREES[ tree ][lumber_tree_Y];
	pos[2] = LUMBER_TREES[ tree ][lumber_tree_Z];
	
	pos[0] += (1.5 * floatsin(-rotation, degrees));
	pos[1] += (1.5 * floatcos(-rotation, degrees));
	
	CreateFlashObject(pos[0], pos[1], pos[2] - 0.4);
	DestroyDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID]);
	PlayerPlaySoundEx(playerid, 1190, 0.0, 0.0, 0.0);
	
	LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID] = CreateDynamicObject(841, pos[0], pos[1], pos[2] + 0.2, 0.0, 0.0, rotation, 0, 0);
	
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CARRY);
	PlayerTemp[playerid][pt_PLAYER_CARRYING_TREE] = true;
	PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	
	RemovePlayerAttachedObject(playerid, 8);
	SetPlayerAttachedObject(playerid, 8, 19793, 6, 0.077999, 0.043999, -0.170999, -13.799953, 79.70, 0.0);
	
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT] = CreateDynamicCP(-504.353912, -88.591995, 62.086818, 5.0, 0, 0, playerid, 9999999999.0);
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_LUMBERJACK;
	Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_LUMBERJACK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	
	SendClientMessagef(playerid, -1, "Ve a llevar la troncos al punto marcado para recibir la paga.");
	
	
	LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] = 90;
	new label_str[256];
	format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{"#SILVER_COLOR"}(%s)", tree, TimeConvert(LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER]));
	UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
	
	LUMBER_TREES[ tree ][lumber_tree_STATE] = LUMBER_TREE_STATE_CUTTED;
	KillTimer(LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER]);
	LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER] = SetTimerEx("GrowTreeUp", 1000, false, "i", tree);
	
	Streamer_Update(playerid);
	return 1;
}

forward GrowTreeUp(tree);
public GrowTreeUp(tree)
{
	if(LUMBER_TREES[ tree ][lumber_tree_STATE] != LUMBER_TREE_STATE_CUTTED) return 0;
	
	if(LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] > 0)
	{
		LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] --;
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{"#SILVER_COLOR"}(%s)", tree, TimeConvert(LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER]));
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
		
		KillTimer(LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER]);
		LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER] = SetTimerEx("GrowTreeUp", 1000, false, "i", tree);
		return 1;
	}
	
	DestroyDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID]);
	LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[ tree ][lumber_tree_MODELID], LUMBER_TREES[ tree ][lumber_tree_X], LUMBER_TREES[ tree ][lumber_tree_Y], LUMBER_TREES[ tree ][lumber_tree_Z], LUMBER_TREES[ tree ][lumber_tree_RX], LUMBER_TREES[ tree ][lumber_tree_RY], LUMBER_TREES[ tree ][lumber_tree_RZ], 0, 0);
	LUMBER_TREES[ tree ][lumber_tree_STATE] = LUMBER_TREE_STATE_NORMAL;

	new label_str[256];
	format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{FFFFFF}Pulsa {f9d834}[ N ] {FFFFFF}para talar el árbol.", tree);
	UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
	return 1;
}

CreateFlashObject(Float:x, Float:y, Float:z)
{
	new oid = CreateObject(18680, x, y, z, 0.0, 0.0, 0.0);
	SetTimerEx("DestroyFlashObject", 1000, false, "i", oid);
	return 1;
}

forward DestroyFlashObject(objectid);
public DestroyFlashObject(objectid)
{
	return DestroyObject(objectid);
}

enum
{
	INVENTORY_TYPE_CASH = 0,
	INVENTORY_TYPE_DRIVE_LICENCE,
	INVENTORY_TYPE_PHONE,
	INVENTORY_TYPE_GPS,
	INVENTORY_TYPE_PHONE_RESOLVER,
	INVENTORY_TYPE_MECHANIC_PIECES,
	INVENTORY_TYPE_FUEL_DRUM,
	INVENTORY_TYPE_SEED_MEDICINE,
	INVENTORY_TYPE_SEED_CANNABIS,
	INVENTORY_TYPE_SEED_CRACK,
	INVENTORY_TYPE_MEDICINE,
	INVENTORY_TYPE_CANNABIS,
	INVENTORY_TYPE_CRACK,
	INVENTORY_TYPE_MECHANIC_KITS,
	INVENTORY_TYPE_MEDICAL_KITS,
	INVENTORY_TYPE_BLACK_CASH,

	INVENTORY_TYPE_WEAPON_OPTIONS //Siempre debajo
}

enum
{
	SELECTION_TYPE_GIVE = 0,
	SELECTION_TYPE_SELL
}

ShowPlayerInventory(playerid, pid)
{
	if(!IsPlayerConnected(pid)) return 0;
	if(PI[pid][pID] == 0) return 0;
	
	new caption[48];
	format(caption, sizeof caption, "Bolsillos de %s", pTemp(pid)[pt_NAME]);
	
	new dialog[1800], line_str[128];

	if(PI[playerid][pCASH] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Dinero {"#SILVER_COLOR"}({"#GREEN_COLOR"}%s${"#SILVER_COLOR"})\n", number_format_thousand(PI[pid][pCASH]));
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Dinero (0$)\n");
	
	if(PI[pid][pDRIVE_LICENSE_POINTS])
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Licencia de conducir (%d púntos)\n", PI[pid][pDRIVE_LICENSE_POINTS]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Licencia de conducir (No)\n");

	if(PI[pid][pPHONE_NUMBER])
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Teléfono {"#SILVER_COLOR"}(%d)\n", PI[pid][pPHONE_NUMBER]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Teléfono\n");

	if(PI[pid][pGPS]) strcat(dialog, "GPS\n");
	else strcat(dialog, "{666666}GPS\n");

	if(PI[pid][pPHONE_RESOLVER]) strcat(dialog, "{"#SILVER_COLOR"}Guía telefonica\n");
	else strcat(dialog, "{666666}Guía telefonica\n");
	
	if(PI[pid][pMECHANIC_PIECES] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Piezas de mecánico {"#SILVER_COLOR"}(%s)\n", number_format_thousand(PI[pid][pMECHANIC_PIECES]));
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Piezas de mecánico (0)\n");
	
	if(PI[pid][pFUEL_DRUM] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Bidon de gasolina {"#SILVER_COLOR"}(%d Litros)\n", PI[pid][pFUEL_DRUM]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Bidon de gasolina (0)\n");
	
	if(PI[pid][pSEED_MEDICINE] > 0)
	{
		format(line_str, sizeof line_str, "{"#GREEN_COLOR"}Semillas de medicina {"#SILVER_COLOR"}(%d)\n", PI[pid][pSEED_MEDICINE]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Semillas de medicina (0)\n");
	
	if(PI[pid][pSEED_CANNABIS] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Semillas de marihuana {"#SILVER_COLOR"}(%d)\n", PI[pid][pSEED_CANNABIS]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Semillas de marihuana (0)\n");
	
	if(PI[pid][pSEED_CRACK] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Semillas de coca {"#SILVER_COLOR"}(%d)\n", PI[pid][pSEED_CRACK]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Semillas de coca (0)\n");
	
	if(PI[pid][pMEDICINE] > 0)
	{
		format(line_str, sizeof line_str, "{"#GREEN_COLOR"}Medicamentos {"#SILVER_COLOR"}(%dg)\n", PI[pid][pMEDICINE]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Medicamentos (0g)\n");
	
	if(PI[pid][pCANNABIS] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Marihuana {"#SILVER_COLOR"}(%dg)\n", PI[pid][pCANNABIS]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Marihuana (0g)\n");
	
	if(PI[pid][pCRACK] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Crack {"#SILVER_COLOR"}(%dg)\n", PI[pid][pCRACK]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Crack (0g)\n");

	if(PI[pid][pMECHANIC_KITS] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Kits de reparacion (%d)\n", PI[pid][pMECHANIC_KITS]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Kits de reparacion (0)\n");

	if(PI[pid][pMEDICAL_KITS] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Botiquines (%d)\n", PI[pid][pMEDICAL_KITS]);
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Botiquines (0)\n");

	if(PI[playerid][pBLACK_CASH] > 0)
	{
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Dinero Negro {"#SILVER_COLOR"}({"#GRAY_COLOR"}%s${"#SILVER_COLOR"})\n", number_format_thousand(PI[pid][pBLACK_CASH]));
		strcat(dialog, line_str);
	}
	else strcat(dialog, "{666666}Dinero Negro (0$)\n");
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST, caption, dialog, "Cerrar", "");	
	return 1;
}

ShowPlayerSkills(playerid, pid)
{
	if(!IsPlayerConnected(pid)) return 0;
	if(PI[pid][pID] == 0) return 0;
	
	new caption[48], line_str[80], dialog[sizeof line_str * (sizeof(work_info) + 5)];
	format(caption, sizeof caption, "Experiencia de %s", pTemp(pid)[pt_NAME]);
	
	strcat(dialog, "{"#BLUE_COLOR"}CUENTA\n");
	format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Nivel: {"#PRIMARY_COLOR"}%d\n", PI[pid][pLEVEL]);
	strcat(dialog, line_str);
	
	new neccessary_rep = PI[pid][pLEVEL] * REP_MULTIPLIER;
	format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Reputacion: {"#PRIMARY_COLOR"}%d/%d\n", PI[pid][pREP], neccessary_rep);
	strcat(dialog, line_str);
	
	new Float:hours;
	ConvertTime_SecondsToHoursFloat(PI[pid][pTIME_PLAYING], hours);
	format(line_str, sizeof line_str, "{"#SILVER_COLOR"}Horas de juego: {"#PRIMARY_COLOR"}%.1f horas\n", hours);
	strcat(dialog, line_str);
	
	strcat(dialog, "\n{"#BLUE_COLOR"}TRABAJOS\n");
	
	for(new i = 1; i != sizeof work_info; i ++)
	{
		if(i == WORK_POLICE)
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%c%s: {"#PRIMARY_COLOR"}%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], POLICE_RANKS[PLAYER_WORKS[pid][i][pwork_LEVEL]]);
				strcat(dialog, line_str);
			}
		}
		else
		{
			format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%c%s: {"#PRIMARY_COLOR"}%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], number_format_thousand(PLAYER_WORKS[pid][i][pwork_LEVEL]));
			strcat(dialog, line_str);
		}
	}
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, caption, dialog, "Cerrar", "");	
	return 1;
}

stock ConvertTime_SecondsToHoursFloat(sec, &Float:hours)
{
	hours = floatdiv(float(sec), 3600);
   	return 1;
}

CreatePlayerTrashRouteObjects(playerid, route)
{
	for(new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++)
	{
		TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;
		
		if(TRASH_OBJECTS[route][trash_object_MODELID][i] != 0)
		{
			TRASH_PLAYER_OBJECTS[playerid][i] = CreateDynamicObject(TRASH_OBJECTS[route][trash_object_MODELID][i], TRASH_OBJECTS[route][trash_object_X][i], TRASH_OBJECTS[route][trash_object_Y][i], TRASH_OBJECTS[route][trash_object_Z][i], TRASH_OBJECTS[route][trash_object_RX][i], TRASH_OBJECTS[route][trash_object_RY][i], TRASH_OBJECTS[route][trash_object_RZ][i], 0, 0, playerid);
		}
	}
	return 1;
}

DestroyPlayerTrashRouteObjects(playerid)
{
	for(new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++)
	{
		if(TRASH_PLAYER_OBJECTS[playerid][i] != INVALID_STREAMER_ID) DestroyDynamicObject(TRASH_PLAYER_OBJECTS[playerid][i]);
		TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;
	}
	return 1;
}

CreatePlayerFlashObject(playerid, Float:x, Float:y, Float:z)
{
	new oid = CreatePlayerObject(playerid, 18680, x, y, z, 0.0, 0.0, 0.0);
	SetTimerEx("DestroyPlayerFlashObject", 1000, false, "ii", playerid, oid);
	return 1;
}

forward DestroyPlayerFlashObject(playerid, objectid);
public DestroyPlayerFlashObject(playerid, objectid)
{
	return DestroyPlayerObject(playerid, objectid);
}

GetVehicleFirstPassenger(vehicleid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(GetPlayerState(i) == PLAYER_STATE_PASSENGER)
			{
				if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if(GetPlayerVehicleID(i) == vehicleid)
					{
						return i;
					}
				}
			}
		}
	}
	return INVALID_PLAYER_ID;
}

CancelPlayerPlanting(playerid)
{
	KillTimer(PlayerTemp[playerid][pt_TIMERS][12]);
	PlayerTemp[playerid][pt_PLANTING] = false;
	DestroyPlayerKeyPress(playerid);
	TogglePlayerControllableEx(playerid, true);
	ClearAnimations(playerid);
	return 1;
}

GetAvaiblePlantIndex()
{
	for(new i = 0; i != sizeof PLANTS; i ++)
	{
		if(!PLANTS[i][plant_VALID]) return i;
	}
	return -1;
}

forward GrowPlantUp(plant);
public GrowPlantUp(plant)
{
	if(!PLANTS[plant][plant_VALID] || !PLANTS[plant][plant_GROWING]) return 0;
	
	if(PLANTS[plant][plant_GROWING_PROGRESS] < 100.0)
	{
		PLANTS[plant][plant_GROWING_PROGRESS] += floatdiv(25, plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_SEEDS]);
		if(PLANTS[plant][plant_GROWING_PROGRESS] > 100.0) PLANTS[plant][plant_GROWING_PROGRESS] = 100.0;
		
		if(PLANTS[plant][plant_INVISIBLE] && PLANTS[plant][plant_GROWING_PROGRESS] > 50.0)
		{
			PLANTS[plant][plant_INVISIBLE] = false;
			SetDynamicObjectMaterial(PLANTS[plant][plant_OBJECT_ID], 2, 2244, "plants_tabletop", "CJ_PLANT", 0xFFFFFFFF);
		}
		
		new label_str[256];
		if(seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n{CCCCCC}Agricultor: %s\n\n{"#PRIMARY_COLOR"}(%.1f%%)", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], PLANTS[plant][plant_GROWING_PROGRESS]);
		else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n{CCCCCC}Agricultor: %s\n\n{"#PRIMARY_COLOR"}(%.1f%%)", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], PLANTS[plant][plant_GROWING_PROGRESS]);
		UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
		
		KillTimer(PLANTS[plant][plant_TIMER]);
		PLANTS[plant][plant_TIMER] = SetTimerEx("GrowPlantUp", 5000, false, "d", plant);
		return 1;
	}
	
	SetDynamicObjectMaterial(PLANTS[plant][plant_OBJECT_ID], 2, 2244, "plants_tabletop", "CJ_PLANT", 0xFFff0000);
	
	PLANTS[plant][plant_GROWING] = false;
	PLANTS[plant][plant_EXPIRE_TIME] = 300;
	PLANTS[plant][plant_IMMUNITY] = 60;
		
	new label_str[256];
	if(seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: %ss\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]), TimeConvert(PLANTS[plant][plant_IMMUNITY]));
	else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: %ss\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]), TimeConvert(PLANTS[plant][plant_IMMUNITY]));
	UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
	
	KillTimer(PLANTS[plant][plant_TIMER]);
	PLANTS[plant][plant_TIMER] = SetTimerEx("ExpirePlantTime", 1000, false, "d", plant);
	return 1;
}

forward ExpirePlantTime(plant);
public ExpirePlantTime(plant)
{
	if(!PLANTS[plant][plant_VALID]) return 0;
	
	if(PLANTS[plant][plant_EXPIRE_TIME] > 0)
	{
		new 
			label_str[256];

		PLANTS[plant][plant_EXPIRE_TIME] --;
		PLANTS[plant][plant_IMMUNITY] --;

		if(seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) 
		{
			if(PLANTS[plant][plant_IMMUNITY] > 0) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: %ss\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]), TimeConvert(PLANTS[plant][plant_IMMUNITY]));
			else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: Nada\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
		}
		else 
		{
			if(PLANTS[plant][plant_IMMUNITY] > 0) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: %ss\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]), TimeConvert(PLANTS[plant][plant_IMMUNITY]));
			else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n\n{CCCCCC}Agricultor: %s\nExpira en %sm\nInmunidad: Nada\n\nPresiona {"#PRIMARY_COLOR"}[ H ]{CCCCCC} para recogerla", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
		}

		UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
		
		KillTimer(PLANTS[plant][plant_TIMER]);
		PLANTS[plant][plant_TIMER] = SetTimerEx("ExpirePlantTime", 1000, false, "d", plant);
		return 1;
	}
	
	new Float:pos[3];
	GetDynamicObjectPos(PLANTS[plant][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
	CreateFlashObject(pos[0], pos[1], pos[2] - 1.3);
	
	DestroyDynamicObject(PLANTS[plant][plant_OBJECT_ID]);
	DestroyDynamic3DTextLabel(PLANTS[plant][plant_LABEL_ID]);
	
	new tmp_PLANTS[PLANTS_ENUM]; PLANTS[plant] = tmp_PLANTS;
	return 1;
}

CMD:recoger(playerid, params[])
{
	if(!IsPlayerInDynamicArea(playerid, Farmer_Area)) return 1;

	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	for(new i = 0; i != MAX_PLANTS; i ++)
	{
		if(!PLANTS[i][plant_VALID] || PLANTS[i][plant_GROWING]) continue;
		
		new Float:pos[3];
		GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);

		if(IsPlayerInRangeOfPoint(playerid, 1.5, pos[0], pos[1], pos[2]))
		{
			if(PLANTS[i][plant_IMMUNITY] > 0 && PLANTS[i][plant_PLANTED_BY_ACCOUNT_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Esta planta tiene tiempo de inmunidad.");
			
			KillTimer(PLANTS[i][plant_TIMER]);
			switch(seed_info[ PLANTS[i][plant_TYPE] ][seed_info_PLANT_TYPE])
			{
				case PLANT_TYPE_MEDICINE:
				{
					PI[playerid][pMEDICINE] += 2;
					SendClientMessagef(playerid, -1, "Has recogido la planta y has obtenido 2 gramos de medicamento.");
				}
				case PLANT_TYPE_CANNABIS:
				{
					PI[playerid][pCANNABIS] += 6;
					SendClientMessagef(playerid, -1, "Has recogido la planta y has obtenido 6 gramos de marihuana.");
				}
				case PLANT_TYPE_CRACK:
				{
					PI[playerid][pCRACK] += 4;
					SendClientMessagef(playerid, -1, "Has recogido la planta y has obtenido 4 gramos de crack.");
				}
			}
			
			DestroyDynamicObject(PLANTS[i][plant_OBJECT_ID]);
			DestroyDynamic3DTextLabel(PLANTS[i][plant_LABEL_ID]);
			ApplyAnimation(playerid, "CARRY", "putdwn05", 4.1, 0, 1, 1, 0, 0, 1);
			
			new tmp_PLANTS[PLANTS_ENUM]; PLANTS[i] = tmp_PLANTS;
			return 1;
		}
	}
	return 1;
}
	
public OnPlayerShootDynamicObject(playerid, weaponid, objectid, Float:x, Float:y, Float:z)
{
	if(IsPlayerInDynamicArea(playerid, Farmer_Area))
	{
		new info[3];
		Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
		
		if(info[0] == OBJECT_TYPE_PLANT)
		{
			KillTimer(PLANTS[info[1]][plant_TIMER]);
			
			new Float:pos[3];
			GetDynamicObjectPos(PLANTS[info[1]][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
			CreateFlashObject(pos[0], pos[1], pos[2] - 1.3);
			
			DestroyDynamicObject(PLANTS[info[1]][plant_OBJECT_ID]);
			DestroyDynamic3DTextLabel(PLANTS[info[1]][plant_LABEL_ID]);
			
			new tmp_PLANTS[PLANTS_ENUM]; PLANTS[info[1]] = tmp_PLANTS;
		}
	}
	return 1;
}

GivePlayerWeaponEx(playerid, weapon_id, ammo)
{
	PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_IMMUNITY] = gettime() + 3;

	if(PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_ID] == weapon_id) PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_AMMO] += ammo;
	else PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_AMMO] = ammo;

	PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_VALID] = true;
	PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_ID] = weapon_id;
	
	SetPlayerWeapon(playerid, WEAPON_INFO[weapon_id][weapon_info_SLOT]);
	return 1;
}

ResetPlayerWeaponsEx(playerid)
{
	PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_IMMUNITY] = gettime() + 3;

	new tmp_PLAYER_WEAPONS[enum_PLAYER_WEAPONS];
	for(new i = 0; i != sizeof PLAYER_WEAPONS[]; i ++) PLAYER_WEAPONS[playerid][i] = tmp_PLAYER_WEAPONS;
	
	ResetPlayerWeapons(playerid);
	return 1;
}

SetWeaponsForPlayer(playerid)
{
	PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_IMMUNITY] = gettime() + 3;

	ResetPlayerWeapons(playerid);

	for(new i = 0; i != sizeof PLAYER_WEAPONS[]; i ++)
	{
		if(PLAYER_WEAPONS[playerid][i][player_weapon_ID] != 0)
		{
			SetPlayerWeapon(playerid, i);
		}
	}
	return 1;
}

SetPlayerWeapon(playerid, slot) 
{
	if(PLAYER_WEAPONS[playerid][slot][player_weapon_AMMO] > 0) GivePlayerWeapon(playerid, PLAYER_WEAPONS[playerid][slot][player_weapon_ID], PLAYER_WEAPONS[playerid][slot][player_weapon_AMMO]);
}

stock IsValidDriveByWeapon(playerid)
{
	new weaponid = GetPlayerWeapon(playerid), valid = 0;
	switch(weaponid)
	{
		case 0: valid = -1;
		case 29: valid = 1;
		case 31: valid = 1;
		case 30: valid = 1;
		default: valid = 0;
	}
	return valid;
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{	
	if(WEAPON_INFO[weaponid][weapon_info_AMMO]) PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_AMMO] --;
	if(PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_AMMO] <= 0) PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_AMMO] = 0;
	
	if(IsPlayerInSafeZone(playerid) && !PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		SetPlayerArmedWeapon(playerid, 0);
	}

	if(ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Enabled])
	{
		if(GetPlayerWeapon(playerid) != weaponid)
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_IMMUNITY])
			{
				if(!ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_UNDETECTED_WEAPON);
				else
				{
					if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_LAST_DETECTION] = gettime();
					if(PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_UNDETECTED_WEAPON);
				}
			}
		}
	}
	
	if(IsValidDriveByWeapon(playerid) != -1 || IsValidDriveByWeapon(playerid) == 0)
	{
		if(ac_Info[CHEAT_DRIVE_BY][ac_Enabled])
		{
			new player_state = GetPlayerState(playerid);
			if(player_state == PLAYER_STATE_DRIVER/* || player_state == PLAYER_STATE_PASSENGER*/)
			{
				if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_IMMUNITY])
				{
					if(!ac_Info[CHEAT_DRIVE_BY][ac_Interval])
					{
						OnPlayerCheatDetected(playerid, CHEAT_DRIVE_BY);
						SetPlayerArmedWeapon(playerid, 0);
					}
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DRIVE_BY][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DRIVE_BY][ac_Detections])
						{
							OnPlayerCheatDetected(playerid, CHEAT_DRIVE_BY);
							SetPlayerArmedWeapon(playerid, 0);
						}
					}
				}
			}
		}
	}

	if(PI[playerid][pCREW])
	{
		if(gettime() > CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_LAST_ATTACK] + 300)
		{
			if(PlayerTemp[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
			{
				if(IsPlayerInDynamicArea(playerid, TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_AREA]))
				{
					if(TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_CREW_ID] != PI[playerid][pCREW])
					{
						if(!TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_WAR] && !CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING])
						{
							if(gettime() > TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_LAST_ATTACK] + 300)
							{
								if(!TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_OCCUPIED])
								{
									new attackers_in_area = CountCrewPlayersInTerritory(PlayerTemp[playerid][pt_CREW_INDEX], PlayerTemp[playerid][pt_LAST_TERRITORY]);
									if(attackers_in_area >= 2) StartTerritoryAttack(PlayerTemp[playerid][pt_CREW_INDEX], PlayerTemp[playerid][pt_LAST_TERRITORY], 160);
								}
								else
								{
									if(CREW_INFO[ TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_CREW_INDEX] ][crew_VALID])
									{
										if(!CREW_INFO[ TERRITORIES[ PlayerTemp[playerid][pt_LAST_TERRITORY] ][territory_CREW_INDEX] ][crew_FIGHTING])
										{	
											new attackers_in_area = CountCrewPlayersInTerritory(PlayerTemp[playerid][pt_CREW_INDEX], PlayerTemp[playerid][pt_LAST_TERRITORY]);
											if(attackers_in_area >= 2) StartTerritoryAttack(PlayerTemp[playerid][pt_CREW_INDEX], PlayerTemp[playerid][pt_LAST_TERRITORY], 160);
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
    return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)
{
	if(damagedid != INVALID_PLAYER_ID)
	{
		if(!IsPlayerInSafeZone(playerid))
		{
			if(PI[playerid][pSTATE] != ROLEPLAY_STATE_CRACK && PI[playerid][pSTATE] != ROLEPLAY_STATE_JAIL) 
			{
				if(PlayerTemp[playerid][pt_COMBAT])
				{
					KillTimer(PlayerTemp[playerid][pt_COMBAT_TIMER]);
					PlayerTemp[playerid][pt_COMBAT_TIMER] = SetTimerEx("ResetCombat", seconds(30), false, "i", playerid);
				}
				else
				{
					PlayerTemp[playerid][pt_COMBAT_TIMER] = SetTimerEx("ResetCombat", seconds(30), false, "i", playerid);
					PlayerTemp[playerid][pt_COMBAT] = true;
				}
			}
		}

		if(pTemp(playerid)[pt_TASER_GUN])
		{
			if(weaponid <= 0)
			{
				if(pTemp(damagedid)[pt_TASSED_TIME] <= 0)
				{
					if(pTemp(playerid)[pt_TASER_ENERGY] >= 4)
					{
						if(gettime() < PlayerTemp[playerid][pt_TASER_TIMER] + 60)
						{
							new time = (60-(gettime()-PlayerTemp[playerid][pt_TASER_TIMER]));
							SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para que la energia del taser vuelva.", TimeConvert(time));
							Auto_SendPlayerAction(playerid, "intenta usar el taser pero este no tiene energia.");
						}
						else
						{
							pTemp(playerid)[pt_TASER_ENERGY] = 0;
							PlayerTemp[playerid][pt_TASER_TIMER] = gettime();
							pTemp(damagedid)[pt_TASSED_TIME] = 0.1;

							SendMessagef(playerid, "Has inmobilizado a %s.", pTemp(damagedid)[pt_NAME]);

							new action[445]; format(action, 445, "ha inmobilizado a %s.", pTemp(damagedid)[pt_NAME]); Auto_SendPlayerAction(playerid, action);
							ApplyAnimation(damagedid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);

							KillTimer(pTemp(damagedid)[pt_TASSED]);
							pTemp(damagedid)[pt_TASSED] = SetTimerEx("TasePlayer", 500, false, "i", damagedid);
						}
					}
					else
					{
						pTemp(playerid)[pt_TASER_ENERGY] ++;
						PlayerTemp[playerid][pt_TASER_TIMER] = gettime();
						pTemp(damagedid)[pt_TASSED_TIME] = 0.1;

						SendMessagef(playerid, "Has inmobilizado a %s.", pTemp(damagedid)[pt_NAME]);

						new action[445]; format(action, 445, "ha inmobilizado a %s.", pTemp(damagedid)[pt_NAME]); Auto_SendPlayerAction(playerid, action);
						ApplyAnimation(damagedid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);

						KillTimer(pTemp(damagedid)[pt_TASSED]);
						pTemp(damagedid)[pt_TASSED] = SetTimerEx("TasePlayer", 500, false, "i", damagedid);
					}
				}
				else
				{
					SendMessage(playerid, "Este usuario ya esta inmobilizado.");
				}
			}
		}

		if(!IsPlayerInSafeZone(playerid))
		{
			if(PI[damagedid][pSTATE] != ROLEPLAY_STATE_CRACK && PI[damagedid][pSTATE] != ROLEPLAY_STATE_JAIL) 
			{
				if(PlayerTemp[damagedid][pt_COMBAT])
				{
					KillTimer(PlayerTemp[damagedid][pt_COMBAT_TIMER]);
					PlayerTemp[damagedid][pt_COMBAT_TIMER] = SetTimerEx("ResetCombat", seconds(30), false, "i", damagedid);
				}
				else
				{
					PlayerTemp[damagedid][pt_COMBAT_TIMER] = SetTimerEx("ResetCombat", seconds(30), false, "i", damagedid);
					PlayerTemp[damagedid][pt_COMBAT] = true;
				}
			}
		}
	}
    return 1;
}

callbackp:TasePlayer(damagedid)
{
	if(pTemp(damagedid)[pt_TASSED_TIME] >= 100.0)
	{
		SendMessage(damagedid, "Te has recuperado.");
		ClearAnimations(damagedid);

		KillTimer(pTemp(damagedid)[pt_TASSED]);
		pTemp(damagedid)[pt_TASSED] = -1;

		pTemp(damagedid)[pt_TASSED_TIME] = 0;
		return 1;
	}
	new anim_index = GetPlayerAnimationIndex(damagedid);
	if(anim_index != 386) ApplyAnimation(damagedid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);

	pTemp(damagedid)[pt_TASSED_TIME] += 15.0;

	KillTimer(pTemp(damagedid)[pt_TASSED]);
	pTemp(damagedid)[pt_TASSED] = SetTimerEx("TasePlayer", seconds(1), false, "i", damagedid);
	return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK) PlayerTemp[playerid][pt_PLAYER_DAMAGE] = false;
	else if(issuerid <= MAX_PLAYERS && IsPlayerInSafeZone(playerid) && !PLAYER_WORKS[issuerid][WORK_POLICE][pwork_SET]) PlayerTemp[playerid][pt_PLAYER_DAMAGE] = false;
	else if(pTemp(playerid)[pt_TASER_GUN]) PlayerTemp[playerid][pt_PLAYER_DAMAGE] = false;
	else if(PlayerTemp[playerid][pt_ADMIN_SERVICE]) PlayerTemp[playerid][pt_PLAYER_DAMAGE] = false;
	else if(PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL) PlayerTemp[playerid][pt_PLAYER_DAMAGE] = false;
	else PlayerTemp[playerid][pt_PLAYER_DAMAGE] = true;
	
	if(!PlayerTemp[playerid][pt_PLAYER_DAMAGE]) SetPlayerArmourEx(playerid, PI[playerid][pARMOUR]);
	if(PlayerTemp[playerid][pt_PLAYER_DAMAGE])
	{
		if(PI[playerid][pARMOUR] <= 0.0) PI[playerid][pHEALTH] -= amount;
	}

	UpdatePlayerHealthInfo(playerid, issuerid, weaponid);
    return 1;
}

CheckWeaponAndAmmo(playerid, weaponid)
{
	if(WEAPON_INFO[weaponid][weapon_info_ANTI_CHEAT])
	{
		new weapon_id, weapon_ammo;
		GetPlayerWeaponData(playerid, WEAPON_INFO[weaponid][weapon_info_SLOT], weapon_id, weapon_ammo);
		
		if(ac_Info[CHEAT_WEAPON][ac_Enabled])
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_IMMUNITY])
			{
				if(weapon_id != PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_ID])
				{
					if(!ac_Info[CHEAT_WEAPON][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_WEAPON][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_WEAPON][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					}
				}
			}
		}
		
		if(WEAPON_INFO[weapon_id][weapon_info_AMMO])
		{
			if(ac_Info[CHEAT_AMMO][ac_Enabled])
			{
				if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_IMMUNITY])
				{
					if(weapon_ammo > PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_AMMO] + 10)
					{
				
						if(!ac_Info[CHEAT_AMMO][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_AMMO);
						else
						{
							if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_AMMO][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_LAST_DETECTION] = gettime();
							if(PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_AMMO][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_AMMO);
						}
					}
					else PLAYER_WEAPONS[playerid][ WEAPON_INFO[weapon_id][weapon_info_SLOT] ][player_weapon_AMMO] = weapon_ammo;
				}
			}
		}
	}
	return 1;
}


new ADMIN_LEVEL_AC_IMMUNITY = 3; //nivel 3 en adelante
OnPlayerCheatDetected(playerid, cheat, Float:extra = 0.0)
{
	if(PI[playerid][pADMIN_LEVEL] >= ADMIN_LEVEL_AC_IMMUNITY) return 1;
	if(PlayerTemp[playerid][pt_KICKED]) return 1;
	

	if(gettime() < PlayerTemp[playerid][pt_LAST_CHEAT_DETECTED_TIME] + 5) return 1;

	new ac_message[145], ac_dc[445], player_state = GetPlayerState(playerid);
	
	if(ac_Info[cheat][ac_Kick])
	{	
		new bad_history[24];
		format(bad_history, sizeof bad_history, "ac, cheat (%02d)", cheat);
		AddPlayerBadHistory(PI[playerid][pID], -1, TYPE_KICK, bad_history);
		
		if(extra != 0.0) format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-KICK] {FFFFFF}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-KICK] {FFFFFF}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);

		if(extra != 0.0) format(ac_dc, sizeof ac_dc, "[KICK]: %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_dc, sizeof ac_dc, "[KICK]: %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);

		KickEx(playerid);

		if(cheat == CHEAT_PLAYER_ARMOUR) PI[playerid][pARMOUR] = 0.0;
	}
	else
	{
		if(extra != 0.0) format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-AVISO] {FFFFFF}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-AVISO] {FFFFFF}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);
	
		if(extra != 0.0) format(ac_dc, sizeof ac_dc, "[ADV]: %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_dc, sizeof ac_dc, "[ADV]: %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pNAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);
	}
	
	SendMessageToAdminsAC(-1, ac_message);
	SendAntiCheatLogMessage(ac_dc);

	PlayerTemp[playerid][pt_LAST_CHEAT_DETECTED_TIME] = gettime();
	return 1;
}

RegisterNewPlayerWeapon(playerid, weapon_slot)
{
	inline OnPweaponInserted()
	{
		PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_DB_ID] = cache_insert_id();
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pweapons (id_player, weaponid, ammo) VALUES (%d, %d, %d);", PI[playerid][pID], PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID], PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_AMMO]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPweaponInserted);
	QUERY_BUFFER[0] = EOS;
	return 1;
}

SavePlayerWeaponsData(playerid)
{
	if(!PlayerTemp[playerid][pt_USER_EXIST] || !PlayerTemp[playerid][pt_USER_LOGGED]) return 0;
	
	for(new i = 0; i != sizeof PLAYER_WEAPONS[]; i ++)
	{
		if(!PLAYER_WEAPONS[playerid][i][player_weapon_DB_ID]) continue;
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pweapons SET weaponid = %d, ammo = %d WHERE id = %d;", PLAYER_WEAPONS[playerid][i][player_weapon_ID], PLAYER_WEAPONS[playerid][i][player_weapon_AMMO], PLAYER_WEAPONS[playerid][i][player_weapon_DB_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

RemovePlayerSlotWeapon(playerid, slot, bool:db_delete = false)
{
	if(db_delete)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pweapons WHERE id = %d;", PLAYER_WEAPONS[playerid][slot][player_weapon_DB_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	
	new current_weapon = GetPlayerWeapon(playerid);
	if(current_weapon == PLAYER_WEAPONS[playerid][slot][player_weapon_ID]) current_weapon = 0;
	
	PLAYER_WEAPONS[playerid][slot][player_weapon_VALID] = false;
	PLAYER_WEAPONS[playerid][slot][player_weapon_DB_ID] = 0;
	PLAYER_WEAPONS[playerid][slot][player_weapon_ID] = 0;
	PLAYER_WEAPONS[playerid][slot][player_weapon_AMMO] = 0;
	
	SetWeaponsForPlayer(playerid);
	SetPlayerArmedWeapon(playerid, current_weapon);
	return 1;
}

LoadPlayerWeaponsData(playerid)
{
	if(PI[playerid][pID] == 0) return 0;
	
	inline OnPweaponsLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				new weaponid;
				cache_get_value_name_int(i, "weaponid", weaponid);

				PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_VALID] = true;
				cache_get_value_name_int(i, "id", PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_DB_ID]);
				cache_get_value_name_int(i, "ammo", PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_AMMO]);
				PLAYER_WEAPONS[playerid][ WEAPON_INFO[weaponid][weapon_info_SLOT] ][player_weapon_ID] = weaponid;
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pweapons WHERE id_player = %d LIMIT 13;", PI[playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPweaponsLoad);
	return 1;
}

stock SetPlayerHealthEx(playerid, Float:health)
{
	PI[playerid][pHEALTH] = health;
	UpdatePlayerHealthInfo(playerid, INVALID_PLAYER_ID, 0);
	return 1;
}

stock SetPlayerArmourEx(playerid, Float:armour)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	
	PI[playerid][pARMOUR] = armour;
	SetPlayerArmour(playerid, PI[playerid][pARMOUR]);
	return 1;
}

stock GivePlayerHealthEx(playerid, Float:health)
{
	PI[playerid][pHEALTH] += health;
	if(PI[playerid][pHEALTH] > 100.0) PI[playerid][pHEALTH] = 100.0;
	UpdatePlayerHealthInfo(playerid, INVALID_PLAYER_ID, 0);
	return 1;
}

stock GivePlayerArmourEx(playerid, Float:armour)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	
	PI[playerid][pARMOUR] += armour;
	if(PI[playerid][pARMOUR] > 100.0) PI[playerid][pARMOUR] = 100.0;
	SetPlayerArmour(playerid, PI[playerid][pARMOUR]);
	return 1;
}

stock UpdatePlayerHealthInfo(playerid, killerid, reason = 0)
{
	SetPlayerHealth(playerid, INFINITY_HEALTH);

	if(PI[playerid][pHEALTH] <= 0.1)
	{
		if(PI[playerid][pSTATE] != ROLEPLAY_STATE_CRACK)
		{
			OnPlayerSWDeath(playerid, killerid, reason);
		}
	}

	SetPlayerProgressBarValue(playerid, PlayerBars[playerid][pbHEALTH], PI[playerid][pHEALTH]);
	return 1;
}

PlayerPayday(playerid)
{
	new 
		dialog_body[80],
		dialog_header[630],
		dialog_string[140],
		date[24],
		money = 300 * PI[playerid][pLEVEL];

	if(money > 4500) money = 4500;
	money += minrand(100, 200);
	
	getDateTime(date);

	format(dialog_body, sizeof dialog_body, "{ABD9C6}Pago diario (%s)", date);

	strcat(dialog_header, "\n{FF6746}____ [ PAGA DEL GOBIERNO ] ____\n");

	format(dialog_string, sizeof dialog_string, "{FFFFFF}Paga del gobierno: {FFFF7F}%s dolares\n", number_format_thousand(money));
	strcat(dialog_header, dialog_string);
	
	if(!PI[playerid][pVIP])
	{
		strcat(dialog_header, "\n\n{FF6746}____ [ VEHÍCULOS ] ____\n");

		for(new i = 0; i != MAX_VEHICLES; i++)
		{
			if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
			if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] != PI[playerid][pID]) continue;
			
			new veh_money = VEHICLE_INFO[GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 100;
			money -= veh_money;
			
			format(dialog_string, sizeof dialog_string, "{FFFFFF}Seguro del vehículo %s: {FF6746}-%s dolares\n", VEHICLE_INFO[GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400][vehicle_info_NAME], number_format_thousand(veh_money));
			strcat(dialog_header, dialog_string);
		}

		strcat(dialog_header, "\n\n{FF6746}____ [ PROPIEDADES ] ____\n");
		
		for(new i = 0; i != MAX_PROPERTIES; i ++)
		{
			if(!PROPERTY_INFO[i][property_VALID]) continue;
			if(PROPERTY_INFO[i][property_OWNER_ID] != PI[playerid][pID]) continue;
		
			if(PROPERTY_INFO[i][property_VIP_LEVEL]) format(dialog_string, sizeof dialog_string, "{FFFFFF}Seguro de la propiedad %s: {FFFF7F}PROPIEDAD VIP, NO SE PAGA SEGURO.\n", PROPERTY_INFO[i][property_NAME]);
			else
			{
				new property_money = PROPERTY_INFO[i][property_PRICE] / 200;
				money -= property_money;
				
				format(dialog_string, sizeof dialog_string, "{FFFFFF}Seguro de la propiedad %s: {FF6746}-%s dolares\n", PROPERTY_INFO[i][property_NAME], number_format_thousand(property_money));
			}
			strcat(dialog_header, dialog_string);
		}
	}
	
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		new work_payment;
		if(work_info[WORK_POLICE][work_info_EXTRA_PAY] > 0 && work_info[WORK_POLICE][work_info_EXTRA_PAY_EXP] > 0)
		{
			work_payment = (work_info[WORK_POLICE][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL], work_info[WORK_POLICE][work_info_EXTRA_PAY_EXP])));
			if(work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT] != 0) if(work_payment > work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT]) work_payment = work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT];
		}
		
		money += work_payment;

		strcat(dialog_header, "\n\n{FF6746}____ [ TRABAJOS ] ____\n");
		
		format(dialog_string, sizeof dialog_string, "{FFFFFF}Paga por ser policía: {FFFF7F}%s dolares\n", number_format_thousand(work_payment));
		strcat(dialog_header, dialog_string);
	}

	if(PI[playerid][pCREW])
	{
		new  territories = GetCrewTerritories(PI[playerid][pCREW]);

		if(territories > 0)
		{
			money += territories * 1000;//paga banda

			strcat(dialog_header, "\n\n{FF6746}____ [ TERRITORIOS ] ____\n");

			if(territories > 0) format(dialog_string, sizeof dialog_string, "{FFFFFF}Paga por territorios en posesion (%d): {FFFF7F}%d dolares\n", territories, territories * 1000);
			strcat(dialog_header, dialog_string);
		}
	}
	
	if(money + PI[playerid][pCASH] <= 0)
	{
		money = 0;
		PI[playerid][pCASH] = 0;
	}

	strcat(dialog_header, "\n\n{FF6746}____ [ RESUMEN ] ____\n");

	if(money > 0) format(dialog_string, sizeof dialog_string, "{FFFFFF}Has ganado: {FFFF7F}%s dolares", number_format_thousand(money));
	else format(dialog_string, sizeof dialog_string, "{FFFFFF}Has perdido: {FF6746}%s dolares", number_format_thousand(money));
	
	strcat(dialog_header, dialog_string);
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, dialog_body, dialog_header, "Aceptar", "");
	
	GivePlayerCash(playerid, money, true, money < 0 ? true : false);
	return 1;
}

//Animaciones
//ANIMACIONES
CMD:animaciones(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ShowDialog(playerid, DIALOG_ANIMS);
	return 1;
}
alias:animaciones("anims", "acciones");
CMD:parar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(playerid);
	return 1;
}
CMD:rendirse(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_HANDSUP); //rendirse
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:blowjob(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "BLOWJOBZ", "BJ_COUCH_LOOP_W", 4.0, 1, 1, 1, 0, 0);//blowjob
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:rodar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"PED","BIKE_fallR",4.0,0,1,1,1,0);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:borracho(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid,"PED", "WALK_DRUNK",4.0,1,1,1,1,500);//borracho
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:bomba(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0,0);//bomba
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:apuntar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation( playerid,"ped", "ARRESTgun", 4.0, 0, 1, 1, 1,500);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:reir(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "RAPPING", "Laugh_01", 4.0, 0, 0, 0, 0,0);//reir
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:amenazar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "SHOP", "ROB_Loop_Threat", 4.0, 0, 0, 0, 1,500);//amenazar
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:paja(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "PAULNMAC", "wank_loop", 4.0, 1, 0, 0, 1, 0);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:herido(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:cruzarbrazos(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "COP_AMBIENT", "Coplook_loop", 4.0, 1, 1, 1, 0, 4000);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:recostarse(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"SUNBATHE", "Lay_Bac_in", 4.0, 0, 0, 0, 1, 0);//recostarse
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:cubrirse(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "ped", "cower", 4.0, 1, 0, 0, 0, 0);//crubrirse
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:vomitar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);//vomitar
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:comer(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "FOOD", "EAT_Burger", 3.00, 0, 0, 0, 0, 0);
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:despedir(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "KISSING", "BD_GF_Wave", 3.0, 0, 0, 0, 0, 0);//despedir
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:nalgada(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "SWEET", "sweet_ass_slap", 4.0, 0, 0, 0, 0, 0);//nalgada
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:agonizar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0);//agonizar
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:besar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "KISSING", "Playa_Kiss_02", 4.0, 0, 0, 0, 0, 0);//besar
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:crack(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);//crack
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:mear(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_PISSING);//mear
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:sentarse(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "SUNBATHE", "ParkSit_M_in", 4.000000, 0, 1, 1, 1, 0);//sentarse
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:asiento(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "ped", "SEAT_down", 4.000000, 0, 1, 1, 1, 0);
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:fucku(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation( playerid,"ped", "fucku", 4.0, 0, 1, 1, 1, 1 );//fucku
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:taichi(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "PARK", "Tai_Chi_Loop",  4.1,7,5,1,1,1);//taichi
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:beber(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "BAR", "dnk_stndM_loop", 4.0, 0, 1, 1, 0, 4000);//beber
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:boxear(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "GYMNASIUM", "gym_shadowbox",  4.1,7,5,1,1,1);//boxear
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:saludar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"GANGS","hndshkfa_swt",4.1,0,0,0,0,0);//saludar
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:llorar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"GRAVEYARD","mrnF_loop",4.1,0,0,0,0,0);//llorar
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:dormir(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	if(!GetPlayerInterior(playerid)) return SendClientMessagef(playerid, -1, "Solo puedes hacer esto en un interior");
	ApplyAnimation(playerid,"INT_HOUSE","BED_In_R",4.1,0,0,0,1,0);//dormir
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:rapear(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"RAPPING","RAP_B_Loop",4.0,1,0,0,0,8000);//rapear
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:astrip(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"STRIP","strip_A",4.1,7,5,1,1,1);//strip
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:bailar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    if(sscanf(params, "d", params[0])) return SendClientMessage(playerid, 0xFF4500FF, "ERROR: /bailar [1-4]");

	switch(params[0])
	{
	    case 1: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE1);
		case 2: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE2);
		case 3: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE3);
		case 4: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE4);
		default: SendClientMessage(playerid, 0xFF4500FF, "ERROR: /bailar [1-4]");
	}
	return 1;
}
CMD:alentar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"ON_LOOKERS","shout_02",4.1,7,5,1,1,1);//alentar
	SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:hablar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid,"PED","IDLE_chat",4.1,7,5,1,1,1);//hablar
    SendClientMessagef(playerid, -1, "Para cancelar la animacion utiliza /parar.");
	return 1;
}

GetPlayerVehicleAvaibleBootSlot(vehicleid)
{
	new max_slots = VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS];
	if(max_slots > MAX_BOOT_SLOTS) max_slots = MAX_BOOT_SLOTS;
	
	for(new i = 0; i != max_slots; i ++)
	{
		if(!VEHICLE_BOOT[vehicleid][i][vehicle_boot_VALID]) return i;
	}
	return -1;
}

RegisterVehicleBootObject(vehicleid, boot_slot, type, int, extra)
{
	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_ID]) return 0;

	VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_VALID] = false;
	VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_TYPE] = type;
	VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_INT] = int;
	VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_INT_EXTRA] = extra;
	
	inline OnVbootInserted()
	{
		VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_OBJECT_ID] = cache_insert_id();
		if(VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_OBJECT_ID]) VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_VALID] = true;
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO vboot (id_vehicle, type, `int`, int_extra) VALUES (%d, %d, %d, %d);", PLAYER_VEHICLES[vehicleid][player_vehicle_ID], VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_TYPE], VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_INT], VEHICLE_BOOT[vehicleid][boot_slot][vehicle_boot_INT_EXTRA]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnVbootInserted);
	return 1;
}

SavePlayerWeaponInVehicleBoot(playerid, weapon_slot, vehicleid, boot_slot)
{
	RegisterVehicleBootObject(vehicleid, boot_slot, BOOT_TYPE_WEAPON, PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID], PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_AMMO]);
	RemovePlayerSlotWeapon(playerid, weapon_slot, true);
	return 1;
}

GetPropertyAvaibleClosetSlot(index)
{
	new max_slots = MAX_CLOSET_SLOTS;
	for(new i = 0; i != max_slots; i ++)
	{
		if(!PROPERTY_CLOSET[index][i][property_closet_VALID]) return i;
	}
	return -1;
}

RegisterPropertyClosetObject(index, closet_slot, type, int, extra)
{
	PROPERTY_CLOSET[index][closet_slot][property_closet_VALID] = false;
	PROPERTY_CLOSET[index][closet_slot][property_closet_TYPE] = type;
	PROPERTY_CLOSET[index][closet_slot][property_closet_INT] = int;
	PROPERTY_CLOSET[index][closet_slot][property_closet_INT_EXTRA] = extra;
	
	inline OnPropertyClosetInserted()
	{
		PROPERTY_CLOSET[index][closet_slot][property_closet_OBJECT_ID] = cache_insert_id();
		if(PROPERTY_CLOSET[index][closet_slot][property_closet_OBJECT_ID]) PROPERTY_CLOSET[index][closet_slot][property_closet_VALID] = true;
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO property_closet (id_property, type, `int`, int_extra) VALUES (%d, %d, %d, %d);", PROPERTY_INFO[index][property_ID], type, int, extra);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPropertyClosetInserted);
	return 1;
}

SaveWeaponInPropertyCloset(playerid, weapon_slot, index, closet_slot)
{
	RegisterPropertyClosetObject(index, closet_slot, CLOSET_TYPE_WEAPON, PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_ID], PLAYER_WEAPONS[playerid][weapon_slot][player_weapon_AMMO]);
	RemovePlayerSlotWeapon(playerid, weapon_slot, true);
	return 1;
}

CMD:guardar(playerid, params[])
{
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	new option[24], extra;
	if(sscanf(params, "s[24]d", option, extra)) return SendClientMessagef(playerid, -1, "Error en los parámetros, utilice /man guardar.");

	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_NORMAL || PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK)
	{
		new vehicleid = GetNearVehicle(playerid);
		if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás cerca de tu vehículo.");
		
		if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
		if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
				
		new boot_slot = GetPlayerVehicleAvaibleBootSlot(vehicleid);
		if(boot_slot == -1) return SendClientMessagef(playerid, -1, "No tienes suficiente espacio en tu /maletero.");

		if(!strcmp(option, "arma", true))
		{
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Los policías no pueden guardar sus armas.");

			if(extra < 0 || extra >= sizeof PLAYER_WEAPONS[]) return SendClientMessagef(playerid, -1, "Error: /guardar arma {FFFFFF}[slot/armas]");
			if(!PLAYER_WEAPONS[playerid][extra][player_weapon_VALID])
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendClientMessagef(playerid, -1, "No tienes ninguna arma en ese slot (/armas).");
				return 1;
			}

			SendClientMessagef(playerid, -1, "Arma '%s' guardada en el maletero de tu %s.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][extra][player_weapon_ID] ][weapon_info_NAME], VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_NAME]);

			new string[128];
			format(string, sizeof string, "guarda un(a) %s en el maletero de su vehículo.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][extra][player_weapon_ID] ][weapon_info_NAME]);
			Auto_SendPlayerAction(playerid, string);
			
			SavePlayerWeaponInVehicleBoot(playerid, extra, vehicleid, boot_slot);
		}
		else if(!strcmp(option, "medicamentos", true)) {
			if(extra < 0 || extra > PI[playerid][pMEDICINE]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
			
			PI[playerid][pMEDICINE] -= extra;
			RegisterVehicleBootObject(vehicleid, boot_slot, BOOT_TYPE_MEDICINES, extra, 0);
			
			Auto_SendPlayerAction(playerid, "guarda medicamentos en el maletero de su vehículo.");
		}
		else if(!strcmp(option, "marihuana", true)) {
			if(extra < 0 || extra > PI[playerid][pCANNABIS]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
			
			PI[playerid][pCANNABIS] -= extra;
			RegisterVehicleBootObject(vehicleid, boot_slot, BOOT_TYPE_CANNABIS, extra, 0);

			Auto_SendPlayerAction(playerid, "guarda marihuana en el maletero de su vehículo.");
		}
		else if(!strcmp(option, "crack", true)) {
			if(extra < 0 || extra > PI[playerid][pCRACK]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
			
			PI[playerid][pCRACK] -= extra;
			RegisterVehicleBootObject(vehicleid, boot_slot, BOOT_TYPE_CRACK, extra, 0);

			Auto_SendPlayerAction(playerid, "guarda crack en el maletero de su vehículo.");
		}
		else SendClientMessagef(playerid, -1, "Error en los parámetros, utilice /man guardar.");
	}
	else if(PI[playerid][pSTATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
		if(index == -1) return SendClientMessagef(playerid, -1, "BUG: Tomar captura y abrir ticket en discord.");
		if(PROPERTY_INFO[index][property_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Esta no es tu casa");

		new Float:z_pos = PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_Z];
		
		if(IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_X], PROPERTY_CLOSET_POS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_closet_Y], z_pos))
		{
			new closet_slot = GetPropertyAvaibleClosetSlot(index);
			if(closet_slot == -1) return SendClientMessagef(playerid, -1, "No tienes suficiente espacio en tu /armario.");
			
			if(!strcmp(option, "arma", true))
			{
				if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Los policías no pueden guardar sus armas.");

				if(extra < 0 || extra >= sizeof PLAYER_WEAPONS[]) return ErrorCommandParams(playerid, "/guardar arma [slot /armas]");
				if(!PLAYER_WEAPONS[playerid][extra][player_weapon_VALID])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendClientMessagef(playerid, -1, "No tienes ninguna arma en ese slot (/armas).");
					return 1;
				}

				SendClientMessagef(playerid, -1, "Arma '%s' guardada en el armario de tu casa.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][extra][player_weapon_ID] ][weapon_info_NAME]);

				new string[128];
				format(string, sizeof string, "guarda un(a) %s en el armario de su casa.", WEAPON_INFO[ PLAYER_WEAPONS[playerid][extra][player_weapon_ID] ][weapon_info_NAME]);
				Auto_SendPlayerAction(playerid, string);
				
				SaveWeaponInPropertyCloset(playerid, extra, index, closet_slot);
			}
			else if(!strcmp(option, "medicamentos", true)) {
				if(extra < 0 || extra > PI[playerid][pMEDICINE]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
				
				PI[playerid][pMEDICINE] -= extra;
				RegisterPropertyClosetObject(index, closet_slot, BOOT_TYPE_MEDICINES, extra, 0);
				
				Auto_SendPlayerAction(playerid, "guarda medicamentos en el armario.");
			}
			else if(!strcmp(option, "marihuana", true)) {
				if(extra < 0 || extra > PI[playerid][pCANNABIS]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
				
				PI[playerid][pCANNABIS] -= extra;
				RegisterPropertyClosetObject(index, closet_slot, BOOT_TYPE_CANNABIS, extra, 0);
				
				Auto_SendPlayerAction(playerid, "guarda marihuana en el armario.");
			}
			else if(!strcmp(option, "crack", true)) {
				if(extra < 0 || extra > PI[playerid][pCRACK]) return SendClientMessagef(playerid, -1, "Cantidad incorrecta.");
				
				PI[playerid][pCRACK] -= extra;
				RegisterPropertyClosetObject(index, closet_slot, BOOT_TYPE_CRACK, extra, 0);
				
				Auto_SendPlayerAction(playerid, "guarda crack en el armario.");
			}
			else SendClientMessagef(playerid, -1, "Error en los parámetros, utilice /man guardar.");
		}
		else SendClientMessagef(playerid, -1, "No estás cerca del armario.");
	}
	else SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	return 1;
}

CMD:maletero(playerid, params[])
{
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	new vehicleid = GetNearVehicle(playerid);
	if(vehicleid == INVALID_VEHICLE_ID) return SendClientMessagef(playerid, -1, "No estás cerca de tu vehículo.");
	
	if((PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE) && PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID])
	{
		if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este vehiculo es del gobierno o de un consecionario.");
		new pid = -1;
		for(new i, j = GetPlayerPoolSize(); i <= j; i++)
		{
			if(pTemp(i)[pt_USER_LOGGED] && PI[i][pID] == PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID])
			pid = i;
		}

		if(pid == -1) return SendClientMessagef(playerid, -1, "Error del juego: No se ha podido encontrar al propietario de este vehículo.");
		if(!pTemp(pid)[pt_CUFFED]) return SendClientMessagef(playerid, -1, "El propietario de este vehículo debe estar esposado para poder revisar su vehículo.");
		
		PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] = vehicleid;
		ShowDialog(playerid, DIALOG_VEHICLE_BOOT);

		Auto_SendPlayerAction(playerid, "revisa el maltero del vehículo");
		return 1;
	}

	if(!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
	if(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pID]) return SendClientMessagef(playerid, -1, "Este no es tu vehículo.");
		
	PlayerTemp[playerid][pt_DIALOG_BOT_VEHICLE] = vehicleid;
	ShowDialog(playerid, DIALOG_VEHICLE_BOOT);
	return 1;
}
alias:maletero("baul");

SetWantedPlayerMarkers(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(PI[i][pWANTED_LEVEL] > 0)
				{
					SetPlayerMarkerForPlayer(playerid, i, PlayerWantedColor(i));
				}
			}
		}
	}
	return 1;
}

PlayerWantedColor(playerid)
{
	if(PI[playerid][pWANTED_LEVEL] > 0)
	{
		if(PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return 0x009900ff;
		else
		{
			switch(PI[playerid][pWANTED_LEVEL])
			{
				case 1: return 0xfffdbaff;
				case 2: return 0xf7f254ff;
				case 3: return 0xd98900ff;
				case 4: return 0xce4202ff;
				case 5: return 0xff00ffff;
				case 6: return 0x9900ccff;
				default: return 0x9900ccff;
			}
		}
	}
	return PLAYER_COLOR;
}

CMD:nivel(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");

	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 2) return SendClientMessagef(playerid, -1, "Los cadetes no pueden colocar cargos.");

	if(sscanf(params, "ud", params[0], params[1])) return ErrorCommandParams(playerid, "/nivel [PlayerID/Nombre] [nivel de busqueda 0-6]");
	if(params[1] < 0 || params[1] > 6) return ErrorCommandParams(playerid, "/nivel [PlayerID/Nombre] [nivel de busqueda 0-6]");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	if(PLAYER_WORKS[params[0]][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Este jugador es policía.");
	if(PI[params[0]][pSTATE] == ROLEPLAY_STATE_JAIL) return SendClientMessagef(playerid, -1, "Esta persona está en la cárcel.");

	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 100.0, pos[0], pos[1], pos[2])) return SendClientMessagef(playerid, -1, "Este jugador no está cerca tuya. (A más de 100 metros)");

	new 
		action[64],
		message[1024];

	if(params[1] == 0)
	{
		format(action, sizeof action, "le quita el nivel de busqueda a %s.", pTemp(params[0])[pt_NAME]);

		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s reporta: {"#SWAT_COLOR"}%s {FFFFFF}ya no es sospechoso.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME]);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s reporta: {"#POLICE_COLOR"}%s {FFFFFF}ya no es sospechoso.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME]);
		
		SendClientMessagef(playerid, -1, "Le has removido el nivel de busqueda a %s.", pTemp(params[0])[pt_NAME]);
	}
	else
	{
		new 
			zone[45], 
			city[45];

		GetPlayerZones(playerid, city, zone);

		format(action, sizeof action, "le pone nivel de busqueda a %s.", pTemp(params[0])[pt_NAME]);
		
		SendClientMessagef(playerid, -1, "Has asignado nivel de busqueda %d a %s.", params[1], pTemp(params[0])[pt_NAME]);
		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s reporta: {"#SWAT_COLOR"}%s (%d*) {FFFFFF}ubicación: {"#SWAT_COLOR"}%s, %s.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], params[1], city, zone);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s reporta: {"#POLICE_COLOR"}%s (%d*) {FFFFFF}ubicación: {"#POLICE_COLOR"}%s, %s.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], params[1], city, zone);
	}

	Auto_SendPlayerAction(playerid, action);

	SetPlayerWantedLevelEx(params[0], params[1]);
	SendPoliceRadioMessage(-1, -1, message);
	return 1;
}
alias:nivel("cargos");

CMD:esposar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /esposar [PlayerID/Nombre]");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes esposar a este jugador ahora.");
	if(GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "Para esposar a esta persona tiene que estar depie.");
	if(PI[params[0]][pWANTED_LEVEL] == 0) return SendClientMessagef(playerid, -1, "Esta persona no tiene nivel de busqueda.");
	
	new oldstate = PI[params[0]][pSTATE];
	DisablePlayerInjuredMark(params[0]);
	PI[params[0]][pSTATE] = ROLEPLAY_STATE_NORMAL;
	ApplyAnimation(params[0], "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(params[0]);

	if(pTemp(params[0])[pt_CUFFED])
	{
		TogglePlayerControllableEx(params[0], true);
		pTemp(params[0])[pt_CUFFED] = false;
		pTemp(params[0])[pt_CUFFING] = false;
		SetPlayerSpecialAction(params[0], SPECIAL_ACTION_NONE);
		
		new action[64];
		format(action, sizeof action, "le quita las esposas a %s.", pTemp(params[0])[pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		return 1;
	}

	SendPlayerAction(playerid, "saca sus esposas y rapidamente se las coloca al sujeto.");
	SendPlayerEnviroment(playerid, "¿Pondra resistencia? Si esta abatido entonces NO!");
	
	if(!pTemp(params[0])[pt_CUFFING])
	{
		if(oldstate == ROLEPLAY_STATE_CRACK) 
		{
			KillTimer(pTemp(params[0])[pt_TASSED]);
			pTemp(params[0])[pt_TASSED] = -1;
			pTemp(params[0])[pt_TASSED_TIME] = 0;

			ClearAnimations(playerid);
			CuffPlayer(params[0]);
		}
		else 
		{
			SendClientMessagef(params[0], -1, "Estás siendo esposado, puedes /resistirse.");
			SendClientMessagef(playerid, -1, "Estás esposando a esta persona, aun puede resistirse.");

			pTemp(params[0])[pt_CUFFED] = false;
			pTemp(params[0])[pt_CUFFING] = true;

			KillTimer(pTemp(params[0])[pt_TASSED]);
			pTemp(params[0])[pt_TASSED] = -1;
			pTemp(params[0])[pt_TASSED_TIME] = 0;

			KillTimer(pTemp(params[0])[pt_TIMERS][14]);
			TogglePlayerControllableEx(params[0], false);
			SetPlayerSpecialAction(params[0], SPECIAL_ACTION_HANDSUP);

			pTemp(params[0])[pt_TIMERS][14] = SetTimerEx("CuffPlayer", 6000, false, "i", params[0]);
		}
	}
	return 1;
}

CMD:placa(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /placa [PlayerID/Nombre]");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes mostrarle tu placa a este jugador ahora.");
	
	new action[64];
	format(action, sizeof action, "le muestra su placa a %s.", pTemp(params[0])[pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	
	SendClientMessagef(params[0], -1, "{"#SILVER_COLOR"}%s %c. %s {A9C4E4}[Placa: %d]", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PlayerTemp[playerid][pt_FIRST_NAME][0], PlayerTemp[playerid][pt_SUB_NAME], PI[playerid][pPLACA_PD]);
	return 1;
}

CMD:licencia(playerid, params[])
{
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /licencia [PlayerID/Nombre]");
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");

	if(PI[playerid][pDRIVE_LICENSE_POINTS] == 0) SendClientMessagef(playerid, -1, "%s no tiene licencia de conduccion.", PlayerTemp[playerid][pt_NAME]);
	else
	{
		new action[128];
		format(action, 128, "le muestra su licencia de conducir a %s.", pTemp(params[0])[pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		SendClientMessagef(params[0], -1, "{"#SILVER_COLOR"}Licencia de conducir de %s, puntos: %d.", PlayerTemp[playerid][pt_NAME], PI[playerid][pDRIVE_LICENSE_POINTS]);
	}
	return 1;
}

CMD:revisar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /revisar [PlayerID/Nombre]");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes revisar a este jugador ahora.");
	if(GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "Para revisar a esta persona tiene que estar depie.");
	if(PI[params[0]][pWANTED_LEVEL] == 0) return SendClientMessagef(playerid, -1, "Esta persona no tiene nivel de busqueda.");
	if(!pTemp(params[0])[pt_CUFFED]) return SendClientMessagef(playerid, -1, "Para revisar a esta persona tiene que estar esposada.");
	
	ShowPlayerInventory(playerid, params[0]);
	
	new action[64];
	format(action, sizeof action, "revisa a %s.", pTemp(params[0])[pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	return 1;
}

CMD:puntos(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "ud", params[0], params[1])) return SendClientMessagef(playerid, -1, "Error: /puntos [PlayerID/Nombre] [cantidad]");
	if(params[1] < 1 || params[1] > 12) return SendClientMessagef(playerid, -1, "Error: cantidad de puntos no válida.");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes quitarle puntos a este jugador ahora.");
	
	PI[params[0]][pDRIVE_LICENSE_POINTS] -= params[1];
	if(PI[params[0]][pDRIVE_LICENSE_POINTS] < 0) PI[params[0]][pDRIVE_LICENSE_POINTS] = 0;
	
	SendClientMessagef(playerid, -1, "Le has quitado %d puntos del carnet a %s, ahora tiene %d puntos.", params[1], pTemp(params[0])[pt_NAME], PI[params[0]][pDRIVE_LICENSE_POINTS]);
	SendClientMessagef(playerid, -1, "El policía %s te ha quitado %d puntos del carnet de conducir, te quedan %d puntos.", PlayerTemp[playerid][pt_NAME], params[1], PI[params[0]][pDRIVE_LICENSE_POINTS]);
	return 1;
}

CMD:requisar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /requisar [PlayerID/Nombre]");
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes revisar a este jugador ahora.");
	if(GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "Para revisar a esta persona tiene que estar depie.");
	if(PI[params[0]][pWANTED_LEVEL] == 0) return SendClientMessagef(playerid, -1, "Esta persona no tiene nivel de busqueda.");
	if(!pTemp(params[0])[pt_CUFFED]) return SendClientMessagef(playerid, -1, "Para revisar a esta persona tiene que estar esposada.");
	
	DeleteIlegalInv(params[0]);
	
	new action[64];
	format(action, sizeof action, "requisa las pertenencias ilegales de %s.", pTemp(params[0])[pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	return 1;
}

CMD:ref(playerid, params[])
{
	if(PI[playerid][pCREW]) return Crew_RequestHelp(playerid, PI[playerid][pCREW]);
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return Police_RequestHelp(playerid);

	SendMessage(playerid, "No estas en banda o faccion.");
	return 1;
}
alias:ref("refuerzos");

CMD:control(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para colocar objetos policiales.", POLICE_RANKS[8]);
	
	if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No puedes colocar objetos policiales aquí.");
	
	new type;
	if(sscanf(params, "d", type)) return ErrorCommandParams(playerid, "/control [Tipo 1-5]");
	
	new modelid;
	switch(type)
	{
		case 1: modelid = 1459;
		case 2: modelid = 1238;
		case 3: modelid = 1425;
		case 4: modelid = 3265;
		case 5: modelid = 3091;
		default: return SendClientMessagef(playerid, -1, "Tipo de objeto no válido.");
	}
	
	new index = GetFreePoliceObjectSlot();
	if(index == -1) return SendClientMessagef(playerid, -1, "No se pueden crear más objetos policiales.");
	
	POLICE_OBJECTS[index][police_object_VALID] = true;
	format(POLICE_OBJECTS[index][police_object_USER], 24, "%s", PI[playerid][pNAME]);
	
	new Float:pos[3], Float:angle;
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	GetPlayerFacingAngle(playerid, angle);
	pos[0] += (1.5 * floatsin(-angle, degrees));
	pos[1] += (1.5 * floatcos(-angle, degrees));

	POLICE_OBJECTS[index][police_object_OBJECT_ID] = CreateDynamicObject(modelid, pos[0], pos[1], pos[2], 0.0, 0.0, angle, GetPlayerVirtualWorld(playerid), 0);
	Streamer_Update(playerid);
	new info[3];
	info[0] = OBJECT_TYPE_POLICE;
	info[1] = index; // Index
	Streamer_SetArrayData(STREAMER_TYPE_OBJECT, POLICE_OBJECTS[index][police_object_OBJECT_ID], E_STREAMER_EXTRA_ID, info);
	PlayerTemp[playerid][pt_SELECTED_POLICE_OBJECT_INDEX] = index;
	EditDynamicObject(playerid, POLICE_OBJECTS[index][police_object_OBJECT_ID]);
	
	SendClientMessagef(playerid, -1, "Coloca el objeto, posteriormente puedes usar /econtrol para moverlo o eliminarlo.");
	return 1;
}

CMD:taser(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 2) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para usar el taser.", POLICE_RANKS[2]);
	
	if(pTemp(playerid)[pt_TASER_GUN])
	{
		pTemp(playerid)[pt_TASER_GUN] = false;
		Auto_SendPlayerAction(playerid, "guarda su taser.");
	}
	else
	{
		pTemp(playerid)[pt_TASER_GUN] = true;
		Auto_SendPlayerAction(playerid, "saca su taser de su cinturon reglamentario.");
	}
	return 1;
}

CMD:econtrol(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para editar objetos policiales.", POLICE_RANKS[8]);
	
	if(GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0) return SendClientMessagef(playerid, -1, "No puedes editar objetos policiales aquí.");
	
	SelectObject(playerid);
	return 1;
}

public OnPlayerSelectDynamicObject(playerid, STREAMER_TAG_OBJECT objectid, modelid, Float:x, Float:y, Float:z)
{
	new info[3];
	Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);

	switch(info[0])
	{
		case OBJECT_TYPE_POLICE:
		{
			if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				CancelEdit(playerid);
				SendMessage(playerid, "No eres policía.");
				return 1;
			}
			if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
			{
				CancelEdit(playerid);
				SendMessage(playerid, "No estás de servicio como policía.");
				return 1;
			}
			if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
			{
				CancelEdit(playerid);
				SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para colocar objetos policiales.", POLICE_RANKS[8]);
				return 1;
			}
			
			SendClientMessagef(playerid, -1, "Este objeto fue colocado por %s.  Usa 'ESC' para borrar el objeto, o usa los controles para moverlo.", POLICE_OBJECTS[ info[1] ][police_object_USER]);
			PlayerTemp[playerid][pt_SELECTED_POLICE_OBJECT_INDEX] = info[1];
			EditDynamicObject(playerid, objectid);
			return 1;
		}
		default: 
		{
			if(PI[playerid][pADMIN_LEVEL] == CMD_OWNER) 
			{
				EditDynamicObject(playerid, objectid);
			}
		}
	}
	
	return 1;
}

SetCorrectObjectPos(objectid)
{
	new Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz;
	GetDynamicObjectPos(objectid, x, y, z);
	GetDynamicObjectRot(objectid, rx, ry, rz);

	SetDynamicObjectPos(objectid, x, y, z);
	SetDynamicObjectRot(objectid, rx, ry, rz);
}

public OnPlayerEditDynamicObject(playerid, STREAMER_TAG_OBJECT objectid, response, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{
	switch(response)
	{
		case EDIT_RESPONSE_CANCEL:
		{
			new info[3];
			Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
			switch(info[0])
			{
				case OBJECT_TYPE_POLICE:
				{
					if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
					{
						CancelEdit(playerid);
						SendMessage(playerid, "No eres policía.");
						return 1;
					}
					if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
					{
						CancelEdit(playerid);
						SendMessage(playerid, "No estás de servicio como policía.");
						return 1;
					}
					if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
					{
						CancelEdit(playerid);
						SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para colocar objetos policiales.", POLICE_RANKS[8]);
						return 1;
					}
					
					DestroyDynamicObject(POLICE_OBJECTS[ info[1] ][police_object_OBJECT_ID]);
					POLICE_OBJECTS[ info[1] ][police_object_VALID] = false;
					POLICE_OBJECTS[ info[1] ][police_object_USER][0] = EOS;
					POLICE_OBJECTS[ info[1] ][police_object_OBJECT_ID] = INVALID_STREAMER_ID;
					SendClientMessagef(playerid, -1, "Objeto policial eliminado.");
				}
				case OBJECT_TYPE_TEST: 
				{
					DestroyDynamicObject(objectid);
				}
			}
		}
		case EDIT_RESPONSE_FINAL:
		{
			new info[3];
			Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
			
			switch(info[0])
			{
				case OBJECT_TYPE_POLICE:
				{
					if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
					{
						CancelEdit(playerid);
						SendMessage(playerid, "No eres policía.");
						SetCorrectObjectPos(objectid);
						return 1;
					}
					if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE)
					{
						CancelEdit(playerid);
						SendMessage(playerid, "No estás de servicio como policía.");
						SetCorrectObjectPos(objectid);
						return 1;
					}
					if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
					{
						CancelEdit(playerid);
						SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para colocar objetos policiales.", POLICE_RANKS[8]);
						SetCorrectObjectPos(objectid);
						return 1;
					}

					SetDynamicObjectPos(objectid, x, y, z);
					SetDynamicObjectRot(objectid, rx, ry, rz);

					SendClientMessagef(playerid, -1, "Objeto movido correctamente");

					format(POLICE_OBJECTS[ info[1] ][police_object_USER], 24, "%s", PI[playerid][pNAME]);

				}
				case OBJECT_TYPE_TEST: 
				{
					printf("CreateDynamicObject(%d, %f, %f, %f, %f, %f, %f);", Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_MODEL_ID), x, y, z, rx, ry, rz);
					SetDynamicObjectPos(objectid, x, y, z);
					SetDynamicObjectRot(objectid, rx, ry, rz);
					SetCorrectObjectPos(objectid);
				}
			}
		}
	}
	return 1;
}

CMD:multar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(sscanf(params, "ud", params[0], params[1])) return ErrorCommandParams(playerid, "/multar [PlayerID/Nombre] [precio$]");
	if(params[1] < 0) return SendClientMessagef(playerid, -1, "El precio no puede ser menor a 0$.");
	else if(params[1] > 100000) return SendClientMessagef(playerid, -1, "El precio no puede ser mayor a 100.000$.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes multar a este jugador ahora.");
	if(PI[params[0]][pSTATE] == ROLEPLAY_STATE_ARRESTED || PI[params[0]][pSTATE] == ROLEPLAY_STATE_JAIL) return SendClientMessagef(playerid, -1, "No puedes multar a este jugador ahora.");
	
	pTemp(params[0])[pt_POLICE_PEN_PID] = playerid;
	pTemp(params[0])[pt_POLICE_PEN_AID] = PI[playerid][pID];
	pTemp(params[0])[pt_POLICE_PEN_IM] = params[1];
	pTemp(params[0])[pt_POLICE_PEN_TIME] = gettime();
	ShowDialog(params[0], DIALOG_POLICE_PENALTY);
	
	SendClientMessagef(playerid, -1, "La multa ha sido enviada, espera para ver si el jugador la acepta.");
	return 1;
}

CMD:arrestar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	if(sscanf(params, "ud", params[0], params[1])) return SendClientMessagef(playerid, -1, "Error: /arrestar [PlayerID/Nombre] [Asiento 1 o 2]");
	if(params[1] < 1 || params[1] > 2) return SendClientMessagef(playerid, -1, "Error: /arrestar [PlayerID/Nombre] [Asiento 1 o 2]");
	params[1] ++;
	
	if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessagef(playerid, -1, "Para arrestar tienes que estar dentro de un vehículo policial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Para arrestar tienes que estar dentro de un vehículo policial.");
	if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendClientMessagef(playerid, -1, "Para arrestar tienes que estar dentro de un vehículo policial.");
	if( (params[1] + 1) > VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS]) return SendClientMessagef(playerid, -1, "Este vehículo es de %d pasajeros, así que no puedes llevar arrestados en él.", VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS]);
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes arrestar a este jugador ahora.");
	
	if(PI[params[0]][pWANTED_LEVEL] == 0) return SendClientMessagef(playerid, -1, "Esta persona no tiene nivel de busqueda.");
	if(!pTemp(params[0])[pt_CUFFED] && PI[params[0]][pSTATE] != ROLEPLAY_STATE_CRACK) return SendClientMessagef(playerid, -1, "Para arrestar a esta persona tiene que estar esposada.");
	
	if(PI[params[0]][pSTATE] == ROLEPLAY_STATE_ARRESTED)
	{
		TogglePlayerControllableEx(params[0], true);
		pTemp(params[0])[pt_CUFFED] = false;
		pTemp(params[0])[pt_CUFFING] = false;
		SetPlayerSpecialAction(params[0], SPECIAL_ACTION_NONE);
		PI[params[0]][pSTATE] = ROLEPLAY_STATE_NORMAL;
		
		SendClientMessagef(playerid, -1, "Has soltado a %s.", pTemp(params[0])[pt_NAME]);
		return 1;
	}
	else
	{
		if(PI[params[0]][pSTATE] == ROLEPLAY_STATE_CRACK) {
			DisablePlayerInjuredMark(params[0]);
			ApplyAnimation(params[0], "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
			ClearAnimations(params[0]);
		}

		PI[params[0]][pSTATE] = ROLEPLAY_STATE_ARRESTED;
		TogglePlayerControllableEx(params[0], false);
		PutPlayerInVehicleEx(params[0], vehicleid, params[1]);
	}
	return 1;
}


CMD:callsing(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 11) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para asignar callsing.", POLICE_RANKS[11]);
	
	if(isnull(params)) return SendClientMessagef(playerid, -1, "Error: /callsing [Texto]");
	if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessagef(playerid, -1, "Para asignar callsing tienes que estar dentro de un vehículo policial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Para asignar callsing tienes que estar dentro de un vehículo policial.");
	if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendClientMessagef(playerid, -1, "Para asignar callsing tienes que estar dentro de un vehículo policial.");
	
	if(IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
	{
		DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = CreateDynamic3DTextLabel(params, 0xCCCCCCCC, -0.7, -1.9, -0.3, 20.0, .attachedvehicle = vehicleid);
	return 1;
}

CMD:m(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessagef(playerid, -1, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");
	if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendClientMessagef(playerid, -1, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");

	if(isnull(params)) return SendClientMessagef(playerid, -1, "Error: /m [Mensaje]");

	new str_text[190];
	format(str_text, 190, "(Megáfono) %s: {FFFFFF}%s", PlayerTemp[playerid][pt_NAME], params);
	ProxDetector(playerid, 40.0, str_text, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 85);
	return 1;
}

PutPlayerInVehicleEx(playerid, vehicleid, seat)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY] = gettime() + 5;
	PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
	return PutPlayerInVehicle(playerid, vehicleid, seat);
}

CMD:entregar(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	if(sscanf(params, "u", params[0])) return SendClientMessagef(playerid, -1, "Error: /entregar [PlayerID/Nombre]");
	
	if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendClientMessagef(playerid, -1, "Para entregar tienes que estar dentro de un vehículo oficial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Para entregar tienes que estar dentro de un vehículo oficial.");
	if(WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendClientMessagef(playerid, -1, "Para entregar tienes que estar dentro de un vehículo oficial.");
	
	if(!IsPlayerConnected(params[0])) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(pTemp(params[0])[pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes arrestar a este jugador ahora.");
	if(GetPlayerState(params[0]) != PLAYER_STATE_PASSENGER) return SendClientMessagef(playerid, -1, "Para entregar a esta persona tiene que estar dentro del vehículo policial.");
	if(GetPlayerVehicleID(params[0]) != vehicleid) return SendClientMessagef(playerid, -1, "Para entregar a esta persona tiene que estar dentro del vehículo policial.");
	if(PI[params[0]][pWANTED_LEVEL] == 0) return SendClientMessagef(playerid, -1, "Esta persona no tiene nivel de busqueda.");
	
	if(IsPlayerInRangeOfPoint(playerid, 20.0, 1616.1844, -1646.2318, 3.8417)/* || IsPlayerInRangeOfPoint(playerid, 20.0, 6808.6948, 5335.9800 ,14.9625)*/)
	{
		new message[1024];
		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s reporta: {"#SWAT_COLOR"}%s (%d*) {FFFFFF}estado: {"#SWAT_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s reporta: {"#POLICE_COLOR"}%s (%d*) {FFFFFF}Estado: {"#POLICE_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		SendPoliceRadioMessage(-1, -1, message);
		
		SendClientMessagef(playerid, -1, "La persona ahora está en la cárcel.");
		PI[params[0]][pPOLICE_JAIL_ID] = 0;
		JailPlayer(params[0]);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 20.0, -1589.333496, 716.759521, -5.515106) || IsPlayerInRangeOfPoint(playerid, 20.0, 6005.6670, 4917.3179, 23.0543))
	{
		new message[1024];
		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s reporta: {"#SWAT_COLOR"}%s (%d*) {FFFFFF}estado: {"#SWAT_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s reporta: {"#POLICE_COLOR"}%s (%d*) {FFFFFF}Estado: {"#POLICE_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		SendPoliceRadioMessage(-1, -1, message);
		
		SendClientMessagef(playerid, -1, "La persona ahora está en la cárcel.");
		PI[params[0]][pPOLICE_JAIL_ID] = 1;
		JailPlayer(params[0]);
	}
	else if(IsPlayerInRangeOfPoint(playerid, 20.0, 2282.200439, 2431.598632, 3.000518) || IsPlayerInRangeOfPoint(playerid, 20.0, 4405.0625, 5969.0493, 59.0018))
	{
		new message[1024];
		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s reporta: {"#SWAT_COLOR"}%s (%d*) {FFFFFF}estado: {"#SWAT_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s reporta: {"#POLICE_COLOR"}%s (%d*) {FFFFFF}Estado: {"#POLICE_COLOR"}Entregado.", PlayerTemp[playerid][pt_NAME], pTemp(params[0])[pt_NAME], PI[params[0]][pADMIN_LEVEL]);
		SendPoliceRadioMessage(-1, -1, message);
		
		SendClientMessagef(playerid, -1, "La persona ahora está en la cárcel.");
		PI[params[0]][pPOLICE_JAIL_ID] = 2;
		JailPlayer(params[0]);
	}
	else SendClientMessagef(playerid, -1, "No estás en el lugar adecuado.");
	return 1;
}

CMD:policias(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	
	PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
	PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
	ShowDialog(playerid, DIALOG_POLICE_LIST);
	return 1;
}

CMD:resistirse(playerid, params[])
{
	if(PlayerTemp[playerid][pt_CUFFING])
	{
		KillTimer(PlayerTemp[playerid][pt_TIMERS][14]);
		PlayerTemp[playerid][pt_CUFFING] = false;
		TogglePlayerControllableEx(playerid, true);
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);

		SendPlayerEnviroment(playerid, "SI");
		Auto_SendPlayerAction(playerid, "se resiste.");
	}
	return 1;
}

forward CuffPlayer(playerid);
public CuffPlayer(playerid)
{
	StopAudioStreamForPlayer(playerid);
	SetPlayerDrunkLevel(playerid, 0);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	CancelEdit(playerid);
	HidePlayerDialog(playerid);
	CallLocalFunction("EndPlayerJob", "iib", playerid, PlayerTemp[playerid][pt_WORKING_IN], true);
	PlayerTemp[playerid][pt_HUNGRY_MESSAGE] = false;
	PlayerTemp[playerid][pt_THIRST_MESSAGE] = false;
	PlayerTemp[playerid][pt_PLAYER_IN_ATM] = false;
	PlayerTemp[playerid][pt_CUFFED] = false;
	PlayerTemp[playerid][pt_CUFFING] = false;
	if(PlayerTemp[playerid][pt_WANT_TAXI])
	{
		PlayerTemp[playerid][pt_WANT_TAXI] = false;
		DisablePlayerTaxiMark(playerid);
	}
	if(PlayerTemp[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
	if(PI[playerid][pWANTED_LEVEL] > 0) DisablePlayerPoliceMark(playerid);
	
	PlayerTemp[playerid][pt_CUFFED] = true;
	PlayerTemp[playerid][pt_CUFFING] = false;
	TogglePlayerControllableEx(playerid, true);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);
	SendPlayerEnviroment(playerid, "NO");
	return 1;
}

CMD:frecuencias(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	ShowDialog(playerid, DIALOG_POLICE_RADIOS);
	return 1;
}

SendPoliceRadioMessage(radio, color, const message[])
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
				{
					if(pTemp(i)[pt_WORKING_IN] == WORK_POLICE)
					{
						if(radio == -1) SendClientMessagef(i, color, message);
						else
						{
							if(pTemp(i)[pt_POLICE_RADIO] == radio)
							{
								SendClientMessagef(i, color, message);
							}
						}
					}
				}
			}
		}
	}
	return 1;
}

CountPoliceRadioPlayers(radio)
{
	new total;
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
				{
					if(pTemp(i)[pt_WORKING_IN] == WORK_POLICE)
					{
						if(pTemp(i)[pt_POLICE_RADIO] == radio)
						{
							total ++;
						}
					}
				}
			}
		}
	}
	return total;
}

GetPlayerZones(playerid, city[], zone[])
{
	new Float:f_Pos[3];
	
	switch(PI[playerid][pSTATE])
	{
		case ROLEPLAY_STATE_INTERIOR:
		{
			f_Pos[0] = ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_EXT_X];
			f_Pos[1] = ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Y];
			f_Pos[2] = ENTER_EXIT[ PlayerTemp[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Z];
		}
		case ROLEPLAY_STATE_OWN_PROPERTY, ROLEPLAY_STATE_GUEST_PROPERTY:
		{
			f_Pos[0] = PROPERTY_INFO[ PlayerTemp[playerid][pt_PROPERTY_INDEX] ][property_EXT_X];
			f_Pos[1] = PROPERTY_INFO[ PlayerTemp[playerid][pt_PROPERTY_INDEX] ][property_EXT_Y];
			f_Pos[2] = PROPERTY_INFO[ PlayerTemp[playerid][pt_PROPERTY_INDEX] ][property_EXT_Z];
		}
		default: GetPlayerPos(playerid, f_Pos[0], f_Pos[1], f_Pos[2]);
	}

    format(city, 45, "San Andreas");
    format(zone, 45, "Desconocida");

	for(new i = 0; i < sizeof(g_Cities); i++)
	{
	    if(	(f_Pos[0] >= g_Cities[i][z_MinX] && f_Pos[0] < g_Cities[i][z_MaxX]) && (f_Pos[1] >= g_Cities[i][z_MinY] && f_Pos[1] < g_Cities[i][z_MaxY]) )
		{
			format(city, 45, g_Cities[i][z_Name]);
		    break;
		}
	}

	for(new i = 0; i < sizeof(g_Zones); i++)
	{
	    if(	(f_Pos[0] >= g_Zones[i][z_MinX] && f_Pos[0] < g_Zones[i][z_MaxX]) && (f_Pos[1] >= g_Zones[i][z_MinY] && f_Pos[1] < g_Zones[i][z_MaxY]) )
		{
			format(zone, 45, g_Zones[i][z_Name]);
		    break;
		}
	}
	
	return 1;
}

stock SetPlayerWantedLevelEx(playerid, level)
{
	PI[playerid][pWANTED_LEVEL] = level;
	SetPlayerWantedLevel(playerid, level);

	if(PI[playerid][pWANTED_LEVEL] == 0)
	{
		DisablePlayerPoliceMark(playerid);
	}
	else
	{
		PlayerTemp[playerid][pt_LAST_SET_WANTED_LEVEL] = gettime();
		SetWantedMarkerToPolice(playerid);
	}
	return 1;
}

GetPointZone(Float:f_Pos_X, Float:f_Pos_Y, city[], zone[])
{
	format(city, 45, "San Andreas");
    format(zone, 45, "Desconocida");

	for(new i = 0; i < sizeof(g_Cities); i++)
	{
	    if(	(f_Pos_X >= g_Cities[i][z_MinX] && f_Pos_X < g_Cities[i][z_MaxX]) && (f_Pos_Y >= g_Cities[i][z_MinY] && f_Pos_Y < g_Cities[i][z_MaxY]) )
		{
			format(city, 45, g_Cities[i][z_Name]);
		    break;
		}
	}
	
	for(new i = 0; i < sizeof(g_Zones); i++)
	{
	    if(	(f_Pos_X >= g_Zones[i][z_MinX] && f_Pos_X < g_Zones[i][z_MaxX]) && (f_Pos_Y >= g_Zones[i][z_MinY] && f_Pos_Y < g_Zones[i][z_MaxY]) )
		{
			format(zone, 45, g_Zones[i][z_Name]);
		    break;
		}
	}

	return 1;
}

JailPlayer(playerid, time = 0)
{
	PI[playerid][pSTATE] = ROLEPLAY_STATE_JAIL;

	if(time)
	{
		PI[playerid][pPOLICE_JAIL_TIME] = time;
	}
	else
	{	
		if(PI[playerid][pVIP]) PI[playerid][pPOLICE_JAIL_TIME] = 60/*180 * PI[playerid][pWANTED_LEVEL]*/;
		else PI[playerid][pPOLICE_JAIL_TIME] = 60/*900 * PI[playerid][pWANTED_LEVEL]*/;
	}

	SetPlayerWantedLevelEx(playerid, 0);
	PlayerTemp[playerid][pt_ENTER_JAIL_TIME] = gettime();
	SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
	
	KillTimer(PlayerTemp[playerid][pt_TIMERS][15]);
	PlayerTemp[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pPOLICE_JAIL_TIME] * 1000, false, "i", playerid);
	
	SendClientMessagef(playerid, -1, "Te quedan %s minutos de condena.", TimeConvert( PI[playerid][pPOLICE_JAIL_TIME] - (gettime() - PlayerTemp[playerid][pt_ENTER_JAIL_TIME]) ));
	ResetPlayerWeaponsEx(playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	DisablePlayerPoliceMark(playerid);
	DeleteIlegalInv(playerid);
	HidePlayerDialog(playerid);
	pTemp(playerid)[pt_TASER_GUN] = false;
	pTemp(playerid)[pt_CUFFED] = false;
	pTemp(playerid)[pt_CUFFING] = false;
	return 1;
}

forward UnjailPlayer(playerid);
public UnjailPlayer(playerid)
{
	KillTimer(PlayerTemp[playerid][pt_TIMERS][15]);
	PI[playerid][pPOLICE_JAIL_TIME] = 0;
	SetPlayerWantedLevelEx(playerid, 0);
	PI[playerid][pSTATE] = ROLEPLAY_STATE_INTERIOR;
	SetWeaponsForPlayer(playerid);
	SetPlayerArmedWeapon(playerid, 0);
	
	for(new i = 0; i != sizeof ENTER_EXIT; i ++)
	{
		if(ENTER_EXIT[i][ee_INTERIOR_TYPE] == JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_INT])
		{
			PI[playerid][pLOCAL_INTERIOR] = ENTER_EXIT[i][ee_ID];
			PlayerTemp[playerid][pt_PROPERTY_INDEX] = -1;
			SetPlayerPosEx(playerid, ENTER_EXIT[i][ee_INT_X], ENTER_EXIT[i][ee_INT_Y], ENTER_EXIT[i][ee_INT_Z], ENTER_EXIT[i][ee_INT_ANGLE] + 180.0, ENTER_EXIT[i][ee_INT_INTERIOR], ENTER_EXIT[i][ee_INT_WORLD], true);
			StopAudioStreamForPlayer(playerid);
			break;
		}
	}
	
	SendClientMessagef(playerid, -1, "Has cumplido tu condena.");
	return 1;
}

DisablePlayerPoliceMark(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_POLICE) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

Crew_RequestHelp(playerid, crew_id)
{
	new
		city[45],
		zone[45],
		crew_message[128];

	GetPlayerZones(playerid, city, zone);

	if(!PlayerTemp[playerid][pt_REQUEST_HELP])
	{
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if(i == playerid) continue;
					if(PI[i][pCREW] != crew_id) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, 0xDD4C4FFF);
				}
			}
		}
		format(crew_message, sizeof crew_message, "{%06x}[Banda] {FFFFFF}%s está pidiendo refuerzos en %s, %s.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME], city, zone);
		SendMessageToCrewMembers(crew_id, -1, crew_message);

		PlayerTemp[playerid][pt_REQUEST_HELP] = true;
	}
	else
	{
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if(i == playerid) continue;
					if(PI[i][pCREW] != crew_id) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
				}
			}
		}
		format(crew_message, sizeof crew_message, "{%06x}[Banda] {FFFFFF}%s ya no necesita refuerzos.", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PlayerTemp[playerid][pt_NAME]);
		SendMessageToCrewMembers(crew_id, -1, crew_message);

		PlayerTemp[playerid][pt_REQUEST_HELP] = false;
	}
	return 1;
}

Police_RequestHelp(playerid)
{
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");

	new
		city[64],
		zone[64],
		message[445];

	GetPlayerZones(playerid, city, zone);

	if(!PlayerTemp[playerid][pt_REQUEST_HELP])
	{
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if(i == playerid) continue;
					if(!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
					if(pTemp(i)[pt_WORKING_IN] != WORK_POLICE) continue;
					
					if(pTemp(playerid)[pt_POLICE_SWAT]) SetPlayerMarkerForPlayer(i, playerid, SWAT_COLOR2);
					else SetPlayerMarkerForPlayer(i, playerid, POLICE_COLOR2);
				}
			}
		}

		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s está pidiendo refuerzos en {"#SWAT_COLOR"}%s, %s.", PlayerTemp[playerid][pt_NAME], city, zone);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}el %s %s está pidiendo refuerzos en {"#POLICE_COLOR"}%s, %s.", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PlayerTemp[playerid][pt_NAME], city, zone);

		SendPoliceRadioMessage(-1, -1, message);

		PlayerTemp[playerid][pt_REQUEST_HELP] = true;
	}
	else
	{
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if(i == playerid) continue;
					if(!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
					if(pTemp(i)[pt_WORKING_IN] != WORK_POLICE) continue;
					
					if(pTemp(playerid)[pt_POLICE_SWAT]) SetPlayerMarkerForPlayer(i, playerid, PLAYER_SWAT_COLOR);
					else SetPlayerMarkerForPlayer(i, playerid, PLAYER_POLICE_COLOR);
				}
			}
		}

		if(pTemp(playerid)[pt_POLICE_SWAT]) format(message, sizeof message, "{"#SWAT_COLOR"}[División S.W.A.T] {FFFFFF}%s ya no necesita refuerzos.", PlayerTemp[playerid][pt_NAME]);
		else format(message, sizeof message, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}%s ya no necesita refuerzos.", PlayerTemp[playerid][pt_NAME]);
		
		SendPoliceRadioMessage(-1, -1, message);

		PlayerTemp[playerid][pt_REQUEST_HELP] = false;
	}
	return 1;
}

SetWantedMarkerToPolice(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_POLICE) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PlayerWantedColor(playerid));
			}
		}
	}
	return 1;
}

ShowPlayerStats(playerid, pid)
{
	if(!IsPlayerConnected(pid)) return 0;
	if(PI[pid][pID] == 0) return 0;
	
	new Float:hours;
	ConvertTime_SecondsToHoursFloat(PI[pid][pTIME_PLAYING], hours);

	new next_rep[24], neccessary_rep = PI[pid][pLEVEL] * REP_MULTIPLIER;
	if(PI[pid][pREP] < neccessary_rep)
	{
		new time = (PI[pid][pTIME_FOR_REP] - (gettime() * 1000 - pTemp(pid)[pt_TIME_PASSED_LAST_REP])) / 1000;
		if(time < 3) time = 3;
		
		format(next_rep, sizeof next_rep, "%sm", TimeConvert(time));
	}
	
	new caption[145], dialog[1024 + (30 * sizeof(work_info))];
	format(caption, sizeof caption, "Estadísticas de %s", pTemp(pid)[pt_NAME]);
	
	format(dialog, sizeof dialog,
		
		"\
			{d1d1d1}ID:\t{ffffff}%d\n\
			{d1d1d1}Nombre:\t{ffffff}%s\n\
			{d1d1d1}Correo electronico:\t{ffffff}%s\n\
			{d1d1d1}Fecha registro:\t{ffffff}%s\n\
			{d1d1d1}ult. conexion:\t{ffffff}%s\n\
			{d1d1d1}Tiempo jugando:\t{ffffff}%.1f horas\n\
			{d1d1d1}Nivel:\t{ffffff}%d\n\
			{d1d1d1}Reputacion:\t{ffffff}%d/%d\n\
			{d1d1d1}Siguiente reputacion:\t{ffffff}%s\n\
			{d1d1d1}Trabajo(s):\t{ffffff}%s\n\
			{d1d1d1}Banda:\t{ffffff}%s\n\
			{"GREEN_COLOR"}Dinero:\t{ffffff}%s$\n\
			{"BLUE_COLOR"}Dinero en banco:\t{ffffff}%s$\n\
			{"PURPLE_COLOR"}"SERVER_COIN":\t{ffffff}%d\n\
			{"GOLD_COLOR"}VIP:\t{ffffff}%s\n\
		",
			PI[pid][pID],
			PI[pid][pNAME],
			PI[pid][pEMAIL],
			PI[pid][pREG_DATE],
			PI[pid][pLAST_CONNECTION],
			hours,
			PI[pid][pLEVEL],
			PI[pid][pREP], neccessary_rep,
			next_rep,
			getPlayerWorks(pid),
			getPlayerCrew(pid),
			number_format_thousand(PI[pid][pCASH]),
			number_format_thousand(PI[pid][pBANK_MONEY]),
			PI[pid][pCOINS],
			getPlayerVip(pid)
			
	);
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST, caption, dialog, "Cerrar", "");	
	return 1;
}

getPlayerCrew(playerid)
{
	new crew[32];
	if(!PI[playerid][pCREW]) crew = "ninguna";
	else format(crew, sizeof crew, "%s", CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_NAME]);
	return crew;
}

getPlayerVip(playerid)
{
	new vip[16];
	if(!PI[playerid][pVIP]) vip = "No";
	else format(vip, sizeof vip, "Sí, VIP (%d)", PI[playerid][pVIP]);
	return vip;
}

AddPlayerBadHistory(account_id, by_account_id, type, const text[])
{
	new date[24];
	getDateTime(date);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

AddPlayerBan(account_id, const account_name[], const account_ip[], by_account_id, type, const text[], days = 0)
{
	new date[24], account_name_fix[24], account_ip_fix[24];
	getDateTime(date);
	format(account_name_fix, 24, "%s", account_name);
	format(account_ip_fix, 16, "%s", account_ip);

	if(!days)
	{
		inline OnBadHistoryInserted1()
		{
			new id = cache_insert_id();
			if(id)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bans (name, ip, id_history) VALUES ('%e', '%e', %d);", account_name_fix, account_ip_fix, id);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnBadHistoryInserted1);
	}
	else
	{
		inline OnBadHistoryInserted2()
		{
			new id = cache_insert_id();
			if(id)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bans (name, ip, id_history, expire_date) VALUES ('%e', '%e', %d, DATE_ADD(NOW(), INTERVAL %d DAY));", account_name_fix, account_ip_fix, id, days);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnBadHistoryInserted2);
	}
	return 1;
}

// Comandos admins
CMD:reportar(playerid, params[])
{
	if(gettime() < PlayerTemp[playerid][pt_ANTIFLOOD_REPORT] + 5) return SendClientMessagef(playerid, -1, "Cálmate.");
	PlayerTemp[playerid][pt_ANTIFLOOD_REPORT] = gettime();
	
	new reason[128];
	if(sscanf(params, "us[128]", params[0], reason)) return ErrorCommandParams(playerid, "/reportar [PlayerID/Nombre] [Razon]");
    if(!IsPlayerConnected(params[0])) return SendMessage(playerid, "Jugador desconectado.");
	
	SendClientMessagef(playerid, -1, "Tu reporte ha sido enviado a los administradores en línea.");
	
	new str[445]; format(str, 445, "{"#RED_COLOR"}[REPORTE] {FFFFFF}%s (%d) > %s (%d): %s", PI[playerid][pNAME], playerid, PI[params[0]][pNAME], params[0], reason);
	SendMessageToAdmins(-1, str);
	return 1;
}

CMD:r(playerid, params[])
{
	new message[128];
	if(sscanf(params, "s[128]", message)) return ErrorCommandParams(playerid, "/r [MENSAJE]");
	
	if(PlayerTemp[playerid][pt_ADMIN_PM_PID] == INVALID_PLAYER_ID || !PlayerTemp[playerid][pt_ADMIN_PM_AID]) return SendClientMessagef(playerid, -1, "Nada para responder.");
	if(PI[ PlayerTemp[playerid][pt_ADMIN_PM_PID] ][pID] != PlayerTemp[playerid][pt_ADMIN_PM_AID])
	{
		PlayerTemp[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
		PlayerTemp[playerid][pt_ADMIN_PM_AID] = 0;
		PlayerTemp[playerid][pt_ADMIN_PM_TIME] = 0;
		SendClientMessagef(playerid, -1, "El administrador que te envio el mensaje está desconectado.");
		return 1;
	}
	if(gettime() > PlayerTemp[playerid][pt_ADMIN_PM_TIME] + 60)
	{
		PlayerTemp[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
		PlayerTemp[playerid][pt_ADMIN_PM_AID] = 0;
		PlayerTemp[playerid][pt_ADMIN_PM_TIME] = 0;
		SendClientMessagef(playerid, -1, "Has tardado demasiado en responser.");
		return 1;
	}
	
	SendClientMessagef(PlayerTemp[playerid][pt_ADMIN_PM_PID], -1, "Respuesta de %s (%d): %s", PI[playerid][pNAME], playerid, message);
	SendClientMessagef(playerid, -1, "Tu mensaje ha sido enviado al administrador.");
	PlayerTemp[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
	PlayerTemp[playerid][pt_ADMIN_PM_AID] = 0;
	PlayerTemp[playerid][pt_ADMIN_PM_TIME] = 0;
	return 1;
}

CMD:id(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/id [PlayerID/Nombre]");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado.");
	
	SendClientMessagef(playerid, -1, "Nombre: '%s' DB-ID: '%d' Playerid: '%d' Nivel: %d Ping: %d", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, PI[to_playerid][pLEVEL], GetPlayerPing(to_playerid));
	return 1;
}

CMD:admins(playerid, params[])
{
	PlayerTemp[playerid][pt_DIALOG_DB_LIMIT] = 10;
	PlayerTemp[playerid][pt_DIALOG_DB_PAGE] = 0;
	ShowDialog(playerid, DIALOG_ADMIN_LIST);
	return 1;
}

CMD:trabajos(playerid)
{
	ShowDialog(playerid, DIALOG_WORKS_TELEPORTS);
	return 1;
}

CMD:getid(playerid, params[])
{
	new findname[24];
	if(sscanf(params, "s[24]", findname)) return ErrorCommandParams(playerid, "/getid <nombre o parte del nombre>");

	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				new id, name[24], connected, pid;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "connected", connected);
				cache_get_value_name_int(i, "playerid", pid);
				SendClientMessagef(playerid, -1, "Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'", name, id, connected, pid);
			}
			SendClientMessagef(playerid, -1, "Se encontraron %d coincidencias, el límite es 20.", rows);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid FROM player WHERE name LIKE '%%%e%%' LIMIT 20;", findname);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:getname(playerid, params[])
{
	new db_id;
	if(sscanf(params, "d", db_id)) return ErrorCommandParams(playerid, "/getname <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				new id, name[24], connected, pid;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "connected", connected);
				cache_get_value_name_int(i, "playerid", pid);
				SendClientMessagef(playerid, -1, "Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'", name, id, connected, pid);
			}
			SendClientMessagef(playerid, -1, "Se encontraron %d coincidencias, el límite es 20.", rows);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid FROM player WHERE id = %d LIMIT 20;", db_id);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:aka(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/aka <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado.");
	if(isnull(PI[to_playerid][pIP])) return SendClientMessagef(playerid, -1, "IP no válida.");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			SendClientMessagef(playerid, -1, "AKA de %s (%d):", PI[to_playerid][pNAME], to_playerid);
			for(new i = 0; i != rows; i ++)
			{
				new id, name[24];
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				SendClientMessagef(playerid, -1, "Nombre: {f4f442}'%s' {FFFFFF}DB-ID: '%d'", name, id);
			}
			SendClientMessagef(playerid, -1, "Se encontraron %d coincidencias, el límite es 20.", rows);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name FROM player WHERE ip = '%e' LIMIT 20;", PI[to_playerid][pIP]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}
alias:aka("cuentas", "multicuentas");

CMD:adv(playerid, params[])
{
	new to_playerid, reason[128];
	if(sscanf(params, "us[128]", to_playerid, reason)) return ErrorCommandParams(playerid, "/adv <player_id> <razon>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	
	AddPlayerBadHistory(PI[to_playerid][pID], PI[playerid][pID], TYPE_WARNING, reason);
	
	new dialog[170];
	format(dialog, sizeof dialog, "Has recibido una advertencia, razon:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
	
	SendClientMessagef(playerid, -1, "Jugador (nick: '%s' dbid: '%d', pid: '%d') advertido.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid);
	
	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', pid: '%d', reason: '%s') advertido.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason);
	SendAdvLogMessage(playerid, dc_str);

	new str[445]; format(str, 445, "el %s %s (%d) advirtio a %s (%d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
	SendAdminAd(0xFF0000FF, str);
	return 1;
}
alias:adv("advertencia", "san");

CMD:kick(playerid, params[])
{
	new to_playerid, reason[128];
	if(sscanf(params, "us[128]", to_playerid, reason)) return ErrorCommandParams(playerid, "/kick <player_id> <razon>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(PlayerTemp[to_playerid][pt_KICKED]) return SendClientMessagef(playerid, -1, "El jugador ya está expulsado.");
	if(!PI[to_playerid][pID]) return Kick(to_playerid);
	
	
	AddPlayerBadHistory(PI[to_playerid][pID], PI[playerid][pID], TYPE_KICK, reason);
	
	new dialog[170];
	format(dialog, sizeof dialog, "Has sido expulsado, razon:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
	KickEx(to_playerid, 500);
	
	SendClientMessagef(playerid, -1, "Jugador (nick: '%s' dbid: '%d', pid: '%d') expulsado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid);
	
	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', pid: '%d', reason: '%s') expulsado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason);
	SendKickLogMessage(playerid, dc_str);

	new str[445]; format(str, 445, "el %s %s (%d) expulso a %s (%d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
	SendAdminAd(0xFF0000FF, str);
	return 1;
}

CMD:ojet(playerid, params[])
{
	new player_action = GetPlayerSpecialAction(playerid);
	if(player_action == SPECIAL_ACTION_USEJETPACK)
	{
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	}
	else SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USEJETPACK);
	return 1;
}

CMD:spec(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/spec <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	if(GetPlayerState(playerid) != PLAYER_STATE_SPECTATING)
    {
		new Float:p[4];
		GetPlayerPos(playerid, p[0], p[1], p[2]);
		GetPlayerFacingAngle(playerid, p[3]);
		SetSpawnInfo(playerid, NO_TEAM, GetPlayerSkin(playerid), p[0], p[1], p[2], p[3], 0, 0, 0, 0, 0, 0);
		PI[playerid][pINTERIOR] = GetPlayerInterior(playerid);
		PlayerTemp[playerid][pt_VIRTUAL_WORLD] = GetPlayerVirtualWorld(playerid);
	}
	
	TogglePlayerSpectatingEx(playerid, true);
	SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(to_playerid));
	SetPlayerInterior(playerid, GetPlayerInterior(to_playerid));
	if(IsPlayerInAnyVehicle(to_playerid)) PlayerSpectateVehicle(playerid, GetPlayerVehicleID(to_playerid));
	else PlayerSpectatePlayer(playerid, to_playerid);
	SendClientMessagef(playerid, -1, "Utiliza /specoff para terminar este modo.");
	
	
	SendCmdLogToAdmins(playerid, "spec", params);
	return 1;
}
alias:spec("specp", "spp");

CMD:specoff(playerid, params[])
{
	SetPlayerInterior(playerid, PI[playerid][pINTERIOR]);
	SetPlayerVirtualWorld(playerid, PlayerTemp[playerid][pt_VIRTUAL_WORLD]);
	TogglePlayerSpectatingEx(playerid, false);
	KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
	PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
	return 1;
}
alias:specoff("listo");

CMD:freeze(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/freeze <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	SendClientMessagef(playerid, -1, "Jugador '%s' (%d) congelado.", PI[to_playerid][pNAME], to_playerid);
	TogglePlayerControllableEx(to_playerid, false);
	return 1;
}
alias:freeze("congelar");

CMD:unfreeze(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/unfreeze <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	SendClientMessagef(playerid, -1, "Jugador '%s' (%d) descongelado.", PI[to_playerid][pNAME], to_playerid);
	TogglePlayerControllableEx(to_playerid, true);
	return 1;
}
alias:unfreeze("descongelar");

CMD:pest(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/pest <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerStats(playerid, to_playerid);
	return 1;
}

CMD:pinv(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/pinv <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerInventory(playerid, to_playerid);
	return 1;
}

CMD:pexp(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/pexp <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerSkills(playerid, to_playerid);
	return 1;
}

CMD:parmas(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/parmas <player_id>");
	
	new dialog[95 * 15], line_str[95];
	format(dialog, sizeof dialog, "{"#SILVER_COLOR"}Arma\t{"#BLUE_COLOR"}Municion\t{"#SILVER_COLOR"}Slot\n");
	
	for(new i = 0; i < sizeof PLAYER_WEAPONS[]; i ++)
	{
		if(!PLAYER_WEAPONS[to_playerid][i][player_weapon_VALID]) continue;
		
		format(line_str, sizeof line_str, "{"#SILVER_COLOR"}%s\t{"#BLUE_COLOR"}%s\t{"#SILVER_COLOR"}%d\n", WEAPON_INFO[ PLAYER_WEAPONS[to_playerid][i][player_weapon_ID] ][weapon_info_NAME], number_format_thousand(PLAYER_WEAPONS[to_playerid][i][player_weapon_AMMO]), i);
		strcat(dialog, line_str);
	}

	format(line_str, sizeof line_str, "Armas de %s", PlayerTemp[playerid][pt_NAME]);
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, line_str, dialog, "Continuar", "Cerrar");
	return 1;
}

CMD:pbank(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/pbank <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(!PI[to_playerid][pBANK_ACCOUNT]) SendClientMessagef(playerid, -1, "El jugador no tiene cuenta bancaria.");
	else SendClientMessagef(playerid, -1, "Cuenta bancaria ID: '%d' Balance: '%s'", PI[to_playerid][pBANK_ACCOUNT], number_format_thousand(PI[to_playerid][pBANK_MONEY]));
	return 1;
}

CMD:unjail(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/unjail <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(PI[to_playerid][pSTATE] != ROLEPLAY_STATE_JAIL) return SendClientMessagef(playerid, -1, "El jugador no está en el cárcel.");
	
	UnjailPlayer(to_playerid);
	SendClientMessagef(playerid, -1, "El jugador %s (%d) ahora está en libertad.", PI[to_playerid][pNAME], to_playerid);
	
	
	SendCmdLogToAdmins(playerid, "unjail", params);
	return 1;
}

CMD:ip(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/ip <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	SendClientMessagef(playerid, -1, "IP %s (%d): %s", PI[to_playerid][pNAME], to_playerid, PI[to_playerid][pIP]);
	return 1;
}

CMD:traerveh(playerid, params[])
{
	new to_car;
	if(sscanf(params, "i", to_car)) return ErrorCommandParams(playerid, "/traerveh <car_id>");
	if(to_car >= MAX_VEHICLES) return 1;

	if(!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Vehículo no válido.");
	if(GLOBAL_VEHICLES[to_car][gb_vehicle_OCCUPIED]) return SendClientMessagef(playerid, -1, "Vehículo está ocupado.");
		
    new Float:gPos[3];
    GetPlayerPos(playerid, gPos[0], gPos[1], gPos[2]);
    SetVehiclePosEx(to_car, gPos[0] + 2.0, gPos[1], gPos[2]);
    return 1;
}
alias:traerveh("mover", "getveh", "traervehiculo", "traerauto", "getcar");

CMD:gotoveh(playerid, params[])
{
	new to_car;
	if(sscanf(params, "i", to_car)) return ErrorCommandParams(playerid, "/gotoveh <car_id>");
	if(to_car >= MAX_VEHICLES) return 1;

	if(!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendClientMessagef(playerid, -1, "Vehículo no válido.");
		
    new Float:gPos[3];
    GetVehiclePos(to_car, gPos[0], gPos[1], gPos[2]);
    SetPlayerPosEx(playerid, gPos[0], gPos[1], gPos[2], 0.0, GLOBAL_VEHICLES[to_car][gb_vehicle_INTERIOR], 0);//GLOBAL_VEHICLES[to_car][gb_vehicle_WORLD]);
    return 1;
}
alias:gotoveh("irvehiculo", "gotocar", "iracarro");

CMD:duty(playerid)
{
	if(PlayerTemp[playerid][pt_ADMIN_SERVICE])
	{
		PlayerTemp[playerid][pt_ADMIN_SERVICE] = false;
		SendClientMessagef(playerid, -1, "Ahora no estás de servicio como %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ]);
	}	
	else
	{
		PlayerTemp[playerid][pt_ADMIN_SERVICE] = true;
		SendClientMessagef(playerid, -1, "Ahora estás de servicio como %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ]);
	}
	return 1;
}

CMD:goto(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/goto <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(to_playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(to_playerid, p[3]);
	
	SetPlayerPosEx(playerid, p[0], p[1], p[2], p[3], GetPlayerInterior(to_playerid), GetPlayerVirtualWorld(to_playerid), false, true);
	SetPlayerFacingAngle(playerid, p[3] + 180.0);

    SetPlayerCityWeather(playerid);
	
	SendCmdLogToAdmins(playerid, "goto", params);
	return 1;
}
alias:goto("ir");

CMD:get(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/get <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(playerid, p[3]);
	
	SetPlayerPosEx(to_playerid, p[0], p[1], p[2], p[3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false, true);
	SetPlayerFacingAngle(to_playerid, p[3] + 180.0);

    SetPlayerCityWeather(to_playerid);

	SendCmdLogToAdmins(playerid, "get", params);
	return 1;
}
alias:get("traer");

CMD:unban(playerid, params[])
{
	new name[24];
	if(sscanf(params, "s[24]", name)) return ErrorCommandParams(playerid, "/unban <nombre completo o ip>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM bans WHERE name = '%e' OR ip = '%e';", name, name);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendClientMessagef(playerid, -1, "'%s' ha sido desbaneado.", name);
				
				new str[445]; format(str, 445, "el %s %s (%d) ha desbaneado a '%s'.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, name);
				SendMessageToAdmins(0xFF0000FF, str);

				new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s') des-baneado.", name);
				SendUnBanLogMessage(playerid, dc_str);

				inline OnCountQueryLoad()
				{
					new crows;
					if(cache_get_row_count(crows))
					{
						if(crows)
						{
							new id_player;
							cache_get_value_index_int(0, 0, id_player);
							if(id_player) AddPlayerBadHistory(id_player, PI[playerid][pID], TYPE_UNBAN, "/unban");
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e' OR ip = '%e';", name, name);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
			}
			else SendClientMessagef(playerid, -1, "'%s' no está en la lista de baneados.", name);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, name);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:jail(playerid, params[])
{
    new to_playerid, reason[128], time;
    if(sscanf(params, "uds[128]", to_playerid, time, reason)) return ErrorCommandParams(playerid, "/jail <player_id> <minutos> <razon>");
	if(time < 0 || time > 1440) return SendClientMessagef(playerid, -1, "Intervalo de minutos incorrecto.");
    if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
    if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

    StopAudioStreamForPlayer(to_playerid);
    CancelEdit(to_playerid);
    HidePlayerDialog(to_playerid);
	CallLocalFunction("EndPlayerJob", "iib", to_playerid, PlayerTemp[to_playerid][pt_WORKING_IN], true);
    PlayerTemp[to_playerid][pt_HUNGRY_MESSAGE] = false;
    PlayerTemp[to_playerid][pt_THIRST_MESSAGE] = false;
    PlayerTemp[to_playerid][pt_PLAYER_IN_ATM] = false;
    PlayerTemp[to_playerid][pt_CUFFED] = false;
    PlayerTemp[to_playerid][pt_CUFFING] = false;
    if(PlayerTemp[to_playerid][pt_WANT_TAXI])
    {
        PlayerTemp[to_playerid][pt_WANT_TAXI] = false;
        DisablePlayerTaxiMark(to_playerid);
    }
    if(PlayerTemp[to_playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(to_playerid);

	PI[to_playerid][pPOLICE_JAIL_ID] = 0;
    JailPlayer(to_playerid, time * 60);
    SendClientMessagef(to_playerid, -1, "{"#SILVER_COLOR"}Te quedan %s minutos de sancion, razon: %s.", TimeConvert(time * 60), reason);
    SetPlayerSpecialAction(to_playerid, SPECIAL_ACTION_NONE);

	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' reason: '%s', time: '%d' minutes) sancionado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason, time);
	SendJailLogMessage(playerid, dc_str);

    new str[445]; format(str, 445, "el %s %s (%d) sanciono a %s (%d): %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
    SendAdminAd(0xFF0000FF, str);
    return 1;
}

CMD:say(playerid, params[])
{
	new 
		to_playerid, 
		command[128];

	if(sscanf(params, "us[128]", to_playerid, command)) return ErrorCommandParams(playerid, "/say <player_id> <comando>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	if(strfind(command, "/", true) == -1) CallLocalFunction("OnPlayerText", "is", to_playerid, command);
	else 
	{
		PlayerTemp[to_playerid][pt_ANTIFLOOD_TALK] = GetTickCount();
		PC_EmulateCommand(to_playerid, command);
	}

	SendCmdLogToAdmins(playerid, "say", params);
	return 1;
}

CMD:ban(playerid, params[])
{	
	new to_playerid, reason[128];
	if(sscanf(params, "us[128]", to_playerid, reason)) return ErrorCommandParams(playerid, "/ban <player_id> <razon>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(PlayerTemp[to_playerid][pt_KICKED]) return SendClientMessagef(playerid, -1, "El jugador ya está expulsado.");
	if(!PI[to_playerid][pID]) return Kick(to_playerid);
	
	AddPlayerBan(PI[to_playerid][pID], PI[to_playerid][pNAME], PI[to_playerid][pIP], PI[playerid][pID], TYPE_BAN, reason);
	
	new dialog[250];
	format(dialog, sizeof dialog, "Has sido baneado, razon:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
	KickEx(to_playerid, 500);
	
	SendClientMessagef(playerid, -1, "Jugador (nick: '%s' dbid: '%d', id: '%d') baneado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid);
	
	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' reason: '%s', permanent) baneado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason);
	SendBanLogMessage(playerid, dc_str);

	new str[445]; format(str, 445, "el %s %s (%d) baneo a %s (%d): %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
	SendAdminAd(0xFF0000FF, str);
	return 1;
}

CMD:cls(playerid,params[])
{	
	for(new i = 0; i != 80; i ++) SendClientMessageToAll(-1, " ");
	SendCmdLogToAdmins(playerid, "cls", params);
	return 1;
}
alias:cls("log");

CMD:tban(playerid, params[])
{	
	new to_playerid, days, reason[128];
	if(sscanf(params, "uds[128]", to_playerid, days, reason)) return ErrorCommandParams(playerid, "/tban <player_id> <dias> <razon>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	if(days <= 0 || days > 9999) return ErrorCommandParams(playerid, "/ban <player_id> <dias> <razon>");
	
	if(PlayerTemp[to_playerid][pt_KICKED]) return SendClientMessagef(playerid, -1, "El jugador ya está expulsado.");
	if(!PI[to_playerid][pID]) return Kick(to_playerid);
	
	AddPlayerBan(PI[to_playerid][pID], PI[to_playerid][pNAME], PI[to_playerid][pIP], PI[playerid][pID], TYPE_TEMP_BAN, reason, days);
	
	new dialog[250];
	format(dialog, sizeof dialog, "Has sido baneado por %d días, razon:\n%s\n", days, reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Salir", "");
	KickEx(to_playerid, 500);
	
	SendClientMessagef(playerid, -1, "Jugador (nick: '%s' dbid: '%d', pid: '%d') baneado por %d días.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, days);
	
	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' reason: '%s', days: '%d') baneado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason, days);
	SendBanLogMessage(playerid, dc_str);

	new str[445]; format(str, 445, "el %s %s (%d) baneo %d días a %s (%d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, days, PI[to_playerid][pNAME], to_playerid, reason);
	SendAdminAd(0xFF0000FF, str);
	return 1;
}

CMD:setwlevel(playerid, params[]) {
	new to_playerid, level;
	if(sscanf(params, "ud", to_playerid, level)) return ErrorCommandParams(playerid, "/setwlevel <to_playerid> <level>");
	SetPlayerWantedLevelEx(to_playerid, level);
	return 1;
}

CMD:sound(playerid, params[]) {
	new id;
	if(sscanf(params, "d", id)) return ErrorCommandParams(playerid, "/sound <id>");
	PlayerPlaySound(playerid, id, 0.0, 0.0, 0.0);
	return 1;
}

CMD:anim(playerid, params[]) {
	new animLib[32], animName[32];
	if(sscanf(params, "s[32]s[32]", animLib, animName)) return ErrorCommandParams(playerid, "/anim <animLib> <animName>");
	ApplyAnimation(playerid, animLib, animName, 4.1, 1, 0, 0, 0, 0, 1);
	return 1;
}

CMD:anmindex(playerid)
{
	new index = GetPlayerAnimationIndex(playerid);
	SendMessagef(playerid, "Anim Idex: %d", index);
	return 1;
}

CMD:dban(playerid, params[])
{
	new reason[128], to_account;
	if(sscanf(params, "ds[128]", to_account, reason)) return ErrorCommandParams(playerid, "/dban <DB-ID> <razon>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if(PI[playerid][pADMIN_LEVEL] >= admin_level)
				{
					if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado utilice /ban, su player_id: %d.", name, id, pid);
					else
					{
						inline OnCountQueryLoad()
						{
							new crows;
							if(cache_get_row_count(crows))
							{
								if(crows)
								{
									new expire_date[24];
									cache_get_value_name(0, "expire_date", expire_date);
									
									if(isnull(expire_date)) SendClientMessagef(playerid, -1, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (permanentemente).", name, id);
									else SendClientMessagef(playerid, -1, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (temporalmente, fecha de readmision: %s).", name, id, expire_date);
								}
								else
								{
									AddPlayerBan(id, name, ip, PI[playerid][pID], TYPE_BAN, reason);
									SendClientMessagef(playerid, -1, "Jugador (nick: '%s' db_id: '%d') baneado.", name, id);
									
									new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', reason: '%s', permanent, OFF) baneado.", name, id, reason);
									SendBanLogMessage(playerid, dc_str);

									new str[445]; format(str, 445, "el %s %s (%d) baneo a %s (offline, db_id: %d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, name, id, reason);
									SendMessageToAdmins(0xFF0000FF, str);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, ip);
						mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
					}
				}
				else SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:dtban(playerid, params[])
{
	new reason[128], to_account, days;
	if(sscanf(params, "dds[128]", to_account, days, reason)) return ErrorCommandParams(playerid, "/dtban <DB-ID> <dias> <razon>");
	if(days <= 0 || days > 9999) return ErrorCommandParams(playerid, "/dtban <DB-ID> <dias> <razon>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if(PI[playerid][pADMIN_LEVEL] >= admin_level)
				{
					if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado utilice /ban, su player_id: %d.", name, id, pid);
					else
					{
						inline OnCountQueryLoad()
						{
							new crows;
							if(cache_get_row_count(crows))
							{
								if(crows)
								{
									new expire_date[24];
									cache_get_value_name(0, "expire_date", expire_date);
									
									if(isnull(expire_date)) SendClientMessagef(playerid, -1, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (permanentemente).", name, id);
									else SendClientMessagef(playerid, -1, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (temporalmente, fecha de readmision: %s).", name, id, expire_date);
								}
								else
								{
									AddPlayerBan(id, name, ip, PI[playerid][pID], TYPE_BAN, reason, days);
									SendClientMessagef(playerid, -1, "Jugador (nick: '%s' dbid: '%d') baneado por %d días.", name, id, days);

									new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', reason: '%s', days: '%d', OFF) baneado.", name, id, reason, days);
									SendBanLogMessage(playerid, dc_str);

									new str[455]; format(str, 445, "el %s %s (%d) baneo %d días a %s (offline, db_id: %d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, days, name, id, reason);
									SendMessageToAdmins(0xFF0000FF, str);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, ip);
						mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
					}
				}
				else SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:rac(playerid, params[])
{
	RespawnGlobalUnoccupiedVehicles();
	SendClientMessagef(playerid, -1, "Todos los vehículos no personales y sin ocupar han sido re-spawneados.");
	
	SendCmdLogToAdmins(playerid, "rac", params);
	return 1;
}

CMD:rac2(playerid, params[])
{
	RespawnAllUnoccupiedVehicles();
	SendClientMessagef(playerid, -1, "Todos los vehículos sin ocupar han sido re-spawneados.");
	
	SendCmdLogToAdmins(playerid, "rac2", params);
	return 1;
}

CMD:rv(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!vehicleid) return SendClientMessagef(playerid, -1, "No estás en un vehículo.");
	
	SetVehicleToRespawnEx(vehicleid);
	SendClientMessagef(playerid, -1, "Vehículo (%d) re-spawneado.", vehicleid);
	return 1;
}

CMD:pm(playerid, params[])
{
	new to_playerid, message[128];
	if(sscanf(params, "us[128]", to_playerid, message)) return ErrorCommandParams(playerid, "/pm <player_id> <mensaje>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	SendClientMessagef(playerid, -1, "Mensaje enviado a %s (%d): %s", PI[to_playerid][pNAME], to_playerid, message);
	
	PlayerTemp[to_playerid][pt_ADMIN_PM_PID] = playerid;
	PlayerTemp[to_playerid][pt_ADMIN_PM_AID] = PI[playerid][pID];
	PlayerTemp[to_playerid][pt_ADMIN_PM_TIME] = gettime();
	SendClientMessagef(to_playerid, -1, "{"#SILVER_COLOR"}Mensaje de un administrador (/r para responder): {FFFFFF}%s", message);
	
	SendCmdLogToAdmins(playerid, "pm", params);
	return 1;
}

CMD:settime(playerid, params[])
{
	new hour, minute;
	if(sscanf(params, "dd", hour, minute)) return ErrorCommandParams(playerid, "/settime <hora> <minuto>");
	SetMyWorldTime(hour, minute);
	SendClientMessagef(playerid, -1, "El tiempo se ajustará cuando el reloj avance.");
	SendCmdLogToAdmins(playerid, "settime", params);
	return 1;
}

CMD:setweather(playerid, params[])
{
	new weather;
	if(sscanf(params, "d", weather)) return ErrorCommandParams(playerid, "/setweather <ID>");
	InterpolateWeather(weather);
	SendCmdLogToAdmins(playerid, "setweather", params);
	return 1;
}

CMD:rconadmin(playerid, params[])
{
	if(!IsPlayerAdmin(playerid)) return SendClientMessage(playerid, -1, "SERVER: Unknown command.");
	
	PI[playerid][pADMIN_LEVEL] = CMD_OWNER;

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", PI[playerid][pADMIN_LEVEL], PI[playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

CMD:givemod(playerid, params[])
{
	new to_playerid, level;
	if(sscanf(params, "ud", to_playerid, level)) return ErrorCommandParams(playerid, "/givemod <player_id> <rango>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	if(level < 0 || level >= sizeof ADMIN_LEVELS) return SendClientMessagef(playerid, -1, "El rango no es válido.");
	if(level > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "No puedes dar este rango por ser un rango superior al tuyo.");
	if(level == PI[to_playerid][pADMIN_LEVEL]) return SendMessage(playerid, "El jugador ya tiene el rango.");

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", level, PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	PI[to_playerid][pADMIN_LEVEL] = level;
	SendClientMessagef(to_playerid, -1, "%s cambio tu rango administrativo a: %s.", PI[playerid][pNAME], ADMIN_LEVELS[level]);
	SendClientMessagef(playerid, -1, "El rango administrativo de %s (%d) ahora es %s.", PI[to_playerid][pNAME], to_playerid, ADMIN_LEVELS[level]);
	
	SendCmdLogToAdmins(playerid, "givemod", params);
	return 1;
}
alias:givemod("staff");

CMD:ac(playerid, params[])
{
	ShowDialog(playerid, DIALOG_ANTI_CHEAT);
	return 1;
}

CMD:setthirst(playerid, params[])
{
	new to_playerid, Float:amount;
	if(sscanf(params, "uf", to_playerid, amount)) return ErrorCommandParams(playerid, "/setthirst <player_id> <valor>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(amount < 0.0 || amount > 100.0) return SendClientMessagef(playerid, -1, "Cantidad no válida.");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	PI[to_playerid][pTHIRST] = amount;
	ShowPlayerHudInfo(to_playerid);
	SendClientMessagef(playerid, -1, "La hidratacion de %s (%d) ahora es %.1f.", PI[to_playerid][pNAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "setthirst", params);
	return 1;
}
alias:setthirst("setsed");

CMD:sethunger(playerid, params[])
{
	new to_playerid, Float:amount;
	if(sscanf(params, "uf", to_playerid, amount)) return ErrorCommandParams(playerid, "/sethungry <player_id> <valor>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(amount < 0.0 || amount > 100.0) return SendClientMessagef(playerid, -1, "Cantidad no válida.");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	PI[to_playerid][pHUNGRY] = amount;
	ShowPlayerHudInfo(to_playerid);
	SendClientMessagef(playerid, -1, "La alimentacion de %s (%d) ahora es %.1f.", PI[to_playerid][pNAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "sethunger", params);
	return 1;
}
alias:sethunger("sethambre", "sethungry");

CMD:setgas(playerid, params[])
{
	new Float:val;
	if(sscanf(params, "f", val)) return ErrorCommandParams(playerid, "/setgas <valor>");
	if(val < 0.0) return SendClientMessagef(playerid, -1, "Valor no válido.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!vehicleid) return SendClientMessagef(playerid, -1, "No estás en un vehículo.");
	
	if(val > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) val = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = val;
	
	SendClientMessagef(playerid, -1, "La gasolina del vehículo (%d) ahora es %.1f.", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS]);
	
	SendCmdLogToAdmins(playerid, "setgas", params);
	return 1;
}

CMD:repairveh(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!vehicleid) return SendClientMessagef(playerid, -1, "No estás en un vehículo.");
	
	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) RepairVehicleEx(vehicleid, playerid);
	else {
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) RepairVehicleEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER]);
		else RepairVehicleEx(vehicleid);
	}
	SendClientMessagef(playerid, -1, "Vehículo (%d) reparado.", vehicleid);
	
	SendCmdLogToAdmins(playerid, "repairveh", params);
	return 1;
}
alias:repairveh("repararveh");

CMD:sethealth(playerid, params[])
{
	new to_playerid, Float:amount;
	if(sscanf(params, "uf", to_playerid, amount)) return ErrorCommandParams(playerid, "/sethealth <player_id> <valor>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(amount < 0.0 || amount > 100.0) return SendClientMessagef(playerid, -1, "Valor no válido.");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerHealthEx(to_playerid, amount);
	SendClientMessagef(playerid, -1, "La vida de %s (%d) ahora es %.1f.", PI[to_playerid][pNAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "sethealth", params);
	return 1;
}
alias:sethealth("setvida");

CMD:setarmour(playerid, params[])
{
	new to_playerid, Float:amount;
	if(sscanf(params, "uf", to_playerid, amount)) return ErrorCommandParams(playerid, "/setarmour <player_id> <valor>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(amount < 0.0 || amount > 100.0) return SendClientMessagef(playerid, -1, "Valor no válido.");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerArmourEx(to_playerid, amount);
	SendClientMessagef(playerid, -1, "El chaleco de %s (%d) ahora es %.1f.", PI[to_playerid][pNAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "setarmour", params);
	return 1;
}
alias:setarmour("setchaleco");

CMD:setlevel(playerid, params[])
{
	new to_playerid, level;
	if(sscanf(params, "ud", to_playerid, level)) return ErrorCommandParams(playerid, "/level <player_id> <nivel>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	KillTimer(PlayerTemp[to_playerid][pt_TIMERS][2]);
	
	PI[to_playerid][pREP] = 1;
	PI[to_playerid][pLEVEL] = level;
	UpdateReputationTextDraws(to_playerid);
	SetPlayerSkillLevels(to_playerid);
	ShowPlayerHudInfo(to_playerid);
	
	SendClientMessagef(to_playerid, -1, "¡Felicidades! Has subido al nivel %d.", PI[to_playerid][pLEVEL]);
	SetPlayerScore(to_playerid, PI[to_playerid][pLEVEL]);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	PI[to_playerid][pTIME_FOR_REP] = TIME_FOR_REP;
	PlayerTemp[to_playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[to_playerid][pTIME_PLAYING], PI[to_playerid][pLEVEL], PI[to_playerid][pREP], TIME_FOR_REP, PI[to_playerid][pPAYDAY_REP], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	KillTimer(PlayerTemp[to_playerid][pt_TIMERS][2]);
	PlayerTemp[to_playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[to_playerid][pTIME_FOR_REP], false, "i", to_playerid);
	
	SendClientMessagef(playerid, -1, "El nivel de %s (%d) ahora es %d.", PI[to_playerid][pNAME], to_playerid, PI[to_playerid][pLEVEL]);
	
	SendCmdLogToAdmins(playerid, "setlevel", params);
	return 1;
}

CMD:setwork(playerid, params[])
{
	new to_playerid, work, set;
	if(sscanf(params, "udd", to_playerid, work, set)) return ErrorCommandParams(playerid, "/setwork <player_id> <work> <set>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(work < 0 || work >= sizeof work_info) return SendClientMessagef(playerid, -1, "El trabajo no es válido, para verlos usa /works.");
	
	if(PlayerTemp[to_playerid][pt_WORKING_IN]) return SendClientMessagef(playerid, -1, "No se puede cambiar el trabajo del jugador porque está de servicio en su trabajo.");
	
	
	new player_jobs = CountPlayerJobs(to_playerid);
	if(PI[to_playerid][pVIP])
	{
		if(player_jobs >= MAX_VIP_WORKS && set)
		{
			SendClientMessagef(playerid, -1, "El limite de trabajos para este jugador es %d.", player_jobs);
			return 1;
		}
	}
	else
	{
		if(player_jobs >= MAX_NU_WORKS && set)
		{
			SendClientMessagef(playerid, -1, "El limite de trabajos para este jugador es %d.", player_jobs);
			return 1;
		}
	}

	if(set)
	{
		if(work == WORK_POLICE)
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1, level = 1;", PI[to_playerid][pID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);

			PI[to_playerid][pPLACA_PD] = random(10000000);
			PLAYER_WORKS[to_playerid][work][pwork_LEVEL] = 1;
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET placa_pd = %d WHERE id = %d;", PI[to_playerid][pPLACA_PD], PI[to_playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
		else
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1;", PI[to_playerid][pID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	
		PLAYER_WORKS[to_playerid][work][pwork_SET] = 1;
		SendClientMessagef(to_playerid, SILVER_COLOR2, "Ahora eres %s.", work_info[work][work_info_NAME]);
	}
	else
	{
		if(work == WORK_POLICE)
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[to_playerid][pID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);

			PI[to_playerid][pPLACA_PD] = 0;
			PLAYER_WORKS[to_playerid][work][pwork_LEVEL] = 0;
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET placa_pd = %d WHERE id = %d;", PI[to_playerid][pPLACA_PD], PI[to_playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
		else
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[to_playerid][pID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}

		PLAYER_WORKS[to_playerid][work][pwork_SET] = 0;
		SendClientMessagef(to_playerid, -1, "{"#SILVER_COLOR"}Has abandonado tu trabajo de %s.", work_info[work][work_info_NAME]);
	}

	SendClientMessagef(playerid, -1, "El trabajo %s de %s (%d) es: '%d'.", work_info[ work ][work_info_NAME], PI[to_playerid][pNAME], to_playerid, set);
	SendCmdLogToAdmins(playerid, "setwork", params);
	return 1;
}

CMD:setworkexp(playerid, params[])
{
	new to_playerid, work, exp;
	if(sscanf(params, "udd", to_playerid, work, exp)) return ErrorCommandParams(playerid, "/setworkexp <player_id> <work, para verlos /works> <exp>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	if(work < 0 || work >= sizeof work_info) return SendClientMessagef(playerid, -1, "El trabajo no es válido, para verlos usa /works.");
	
	if(PLAYER_WORKS[to_playerid][ work ][pwork_SET])
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", exp, PI[to_playerid][pID], work);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PLAYER_WORKS[to_playerid][ work ][pwork_LEVEL] = exp;
		SendClientMessagef(playerid, -1, "La experiencia de %s (%d) en el trabajo '%s' ahora es %d.", PI[to_playerid][pNAME], to_playerid, work_info[ work ][work_info_NAME], exp);
		SendCmdLogToAdmins(playerid, "setworkexp", params);
	}
	else SendClientMessagef(playerid, -1, "El jugador no tiene el trabajo");
	return 1;
}

CMD:setcash(playerid, params[])
{
	new to_playerid, value;
	if(sscanf(params, "ud", to_playerid, value)) return ErrorCommandParams(playerid, "/setcash <player_id> <amount>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerCash(to_playerid, value);
	SendClientMessagef(playerid, -1, "El dinero de %s (%d) ahora es %d.", PI[to_playerid][pNAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "setcash", params);
	return 1;
}

CMD:givecash(playerid, params[])
{
	new to_playerid, value;
	if(sscanf(params, "ud", to_playerid, value)) return ErrorCommandParams(playerid, "/givecash <player_id> <amount>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	GivePlayerCash(to_playerid, value, true, value < 0 ? true : false);
	SendClientMessagef(playerid, -1, "El jugador %s (%d) ha recibido %d.", PI[to_playerid][pNAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "givecash", params);
	return 1;
}

CMD:givecashall(playerid, params[])
{
	new value;
	if(sscanf(params, "d", value)) return ErrorCommandParams(playerid, "/givecashall <amount>");

	if(PI[playerid][pADMIN_LEVEL] <= CMD_ADMINISTRATOR)
	{
		if(PI[playerid][pCASH] < value) return SendMessage(playerid, "No tienes esa cantidad de dinero en mano.");

		if(value > 5000)
		{
			SendClientMessagef(playerid, 0xCCCCCCCC, "Solo puedes dar como maximo 5000$.");
			return 1;
		}

		if(gettime() < PlayerTemp[playerid][pt_GIVECASHALL_TIME] + minutes(30))
		{
			new time = (minutes(30)-(gettime()-PlayerTemp[playerid][pt_GIVECASHALL_TIME]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para volver a dar dinero.", TimeConvert(time));
			return 1;
		}

		GivePlayerCash(playerid, -value, true, true);
	}

	LoopEx(i, MAX_PLAYERS, 0)
	{
		if(!IsPlayerConnected(i)) continue;
		GivePlayerCash(i, value, true, value < 0 ? true : false);

		if(value < 0) SendClientMessagef(i, GOLD_COLOR2, "El %s %s ha descontado %s$ a todos los jugadores.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], number_format_thousand(value));
		else SendClientMessagef(i, GOLD_COLOR2, "El %s %s ha regalado %s$ a todos los jugadores.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], number_format_thousand(value));
	}

	pTemp(playerid)[pt_GIVECASHALL_TIME] = gettime();
	
	SendCmdLogToAdmins(playerid, "givecashall", params);
	return 1;
}

CMD:setdn(playerid, params[])
{
	new to_playerid, value;
	if(sscanf(params, "ud", to_playerid, value)) return ErrorCommandParams(playerid, "/setdn <player_id> <amount>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	PI[to_playerid][pBLACK_CASH] = value;
	SendClientMessagef(playerid, -1, "El dinero negro de %s (%d) ahora es %d.", PI[to_playerid][pNAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "setdn", params);
	return 1;
}

CMD:givedn(playerid, params[])
{
	new to_playerid, value;
	if(sscanf(params, "ud", to_playerid, value)) return ErrorCommandParams(playerid, "/givedn <player_id> <amount>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	
	GivePlayerBlackCash(to_playerid, value, true, value < 0 ? true : false);
	SendClientMessagef(playerid, -1, "El jugador %s (%d) ha recibido %d DN$.", PI[to_playerid][pNAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "givedn", params);
	return 1;
}

CMD:givednall(playerid, params[])
{
	new value;
	if(sscanf(params, "d", value)) return ErrorCommandParams(playerid, "/givednall <amount>");

	if(PI[playerid][pADMIN_LEVEL] <= CMD_ADMINISTRATOR)
	{
		if(value > 5000)
		{
			SendClientMessagef(playerid, 0xCCCCCCCC, "Solo puedes dar como maximo 5000 DN$.");
			return 1;
		}

		if(gettime() < PlayerTemp[playerid][pt_GIVECASHALL_TIME] + minutes(25))
		{
			new time = (minutes(25)-(gettime()-PlayerTemp[playerid][pt_GIVECASHALL_TIME]));
			SendClientMessagef(playerid, 0xCCCCCCCC, "Tienes que esperar %s minutos para volver a dar dinero negro.", TimeConvert(time));
			return 1;
		}
	}

	LoopEx(i, MAX_PLAYERS, 0)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!PI[i][pCREW]) continue;

		GivePlayerBlackCash(i, value, true, value < 0 ? true : false);

		if(value < 0) SendClientMessagef(i, GOLD_COLOR2, "El %s %s ha descontado %s {"#GRAY_COLOR"}DN${"#GOLD_COLOR"} a todos los jugadores.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], number_format_thousand(value));
		else SendClientMessagef(i, GOLD_COLOR2, "El %s %s ha regalado %s {"#GRAY_COLOR"}DN${"#GOLD_COLOR"} a todos los jugadores.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], number_format_thousand(value));
	}

	pTemp(playerid)[pt_GIVECASHALL_TIME] = gettime();

	SendCmdLogToAdmins(playerid, "givednall", params);
	return 1;
}

CMD:asay(playerid, params[])
{
	if(isnull(params)) return ErrorCommandParams(playerid, "/asay <message>");

	SendCmdLogToAdmins(playerid, "asay", params);
	StrToUpper(params, 445);
	SendClientMessageToAllf(PRIMARY_COLOR2, "[SERVIDOR]: {ffffff}%s", params);
	return 1;
}

CMD:spos(playerid, params[])
{
	new Float:p[4], interior, vw;
	if(sscanf(params, "p<,>ffffdd", p[0], p[1], p[2], p[3], interior, vw)) return ErrorCommandParams(playerid, "/spos [X], [Y], [Z], [ANGLE], [INTERIOR], [VIRTUAL WORLD]");

	SetPlayerPosEx(playerid, p[0], p[1], p[2], p[3], interior, vw);
	return 1;
}

GetVehicleModelByName(const vehname[]) 
{
	new modelid = -1;
	for(new i = 0; i < sizeof VEHICLE_INFO; i ++) 
	{
		if(strfind(VEHICLE_INFO[i][vehicle_info_NAME], vehname, true) != -1) 
		{
			modelid = i + 400;
			break;
		}
	}
	return modelid;
}

CMD:rep(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/rep [Player/Name]");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");

	AddPlayerReputation(to_playerid);
	SendMessage(to_playerid, "Un administrador te ha regalado Experiencia.");
	SendCmdLogToAdmins(playerid, "rep", params);
	return 1;
}

CMD:repall(playerid, params[])
{
	LoopEx(i, MAX_PLAYERS, 0)
	{
		if(!IsPlayerConnected(i)) continue;
		
		AddPlayerReputation(i);
		SendClientMessagef(i, GOLD_COLOR2, "El %s %s ha regalado +1 de Experiencia a todos los jugadores.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME]);
	}
	SendCmdLogToAdmins(playerid, "repall", params);
	return 1;
}

CMD:v(playerid, params[])
{
	new modelid, vehname[24], color1 = 1, color2 = 1;
	if(!sscanf(params, "ddd", modelid, color1, color2)) { }
	else if(!sscanf(params, "d", modelid)) { }
	else if(!sscanf(params, "s[24]dd", vehname, color1, color2)) { modelid = GetVehicleModelByName(vehname); }
	else if(!sscanf(params, "s[24]", vehname)) { modelid = GetVehicleModelByName(vehname); }
	else return ErrorCommandParams(playerid, "/v <modelid/name> <color 1 = 1> <color 2 = 1>");
	
	if(modelid < 400 || modelid > 611) return SendClientMessagef(playerid, -1, "Modelo de vehículo no válido.");
		
	new Float:p[4];
	GetPlayerPos(playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(playerid, p[3]);
	
	new vid = AddTestVehicle(false, modelid, p[0], p[1], p[2], p[3], color1, color2, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid));
	PutPlayerInVehicleEx(playerid, vid, 0);

	GLOBAL_VEHICLES[vid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vid);
	
	SendCmdLogToAdmins(playerid, "v", params);
	return 1;
}

CMD:dv(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if(!vehicleid) return SendClientMessagef(playerid, -1, "Error: no estás en ningun vehículo de prueba.");
	if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_TEST) return SendClientMessagef(playerid, -1, "Error: no estás en ningun vehículo de prueba.");
	
	DestroyVehicleEx(vehicleid);
	SendClientMessagef(playerid, -1, "Vehículo de prueba destruido.");
	SendCmdLogToAdmins(playerid, "dv", params);
	return 1;
}

CMD:close(playerid, params[])
{
	SendCmdLogToAdmins(playerid, "close", params);
	mysql_tquery(handle_db, "UPDATE player SET connected = 0, playerid = 0;");
	
	new Complete = 0;
	LoopEx(i, MAX_PLAYERS, 0)
	{
		KickEx(i, 0);
		Complete ++;
	}

	if(Complete >= MAX_PLAYERS) SendRconCommand("exit");
	return 1;
}

CMD:nombre(playerid, params[])
{
	if(CNAME_COINS_PRICE > PI[playerid][pCOINS])
	{
		SendClientMessagef(playerid, -1, "Te faltan %d "SERVER_COIN" para poder cambiarte el nombre.", CNAME_COINS_PRICE - PI[playerid][pCOINS]);
		return 1;
	}

	ShowDialog(playerid, DIALOG_CHANGE_NAME);
	return 1;
}

CMD:setnametemp(playerid, params[])
{
	new to_playerid, new_name[24];
	if(sscanf(params, "us[24]", to_playerid, new_name)) return ErrorCommandParams(playerid, "/setnametemp <player_id> <nuevo nombre>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");

	if(SetPlayerName(to_playerid, new_name) == 1) 
	{
		format(PlayerTemp[to_playerid][pt_NAME], 24, "%s", new_name);
		SendClientMessagef(playerid, -1, "Nombre cambiado temporalmente.");
	}
	else SendClientMessagef(playerid, -1, "Nombre no válido.");
	return 1;
}

CMD:setnameplayer(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/setnameplayer <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");

	format(PlayerTemp[to_playerid][pt_NAME], 24, "%s", PI[to_playerid][pNAME]);
	SetPlayerName(to_playerid, PI[to_playerid][pNAME]);
	
	SetRolePlayNames(to_playerid);

	SendClientMessagef(playerid, -1, "Ahora {"#YELLOW_COLOR"}%s (%d){ffffff} Tiene su nombre original.", PI[to_playerid][pNAME], to_playerid);
	return 1;
}

CMD:setname(playerid, params[])
{
	new to_playerid, new_name[24];
	if(sscanf(params, "us[24]", to_playerid, new_name)) return ErrorCommandParams(playerid, "/setname <player_id> <nuevo nombre>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(!IsValidRPName(new_name)) return SendClientMessagef(playerid, -1, "El nombre '%s' no cumple con el formato Nombre_Apellido.", new_name);
	
	inline OnInfoQueryLoad(data[])
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows) SendClientMessagef(playerid, -1, "El nombre '%s' está en uso.", new_name);
			else
			{
				format(PlayerTemp[to_playerid][pt_NAME], 24, "%s", new_name);
				format(PI[to_playerid][pNAME], 24, "%s", new_name);
				SetRolePlayNames(to_playerid);
				SetPlayerName(to_playerid, new_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e' WHERE id = %d;", new_name, PI[to_playerid][pID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				for(new i = 0; i != MAX_PROPERTIES; i ++)
				{
					if(!PROPERTY_INFO[i][property_VALID]) continue;
					if(PROPERTY_INFO[i][property_OWNER_ID] != PI[to_playerid][pID]) continue;
					
					new label_str[256];
					format
					(
						label_str, 
						sizeof label_str, 
						"\
							Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
							{FFFFFF}Descripcion: {"#PRIMARY_COLOR"}%s\n\
							{"#GOLD_COLOR"}Acercate {FFFFFF}o pulsa {"#YELLOW_COLOR"}'Y' {FFFFFF}para entrar.\
						", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_DESCRIPTION]
					);
					UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				}
				
				SendClientMessagef(to_playerid, -1, "{"#SILVER_COLOR"}Tu nombre ha sido cambiado a '%s'", new_name);
				SendClientMessagef(playerid, -1, "El nombre del jugador ha sido cambiado a '%s'", new_name);
				
				SendCmdLogToAdmins(playerid, "setname", data);
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", new_name);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad, "s", params);
	return 1;
}

CMD:exproperty(playerid, params[])
{
	new id_property;
	if(sscanf(params, "d", id_property)) return ErrorCommandParams(playerid, "/exproperty <id>");
	if(id_property <= 0) return ErrorCommandParams(playerid, "/exproperty < id > 0 >");
	
	new index = GetPropertyIndexByID(id_property);
	if(index == -1) return SendClientMessagef(playerid, -1, "PROPIEDAD ID no encontrada.");
	
	if(!PROPERTY_INFO[index][property_SOLD]) return SendClientMessagef(playerid, -1, "Esta propiedad ya está en venta.");
	
	PROPERTY_INFO[ index ][property_SOLD] = false;
	PROPERTY_INFO[ index ][property_OWNER_ID] = 0;
	format(PROPERTY_INFO[ index ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ index ][property_ID]);
	
	new info[3];
	UpdateUnnocupiedPropertyLabel(index);
	
	DestroyDynamicPickup(PROPERTY_INFO[ index ][property_EXT_PICKUP_ID]);
	PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
	
	PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], 0, PROPERTY_INFO[ index ][property_EXT_INTERIOR]);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = index; // Index
	info[2] = 2; // Pickup Exterior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ index ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
				
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL WHERE id = %d;", PROPERTY_INFO[ index ][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendClientMessagef(playerid, -1, "Propiedad (%d) expropiada.", PROPERTY_INFO[ index ][property_ID]);
	
	SendCmdLogToAdmins(playerid, "exproperty", params);
	return 1;
}

CMD:gotoproperty(playerid, params[])
{
	new int_type;
	if(sscanf(params, "d", int_type)) return ErrorCommandParams(playerid, "/gotoproperty <interior>");
	if(int_type < 0 || int_type >= sizeof PROPERTY_INTERIORS) return SendClientMessagef(playerid, -1, "Error, rango de interior: 0-%d", sizeof(PROPERTY_INTERIORS) - 1);

	SetPlayerPosEx(playerid, PROPERTY_INTERIORS[int_type][property_INT_X], PROPERTY_INTERIORS[int_type][property_INT_Y], PROPERTY_INTERIORS[int_type][property_INT_Z], PROPERTY_INTERIORS[int_type][property_INT_ANGLE], PROPERTY_INTERIORS[int_type][property_INT_INTERIOR], 0, false, true);
	return 1;
}
alias:gotoproperty("ircasa");

CMD:setpass(playerid, params[])
{
	new to_account, new_pass[MAX_PASS_LENGTH + 1];
	if(sscanf(params, "ds[19]", to_account, new_pass)) return ErrorCommandParams(playerid, "/setpass <DB-ID> <pass>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);
				if(PI[playerid][pADMIN_LEVEL] >= admin_level)
				{
					if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado, player_id: %d, no es necario cambiar la clave.", name, id, pid);
					else
					{
						bcrypt_hash(playerid, "OnSetPassChange", new_pass, BCRYPT_COST, "iss", id, name, new_pass);			
					}
				}
				else SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:delete(playerid, params[])
{
	new to_account;
	if(sscanf(params, "d", to_account)) return ErrorCommandParams(playerid, "/delete <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if(PI[playerid][pADMIN_LEVEL] >= admin_level)
				{
					if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado para eliminarlo debe estar desconectado, utilice kick, su player_id: %d.", name, id, pid);
					else
					{
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM player WHERE id = %d;", id);
						mysql_tquery(handle_db, QUERY_BUFFER);
						
						new ex_properties;
						for(new index = 0; index != MAX_PROPERTIES; index ++)
						{
							if(!PROPERTY_INFO[index][property_VALID]) continue;
							if(!PROPERTY_INFO[index][property_SOLD]) continue;
							if(PROPERTY_INFO[index][property_OWNER_ID] != id) continue;
						
							PROPERTY_INFO[ index ][property_SOLD] = false;
							PROPERTY_INFO[ index ][property_OWNER_ID] = 0;
							format(PROPERTY_INFO[ index ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ index ][property_ID]);
							
							new info[3];
							UpdateUnnocupiedPropertyLabel(index);
							
							DestroyDynamicPickup(PROPERTY_INFO[ index ][property_EXT_PICKUP_ID]);
							PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
							
							PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], 0, PROPERTY_INFO[ index ][property_EXT_INTERIOR]);
							info[0] = PICKUP_TYPE_PROPERTY;
							info[1] = index; // Index
							info[2] = 2; // Pickup Exterior
							Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ index ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
							
							ex_properties ++;
						}
						
						
						SendClientMessagef(playerid, -1, "CUENTA (Nombre '%s' DB-ID: '%d') ha sido eliminada.", name, id);
						if(ex_properties > 0) SendClientMessagef(playerid, -1, "Se han expropiado '%d' propiedades del jugador eliminado.", ex_properties);
						
						new str[445]; format(str, 445, "el %s %s (%d) ha eliminado el usuario '%s'", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, name);
						SendMessageToAdmins(0xFF0000FF, str);
					}
				}
				else SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

/* PROPERTY CONSTRUCTOR */

CMD:rproperty(playerid, params[])
{
	new id_property;
	if(sscanf(params, "d", id_property)) return ErrorCommandParams(playerid, "/rproperty <id>");
	if(id_property <= 0) return ErrorCommandParams(playerid, "/rproperty < id > 0 >");
	
	new index = GetPropertyIndexByID(id_property);
	if(index == -1) return SendClientMessagef(playerid, -1, "PROPIEDAD ID no encontrada.");
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM properties WHERE id = %d;", PROPERTY_INFO[index][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	if(IsValidDynamic3DTextLabel(PROPERTY_INFO[index][property_EXT_LABEL_ID])) DestroyDynamic3DTextLabel(PROPERTY_INFO[index][property_EXT_LABEL_ID]);
	if(IsValidDynamic3DTextLabel(PROPERTY_INFO[index][property_INT_LABEL_ID])) DestroyDynamic3DTextLabel(PROPERTY_INFO[index][property_INT_LABEL_ID]);
	if(IsValidDynamicPickup(PROPERTY_INFO[index][property_EXT_PICKUP_ID])) DestroyDynamicPickup(PROPERTY_INFO[index][property_EXT_PICKUP_ID]);
	if(IsValidDynamicPickup(PROPERTY_INFO[index][property_INT_PICKUP_ID])) DestroyDynamicPickup(PROPERTY_INFO[index][property_INT_PICKUP_ID]);
	new reset[Property_Info_Enum]; PROPERTY_INFO[index] = reset;
	
	TOTAL_PROPERTIES_LOADED --;
	
	SendClientMessagef(playerid, -1, "PROPIEDAD %d ELIMINADA.", id_property);
	SendClientMessagef(playerid, -1, "PROPIEDADES: %d/%d", TOTAL_PROPERTIES_LOADED, MAX_PROPERTIES);
	
	SendCmdLogToAdmins(playerid, "rproperty", params);
	return 1;
}

CMD:eproperty(playerid, params[])
{
	new id_property, new_int;
	if(sscanf(params, "dddddd", id_property, new_int, PlayerTemp[playerid][pt_PROPERTY_CINFO][0], PlayerTemp[playerid][pt_PROPERTY_CINFO][1], PlayerTemp[playerid][pt_PROPERTY_CINFO][2], PlayerTemp[playerid][pt_PROPERTY_CINFO][3])) return ErrorCommandParams(playerid, "/eproperty <id> <interior> <nivel> <precio> <vip level> <coins>");
	if(id_property <= 0) return SendClientMessagef(playerid, -1, "ID no válida.");
	
	new index = GetPropertyIndexByID(id_property);
	if(index == -1) return SendClientMessagef(playerid, -1, "PROPIEDAD ID no encontrada.");
	
	if(PROPERTY_INFO[index][property_SOLD]) return SendClientMessagef(playerid, -1, "Solo se pueden modificar propiedades que están libres.");
	
	if(new_int < 0 || new_int >= sizeof(PROPERTY_INTERIORS)) return SendClientMessagef(playerid, -1, "El interior elegido no es válido.");
	
	PROPERTY_INFO[index][property_ID_INTERIOR] = new_int;
	PROPERTY_INFO[index][property_PRICE] = PlayerTemp[playerid][pt_PROPERTY_CINFO][1];
	PROPERTY_INFO[index][property_LEVEL] = PlayerTemp[playerid][pt_PROPERTY_CINFO][0];
	PROPERTY_INFO[index][property_EXTRA] = PlayerTemp[playerid][pt_PROPERTY_CINFO][3];
	PROPERTY_INFO[index][property_VIP_LEVEL] = PlayerTemp[playerid][pt_PROPERTY_CINFO][2];
	
	if(PROPERTY_INFO[index][property_EXTRA]) PROPERTY_INFO[index][property_PRICE] = 0;
	if(PROPERTY_INFO[index][property_VIP_LEVEL]) PROPERTY_INFO[index][property_LEVEL] = 1;
	
	UpdateUnnocupiedPropertyLabel(index);
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_interior = %d, price = %d, level = %d, extra = %d, vip_level = %d WHERE id = %d;", PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_PRICE], PROPERTY_INFO[index][property_LEVEL], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_VIP_LEVEL], PROPERTY_INFO[index][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	SendCmdLogToAdmins(playerid, "eproperty", params);
	return 1;
}

CMD:cproperty(playerid, params[])
{
	if(TOTAL_PROPERTIES_LOADED >= MAX_PROPERTIES) return SendClientMessagef(playerid, -1, "Límite alcanzado.");
	
	if(sscanf(params, "dddd", PlayerTemp[playerid][pt_PROPERTY_CINFO][0], PlayerTemp[playerid][pt_PROPERTY_CINFO][1], PlayerTemp[playerid][pt_PROPERTY_CINFO][2], PlayerTemp[playerid][pt_PROPERTY_CINFO][3])) return ErrorCommandParams(playerid, "/cproperty <nivel> <precio> <vip level> <coins>");
	
	GetPlayerPos(playerid, PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X], PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y], PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z]);
	GetPlayerFacingAngle(playerid, PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG]);
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT] = GetPlayerInterior(playerid);
	
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED] = true;
	for(new i = 0; i != 6; i ++) PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][i]);
	
	UpdatePlayerPropertyContructor(playerid);
	return 1;
}

SendChatMessageToAdmins(color, const message[])
{
	for(new i = 0; i != MAX_PLAYERS; i++) 
	    if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
	        if(PI[i][pADMIN_LEVEL] > 1 && pTemp(i)[pt_SEE_ADM_CHAT] /*&& pTemp(i)[pt_ADMIN_SERVICE]*/)
	            SendClientMessage(i, color, message);
}

SendMessageToAdmins(color, const message[], level = 1)
{
	for(new i = 0; i != MAX_PLAYERS; i++) 
	    if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
	        if(PI[i][pADMIN_LEVEL] > level && pTemp(i)[pt_SEE_ADM_LOG] /*&& pTemp(i)[pt_ADMIN_SERVICE]*/)
	            SendClientMessage(i, color, message);

	return 1;
}

SendCmdLogToAdmins(playerid, const cmdtext[], const params[])
{
	new message[445];
	if(isnull(params)) format(message, sizeof message, "[CMD | %s]{ffffff} %s (%d) ha utilizado el comando {"#YELLOW_COLOR"}/%s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, cmdtext);
	else format(message, sizeof message, "[CMD | %s]{ffffff} %s (%d) ha utilizado el comando {"#YELLOW_COLOR"}/%s %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, cmdtext, params);

	for(new i = 0; i != MAX_PLAYERS; i++) 
	    if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
	        if(PI[i][pADMIN_LEVEL] >= PI[playerid][pADMIN_LEVEL] && pTemp(i)[pt_SEE_ACMD_LOG] /*&& pTemp(i)[pt_ADMIN_SERVICE]*/)
	            SendClientMessage(i, GOLD_COLOR2, message);
	
	if(isnull(params)) format(message, 445, "/%s", cmdtext);
	else format(message, 445, "/%s %s", cmdtext, params);
	SendCommandsLogMessage(playerid, message);
	return 1;
}

SendMessageToAdminsAC(color, const message[])
{
	for(new i = 0; i != MAX_PLAYERS; i++) 
	    if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
	        if(PI[i][pADMIN_LEVEL] > 1 && pTemp(i)[pt_SEE_AC_LOG] /*&& pTemp(i)[pt_ADMIN_SERVICE]*/)
	            SendClientMessage(i, color, message);
	
	return 1;
}

RespawnAllUnoccupiedVehicles()
{
	for(new i = 0; i != MAX_VEHICLES; i++)
	{
		if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if(GLOBAL_VEHICLES[i][gb_vehicle_OCCUPIED]) continue;
		if(GLOBAL_VEHICLES[i][gb_vehicle_TYPE] == VEHICLE_TYPE_TEST)
		{
			DestroyVehicleEx(i);
			continue;
		}
		
		SetVehicleToRespawnEx(i);
	}
	return 1;
}

RespawnGlobalUnoccupiedVehicles()
{
	for(new i = 0; i != MAX_VEHICLES; i++)
	{
		if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if(GLOBAL_VEHICLES[i][gb_vehicle_TYPE] == VEHICLE_TYPE_PERSONAL) continue;
		if(GLOBAL_VEHICLES[i][gb_vehicle_OCCUPIED]) continue;
	
		SetVehicleToRespawnEx(i);
	}
	return 1;
}

GetNumberOfPlayersOnThisIP(const test_ip[])
{
	new against_ip[16], ip_count = 0;
	for(new x = 0, j = GetPlayerPoolSize(); x <= j; x++) 
	{
		if(IsPlayerConnected(x)) 
		{
		    GetPlayerIp(x, against_ip, 16);
		    if(!strcmp(against_ip, test_ip)) ip_count++;
		}
	}
	return ip_count;
}

GetTickDiff(newtick, oldtick)
{
	if (oldtick < 0 && newtick >= 0) {
		return newtick - oldtick;
	} else if (oldtick >= 0 && newtick < 0 || oldtick > newtick) {
		return (cellmax - oldtick + 1) - (cellmin - newtick);
	}
	return newtick - oldtick;
}

GetPlayerSpeed(vehicleid)
{
	new Float:xPos[3];
	GetPlayerVelocity(vehicleid, xPos[0], xPos[1], xPos[2]);
	return floatround(floatsqroot(xPos[0] * xPos[0] + xPos[1] * xPos[1] + xPos[2] * xPos[2]) * 170.00);
}

GetPlayerPlantedPlants(playerid)
{
	new plants;
	
	for(new i = 0; i != MAX_PLANTS; i ++)
	{
		if(!PLANTS[i][plant_VALID]) continue;
		if(PLANTS[i][plant_PLANTED_BY_ACCOUNT_ID] == PI[playerid][pID]) plants ++;
	}
	return plants;
}

forward StartPlayerJob(playerid, work, vehicleid);
public StartPlayerJob(playerid, work, vehicleid)
{
	switch(work)
	{
		case WORK_TAXI:
		{
			SetTaxiPlayerMarkers(playerid);
			ResetVehicleTaxiMeter(vehicleid);
			ShowPlayerTaxiMeter(playerid);
			
			new passenger = GetVehicleFirstPassenger(vehicleid);
			if(passenger != INVALID_PLAYER_ID)
			{
				ShowPlayerTaxiMeter(passenger);
				if(PlayerTemp[passenger][pt_WANT_TAXI])
				{
					PlayerTemp[passenger][pt_WANT_TAXI] = false;
					DisablePlayerTaxiMark(passenger);
				}
				
				TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED] = true;
				GetVehiclePos(vehicleid, TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Z]);
				KillTimer(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER]);
				TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], passenger);
			}
		}
		case WORK_TRUCK:
		{
			if(TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED])
			{
				if(TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) SendClientMessagef(playerid, -1, "El camion ya ha entregado la mercancía, ve al punto de partida para cobrar.");
				else SendClientMessagef(playerid, -1, "Ve a entregar la mercancía al punto marcado.");
				
				SetPlayerTruckCheckpoint(playerid, vehicleid);
			}
			else SendClientMessagef(playerid, -1, "Para comenzar a trabajar carga el camion en la zona indicada con una flecha amarilla.");
		}
		case WORK_HARVESTER:
		{
			PlayerTemp[playerid][pt_HARVERT_PROCCESS] = 0;
			SendClientMessagef(playerid, -1, "Ve hasta los puntos de control para completar el trabajo.");
			SendClientMessagef(playerid, -1, "Si te bajas de la cosechadora se cancelará el trabajo.");
			Set_HARVEST_Checkpoint(playerid);
		}
		case WORK_LUMBERJACK:
		{
			PlayerTemp[playerid][pt_PLAYER_CARRYING_TREE] = false;
			PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
			
			DestroyPlayerKeyPress(playerid);
			DisablePlayerArmedWeapons(playerid);
			RemovePlayerAttachedObject(playerid, 9);
			SetPlayerAttachedObject(playerid, 9, 341, 1, -0.172999, -0.165, -0.053999, 0.0, -7.599999, -9.6);
			
			SendClientMessage(playerid,-1, "{"#SILVER_COLOR"}Los árboles que puedes talar están repartidos por la zona, si te alejas demasiado el trabajo se cancelará.");
		}
		case WORK_TRASH:
		{
			if(PI[playerid][pGENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 16);
			}
		}
		case WORK_MECHANIC:
		{
			if(PI[playerid][pGENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 50);
			}
		}
		case WORK_POLICE:
		{
			if(PI[playerid][pPOLICE_DUTY] == 285) pTemp(playerid)[pt_POLICE_SWAT] = true;

			SetWantedPlayerMarkers(playerid);
			SetPlayerDynamicGangZones(playerid);
			SetPlayerSkin(playerid, PI[playerid][pPOLICE_DUTY]);
		}
		case WORK_PIZZA:
		{
			if(PI[playerid][pGENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 155);
				DisablePlayerArmedWeapons(playerid);
			}
			PlayerTemp[playerid][pt_PIZZA_PROCCESS] = 0;
			PlayerTemp[playerid][pt_DELIVERED_PIZZAS] = 0;
			SendClientMessagef(playerid, -1, "Para comenzar a repartir subete a una moto de la pizzería.");
		}
		case WORK_MEDIC:
		{
			if(PI[playerid][pGENDER] == SEX_MALE) SetPlayerSkin(playerid, male_medic_skins[ random(sizeof(male_medic_skins)) ]);
			else SetPlayerSkin(playerid, 308);
			SetInjuredPlayerMarkers(playerid);
		}
	}
	
	PlayerTemp[playerid][pt_WORKING_IN] = work;
	return 1;
}

forward EndPlayerJob(playerid, work, bool:changeskin);
public EndPlayerJob(playerid, work, bool:changeskin)
{
	switch(PlayerTemp[playerid][pt_WORKING_IN])
	{
		case WORK_TAXI:
		{
			if(PlayerTemp[playerid][pt_TAXI_METER_ENABLED])
			{
				SetNormalPlayerMarkers(playerid);
				HidePlayerTaxiMeter(playerid);
			}
		}
		case WORK_TRUCK:
		{
			if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if(TRUCK_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_DRIVER_USER_ID] == PI[playerid][pID])
				{
					if(TRUCK_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_LOADING])
					{
						HidePlayerDialog(playerid);
						KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
						SetVehicleToRespawnEx(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
					}
					if(TRUCK_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_UNLOADING])
					{
						TRUCK_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_UNLOADING] = false;
						KillTimer(PlayerTemp[playerid][pt_TIMERS][9]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][0]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][1]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][2]);
						PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TRUCK_LOAD][3]);
					}
				}
			}
			if(IsValidDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]))
			{
				DestroyDynamicCP(PlayerTemp[playerid][pt_TRUCK_CHECKPOINT]);
				PlayerTemp[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			}
		}
		case WORK_HARVESTER:
		{
			if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]))
			{
				DestroyDynamicRaceCP(PlayerTemp[playerid][pt_HARVERT_CHECKPOINT]);
				PlayerTemp[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
			}
			if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if(WORK_VEHICLES[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][work_vehicle_WORK] == WORK_HARVESTER) SetVehicleToRespawnEx(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
			}
		}
		case WORK_LUMBERJACK: CancelLumberjackWork(playerid);
		case WORK_FARMER: CancelPlayerPlanting(playerid);
		case WORK_TRASH:
		{
			if(changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pSKIN]);
			}
			
			if(PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
				{
					if(PlayerTemp[playerid][pt_TRASH_DRIVER])
					{
						SendClientMessage(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], -1, "{"#SILVER_COLOR"}El trabajo se ha cancelado porque tu amigo ha dejado de trabajar.");
						CancelTrashWork(playerid, TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
					}
					if(PlayerTemp[playerid][pt_TRASH_PASSENGER])
					{
						SendClientMessage(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], -1, "{"#SILVER_COLOR"}El trabajo se ha cancelado porque tu amigo ha dejado de trabajar.");
						CancelTrashWork(TRASH_VEHICLES[ PlayerTemp[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], playerid, PlayerTemp[playerid][pt_TRASH_VEHICLE_ID]);
					}
				}
			}
		}
		case WORK_POLICE:
		{
			PlayerTemp[playerid][pt_POLICE_RADIO] = 0;
			pTemp(playerid)[pt_TASER_GUN] = false;
			PlayerTemp[playerid][pt_REQUEST_HELP] = false;

			if(changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pSKIN]);
				PI[playerid][pPOLICE_DUTY] = 0;
			}

			SetNormalPlayerMarkers(playerid);
			HidePlayerGangZones(playerid);
		}
		case WORK_MECHANIC:
		{
			if(changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pSKIN]);
			}
			SetNormalPlayerMarkers(playerid);
		}
		case WORK_PIZZA:
		{
			if(PlayerTemp[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if(PIZZA_VEHICLE[ PlayerTemp[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_DRIVER_AID] == PI[playerid][pID]) SetVehicleToRespawnEx(PlayerTemp[playerid][pt_LAST_VEHICLE_ID]);
			}
			if(IsValidDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
			{
				DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
				PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
			}
			if(IsValidDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]))
			{
				DestroyDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]);
				PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
			}
			if(changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pSKIN]);
			}
		}
		case WORK_MEDIC:
		{
			if(changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pSKIN]);
			}
			SetNormalPlayerMarkers(playerid);
		}
	}
	
	if(pTemp(playerid)[pt_VEHICLE_SPAWNED] != INVALID_VEHICLE_ID)
	{
		ClearVehicleGlobalInfo(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
		DestroyVehicleEx(pTemp(playerid)[pt_VEHICLE_SPAWNED]);
		pTemp(playerid)[pt_VEHICLE_SPAWNED] = INVALID_VEHICLE_ID;
	}

	EnablePlayerArmedWeapons(playerid);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", PLAYER_WORKS[playerid][ PlayerTemp[playerid][pt_WORKING_IN] ][pwork_LEVEL], PI[playerid][pID], PlayerTemp[playerid][pt_WORKING_IN]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	PlayerTemp[playerid][pt_WORKING_IN] = WORK_NONE;
	return 1;
}

CountPlayerJobs(playerid)
{
	new count;
	for(new i = 1; i != sizeof(work_info); i ++)
	{
		if(PLAYER_WORKS[playerid][i][pwork_SET]) count ++;
	}
	return count;
}

getPlayerWorks(playerid)
{
	new works[27 * sizeof(work_info)], count;
	for(new i = 1; i != sizeof(work_info); i ++)
	{
		if(PLAYER_WORKS[playerid][i][pwork_SET])
		{
			if(count > 0) strcat(works, ", ");
			strcat(works, work_info[i][work_info_NAME]);
			
			count ++;
		}
	}
	
	if(!count) works = "ninguno";
	return works;
}

SetPlayer_Pizza_Checkpoint(playerid, point)
{
	if(IsValidDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]))
	{
		DestroyDynamicCP(PlayerTemp[playerid][pt_PIZZA_CHECKPOINT]);
		PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if(IsValidDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]))
	{
		DestroyDynamicActor(PlayerTemp[playerid][pt_PIZZA_ACTOR]);
		PlayerTemp[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	}
	
	if(point == -1)
	{
		PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = CreateDynamicCP(2096.279785, -1797.436279, 12.982056, 3.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_PIZZA_FINISH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PlayerTemp[playerid][pt_PIZZA_ACTOR] = CreateDynamicActor(minrand(0, 311), PIZZA_DELIVERY_POINT[point][0], PIZZA_DELIVERY_POINT[point][1], PIZZA_DELIVERY_POINT[point][2], PIZZA_DELIVERY_POINT[point][3], .playerid = playerid);
		
		new Float:pos[3];
		pos[0] = PIZZA_DELIVERY_POINT[point][0] + (1.5 * floatsin(-PIZZA_DELIVERY_POINT[point][3], degrees));
		pos[1] = PIZZA_DELIVERY_POINT[point][1] + (1.5 * floatcos(-PIZZA_DELIVERY_POINT[point][3], degrees));
		pos[2] = PIZZA_DELIVERY_POINT[point][2];
	
		PlayerTemp[playerid][pt_PIZZA_CHECKPOINT] = CreateDynamicCP(pos[0], pos[1], pos[2], 1.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_PIZZA_DEL;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PlayerTemp[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	return 1;
}

randomEx(max, exception)
{
	new rand = random(max);
	while(rand == exception)
	{
		rand = random(max);
	}
	return rand;
}

SetPlayerSkillLevels(playerid)
{	
	if(PI[playerid][pLEVEL] >= 3)
	{
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN,		200);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 				40);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, 		500);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, 		999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, 				999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, 		999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 			50);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, 					999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, 				999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, 					999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, 			999);
	}
	else
	{
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, 0);
	}
	return 1;
}

DeleteIlegalInv(playerid)
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET seed_cannabis = 0, seed_crack = 0, cannabis = 0, crack = 0 WHERE id = %d;", PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pweapons WHERE id_player = %d;", PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
		ResetPlayerWeaponsEx(playerid);
	}
	
	PI[playerid][pSEED_CANNABIS] = 0;
	PI[playerid][pSEED_CRACK] = 0;
	PI[playerid][pCANNABIS] = 0;
	PI[playerid][pCRACK] = 0;
	PI[playerid][pBLACK_CASH] = 0;
	return 1;
}

SetInjuredPlayerMarkers(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(PI[i][pSTATE] == ROLEPLAY_STATE_CRACK)
				{
					SetPlayerMarkerForPlayer(playerid, i, 0x4aba00FF);
				}
			}
		}
	}
	return 1;
}

SendAlertToMedics(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(!PLAYER_WORKS[i][WORK_MEDIC][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_MEDIC) continue;

				SetPlayerMarkerForPlayer(i, playerid, 0x4aba00FF);
			}
		}
	}
	return 1;
}

DisablePlayerInjuredMark(playerid)
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(i == playerid) continue;
				if(!PLAYER_WORKS[i][WORK_MEDIC][pwork_SET]) continue;
				if(pTemp(i)[pt_WORKING_IN] != WORK_MEDIC) continue;

				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

CMD:curar(playerid, params[])
{
	if(GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendClientMessagef(playerid, -1, "No estás depie.");
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK) return SendClientMessagef(playerid, -1, "No puedes curar estando herido.");
	if(PI[playerid][pCREW] && CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No puedes curar mientras tu banda está en combate.");

	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/curar [PlayerID/Nombre]");
	if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "El jugador no está conectado.");
	if(to_playerid == playerid) return ErrorCommandParams(playerid, "/curar [PlayerID/Nombre]");
	
	new Float:pos[3];
	GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");

	if(PI[to_playerid][pSTATE] != ROLEPLAY_STATE_CRACK) return SendClientMessagef(playerid, -1, "Esta persona no está herida.");
	if(PI[to_playerid][pCREW] && CREW_INFO[ PlayerTemp[to_playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No puedes curar a esta persona porque su banda está en combate.");

	if(!PLAYER_WORKS[playerid][WORK_MEDIC][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] != WORK_MEDIC) 
	{
		if(PI[playerid][pMEDICAL_KITS] <= 0) return SendClientMessagef(playerid, -1, "No tienes botiquines para curar a esta persona.");
		else 
		{
			new now = gettime();
			if(PlayerTemp[playerid][pt_COOLDOWN_MEDICAL_KIT] > now) return SendClientMessagef(playerid, -1, "Debes esperar %d segundos para volver a poder curar.", PlayerTemp[playerid][pt_COOLDOWN_MEDICAL_KIT] - now);
			PlayerTemp[playerid][pt_COOLDOWN_MEDICAL_KIT] = now + 300;

			PI[playerid][pMEDICAL_KITS] --;
			SendClientMessagef(playerid, -1, "Has usado 1 botiquín para curar a esta persona.");
		}
	}
	
	KillTimer(PlayerTemp[to_playerid][pt_TIMERS][16]);
	PlayerTemp[to_playerid][pt_TIMERS][16] = SetTimerEx("StandUp", 5000, false, "ii", playerid, to_playerid);
	DisablePlayerInjuredMark(to_playerid);
	
	ApplyAnimation(playerid, "MEDIC", "CPR", 4.1, false, 0, 0, 0, 0, 1);
	return 1;
}

forward StandUp(medic, playerid);
public StandUp(medic, playerid)
{
	if(PLAYER_WORKS[medic][WORK_MEDIC][pwork_SET] && PlayerTemp[medic][pt_WORKING_IN] == WORK_MEDIC) {
		new work_extra_payment;
		if(work_info[WORK_MEDIC][work_info_EXTRA_PAY] > 0 && work_info[WORK_MEDIC][work_info_EXTRA_PAY_EXP] > 0)
		{
			work_extra_payment = (work_info[WORK_MEDIC][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[medic][WORK_MEDIC][pwork_LEVEL], work_info[WORK_MEDIC][work_info_EXTRA_PAY_EXP])));
			if(work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT] != 0) if(work_extra_payment > work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT];
		}
		
		new money = minrand(600, 800) + work_extra_payment;
		GivePlayerCash(medic, money, true, false);
		PLAYER_WORKS[medic][WORK_MEDIC][pwork_LEVEL] ++;
		SendClientMessagef(medic, -1, "Has salvado la vida de esta persona, has ganado {"#PRIMARY_COLOR"}%s$.", number_format_thousand(money));
	}
	
	PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
	SetWeaponsForPlayer(playerid);
	if(PI[playerid][pVIP]) SetPlayerHealthEx(playerid, 50.0);
	else SetPlayerHealthEx(playerid, 25.0);
	ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(playerid);

	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PlayerTemp[playerid][pt_WORKING_IN] == WORK_POLICE) SetPlayerPosEx(playerid, 1555.400390, -1675.611694, 16.195312, 90.0, 0, 0);
	return 1;
}

CMD:banda(playerid, params[])
{
	if(!PI[playerid][pCREW])
	{
		if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Los policías no pueden tener bandas.");
		
		new index = GetAvaibleCrewIndex();
		if(index == -1)
		{
			SendClientMessagef(playerid, -1, "No perteneces a ninguna banda y no se puede crear una porque no hay espacio disponible, el límite de bandas es %d.", MAX_CREWS);
			return 1;
		}
		
		ShowDialog(playerid, DIALOG_CREATE_CREW);
		return 1;
	}
	
	ShowDialog(playerid, DIALOG_CREW_MENU);
	return 1;
}

CMD:invitar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	
	if(!PI[playerid][pCREW]) return SendMessage(playerid, "No eres miembro de ninguna banda.");
	if(!CREW_RANK_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][ PI[playerid][pCREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE]) return SendClientMessagef(playerid, -1, "No tienes permiso para invitar personas a la banda.");
	if(CREW_INFO[ PlayerTemp[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendClientMessagef(playerid, -1, "No puedes invitar a gente a la banda cuando la banda está en combate.");
	
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/invitar [PlayerID/Nombre]");
	if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "El jugador está desconectado.");
	if(to_playerid == playerid) return SendClientMessagef(playerid, -1, "Eres tu.");
	
	new members = CountCrewPlayers(PI[playerid][pCREW]);
	new territories = GetCrewTerritories(PI[playerid][pCREW]);

	if(territories >= 2)
	{
		if(members >= 10) return SendInfoMessage(playerid, "Banda~n~~n~La banda ya no puede tener mas miembros.~n~~n~");
	}
	else
	{
		if(members >= 5) return SendInfoMessage(playerid, "Banda~n~~n~Como la banda tiene menos de 2 territorios~n~solo puede haber 5 miembros en la banda.~n~~n~");
	}
	
	new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
	if(PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Esta persona es policía y no puede tener banda.");
	if(PI[to_playerid][pCREW]) return SendClientMessagef(playerid, -1, "Esta persona pertenece a otra banda.");
	if(PlayerTemp[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes invitar a este jugador ahora.");
	
	if(gettime() < PlayerTemp[ to_playerid ][pt_LAST_GOT_CREW] + 600)
	{
		new time = 600 - (gettime() - PlayerTemp[to_playerid][pt_LAST_GOT_CREW]);
		SendClientMessagef(playerid, -1, "La otra persona debe esperar %s minutos para volver a ser invitada.", TimeConvert(time));
		return 1;
	}
	
	PlayerTemp[playerid][pt_CREW_INVITE_PID] = to_playerid;
	PlayerTemp[playerid][pt_CREW_INVITE_AID] = PI[to_playerid][pID];
	SendClientMessagef(playerid, -1, "Quieres invitar a %s a la banda, elige el rango que le ofreces.", PlayerTemp[to_playerid][pt_NAME]);
	ShowDialog(playerid, DIALOG_CREW_INVITE_RANK);
	return 1;
}

CMD:reclutar(playerid, params[])
{
	if(PI[playerid][pSTATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pSTATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pSTATE] == ROLEPLAY_STATE_ARRESTED) return SendClientMessagef(playerid, -1, "Ahora no puedes usar este comando.");
	
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 11) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para reclutar gente.", POLICE_RANKS[11]);
		
		new to_playerid;
		if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/reclutar [PlayerID/Nombre]");
		if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "El jugador está desconectado.");
		if(to_playerid == playerid) return SendClientMessagef(playerid, -1, "No puedes invitarte.");
		
		new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
		if(!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendMessage(playerid, "Este jugador no está cerca tuya.");
		if(PI[to_playerid][pCREW]) return SendClientMessage(playerid,-1, "{"#RED_COLOR"}Esta persona pertenece a una banda y no puede ser policía.");
		if(PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "Éste usuario es miembro.");
		if(PlayerTemp[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No puedes reclutar a este jugador ahora.");
		
		new player_jobs = CountPlayerJobs(to_playerid);
		if(PI[to_playerid][pVIP])
		{
			if(player_jobs >= MAX_VIP_WORKS)
			{
				SendClientMessagef(playerid, -1, "Esta persona ya tiene trabajo y no puede tener más.");
				return 1;
			}
		}
		else
		{
			if(player_jobs >= MAX_NU_WORKS)
			{
				SendClientMessagef(playerid, -1, "Esta persona ya tiene trabajo y no puede tener más.");
				return 1;
			}
		}
		
		if(PlayerTemp[to_playerid][pt_WORKING_IN]) return SendClientMessagef(playerid, -1, "Esta persona no puede unirse porque esta de servicio en su trabajo.");
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1, level = 1;", PI[to_playerid][pID], WORK_POLICE);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET] = true;
		PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_LEVEL] = 1;
		
		PI[to_playerid][pPLACA_PD] = random(10000000);
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET placa_pd = %d WHERE id = %d;", PI[to_playerid][pPLACA_PD], PI[to_playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
		
		SendClientMessagef(playerid, -1, "%s ahora es policía.", PlayerTemp[to_playerid][pt_NAME]);
		SendClientMessage(to_playerid, -1, "Ahora eres policía.");
	}
	else SendClientMessagef(playerid, -1, "Debes ser miembro de la policía para usar este comando.");
	return 1;
}

ShowPlayerSafeZones(playerid)
{
	for(new i = 0; i != sizeof SAFE_ZONES; i ++)
	{
		GangZoneShowForPlayer(playerid, SAFE_ZONES[i][safe_zone_GANG_ZONE], SAFE_ZONE_COLOR);
	}
	return 1;
}

GetAvaibleCrewIndex()
{
	for(new i = 0; i != MAX_CREWS; i ++)
	{
		if(!CREW_INFO[i][crew_VALID]) return i;
	}
	return -1;
}


NewCrewRegister(index, playerid)
{
	if(!CREW_INFO[index][crew_VALID]) return 0;
	
	inline OnCrewInserted()
	{
		CREW_INFO[index][crew_ID] = cache_insert_id();
		if(CREW_INFO[index][crew_ID])
		{
			PI[playerid][pCREW] = CREW_INFO[index][crew_ID];
			PI[playerid][pCREW_RANK] = 0;
			PlayerTemp[playerid][pt_CREW_INDEX] = index;
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = %d, crew_rank = %d WHERE id = %d;", PI[playerid][pCREW], PI[playerid][pCREW_RANK], PI[playerid][pID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
			RegisterNewCrewRank(index, 0);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO crews (name, color) VALUES ('%e', %d);", CREW_INFO[index][crew_NAME], CREW_INFO[index][crew_COLOR]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewInserted);
	return 1;
}

SendMessageToCrewMembers(crew_id, color, const message[])
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i) && pTemp(i)[pt_USER_LOGGED])
		{
			if(PI[i][pCREW] == crew_id)
			{
				SendClientMessage(i, color, message);
			}
		}
	}
	return 1;
}

RegisterNewCrewRank(index, rank)
{
	inline OnCrewRankInserted()
	{
		CREW_RANK_INFO[index][rank][crew_rank_ID] = cache_insert_id();
	}
	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
		"\
			INSERT INTO crew_ranks (`id_crew`, `rank_pos`, `rank_name`, `permission0`, `permission1`, `permission2`, `permission3`, `permission4`, `permission5`, `permission6`) \
			VALUES(%d, %d, '%e', %d, %d, %d, %d, %d, %d, %d);\
		",
			CREW_INFO[index][crew_ID], rank, CREW_RANK_INFO[index][rank][crew_rank_NAME], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][0], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][1],
			CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][2], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][3], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][4],
			CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][5], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][6]
	);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCrewRankInserted);
	return 1;
}

SetPlayerGangZones(playerid)
{
	for(new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if(!TERRITORIES[i][territory_VALID]) continue;
		
		if(TERRITORIES[i][territory_WAR])
		{
			new flash_color, r, g, b, a;
			HexToRGBA(CREW_INFO[ TERRITORIES[i][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
			flash_color = RGBAToHex(r, g, b, 135);
			
			GangZoneFlashForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE], flash_color);
		}
		else GangZoneShowForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE], TERRITORIES[i][territory_COLOR]);
	}
	return 1;
}

SetPlayerDynamicGangZones(playerid)
{
	for(new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if(!TERRITORIES[i][territory_VALID]) continue;
		
		if(TERRITORIES[i][territory_WAR])
		{
			new flash_color, r, g, b, a;
			HexToRGBA(CREW_INFO[ TERRITORIES[i][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
			flash_color = RGBAToHex(r, g, b, 135);
			
			GangZoneFlashForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE], flash_color);
		}
		else GangZoneHideForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE]);
	}
	return 1;
}

HidePlayerGangZones(playerid)
{
	for(new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if(!TERRITORIES[i][territory_VALID]) continue;
		
		GangZoneHideForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE]);
	}
	return 1;
}

stock HexToRGBA(colour, &r, &g, &b, &a) //By Betamaster
{
    r = (colour >> 24) & 0xFF;
    g = (colour >> 16) & 0xFF;
    b = (colour >> 8) & 0xFF;
    a = colour & 0xFF;
}

stock RGBAToHex(r, g, b, a) //By Betamaster
{
    return (r<<24 | g<<16 | b<<8 | a);
}

stock RGBAToARGB(col)
{
	return ((((col) << 24) & 0xFF000000) | (((col) >>> 8) & 0xFFFFFF));
}

stock ARGBToRGBA(col)
{
	return ((((col) << 8) & 0xFFFFFF00) | (((col) >>> 24) & 0xFF));
}

UpdateGangZoneColor(index)
{
	if(TERRITORIES[index][territory_WAR])
	{
		new flash_color, r, g, b, a;
		HexToRGBA(CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
		flash_color = RGBAToHex(r, g, b, 135);
		
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(PI[i][pCREW])
				{
					GangZoneFlashForPlayer(i, TERRITORIES[index][territory_GANG_ZONE], flash_color);
				}
			}
		}
	}
	else
	{
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(PI[i][pCREW])
				{
					GangZoneShowForPlayer(i, TERRITORIES[index][territory_GANG_ZONE], TERRITORIES[index][territory_COLOR]);
				}
			}
		}
	}
	return 1;
}

StartTerritoryAttack(crew_index, territory_index, time)
{
	CREW_INFO[crew_index][crew_FIGHTING] = true;
	CREW_INFO[crew_index][crew_LAST_ATTACK] = gettime();
	TERRITORIES[territory_index][territory_WAR] = true;
	TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = crew_index;
	TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = time;
	TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
	UpdateGangZoneColor(territory_index);
	
	new message[145];
	format(message, sizeof message, "Conquista:_%s", TimeConvert(TERRITORIES[territory_index][territory_WAR_TIME_LEFT]));
	TextDrawSetString(TERRITORIES[territory_index][territory_TEXTDRAW], message);
	
	KillTimer(TERRITORIES[territory_index][territory_TIMER]);
	TERRITORIES[territory_index][territory_TIMER] = SetTimerEx("UpdateTerritoryAttack", 1000, false, "i", territory_index);
	
	if(TERRITORIES[territory_index][territory_OCCUPIED])
	{
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = true;
		format(message, sizeof message, "{"#PRIMARY_COLOR"}[BANDAS] {FFFFFF}La banda '%s' está atacando un territorio de la banda '%s' en %s.", CREW_INFO[crew_index][crew_NAME], CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_NAME], TERRITORIES[territory_index][territory_NAME]);
	}
	else
	{
		format(message, sizeof message, "{"#PRIMARY_COLOR"}[BANDAS] {FFFFFF}La banda '%s' está atacando un territorio en %s.", CREW_INFO[crew_index][crew_NAME], TERRITORIES[territory_index][territory_NAME]);
	}

	new message_police[1024];
	format(message_police, sizeof message_police, "{"#POLICE_COLOR"}[Central policía] {FFFFFF}Personas armadas están causando disturbios en %s.", TERRITORIES[territory_index][territory_NAME]);
	
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PI[i][pCREW])
			{
				SendClientMessage(i, -1, message);
				if(IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
				{	
					if(PI[i][pWANTED_LEVEL] < 3) SetPlayerWantedLevelEx(i, 3);

					TextDrawShowForPlayer(i, Textdraws[textdraw_TERRITORY_BOX]);
					TextDrawShowForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW]);
				}
			}
			
			if(PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
			{
				if(pTemp(i)[pt_WORKING_IN] == WORK_POLICE)
				{
					SendClientMessage(i, -1, message_police);
				}
			}
		}
	}
	return 1;
}

forward UpdateTerritoryAttack(territory_index);
public UpdateTerritoryAttack(territory_index)
{
	if(!TERRITORIES[territory_index][territory_VALID]) return 1;
	if(!TERRITORIES[territory_index][territory_WAR]) return 1;
	
	if(TERRITORIES[territory_index][territory_WAR_TIME_LEFT] <= 0)
	{
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_CREW_ID] = CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_ID];
		TERRITORIES[territory_index][territory_CREW_INDEX] = TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX];
		
		new r, g, b, a;
		HexToRGBA(CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
		TERRITORIES[territory_index][territory_COLOR] = RGBAToHex(r, g, b, 135);
		
		new message[145];
		format(message, sizeof message, "{"#PRIMARY_COLOR"}[BANDAS] {FFFFFF}La banda '%s' ha conquistado un nuevo territorio.", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE territories SET id_crew = %d WHERE id = %d;", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_ID], TERRITORIES[territory_index][territory_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
		
		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_LAST_ATTACK] = gettime();
		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_WAR] = false;
		TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = 0;
		TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = 0;
		TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
		KillTimer(TERRITORIES[territory_index][territory_TIMER]);
		UpdateGangZoneColor(territory_index);
		TERRITORIES[territory_index][territory_OCCUPIED] = true;
		
		new amount = minrand(5000, 7525);
		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(PI[i][pCREW])
				{
					SendClientMessage(i, -1, message);
					if(IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
					{
						if(PI[i][pCREW] == TERRITORIES[territory_index][territory_CREW_ID])
						{
							GivePlayerBlackCash(i, amount, true, false);
							SendClientMessagef(i, 0xd1d1d1d1, "{"#SILVER_COLOR"}Has ganado %d {"#GRAY_COLOR"}DN${"#SILVER_COLOR"} por conquistar este territorio.", amount);
						}
						
						
						TextDrawHideForPlayer(i, Textdraws[textdraw_TERRITORY_BOX]);
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW]);
					}
				}
			}
		}

		CallLocalFunction("OnCrewCaptureTerritory", "iiii", TERRITORIES[territory_index][territory_CREW_ID], TERRITORIES[territory_index][territory_CREW_INDEX], TERRITORIES[territory_index][territory_ID], territory_index);
		return 1;
	}
	
	
	TERRITORIES[territory_index][territory_WAR_TIME_LEFT] --;
	new message[145];
	format(message, sizeof message, "Conquista:_%s", TimeConvert(TERRITORIES[territory_index][territory_WAR_TIME_LEFT]));
	TextDrawSetString(TERRITORIES[territory_index][territory_TEXTDRAW], message);
	
	
	new attackers_in_area = CountCrewPlayersInTerritory(TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX], territory_index);
	if(attackers_in_area <= 0)
	{
		format(message, sizeof message, "{"#PRIMARY_COLOR"}[BANDAS] {FFFFFF}La banda '%s' no ha podido conquistar el territorio que estaba atacando.", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);

		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_LAST_ATTACK] = gettime();
		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_FIGHTING] = false;
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_WAR] = false;
		TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = 0;
		TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = 0;
		TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
		KillTimer(TERRITORIES[territory_index][territory_TIMER]);
		UpdateGangZoneColor(territory_index);

		for(new i = 0; i != MAX_PLAYERS; i++)
		{
			if(IsPlayerConnected(i))
			{
				if(PI[i][pCREW])
				{
					SendClientMessage(i, -1, message);
					if(IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
					{
						TextDrawHideForPlayer(i, Textdraws[textdraw_TERRITORY_BOX]);
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW]);
					}
				}
			}
		}
		return 1;
	}
	
	KillTimer(TERRITORIES[territory_index][territory_TIMER]);
	TERRITORIES[territory_index][territory_TIMER] = SetTimerEx("UpdateTerritoryAttack", 1000, false, "i", territory_index);
	return 1;
}

CountCrewPlayersInTerritory(crew_index, territory_index)
{
	new count;
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(PI[i][pCREW])
			{
				if(pTemp(i)[pt_CREW_INDEX] == crew_index)
				{
					if(PI[i][pSTATE] == ROLEPLAY_STATE_NORMAL && pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if(IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
						{
							count ++;
						}
					}
				}
			}
		}
	}
	return count;
}

stock SetDatabaseInfo()
{
	new MySQLOpt:MySQLOpt = mysql_init_options();
	mysql_set_option(MySQLOpt, AUTO_RECONNECT, true);
	mysql_set_option(MySQLOpt, SERVER_PORT, 3306);
	handle_db = mysql_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASS, MYSQL_DB, MySQLOpt);
	mysql_set_charset("latin1", handle_db);
	return 1;
}

stock SetRandomRconPassword()
{
	rcon_pass = random(1000000000);
	SendRconCommandf("rcon_password %d", rcon_pass);
	printf("Random RCON Password generated by server: %d", rcon_pass);
	return 1;
}

stock LoadServerInfo()
{
	Loop(i, sizeof(Help_Actors), 0)
	{
		CreateDynamicActor(26, Help_Actors[i][0], Help_Actors[i][1], Help_Actors[i][2], Help_Actors[i][3], true, 100.0, -1, -1);
		CreateDynamic3DTextLabel("Ayuda\n"COME_INTERACTION_MESSAGE"para saber un poco mas sobre {"#GOLD_COLOR"}"SERVER_NAME".", 0xFFFFFFFF, Help_Actors[i][0], Help_Actors[i][1], Help_Actors[i][2], 15.0, .testlos = true, .worldid = -1, .interiorid = -1);
		new help_actor_pickup = CreateDynamicPickup(0, 1, Help_Actors[i][0], Help_Actors[i][1], Help_Actors[i][2], -1, -1), info[3];

		info[0] = PICKUP_TYPE_HELP;
		info[1] = 0; // Nada
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, help_actor_pickup, E_STREAMER_EXTRA_ID, info);	
	}

	Loop(i, sizeof(ELEVATOR_INFO), 0)
	{
		new info[3];

		CreateDynamic3DTextLabel("Elevador\n"COME_INTERACTION_MESSAGE"para subir", 0xFFFFFFFF, ELEVATOR_INFO[i][initial_pos_x], ELEVATOR_INFO[i][initial_pos_y], ELEVATOR_INFO[i][initial_pos_z], 15.0, .testlos = true, .worldid = -1, .interiorid = ELEVATOR_INFO[i][elevator_interior]);
		new Elevator_Pickup_Up = CreateDynamicPickup(0, 1, ELEVATOR_INFO[i][initial_pos_x], ELEVATOR_INFO[i][initial_pos_y], ELEVATOR_INFO[i][initial_pos_z], -1, ELEVATOR_INFO[i][elevator_interior]);

		info[0] = PICKUP_TYPE_ELEVATOR;
		info[1] = i; // Index
		info[2] = 0; // Subir
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Elevator_Pickup_Up, E_STREAMER_EXTRA_ID, info);

		CreateDynamic3DTextLabel("Elevador\n"COME_INTERACTION_MESSAGE"para bajar", 0xFFFFFFFF, ELEVATOR_INFO[i][secondary_pos_x], ELEVATOR_INFO[i][secondary_pos_y], ELEVATOR_INFO[i][secondary_pos_z], 15.0, .testlos = true, .worldid = -1, .interiorid = ELEVATOR_INFO[i][elevator_interior]);
		new Elevator_Pickup_Down = CreateDynamicPickup(0, 1, ELEVATOR_INFO[i][secondary_pos_x], ELEVATOR_INFO[i][secondary_pos_y], ELEVATOR_INFO[i][secondary_pos_z], -1, ELEVATOR_INFO[i][elevator_interior]);

		info[0] = PICKUP_TYPE_ELEVATOR;
		info[1] = i; // Index
		info[2] = 1; // Bajar
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Elevator_Pickup_Down, E_STREAMER_EXTRA_ID, info);	
	}
	
	//autoescuela
	new driving_school_info[3];
	driving_school_info[1] = 0; // Nada
	driving_school_info[2] = 0; // Nada

	CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para realizar el examen por {"#GREEN_COLOR"}1500$.", 0xFFFFFFFF, 1083.5474, -1765.8229, 13.9284, 5.0, .testlos = true, .worldid = -1, .interiorid = -1);
	new DS_Pickup = CreateDynamicPickup(0, 1, 1083.5474, -1765.8229, 13.9284, -1, -1);

	driving_school_info[0] = PICKUP_TYPE_DRIVING_EXAM;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, DS_Pickup, E_STREAMER_EXTRA_ID, driving_school_info);

	CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para sacar un vehiculo de la auto escuela.", 0xFFFFFFFF, 1064.2238, -1736.8141, 13.4836, 5.0, .testlos = true, .worldid = -1, .interiorid = -1);
	new DSV_Pickup = CreateDynamicPickup(19134, 1, 1064.2238, -1736.8141, 13.4836, -1, -1);

	driving_school_info[0] = PICKUP_TYPE_DS_VEHICLE;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, DSV_Pickup, E_STREAMER_EXTRA_ID, driving_school_info);

	CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para sobornar al instructor por {"#GREEN_COLOR"}3500$.", 0xFFFFFFFF, 1070.7325, -1757.9670, 13.9284, 5.0, .testlos = true, .worldid = -1, .interiorid = -1);
	new DSB_Pickup = CreateDynamicPickup(0, 1, 1070.7325, -1757.9670, 13.9284, -1, -1);

	driving_school_info[0] = PICKUP_TYPE_DS_BRIBE;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, DSB_Pickup, E_STREAMER_EXTRA_ID, driving_school_info);

	//Mercado Negro
	new bm_info[3];
	bm_info[1] = 0; // Nada
	bm_info[2] = 0; // Nada

	CreateDynamic3DTextLabel("{"#GOLD_COLOR"}Mercado Negro\n"COME_INTERACTION_MESSAGE"para comprar", 0xFFFFFFFF, -720.1512, 1460.2930, -90.5046, 5.0, .testlos = true, .worldid = -1, .interiorid = -1);
	new bm_pck = CreateDynamicPickup(0, 1, -720.1512, 1460.2930, -90.5046, -1, -1);

	bm_info[0] = PICKUP_TYPE_BLACK_MARKET;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, bm_pck, E_STREAMER_EXTRA_ID, bm_info);

	for(new i = 0; i < sizeof POLICE_VEHICLES_SPAWN; i++)
	{
		new police_v_info[3]; //PICKUP_TYPE_POLICE_VEHICLES //PICKUP_TYPE_POLICE_AIR_VEHICLE

		CreateDynamic3DTextLabel("{"#POLICE_COLOR"}Policia\n"COME_INTERACTION_MESSAGE"para sacar vehiculos", 0xFFFFFFFF, POLICE_VEHICLES_SPAWN[i][0], POLICE_VEHICLES_SPAWN[i][1], POLICE_VEHICLES_SPAWN[i][2], 25.0, .testlos = true, .worldid = -1, .interiorid = -1);
		new police_pck = CreateDynamicPickup(0, 1, POLICE_VEHICLES_SPAWN[i][0], POLICE_VEHICLES_SPAWN[i][1], POLICE_VEHICLES_SPAWN[i][2], -1, -1);

		police_v_info[0] = PICKUP_TYPE_POLICE_VEHICLES;
		police_v_info[1] = i;
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, police_pck, E_STREAMER_EXTRA_ID, police_v_info);
	}

	//3d texts armarios
	for(new i = 0; i < sizeof PROPERTY_CLOSET_POS; i++)
	{
		CreateDynamic3DTextLabel("{"#PRIMARY_COLOR"}Armario\n\n{FFFFFF}Escribe {"#PRIMARY_COLOR"}/armario {FFFFFF}para verlo", 0xFFFFFFFF, PROPERTY_CLOSET_POS[i][property_closet_X], PROPERTY_CLOSET_POS[i][property_closet_Y], PROPERTY_CLOSET_POS[i][property_closet_Z] + 0.25, 10.0, .testlos = true, .interiorid = PROPERTY_INTERIORS[i][property_INT_INTERIOR]);
	}

	// 3D Texts Ropas
	for(new i = 0; i < sizeof Clothing_Shop_Positions; i++)
	{
		new label_str[256];
		format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%s\n"COME_INTERACTION_MESSAGE"para ver las opciones disponibles", Clothing_Shop_Positions[i][clothing_shop_NAME]);
		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, Clothing_Shop_Positions[i][clothing_shop_X], Clothing_Shop_Positions[i][clothing_shop_Y], Clothing_Shop_Positions[i][clothing_shop_Z] + 0.25, 10.0, .testlos = true, .interiorid = Clothing_Shop_Positions[i][clothing_shop_INTERIOR]);
	
		new chop_pickup_id = CreateDynamicPickup(1275, 1, Clothing_Shop_Positions[i][clothing_shop_X], Clothing_Shop_Positions[i][clothing_shop_Y], Clothing_Shop_Positions[i][clothing_shop_Z] + 0.10, -1, Clothing_Shop_Positions[i][clothing_shop_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_CLOTHING_SHOP;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, chop_pickup_id, E_STREAMER_EXTRA_ID, info);
	}
	
	// 3D Texts Pedir comida
	for(new i = 0; i < sizeof Fast_Food_Positions; i++)
	{
		new label_str[128];
		format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%s\n"COME_INTERACTION_MESSAGE"para alimentarte", Fast_Food_Positions[i][fast_food_NAME]);
		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, Fast_Food_Positions[i][fast_food_X], Fast_Food_Positions[i][fast_food_Y], Fast_Food_Positions[i][fast_food_Z] + 0.25, 10.0, .testlos = true, .interiorid = Fast_Food_Positions[i][fast_food_INTERIOR]);

		new fast_food_pickup_id = CreateDynamicPickup(1239, 1, Fast_Food_Positions[i][fast_food_X], Fast_Food_Positions[i][fast_food_Y], Fast_Food_Positions[i][fast_food_Z] + 0.10, -1, Fast_Food_Positions[i][fast_food_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_FAST_FOOD;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, fast_food_pickup_id, E_STREAMER_EXTRA_ID, info);	
	}
	
	// 3D Texts Bank
	for(new i = 0; i < sizeof Bank_Interior_Positions; i++)
	{
		CreateDynamic3DTextLabel("Banco\n"COME_INTERACTION_MESSAGE"para realizar una operacion", 0xFFFFFFFF, Bank_Interior_Positions[i][bank_X], Bank_Interior_Positions[i][bank_Y], Bank_Interior_Positions[i][bank_Z] + 0.25, 10.0, .testlos = true, .worldid = Bank_Interior_Positions[i][bank_WORLD], .interiorid = Bank_Interior_Positions[i][bank_INTERIOR]);

		new bank_pickup_id = CreateDynamicPickup(1212, 1, Bank_Interior_Positions[i][bank_X], Bank_Interior_Positions[i][bank_Y], Bank_Interior_Positions[i][bank_Z] + 0.10, Bank_Interior_Positions[i][bank_WORLD], Bank_Interior_Positions[i][bank_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_BANK;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, bank_pickup_id, E_STREAMER_EXTRA_ID, info);	
	}

	for(new i = 0; i < sizeof BUY_PROPERTIES_SITES; i++)
	{
		CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para comprar una propiedad", 0xFFFFFFFF, BUY_PROPERTIES_SITES[i][site_X], BUY_PROPERTIES_SITES[i][site_Y], BUY_PROPERTIES_SITES[i][site_Z] + 0.25, 10.0, .testlos = true, .worldid = BUY_PROPERTIES_SITES[i][site_WORLD], .interiorid = BUY_PROPERTIES_SITES[i][site_INTERIOR]);

		new bp_pckp = CreateDynamicPickup(0, 1, BUY_PROPERTIES_SITES[i][site_X], BUY_PROPERTIES_SITES[i][site_Y], BUY_PROPERTIES_SITES[i][site_Z] + 0.10, BUY_PROPERTIES_SITES[i][site_WORLD], BUY_PROPERTIES_SITES[i][site_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_BUY_PROPERTY;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, bp_pckp, E_STREAMER_EXTRA_ID, info);	
	}
	
	//Cajeros
	for(new i = 0; i < sizeof ATM_BANK; i ++)
	{
		CreateDynamicObject(ATM_BANK[i][atm_modelid], ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z], ATM_BANK[i][atm_RX], ATM_BANK[i][atm_RY], ATM_BANK[i][atm_RZ], 0, 0);
		
		ATM_BANK[i][atm_X] += (-0.5 * floatsin(-(ATM_BANK[i][atm_RZ] - 90.0), degrees));
		ATM_BANK[i][atm_Y] += (-0.5 * floatcos(-(ATM_BANK[i][atm_RZ] - 90.0), degrees));
		CreateDynamicMapIcon(ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z], 52, -1, 0, 0);
		CreateDynamic3DTextLabel("Cajero automático\n"COME_INTERACTION_MESSAGE"para realizar operaciones", 0xFFFFFFFF, ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z] + 0.25, 10.0, .testlos = true, .worldid = 0, .interiorid = 0);
	
		new atm_pickup_id = CreateDynamicPickup(0, 1, ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z] + 0.10, 0, 0), info[3];
		info[0] = PICKUP_TYPE_ATM;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, atm_pickup_id, E_STREAMER_EXTRA_ID, info);
	}
	
	// 3D Texts Gasolinera
	for(new i = 0; i < sizeof Fuel_Stations; i++)
	{
		CreateDynamic3DTextLabel("{"#RED_COLOR"}Gasolinera\n\n{FFFFFF}Precio: {"#RED_COLOR"}5$/Litro\n"COME_INTERACTION_MESSAGE"para ver las opciones o pulsa {"#GOLD_COLOR"}'H'{ffffff} si estas en un vehiculo", 0xFFFFFFFF, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z] + 0.25, 10.0, .testlos = true, .worldid = 0, .interiorid = 0);
	
		new fs_pickup_id = CreateDynamicPickup(1650, 1, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z] + 0.10, 0, 0), info[3];
		info[0] = PICKUP_TYPE_FUELSTATION;
		info[1] = 0; // Nada
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, fs_pickup_id, E_STREAMER_EXTRA_ID, info);	
	}

	//24/7 Int
	CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para ver los productos disponibles", 0xFFFFFFFF, -27.964675, -89.948631, 1003.546875 + 0.25, 10.0, .testlos = true, .interiorid = 18);
	new prd_lst_pickup = CreateDynamicPickup(19592, 1, -27.964675, -89.948631, 1003.546875 + 0.10, -1, 18), prd_info[3];
	prd_info[0] = PICKUP_TYPE_PRODUCT_LIST;
	prd_info[1] = 0; // Nada
	prd_info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, prd_lst_pickup, E_STREAMER_EXTRA_ID, prd_info);

	//Vehs venta
	for(new i = 0; i != sizeof SELL_INFO_VEHICLES; i ++)
	{
		if(SELL_INFO_VEHICLES[i][sell_info_COLOR_1] == -1) SELL_INFO_VEHICLES[i][sell_info_COLOR_1] = valid_work_vehicle_colors[random(sizeof(valid_work_vehicle_colors))];
		if(SELL_INFO_VEHICLES[i][sell_info_COLOR_2] == -1) SELL_INFO_VEHICLES[i][sell_info_COLOR_2] = valid_work_vehicle_colors[random(sizeof(valid_work_vehicle_colors))];
		
		new vehicle_id = INVALID_VEHICLE_ID;
		vehicle_id = CreateVehicle(SELL_INFO_VEHICLES[i][sel_info_vehicle_MODELID], SELL_INFO_VEHICLES[i][sell_info_SPAWN_X], SELL_INFO_VEHICLES[i][sell_info_SPAWN_Y], SELL_INFO_VEHICLES[i][sell_info_SPAWN_Z], SELL_INFO_VEHICLES[i][sell_info_SPAWN_ANGLE], SELL_INFO_VEHICLES[i][sell_info_COLOR_1], SELL_INFO_VEHICLES[i][sell_info_COLOR_2], -1, false);
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_SELL;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = SELL_INFO_VEHICLES[i][sel_info_vehicle_MODELID];
		format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "EN VENTA");
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = SELL_INFO_VEHICLES[i][sell_info_SPAWN_X];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = SELL_INFO_VEHICLES[i][sell_info_SPAWN_Y];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = SELL_INFO_VEHICLES[i][sell_info_SPAWN_Z];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = SELL_INFO_VEHICLES[i][sell_info_SPAWN_ANGLE];
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = SELL_INFO_VEHICLES[i][sell_info_COLOR_1];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = SELL_INFO_VEHICLES[i][sell_info_COLOR_2];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = 0.0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = 0.0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;

		SELL_VEHICLES[vehicle_id][sell_vehicle_VALID] = true;
		SELL_VEHICLES[vehicle_id][sell_vehicle_SHOP] = SELL_INFO_VEHICLES[i][sell_info_SHOP];
		SELL_VEHICLES[vehicle_id][sell_vehicle_PRICE] = VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_PRICE];
		SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL] = 1; /*VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_LEVEL];*/
		SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA] = VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_COINS];
		SELL_VEHICLES[vehicle_id][sell_vehicle_VIP_LEVEL] = VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_VIP_LEVEL];
		
		if(SELL_VEHICLES[vehicle_id][sell_vehicle_VIP_LEVEL]) SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL] = 1;
		if(SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA]) SELL_VEHICLES[vehicle_id][sell_vehicle_PRICE] = 0;
		
		SetVehicleToRespawnEx(vehicle_id);
		
		
		new label_str[256];
		
		if(SELL_VEHICLES[vehicle_id][sell_vehicle_VIP_LEVEL])
		{
			if(SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA])
			{
				format
				(
					label_str, 
						sizeof label_str, 
						"\
							{"#PRIMARY_COLOR"}Membresía VIP requerida\n\
							\n\
							{"#PRIMARY_COLOR"}%s\n\n\
							{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
							{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\
						", VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_NAME], SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA], SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL]
				);
			}
			else
			{
				format
				(
					label_str, 
						sizeof label_str, 
						"\
							{"#PRIMARY_COLOR"}Membresía VIP requerida\n\
							\n\
							{"#PRIMARY_COLOR"}%s\n\n\
							{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n\
							{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\
						", VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_NAME], number_format_thousand(SELL_VEHICLES[vehicle_id][sell_vehicle_PRICE]), SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL]
				);
			}
		}
		else
		{
			if(SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA])
			{
				format
				(
					label_str, 
						sizeof label_str, 
						"\
							{"#PRIMARY_COLOR"}%s\n\n\
							{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
							{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\
						", VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_NAME], SELL_VEHICLES[vehicle_id][sell_vehicle_EXTRA], SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL]
				);
			}
			else
			{
				format
				(
					label_str, 
						sizeof label_str, 
						"\
							{"#PRIMARY_COLOR"}%s\n\n\
							{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n\
							{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\
						", VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_NAME], number_format_thousand(SELL_VEHICLES[vehicle_id][sell_vehicle_PRICE]), SELL_VEHICLES[vehicle_id][sell_vehicle_LEVEL]
				);
			}
		}
		
		
		SELL_VEHICLES[vehicle_id][sell_vehicle_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, 0.0, 0.0, 1.5, 10.0, .attachedvehicle = vehicle_id, .testlos = true, .worldid = 0, .interiorid = 0);
	}
	
	//Concesionarios
	for(new i = 0; i < sizeof SELL_VEHICLES_SHOPS_SPAWN; i++)
	{
		CreateDynamicMapIcon(SELL_VEHICLES_SHOPS_SPAWN[i][0], SELL_VEHICLES_SHOPS_SPAWN[i][1], SELL_VEHICLES_SHOPS_SPAWN[i][2], 55, -1, 0, 0);
		CreateDynamic3DTextLabel("{"#PRIMARY_COLOR"}SALIDA DE VEHICULOS", 0xFFFFFFFF, SELL_VEHICLES_SHOPS_SPAWN[i][0], SELL_VEHICLES_SHOPS_SPAWN[i][1], SELL_VEHICLES_SHOPS_SPAWN[i][2], 10.0, .testlos = true, .worldid = 0, .interiorid = 0);
	}
	
	//Notario y Grua
	CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para ver las opciones disponibles", 0xFFFFFFFF, 943.3202, -1464.3085, 2761.0164, 10.0, .testlos = true, .interiorid = 1);
	new nto_pickup = CreateDynamicPickup(0, 1, 943.3202, -1464.3085, 2761.0164 + 0.10, -1, 1), nto_info[1];
	nto_info[0] = PICKUP_TYPE_CITYHALL_OPTIONS;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, nto_pickup, E_STREAMER_EXTRA_ID, nto_info);
	
	//San Andreas Vehicles
	for(new i = 0; i != sizeof San_Andreas_Vehicles; i ++)
	{
		
		if(San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_1] == -1) San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_1] = valid_work_vehicle_colors[random(sizeof(valid_work_vehicle_colors))];
		if(San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_2] == -1) San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_2] = valid_work_vehicle_colors[random(sizeof(valid_work_vehicle_colors))];
		
		new vehicle_id = INVALID_VEHICLE_ID, respawn_time = 300;
		
		if(San_Andreas_Vehicles[i][san_andreas_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			if(work_info[ San_Andreas_Vehicles[i][san_andreas_vehicle_TYPE_IN] ][work_info_TYPE] == WORK_TYPE_FAMILY)
			{
				respawn_time = 2700;
			}
		}
		
		vehicle_id = CreateVehicle(San_Andreas_Vehicles[i][san_andreas_vehicle_MODELID], San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_X], San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_Y], San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_Z], San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_ANGLE], San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_1], San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_2], respawn_time, false);
		if(vehicle_id == INVALID_VEHICLE_ID) continue;
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = San_Andreas_Vehicles[i][san_andreas_vehicle_TYPE];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = San_Andreas_Vehicles[i][san_andreas_vehicle_MODELID];
		format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "%c%c%c-%04d", getRandomLetter(), getRandomLetter(), getRandomLetter(), random(9999));
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_X];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_Y];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_Z];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = San_Andreas_Vehicles[i][san_andreas_vehicle_SPAWN_ANGLE];
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_1];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = San_Andreas_Vehicles[i][san_andreas_vehicle_COLOR_2];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[ GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_MAX_GAS];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = frandom(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] / 3, 2);
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VIP] = San_Andreas_Vehicles[i][san_andreas_vehicle_vip];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = San_Andreas_Vehicles[i][san_andreas_vehicle_WORLD];
		
		if(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			WORK_VEHICLES[vehicle_id][work_vehicle_VALID] = true;
			WORK_VEHICLES[vehicle_id][work_vehicle_WORK] = San_Andreas_Vehicles[i][san_andreas_vehicle_TYPE_IN];
			WORK_VEHICLES[vehicle_id][work_vehicle_EXP] = San_Andreas_Vehicles[i][san_andreas_vehicle_TYPE_IN_EXP];
			WORK_VEHICLES[vehicle_id][work_vehicle_NEED_DUTY] = work_info[ WORK_VEHICLES[vehicle_id][work_vehicle_WORK] ][work_info_NEED_DUTY];
		}
		
		SetVehicleToRespawnEx(vehicle_id);
		CallLocalFunction("OnSanAndreasVehicleLoad", "i", vehicle_id);
	}
	CallLocalFunction("OnSanAndreasVehiclesLoad", "");
	
	//Barreras
	for(new i = 0; i != sizeof San_Andreas_Barriers; i ++)
	{
		new tmpobjid = CreateDynamicObject(966, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z], 0.0, 0.0, San_Andreas_Barriers[i][barrier_ROTATION], San_Andreas_Barriers[i][barrier_WORLD], San_Andreas_Barriers[i][barrier_INTERIOR], .streamdistance = 600.0, .drawdistance = 600.0);
		/*SetDynamicObjectMaterial(tmpobjid, 0, 9514, "711_sfw", "ws_carpark2", 0xFFFFFFFF);
		SetDynamicObjectMaterial(tmpobjid, 1, 9514, "711_sfw", "ws_carpark2", 0x00000000);*/
		tmpobjid = CreateDynamicObject(968, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967, 0.0, -90.0, San_Andreas_Barriers[i][barrier_ROTATION], San_Andreas_Barriers[i][barrier_WORLD], San_Andreas_Barriers[i][barrier_INTERIOR], .streamdistance = 600.0, .drawdistance = 600.0);
		/*SetDynamicObjectMaterial(tmpobjid, 0, 16640, "a51", "ws_carparkwall2", 0xFFFFFFFF);
		SetDynamicObjectMaterial(tmpobjid, 1, 16640, "a51", "ws_carparkwall2", 0x00000000);*/
		San_Andreas_Barriers[i][barrier_OBJECT_ID] = tmpobjid;

		new label_str[256];
		
		if(San_Andreas_Barriers[i][barrier_PRICE] > 0) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Peaje\n\n{FFFFFF}Pulsa el {"#GOLD_COLOR"}'Claxon [H]' {FFFFFF}para pagar {"#GREEN_COLOR"}%s$", number_format_thousand(San_Andreas_Barriers[i][barrier_PRICE]));
		else {
			if(San_Andreas_Barriers[i][barrier_VEHICLE_TYPE]) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%c%s\n\n{FFFFFF}Pulsa el {"#GOLD_COLOR"}'Claxon [H]' {FFFFFF}para que te abran", toupper(work_info[ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][work_info_NAME][0]), work_info[ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][work_info_NAME][1]);
			else format(label_str, sizeof label_str, "{FFFFFF}Pulsa el {"#PRIMARY_COLOR"}'Claxon [H]' {FFFFFF}para que te abran");
		}

		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 1.5, 15.0, .worldid = San_Andreas_Barriers[i][barrier_WORLD], .interiorid = San_Andreas_Barriers[i][barrier_INTERIOR], .testlos = true);

		San_Andreas_Barriers[i][barrier_PLAYER_X] = San_Andreas_Barriers[i][barrier_X] + (3.4 * floatsin(-(San_Andreas_Barriers[i][barrier_ROTATION] + 90.0), degrees));
		San_Andreas_Barriers[i][barrier_PLAYER_Y] = San_Andreas_Barriers[i][barrier_Y] + (3.4 * floatcos(-(San_Andreas_Barriers[i][barrier_ROTATION] + 90.0), degrees));
		San_Andreas_Barriers[i][barrier_PLAYER_Z] = San_Andreas_Barriers[i][barrier_Z];
	}
	
	//polciais
	for(new i = 0; i != sizeof POLICE_GARAGE_DOORS; i ++)
	{
		POLICE_GARAGE_DOORS[i][police_gdoor_OBJECT_ID] = CreateDynamicObject(POLICE_GARAGE_DOORS[i][police_gdoor_MODELID], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_X], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_Y], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_Z], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_RX], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_RY], POLICE_GARAGE_DOORS[i][police_gdoor_CLOSED_RZ], 0, 0);
	}
	for(new i = 0; i != sizeof POLICE_DOORS; i ++)
	{
		POLICE_DOORS[i][police_door_OBJECT_ID] = CreateDynamicObject(POLICE_DOORS[i][police_door_MODELID], POLICE_DOORS[i][police_door_X], POLICE_DOORS[i][police_door_Y], POLICE_DOORS[i][police_door_Z], 0.0, 0.0, POLICE_DOORS[i][police_door_RZ], POLICE_DOORS[i][police_door_WORLD], POLICE_DOORS[i][police_door_INTERIOR]);
		CreateDynamic3DTextLabel("Pulsa {"#PRIMARY_COLOR"} [ ENTER ] {FFFFFF}para abrir la puerta", 0xFFFFFFFF, POLICE_DOORS[i][police_door_X], POLICE_DOORS[i][police_door_Y], POLICE_DOORS[i][police_door_Z] + 1.25, 5.0, .testlos = false, .interiorid = POLICE_DOORS[i][police_door_INTERIOR], .worldid = POLICE_DOORS[i][police_door_WORLD]);
	}

	for(new i = 0; i != sizeof POLICE_START_WORK; i ++)
	{
		CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, POLICE_START_WORK[i][police_start_X], POLICE_START_WORK[i][police_start_Y], POLICE_START_WORK[i][police_start_Z], 5.0, .testlos = true, .worldid = POLICE_START_WORK[i][police_start_WORLD], .interiorid = POLICE_START_WORK[i][police_start_INTERIOR]);
		new start_working = CreateDynamicPickup(0, 1, POLICE_START_WORK[i][police_start_X], POLICE_START_WORK[i][police_start_Y], POLICE_START_WORK[i][police_start_Z] + 0.10, POLICE_START_WORK[i][police_start_WORLD], POLICE_START_WORK[i][police_start_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_POLICE_WORK;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, start_working, E_STREAMER_EXTRA_ID, info);
	}

	for(new i = 0; i != sizeof POLICE_EQUIP; i ++)
	{
		CreateDynamic3DTextLabel(""COME_INTERACTION_MESSAGE"para equiparte", 0xFFFFFFFF, POLICE_EQUIP[i][police_equip_X], POLICE_EQUIP[i][police_equip_Y], POLICE_EQUIP[i][police_equip_Z], 5.0, .testlos = true, .worldid = POLICE_EQUIP[i][police_equip_WORLD], .interiorid = POLICE_EQUIP[i][police_equip_INTERIOR]);
		new equipment_pickup = CreateDynamicPickup(0, 1, POLICE_EQUIP[i][police_equip_X], POLICE_EQUIP[i][police_equip_Y], POLICE_EQUIP[i][police_equip_Z] + 0.10, POLICE_EQUIP[i][police_equip_WORLD], POLICE_EQUIP[i][police_equip_INTERIOR]), info[3];
		info[0] = PICKUP_TYPE_EQUIPMENT;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, equipment_pickup, E_STREAMER_EXTRA_ID, info);
	}
	
	Jail_Areas[0] = CreateDynamicRectangle(1593.5, -1725.5, 1657.5, -1597.5, -1, 1);
	Jail_Areas[1] = CreateDynamicRectangle(211.001739, 117.171920, 236.010986, 104.004219, -1, 10);
	Jail_Areas[2] = CreateDynamicRectangle(204.957885, 180.868392, 183.743148, 168.624618, -1, 3);
	Jail_Areas[3] = CreateDynamicRectangle(366.3146, 1951.8367, 17.6406, 78.4408, -1, 13);

	//Safe Zones
	for(new i = 0; i != sizeof SAFE_ZONES; i ++)
	{
		SAFE_ZONES[i][safe_zone_AREA_ID] = CreateDynamicRectangle(SAFE_ZONES[i][safe_zone_MIN_X], SAFE_ZONES[i][safe_zone_MIN_Y], SAFE_ZONES[i][safe_zone_MAX_X], SAFE_ZONES[i][safe_zone_MAX_Y], SAFE_ZONES[i][safe_zone_WORLD], SAFE_ZONES[i][safe_zone_INTERIOR]);

		new info[2];
		info[0] = AREA_TYPE_SAFE_ZONE;
		info[1] = i;
		Streamer_SetArrayData(STREAMER_TYPE_AREA, SAFE_ZONES[i][safe_zone_AREA_ID], E_STREAMER_EXTRA_ID, info);
		SAFE_ZONES[i][safe_zone_GANG_ZONE] = GangZoneCreate(SAFE_ZONES[i][safe_zone_MIN_X], SAFE_ZONES[i][safe_zone_MIN_Y], SAFE_ZONES[i][safe_zone_MAX_X], SAFE_ZONES[i][safe_zone_MAX_Y]);
	}

	//Trabajos
	for(new i = 1; i < E_WORKS; i ++)
	{
		if(!obtain_work_coords[i][obtain_work_AVAILABLE]) continue;
		switch(work_info[i][work_info_TYPE])
		{
			case WORK_TYPE_NORMAL:
			{
				if(obtain_work_coords[i][obtain_work_LABELS])
				{
					new label_str[256];

					format(label_str, sizeof label_str, "{"#BLUE_COLOR"}%s\n\n{FFFFFF}Nivel: {"#GOLD_COLOR"}%d {ffffff}En adelante\n"COME_INTERACTION_MESSAGE"para trabajar aqui", work_info[i][work_info_NAME], work_info[i][work_info_LEVEL]);
					CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, obtain_work_coords[i][obtain_work_X], obtain_work_coords[i][obtain_work_Y], obtain_work_coords[i][obtain_work_Z], 10.0, .testlos = true, .interiorid = obtain_work_coords[i][obtain_work_INTERIOR]);

					new work_pickup = CreateDynamicPickup(1314, 1, obtain_work_coords[i][obtain_work_X], obtain_work_coords[i][obtain_work_Y], obtain_work_coords[i][obtain_work_Z], -1, obtain_work_coords[i][obtain_work_INTERIOR]), info[3];
					info[0] = PICKUP_TYPE_OBTAIN_WORK;
					info[1] = i; // Index
					info[2] = 0; // Nada
					Streamer_SetArrayData(STREAMER_TYPE_PICKUP, work_pickup, E_STREAMER_EXTRA_ID, info);
				}
				if(obtain_work_coords[i][obtain_work_MAP_ICON]) CreateDynamicMapIcon(obtain_work_coords[i][obtain_work_MAP_ICON_X], obtain_work_coords[i][obtain_work_MAP_ICON_Y], obtain_work_coords[i][obtain_work_MAP_ICON_Z], obtain_work_coords[i][obtain_work_MAP_ICON_ID], -1, 0, 0);
			}
		}
	}

	//Random taximeters
	for(new i = 0; i != MAX_VEHICLES; i++) TAXI_METER_VEHICLE[i][veh_taxi_meter_PRICE] = minrand(2, 8);

	//Carga camioneros
	for(new i = 0; i != sizeof LoadTrucksPoints; i ++)
	{
		CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/cargar {FFFFFF}para cargar el camion", 0xFFFFFFFF, LoadTrucksPoints[i][0], LoadTrucksPoints[i][1], LoadTrucksPoints[i][2], 10.0, .testlos = true, .interiorid = 0);
		CreateDynamicPickup(19135, 1, LoadTrucksPoints[i][0], LoadTrucksPoints[i][1], LoadTrucksPoints[i][2], -1, 0);
	}

	//Mecánico
	Mechanic_Areas[0] = CreateDynamicRectangle(1905.5, -1826.5, 1952.5, -1796.5, 0, 0);
	Streamer_SetArrayData(STREAMER_TYPE_AREA, Mechanic_Areas[0], E_STREAMER_EXTRA_ID, { AREA_TYPE_MECHANIC });

	for(new i; i != sizeof MechanicStartWorkingCoords; i++)
		CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/mecanico {FFFFFF}para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, MechanicStartWorkingCoords[i][0], MechanicStartWorkingCoords[i][1], MechanicStartWorkingCoords[i][2], 5.0, .testlos = true, .interiorid = 0);

	for(new i; i != sizeof MechanicBuyPiecesCoords; i++)
		CreateDynamic3DTextLabel("Piezas de mecánico\nEscribe {"#PRIMARY_COLOR"}/piezas [cantidad] {FFFFFF}para comprar piezas\nPrecio de pieza: {"#PRIMARY_COLOR"}50$", 0xFFFFFFFF, MechanicBuyPiecesCoords[i][0], MechanicBuyPiecesCoords[i][1], MechanicBuyPiecesCoords[i][2], 5.0, .testlos = true, .interiorid = 0);

	for(new i; i != sizeof MechanicBuyKitsCoords; i++)
		CreateDynamic3DTextLabel("Kits de reparacion\n\nEscribe {"#PRIMARY_COLOR"}/kit {FFFFFF}para comprar un kit de reparacion\nPrecio del kit: {"#PRIMARY_COLOR"}1.000$", 0xFFFFFFFF, MechanicBuyKitsCoords[i][0], MechanicBuyKitsCoords[i][1], MechanicBuyKitsCoords[i][2], 5.0, .testlos = true, .interiorid = 0);

	//talador
	CreateDynamicPickup(19793, 1, -527.670349, -97.338562, 63.176174, 0, 0);
	CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/talar {FFFFFF}para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, -527.670349, -97.338562, 63.176174, 5.0, .testlos = true, .worldid = 0, .interiorid = 0);

	//Pizzero
	CreateDynamicPickup(1582, 1, 2097.355712, -1818.040771, 13.382812, 0, 0);
	CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/pizzero {FFFFFF}para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, 2097.355712, -1818.040771, 13.382812, 5.0, .testlos = true, .worldid = 0, .interiorid = 0);

	//Medico
	CreateDynamicPickup(1275, 1, -2029.751342, -114.503044, 1035.171875, -1, 3);
	CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/medico {FFFFFF}para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, -2029.751342, -114.503044, 1035.171875, 5.0, .testlos = true, .interiorid = 3);

	//Trash
	CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/basurero {FFFFFF}para empezar a trabajar\no para dejar de trabajar", 0xFFFFFFFF, -1906.577514, -1756.457519, 22.079319, 5.0, .testlos = true, .worldid = 0, .interiorid = 0);

	//Ruta 0
	CreateTrashCheckpoint(0, 1440, -1812.46228, -558.37744, 15.73948,   0.00000, 0.00000, 274.24359);
	CreateTrashCheckpoint(0, 1440, -1793.84106, -312.50452, 24.46057,   0.00000, 0.00000, 268.49271);
	CreateTrashCheckpoint(0, 1440, -1801.20825, 115.39587, 14.55550,   0.00000, 0.00000, 280.09882);
	CreateTrashCheckpoint(0, 1440, -1750.40051, 323.11810, 6.61720,   0.00000, 0.00000, 319.06424);
	CreateTrashCheckpoint(0, 1440, -1814.43311, 511.15622, 28.66113,   0.00000, 9.00000, 304.31201);
	CreateTrashCheckpoint(0, 1440, -1982.79871, 614.85687, 34.61121,   0.00000, 0.00000, 0.00000);
	CreateTrashCheckpoint(0, 1440, -2229.42896, 575.27448, 34.58952,   0.00000, 0.00000, 0.00000);
	CreateTrashCheckpoint(0, 1440, -2385.20020, 513.64594, 28.11606,   0.00000, 0.00000, 282.48959);
	CreateTrashCheckpoint(0, 1440, -2258.51782, 221.79150, 34.74878,   0.00000, 0.00000, 90.00000);
	CreateTrashCheckpoint(0, 1440, -2266.30273, -206.86926, 34.86986,   0.00000, 0.00000, 90.00000);
	CreateTrashCheckpoint(0, 1440, -1995.48499, -771.90076, 31.56746,   0.00000, 0.00000, 90.00000);
		//Ruta 1
	CreateTrashCheckpoint(1, 1440, -2211.24414, -964.98248, 38.68247,   0.00000, 2.50000, 286.39740);
	CreateTrashCheckpoint(1, 1440, -2424.54443, -595.71997, 131.88649,   0.00000, -4.50000, 303.65921);
	CreateTrashCheckpoint(1, 1440, -2602.82544, -478.18484, 68.15035,   0.00000, 0.00000, 21.71607);
	CreateTrashCheckpoint(1, 1440, -2353.62256, -396.48764, 78.42006,   0.00000, -3.50000, 305.07410);
	CreateTrashCheckpoint(1, 1440, -2756.29199, -500.66721, 6.77589,   0.00000, 0.00000, 316.44635);
	CreateTrashCheckpoint(1, 1440, -2811.07056, -346.85269, 6.66456,   0.00000, 0.00000, 259.86459);
	CreateTrashCheckpoint(1, 1440, -2415.51563, -128.34013, 34.82273,   0.00000, 0.00000, 250.60507);
	CreateTrashCheckpoint(1, 1440, -2028.09985, -76.42242, 34.70956,   0.00000, 0.00000, 0.00000);
		//Ruta 2
	CreateTrashCheckpoint(2, 1440, -2193.88306, -2156.55347, 46.46848,   0.00000, -10.00000, 46.48320);
	CreateTrashCheckpoint(2, 1440, -2208.01904, -2280.10645, 30.12751,   0.00000, 0.00000, 331.91882);
	CreateTrashCheckpoint(2, 1440, -2125.33594, -2256.24902, 30.10599,   0.00000, 0.00000, 326.47290);
	CreateTrashCheckpoint(2, 1440, -2101.86353, -2313.20093, 30.14946,   0.00000, 0.00000, 42.68287);
	CreateTrashCheckpoint(2, 1440, -2183.69775, -2449.03003, 30.01783,   0.00000, 0.00000, 51.16318);
	CreateTrashCheckpoint(2, 1440, -2328.98047, -2704.17358, 44.41791,   6.17998, 5.88000, 340.20822);
	CreateTrashCheckpoint(2, 1440, -2601.78345, -2334.39746, 10.50614,   0.00000, 0.00000, 41.64481);
	
	//talador arboles
	Lumberjack_Area = CreateDynamicRectangle(-613.953796, -209.777252, -381.961181, -6.355076, 0, 0);
	for(new i = 0; i != sizeof LUMBER_TREES; i ++)
	{
		LUMBER_TREES[i][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[i][lumber_tree_MODELID], LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z], LUMBER_TREES[i][lumber_tree_RX], LUMBER_TREES[i][lumber_tree_RY], LUMBER_TREES[i][lumber_tree_RZ], 0, 0);
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{FFFFFF}Pulsa {f9d834}[ N ] {FFFFFF}para talar el árbol.", i);
		LUMBER_TREES[i][lumber_tree_LABEL] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z] + 1.5, 5.0, .testlos = false, .worldid = 0, .interiorid = 0);
	}
	
	//Agricultor
	Farmer_Area = CreateDynamicCircle(1461.8894, -83.2621, 65.0, 0, 0);
	CreateDynamicMapIcon(1461.8894, -83.2621, 65.0, 53, -1, 0, 0);
	CreateDynamic3DTextLabel("Usa {"#PRIMARY_COLOR"}/semillas {FFFFFF}para comprar semillas", 0xFFFFFFFF, 1566.521606, 31.370532, 24.16406, 5.0, .testlos = true, .worldid = 0, .interiorid = 0);
	
	//Cosechador
	Harvest_Area = CreateDynamicRectangle(-428.336059, -1667.658569, -116.565414, -1220.122070, 0, 0);
	return 1;
}

callbackp:UpdateFOPlayers()
{
	FO_SetValue((4 + random(7)));
	return 1;
}
	
LoadAntiCheatInfo()
{
	new File:AC = fopen("SERVER/AC.txt", io_read), ac_str[128], ac_num;
	if(AC)
	{
		while(fread(AC, ac_str))
		{
			if(ac_num >= sizeof(ac_Info)) break;
			sscanf(ac_str, "p<,>bbdd", ac_Info[ac_num][ac_Enabled], ac_Info[ac_num][ac_Kick], ac_Info[ac_num][ac_Detections], ac_Info[ac_num][ac_Interval]);
			ac_num ++;
		}
		fclose(AC);
	}
	return 1;
}

WriteAnticheatRules()
{
	new File:AC = fopen("SERVER/AC.txt", io_write), ac_str[128];
	if(AC)
	{
		for(new i = 0; i != sizeof(ac_Info); i ++)
		{
			format(ac_str, sizeof ac_str, "%d,%d,%d,%d\r\n", ac_Info[i][ac_Enabled], ac_Info[i][ac_Kick], ac_Info[i][ac_Detections], ac_Info[i][ac_Interval]);
			fwrite(AC, ac_str);
		}
		fclose(AC);
	}
	return 1;
}

ReLockPlayerVehicles(playerid, bool:remove = false)
{
	if(PI[playerid][pID] == 0) return 0;
	if(PI[playerid][pVIP]) return 0;
	
	inline OnQueryLoadedInline()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			for(new i = 0; i != rows; i ++)
			{
				if(i >= MAX_VIP_VEHICLES)
				{
					printf("---> MAX_VIP_VEHICLES superado al cargar de base de datos.");
					break;
				}

				new veh_did;
				cache_get_value_index_int(i, 0, veh_did);

				//
				new vehicle_id = GetPlayerVehicleIdFromDbId(veh_did);
				if(vehicle_id != INVALID_VEHICLE_ID)
				{
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = true;
					if(i >= MAX_NU_VEHICLES)
					{
						if(remove)
						{
							if(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_OCCUPIED])
							{
								SetVehicleVelocity(vehicle_id, 0.0, 0.0, 0.0);
								if(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) RemovePlayerFromVehicle(playerid);
							}
						}
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_ENGINE] = 0;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_LIGHTS] = 0;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = 1;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = false;
						UpdateVehicleParams(vehicle_id);
					}
				}
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM pvehicles WHERE id_player = %d ORDER BY id DESC LIMIT %d;", PI[playerid][pID], MAX_VIP_VEHICLES);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnQueryLoadedInline);
	return 1;
}

UnlockPlayerVehicles(playerid)
{
	new total;
	for(new i = 0; i != MAX_VEHICLES; i++)
	{
		if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		
		if(PLAYER_VEHICLES[i][player_vehicle_ID] == PI[playerid][pID])
		{
			if(total >= MAX_VIP_VEHICLES) break;
			
			PLAYER_VEHICLES[i][player_vehicle_ACCESSIBLE] = true;
		}
	}
	return total;
}

GetPlayerVehicleIdFromDbId(veh_did)
{
	for(new i = 0; i != MAX_VEHICLES; i++)
	{
		if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		
		if(PLAYER_VEHICLES[i][player_vehicle_ID] == veh_did) return i;
	}
	return INVALID_VEHICLE_ID;
}

CMD:vip(playerid, params[])
{
	if(PI[playerid][pVIP]) ShowDialog(playerid, DIALOG_VIP);
	else ShowDialog(playerid, DIALOG_VIP_BUY);
	return 1;
}

CMD:setcoins(playerid, params[])
{
	new to_playerid, sd;
	if(sscanf(params, "ud", to_playerid, sd)) return ErrorCommandParams(playerid, "/setcoins <player_id> <sd>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	PI[to_playerid][pCOINS] = sd;
	SendClientMessagef(to_playerid, -1, "Ahora tienes %d "SERVER_COIN".", sd);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d WHERE id = %d;", PI[to_playerid][pCOINS], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	new dc_message[445]; format(dc_message, 445, "ha establecido %d coins a %s (%d).", sd, PI[to_playerid][pNAME], to_playerid);
	SendCoinsLogMessage(playerid, dc_message);
	
	SendCmdLogToAdmins(playerid, "setcoins", params);
	return 1;
}

CMD:givecoins(playerid, params[])
{
	new to_playerid, sd;
	if(sscanf(params, "ud", to_playerid, sd)) return ErrorCommandParams(playerid, "/givecoins <player_id> <sd>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	PI[to_playerid][pCOINS] += sd;
	SendClientMessagef(to_playerid, -1, "{"#SILVER_COLOR"}Has comprado %d "SERVER_COIN".", sd);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d WHERE id = %d;", PI[to_playerid][pCOINS], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	new dc_message[445]; format(dc_message, 445, "recarga de %d coins a %s (%d).", sd, PI[to_playerid][pNAME], to_playerid);
	SendCoinsLogMessage(playerid, dc_message);
	
	SendCmdLogToAdmins(playerid, "givecoins", params);
	return 1;
}

CMD:setvip(playerid, params[])
{
	new to_playerid, set, days;
	if(sscanf(params, "udd", to_playerid, set, days)) return ErrorCommandParams(playerid, "/setvip <player_id> <set ? 1 : 0> <dias>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	SetPlayerVip(to_playerid, set, 0, days);
	
	SendCmdLogToAdmins(playerid, "setvip", params);
	return 1;
}

CheckPlayerSuperUser(playerid)
{
	if(PI[playerid][pVIP])
	{
		inline OnInfoQueryLoad()
		{
			new rows;
			if(cache_get_row_count(rows))
			{
				if(rows)
				{
					SetPlayerVip(playerid, 0, 0, 0); //Expirar
				}
				PlayerTemp[playerid][pt_LAST_VIP_CHECK] = gettime();
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE id = %d AND NOW() >= vip_expire_date;", PI[playerid][pID]);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	}
	return 1;
}

CMD:darskin(playerid, params[])
{
    new to_playerid, skin;
    if(sscanf(params, "ud", to_playerid, skin)) return ErrorCommandParams(playerid, "/setskin <player_id> <skin>");
    if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "Jugador desconectado");

	PI[to_playerid][pSKIN] = skin;
    SetPlayerSkin(to_playerid, PI[to_playerid][pSKIN]);
	
	SendClientMessagef(playerid, -1, "Skin '%s (%d)' cambiado a '%d'.", PI[to_playerid][pNAME], to_playerid, skin);
    return 1;
}
alias:darskin("setskin");

CMD:setfstyle(playerid, params[])
{
    new to_playerid, style;
    if(sscanf(params, "ud", to_playerid, style)) return ErrorCommandParams(playerid, "/setfstyle <player_id> <style>");
    if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "Jugador desconectado");

	PI[to_playerid][pFIGHT_STYLE] = style;
    SetPlayerFightingStyle(to_playerid, PI[to_playerid][pFIGHT_STYLE]);
	
	SendClientMessagef(playerid, -1, "FStyle '%s (%d)' cambiado a '%d'.", PI[to_playerid][pNAME], to_playerid, style);
    return 1;
}

CMD:ls(playerid, params[])
{
    new to_playerid;
    if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/ls <player_id>");
    if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	PI[to_playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
	PI[to_playerid][pLOCAL_INTERIOR] = 0;
	PlayerTemp[to_playerid][pt_INTERIOR_INDEX] = -1;
	PI[to_playerid][pINTERIOR] = 0;
	PI[to_playerid][pPOLICE_JAIL_TIME] = 0;
    SetPlayerPosEx(to_playerid, 1515.386840, -1666.298339, 14.046875, 270.0, 0, 0, true);
    SetPlayerCityWeather(to_playerid);
	SendClientMessagef(playerid, -1, "Jugador '%s (%d)' fue llevado a LS.", PI[to_playerid][pNAME], to_playerid);
    SendCmdLogToAdmins(playerid, "ls", params);
	return 1;
}

CMD:lsdb(playerid, params[])
{
	new to_account;
	if(sscanf(params, "d", to_account)) return ErrorCommandParams(playerid, "/osendls <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado utilice /ls, su player_id: %d.", name, id, pid);
				else
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET pos_x = 1515.386840, pos_y = -1666.298339, pos_z = 14.046875, angle = 270.0, state = %d, interior = 0, local_interior = 0, police_jail_time = 0 WHERE id = %d;", ROLEPLAY_STATE_NORMAL, to_account);
					mysql_tquery(handle_db, QUERY_BUFFER);
					SendClientMessagef(playerid, -1, "Jugador '%s' DB-ID '%d' ahora aparecerá en LS.", name, id);
				}
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	SendCmdLogToAdmins(playerid, "lsdb", params);
	return 1;
}

CMD:vpcar(playerid, params[])
{
	if(PI[playerid][pADMIN_LEVEL] < 5) return 0;
	
	new to_playerid, modelid;
	if(sscanf(params, "ud", to_playerid, modelid)) return ErrorCommandParams(playerid, "/vpcar <playerid> <modelid>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado.");
	if(modelid < 400 || modelid > 611) return SendClientMessagef(playerid, -1, "Modelo de vehículo no válido.");
	
	new pvehicles = CountPlayerVehicles(to_playerid);
	if(pvehicles >= MAX_VIP_VEHICLES) return SendClientMessagef(playerid, -1, "El jugador no puede tener más vehículos, su límite es %d.", MAX_VIP_VEHICLES);
	
	if(!PI[to_playerid][pVIP])
	{
		if(pvehicles >= MAX_NU_VEHICLES)
		{
			SendClientMessagef(playerid, -1, "El jugador no puede tener más vehículos, su límite es %d.", MAX_NU_VEHICLES);
			return 1;
		}
	}
	
	new Float:pos[4];
	GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	GetPlayerFacingAngle(to_playerid, pos[3]);
	
	new vid = AddPersonalVehicle
	(
		to_playerid,
		modelid,
		pos[0],
		pos[1],
		pos[2],
		pos[3],
		1,
		1,
		VEHICLE_INFO[ modelid - 400 ][vehicle_info_MAX_GAS]
	);
	if(!vid) return SendClientMessagef(playerid, -1, "No se pueden agregar más vehículos.");
	
	SendCmdLogToAdmins(playerid, "vpcar", params);
	return 1;
}

CMD:revivir(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/revivir <playerid>");
	
	if(PI[to_playerid][pSTATE] != ROLEPLAY_STATE_CRACK) return SendClientMessagef(playerid, -1, "Esta persona no está herida.");
	
	DisablePlayerInjuredMark(to_playerid);
	PI[to_playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
	SetWeaponsForPlayer(to_playerid);
	if(PI[to_playerid][pVIP]) SetPlayerHealthEx(to_playerid, 50.0);
	else SetPlayerHealthEx(to_playerid, 25.0);
	ApplyAnimation(to_playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(to_playerid);
	
	if(PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET] && PlayerTemp[to_playerid][pt_WORKING_IN] == WORK_POLICE) SetPlayerPosEx(to_playerid, 1555.400390, -1675.611694, 16.195312, 90.0, 0, 0);

	SendCmdLogToAdmins(playerid, "revivir", params);
	return 1;
}
alias:revivir("revive");

stock GetPlayerCameraLookAt(playerid, &Float:X, &Float:Y, &Float:Z)
{
    new Float:pos[6];
    GetPlayerCameraPos(playerid, pos[0], pos[1], pos[2]);
    GetPlayerCameraFrontVector(playerid, pos[3], pos[4], pos[5]);
    X = floatadd(pos[0], pos[3]);
    Y = floatadd(pos[1], pos[4]);
    Z = floatadd(pos[2], pos[5]);
    return 1;
}

SetVehicleVirtualWorldEx(vehicleid, worldid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD] = worldid;
	
	SetVehicleVirtualWorld(vehicleid, worldid);
	return 1;
}

FixTextDrawString(message[], bool:space = false) 
{
	for(new len = strlen(message), pos; pos < len; pos ++)
	{
		switch(message[pos])
		{
			case 'à': message[pos] = 151;
			case 'á': message[pos] = 152;
			case 'â': message[pos] = 153;
			case 'ä': message[pos] = 154;
			case 'À': message[pos] = 128;
			case 'Á': message[pos] = 129;
			case 'Â': message[pos] = 130;
			case 'Ä': message[pos] = 131;
			case 'è': message[pos] = 157;
			case 'é': message[pos] = 158;
			case 'ê': message[pos] = 159;
			case 'ë': message[pos] = 160;
			case 'È': message[pos] = 134;
			case 'É': message[pos] = 135;
			case 'Ê': message[pos] = 136;
			case 'Ë': message[pos] = 137;
			case 'ì': message[pos] = 161;
			case 'í': message[pos] = 162;
			case 'î': message[pos] = 163;
			case 'ï': message[pos] = 164;
			case 'Ì': message[pos] = 138;
			case 'Í': message[pos] = 139;
			case 'Î': message[pos] = 140;
			case 'Ï': message[pos] = 141;
			case 'ò': message[pos] = 165;
			case 'ó': message[pos] = 166;
			case 'ô': message[pos] = 167;
			case 'ö': message[pos] = 168;
			case 'Ò': message[pos] = 142;
			case 'Ó': message[pos] = 143;
			case 'Ô': message[pos] = 144;
			case 'Ö': message[pos] = 145;
			case 'ù': message[pos] = 169;
			case 'ú': message[pos] = 170;
			case 'û': message[pos] = 171;
			case 'ü': message[pos] = 172;
			case 'Ù': message[pos] = 146;
			case 'Ú': message[pos] = 147;
			case 'Û': message[pos] = 148;
			case 'Ü': message[pos] = 149;
			case 'ñ': message[pos] = 174;
			case 'Ñ': message[pos] = 173;
			case '¡': message[pos] = 64;
			case '¿': message[pos] = 175;
			case '`': message[pos] = 177;
			case '&': message[pos] = 38;
			case ' ': {
				if(space) {
					message[pos] = '_';
				}
			}
			default:  message[pos] = message[pos];
		}
	}
}

PlayerPlaySoundEx(playerid, sound, Float:X, Float:Y, Float:Z)
{
	if(PI[playerid][pCONFIG_SOUNDS]) PlayerPlaySound(playerid, sound, X, Y, Z);
	return 1;
}

stock PlayAudioStreamForPlayerEx(playerid, const url[], Float:posX = 0.0, Float:posY = 0.0, Float:posZ = 0.0, Float:distance = 50.0, usepos = 0)
{
	if(PI[playerid][pCONFIG_AUDIO]) PlayAudioStreamForPlayer(playerid, url, posX, posY, posZ, distance, usepos);
	return 1;
}

TogglePlayerControllableEx(playerid, bool:controllable)
{
	PlayerTemp[playerid][pt_CONTROL] = controllable;
	return TogglePlayerControllable(playerid, controllable);
}

IsPlayerInSafeZone(playerid)
{
	for(new i = 0; i != sizeof SAFE_ZONES; i ++)
	{
		if(IsPlayerInDynamicArea(playerid, SAFE_ZONES[i][safe_zone_AREA_ID]))
		{
			return true;
		}
	}
	return false;
}

SetPlayerVip(playerid, vip_level, price_coin = 0, days = 30)
{
	if(vip_level < 1)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET vip = 0, vip_expire_date = '0000-00-00 00:00:00' WHERE id = %d;", PI[playerid][pID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PI[playerid][pVIP] = false;
		PI[playerid][pVIP_EXPIRE_DATE][0] = EOS;
		SendClientMessagef(playerid, -1, "¡Tu VIP ha expirado! Usa /vip para comprar de nuevo.");
		ReLockPlayerVehicles(playerid, true);
		return 1;
	}
	
	vip_level = 2;
	PI[playerid][pCOINS] -= price_coin;
	PI[playerid][pVIP] = vip_level;

	inline OnInfoQueryLoad()
	{
		inline OnCountQueryLoad()
		{
			new rows;
			if(cache_get_row_count(rows))
			{
				if(rows)
				{
					cache_get_value_index(0, 0, PI[playerid][pVIP_EXPIRE_DATE]);
					SendClientMessagef(playerid, PRIMARY_COLOR2, "¡Felicidades! {FFFFFF}Has comprado membresia {"#GOLD_COLOR"}VIP{ffffff} por %d días, fecha de caducidad: {"#YELLOW_COLOR"}%s.", days, PI[playerid][pVIP_EXPIRE_DATE]);
					SendClientMessage(playerid, PRIMARY_COLOR2, "[*] {ffffff}Puedes utilizar {"#PURPLE_COLOR"}/vip {FFFFFF}para ver el tiempo restante o renovar.");
					UnlockPlayerVehicles(playerid);
				}
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vip_expire_date FROM player WHERE id = %d;", PI[playerid][pID]);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnCountQueryLoad);
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d, vip = %d, vip_expire_date = DATE_ADD(NOW(), INTERVAL %d DAY) WHERE id = %d;", PI[playerid][pCOINS], PI[playerid][pVIP], days, PI[playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

UpdateUnnocupiedPropertyLabel(index)
{
	if(!PROPERTY_INFO[index][property_VALID]) return 0;
	if(PROPERTY_INFO[index][property_SOLD]) return 0;
	
	new label_str[256];
	if(PROPERTY_INFO[index][property_VIP_LEVEL])
	{
		if(PROPERTY_INFO[index][property_EXTRA])
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{"#PRIMARY_COLOR"}Membresía VIP requerida\n\
					\n\
					{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
					{FFFFFF}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_LEVEL]
			);
		}
		else
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{"#PRIMARY_COLOR"}Membresía VIP requerida\n\
					\n\
					{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[index][property_PRICE]), PROPERTY_INFO[index][property_LEVEL]
			);
		}
	}
	else
	{
		if(PROPERTY_INFO[index][property_EXTRA])
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
					{FFFFFF}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_LEVEL]
			);
		}
		else
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{FFFFFF}Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{FFFFFF}Nivel: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[index][property_PRICE]), PROPERTY_INFO[index][property_LEVEL]
			);
		}
	}
	UpdateDynamic3DTextLabelText(PROPERTY_INFO[index][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
	return 1;
}


FreezePlayer(playerid, ms = 2000)
{
	TogglePlayerControllableEx(playerid, false);
	KillTimer(PlayerTemp[playerid][pt_TIMERS][3]);
	PlayerTemp[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", ms, false, "ib", playerid, true);
	return 1;
}

forward CarJackingFinish(playerid);
public CarJackingFinish(playerid)
{
	TogglePlayerControllableEx(playerid, true);
	return 1;
}

SendAdminAd(color, const text[])
{
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if((pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL || pTemp(i)[pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pCONFIG_ADMIN])
			{
				SendClientMessagef(i, color, text);
			}
		}
	}
	return 1;
}

#define MIN_SECONDS_BETWEEN_COMMANDS 1 // Deben pasar al menos 1 segundos entre comando y comando.
public OnPlayerCommandReceived(playerid, cmd[], params[], flags) 
{
	if(PlayerTemp[playerid][pt_KICKED]) return 0;
	
	if(PlayerTemp[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL)
	{
		SendMessage(playerid, "Ahora no puedes usar comandos.");
		return 0;
	}
	if(PlayerTemp[playerid][pt_SELECT_TEXTDRAW]) { SendMessage(playerid, "Ahora no puedes usar comandos, pulsa 'ESCAPE' para cerrar el menu."); return 0; }
	
	
	new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_ANTIFLOOD_COMMANDS]);
	if(interval < MIN_SECONDS_BETWEEN_COMMANDS)
	{
		if(ac_Info[CHEAT_COMMAND_SPAMMER][ac_Enabled])
		{
			if(gettime() > PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_IMMUNITY])
			{
				if(interval < 50)
				{
					if(!ac_Info[CHEAT_COMMAND_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_COMMAND_SPAMMER, float(interval));
					else
					{
						if(gettime() - PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_COMMAND_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if(PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_COMMAND_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_COMMAND_SPAMMER, float(interval));
					}
				}
			}
		}
		SendClientMessagef(playerid, -1, "Cálmate."); 
		return 0; 
	}
	
	if(flags)
	{
		if(flags == CMD_DISABLED)
		{
			SendClientMessagef(playerid, -1, "Este comando esta deshabilitado.");
			return 0;
		}

		if(flags > PI[playerid][pADMIN_LEVEL])
		{
			SendClientMessage(playerid, 0xFFFFFFFF, "SERVER: Unknown command."); 
			return 0;
		}
	}
	
	PlayerTemp[playerid][pt_ANTIFLOOD_COMMANDS] = GetTickCount();
	
	printf("[CMD] %s (%d): /%s %s", PI[playerid][pNAME], PI[playerid][pID], cmd, params);
	return 1;
}

public OnPlayerCommandPerformed(playerid, cmd[], params[], result, flags) 
{ 
    if(result == -1) 
    { 
		SendInfoMessagef(playerid, "Error~n~~n~El comando ~r~/%s~w~ no existe, para mas informacion, Escribe ~b~/ayuda~w~.", cmd);
        return 0;
    }
    return 1; 
}

SendMessageToDoubtChannel(playerid, message[], bool:resp = false)
{
	new str[445];
	if(!resp)
	{
		if(PI[playerid][pADMIN_LEVEL]) format(str, 445, "[OOC | Dudas] %s - %s (%d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PlayerTemp[playerid][pt_NAME], playerid, message);
		else format(str, 445, "[OOC | Dudas] Nivel: %d - %s (%d): %s", PI[playerid][pLEVEL], PlayerTemp[playerid][pt_NAME], playerid, message);
	}
	else
	{
		if(PI[playerid][pADMIN_LEVEL]) format(str, 445, "[OOC | Respuesta] %s - %s (%d): %s", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PlayerTemp[playerid][pt_NAME], playerid, message);
		else format(str, 445, "[OOC | Respuesta] Nivel: %d - %s (%d): %s", PI[playerid][pLEVEL], PlayerTemp[playerid][pt_NAME], playerid, message);
	}

	PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if((pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL || pTemp(i)[pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pDOUBT_CHANNEL])
			{
				SendClientMessage(i, BLUE_COLOR2, str);
			}
		}
	}
	return 1;
}

SendMessageToGlobalChannel(playerid, const message[])
{
	PlayerTemp[playerid][pt_GLOBAL_TIMER] = gettime();
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if((pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL || pTemp(i)[pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pCONFIG_GLOBAL])
			{
				SendClientMessagef(i, 0x229ED9FF, message);
			}
		}
	}
	return 1;
}

CMD:muteard(playerid, params[])
{
    new to_playerid, reason[128], time;
    if(sscanf(params, "uds[128]", to_playerid, time, reason)) return ErrorCommandParams(playerid, "/muteard <player_id> <minutos> <razon>");
	if(time < 0 || time > 1440) return SendClientMessagef(playerid, -1, "Intervalo de minutos incorrecto. Max: 1440");
    if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
    if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	if(gettime() < PI[to_playerid][pMUTE]) return SendClientMessagef(playerid, -1, "El jugador ya está muteado.");

	new seconds = time * 60;
	PI[to_playerid][pMUTE] = gettime() + seconds;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET mute = %d WHERE id = %d;", PI[to_playerid][pMUTE], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendClientMessagef(to_playerid, 0xCCCCCCCC, "Has sido silenciado del canal de dudas por %d minutos, razon: %s", time, reason);
	
	new str[445]; format(str, 445, "el %s %s (%d) silencio a %s (%d) del canal de dudas: %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
    SendAdminAd(0xFF0000FF, str);

	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' reason: '%s', time: '%d' minutes, channel: 'doubts') muteado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason, time);
	SendMuteLogMessage(playerid, dc_str);

	SendCmdLogToAdmins(playerid, "muteard", params);
	return 1;
}

CMD:mutearg(playerid, params[])
{
    new to_playerid, reason[128], time;
    if(sscanf(params, "uds[128]", to_playerid, time, reason)) return ErrorCommandParams(playerid, "/mutearg <player_id> <minutos> <razon>");
	if(time < 0 || time > 1440) return SendClientMessagef(playerid, -1, "Intervalo de minutos incorrecto. Max: 1440");
    if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
    if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	if(gettime() < PI[to_playerid][pGLOBAL_MUTE]) return SendClientMessagef(playerid, -1, "El jugador ya está muteado.");

	new seconds = time * 60;
	PI[to_playerid][pGLOBAL_MUTE] = gettime() + seconds;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET global_mute = %d WHERE id = %d;", PI[to_playerid][pGLOBAL_MUTE], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendClientMessagef(to_playerid, 0xCCCCCCCC, "Has sido silenciado del canal global por %d minutos, razon: %s", time, reason);
	
	new str[445]; format(str, 445, "el %s %s (%d) silencio a %s (%d) del canal global: %s.", ADMIN_LEVELS[ PI[playerid][pADMIN_LEVEL] ], PI[playerid][pNAME], playerid, PI[to_playerid][pNAME], to_playerid, reason);
    SendAdminAd(0xFF0000FF, str);

	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' reason: '%s', time: '%d' minutes, channel: 'global channel') muteado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid, reason, time);
	SendMuteLogMessage(playerid, dc_str);

	SendCmdLogToAdmins(playerid, "mutearg", params);
	return 1;
}

CMD:desmuteard(playerid, params[])
{
    new to_playerid;
    if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/desmuteard <player_id>");
    if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
    if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	if(gettime() > PI[to_playerid][pMUTE]) return SendClientMessagef(playerid, -1, "Este jugador no está silenciado.");
	
	PI[to_playerid][pMUTE] = 0;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET mute = %d WHERE id = %d;", PI[to_playerid][pMUTE], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendClientMessage(to_playerid, 0xCCCCCCCC, "Ya puedes volver a enviar dudas.");
	
	SendClientMessagef(playerid, 0xCCCCCCCC, "Jugador %s (%d) ha sido des-silenciado.", PI[to_playerid][pNAME], to_playerid);

	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' channel: 'doubts') des-muteado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid);
	SendMuteLogMessage(playerid, dc_str);

	SendCmdLogToAdmins(playerid, "desmuteard", params);
	return 1;
}

CMD:desmutearg(playerid, params[])
{
    new to_playerid;
    if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/desmutearg <player_id>");
    if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
    if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");

	if(gettime() > PI[to_playerid][pGLOBAL_MUTE]) return SendClientMessagef(playerid, -1, "Este jugador no está silenciado.");
	
	PI[to_playerid][pGLOBAL_MUTE] = 0;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET global_mute = %d WHERE id = %d;", PI[to_playerid][pGLOBAL_MUTE], PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendClientMessage(to_playerid, 0xCCCCCCCC, "Ya puedes volver a enviar mensajes en /tg o /atg.");
	
	SendClientMessagef(playerid, 0xCCCCCCCC, "Jugador %s (%d) ha sido des-silenciado.", PI[to_playerid][pNAME], to_playerid);

	new dc_str[445]; format(dc_str, 445, "Jugador (nick: '%s' dbid: '%d', id: '%d' channel: 'global channel') des-muteado.", PI[to_playerid][pNAME], PI[to_playerid][pID], to_playerid);
	SendMuteLogMessage(playerid, dc_str);

	SendCmdLogToAdmins(playerid, "desmutearg", params);
	return 1;
}

GetFreePoliceObjectSlot()
{
	for(new i = 0; i != MAX_POLICE_OBJECTS; i ++)
	{
		if(!POLICE_OBJECTS[i][police_object_VALID]) return i;
	}
	return -1;
}

CMD:removec(playerid, params[])
{
	new affected_objects;
	for(new i = 0; i != MAX_POLICE_OBJECTS; i ++)
	{
		if(!POLICE_OBJECTS[i][police_object_VALID]) continue;
		
		DestroyDynamicObject(POLICE_OBJECTS[i][police_object_OBJECT_ID]);
		POLICE_OBJECTS[i][police_object_VALID] = false;
		POLICE_OBJECTS[i][police_object_USER][0] = EOS;
		POLICE_OBJECTS[i][police_object_OBJECT_ID] = INVALID_STREAMER_ID;
		affected_objects ++;
	}
	
	SendClientMessagef(playerid, -1, "Se han eliminado todos los objetos policiales, %d objetos afectados.", affected_objects);
	SendCmdLogToAdmins(playerid, "removec", params);
	return 1;
}

CMD:abyc(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	new to_playerid, reason[128];
	if(sscanf(params, "us[128]", to_playerid, reason)) return SendClientMessagef(playerid, -1, "Error: /abyc [Playerid o nombre] [razon]");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado.");
	if(to_playerid == playerid) return 1;
	
	if(PlayerTemp[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No se puede agregar byc a este jugador ahora.");
	if(PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET]) return SendClientMessagef(playerid, -1, "No puedes agregar byc a este jugador porque es policía.");
	
	AddPlayerPoliceHistory(to_playerid, PI[playerid][pID], reason);
	SendClientMessagef(playerid, -1, "Se ha agregado el informe al historial policial de %s.", PlayerTemp[to_playerid][pt_NAME]);
	return 1;
}

CMD:dbyc(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	if(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 11) return SendClientMessagef(playerid, -1, "Debes ser al menos rango %s para colocar objetos policiales.", POLICE_RANKS[11]);
	
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return SendClientMessagef(playerid, -1, "Error: /dbyc [Playerid o nombre]");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado.");
	if(PlayerTemp[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendClientMessagef(playerid, -1, "No se puede eliminar el historial policial de este jugador ahora.");
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM police_history WHERE id_player = %d;", PI[to_playerid][pID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	SendClientMessagef(playerid, -1, "Has borrado el historial policial de %s.", PlayerTemp[to_playerid][pt_NAME]);
	return 1;
}


CMD:byc(playerid, params[])
{
	if(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendMessage(playerid, "No eres policía.");
	if(PlayerTemp[playerid][pt_WORKING_IN] != WORK_POLICE) return SendMessage(playerid, "No estás de servicio como policía.");
	
	ShowDialog(playerid, DIALOG_POLICE_BYC);
	return 1;
}

AddPlayerPoliceHistory(playerid, by_id, reason[])
{
	if(!PI[playerid][pID]) return 0;
	
	new date[24];
	getDateTime(date);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO police_history (id_player, by_id, text, date) VALUES (%d, %d, '%e', '%e');", PI[playerid][pID], by_id, reason, date);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

CMD:admac(playerid, params[])
{
	if(sscanf(params, "d", params[0])) return ErrorCommandParams(playerid, "/admac <nivel>");
	ADMIN_LEVEL_AC_IMMUNITY = params[0];
	
	SendClientMessagef(playerid, -1, "Admin level %d o mayor no sera detectado por ac.", ADMIN_LEVEL_AC_IMMUNITY);
	return 1;
}

CMD:cleanproperties(playerid, params[])
{
	new total;
	for(new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if(PROPERTY_INFO[i][property_SOLD])
		{
			PROPERTY_INFO[i][property_SOLD] = false;
			PROPERTY_INFO[i][property_OWNER_ID] = 0;
			format(PROPERTY_INFO[i][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[i][property_ID]);
			
			new label_str[256], info[3];
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					Propiedad {"#PRIMARY_COLOR"}#%d {FFFFFF}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{FFFFFF}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{FFFFFF}Usa {"#PRIMARY_COLOR"}/ayuda {FFFFFF}para ver como adquirirla.\
				", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]
			);
			UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
			
			DestroyDynamicPickup(PROPERTY_INFO[i][property_EXT_PICKUP_ID]);
			PROPERTY_INFO[i][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
			
			PROPERTY_INFO[i][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z], 0, PROPERTY_INFO[i][property_EXT_INTERIOR]);
			info[0] = PICKUP_TYPE_PROPERTY;
			info[1] = i; // Index
			info[2] = 2; // Pickup Exterior
			Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

			total ++;
		}
	}
	
	mysql_tquery(handle_db, "UPDATE properties SET id_player = NULL;");
	
	SendClientMessagef(playerid, -1, "Se han liberado todas las propiedades (%d).", total);
	
	SendCmdLogToAdmins(playerid, "cleanproperties", params);
	return 1;
}

CMD:countv(playerid, params[])
{
	if(sscanf(params, "u", params[0])) return ErrorCommandParams(playerid, "/countv <playerid>");
	SendClientMessagef(playerid, -1, "Vehicles: %d", CountPlayerVehicles(params[0]));
	return 1;
}

CMD:countp(playerid, params[])
{
	if(sscanf(params, "u", params[0])) return ErrorCommandParams(playerid, "/countp <playerid>");
	SendClientMessagef(playerid, -1, "Properties: %d", CountPlayerProperties(params[0]));
	return 1;
}

CMD:inumber(playerid, params[])
{
	if(sscanf(params, "d", params[0])) return ErrorCommandParams(playerid, "/inumber <numero>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, name[24], connected, pid;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				SendClientMessagef(playerid, -1, "PN: %d --- Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'", params[0], name, id, connected, pid);
			}
			else SendClientMessagef(playerid, -1, "No se encontro ningun resultado para ese numero.");
		}	
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid FROM player WHERE phone_number = %d LIMIT 1;", params[0]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:osetname(playerid, params[])
{
	new to_account, new_name[24];
	if(sscanf(params, "ds[20]", to_account, new_name)) return ErrorCommandParams(playerid, "/osetname <DB-ID> <name>");
	if(!IsValidRPName(new_name)) return SendClientMessagef(playerid, -1, "El nombre '%s' no cumple con el formato Nombre_Apellido.", new_name);

	inline OnNameChecked()
	{
		new crows;
		if(cache_get_row_count(crows))
		{
			if(crows) SendClientMessagef(playerid, -1, "El nombre %s está en uso", new_name);
			else
			{
				inline OnInfoQueryLoad()
				{
					new rows;
					if(cache_get_row_count(rows))
					{
						if(rows)
						{
							new id, ip[16], name[24], connected, pid, admin_level;
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name(0, "ip", ip);
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "admin_level", admin_level);

							if(PI[playerid][pADMIN_LEVEL] >= admin_level)
							{
								if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado utilice /setname, su player_id: %d.", name, id, pid);
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e' WHERE id = %d;", new_name, id);
									mysql_tquery(handle_db, QUERY_BUFFER);

									SendClientMessagef(playerid, -1, "El nombre de '%s' ahora es: %s", name, new_name);
								}
							}
							else SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
						}
						else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
				mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", new_name);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnNameChecked);
	return 1;
}

CMD:ogivecoins(playerid, params[])
{
	new to_account, amount;
	if(sscanf(params, "dd", to_account, amount)) return ErrorCommandParams(playerid, "/ogivecoins <DB-ID> <cantidad>");

	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			if(rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if(connected) SendClientMessagef(playerid, -1, "JUGADOR '%s' DB-ID '%d' conectado, player_id: %d, use /givecoins.", name, id, pid);
				else
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = coins + %d WHERE id = %d;", amount, id);
					mysql_tquery(handle_db, QUERY_BUFFER);
					SendClientMessagef(playerid, -1, "Le has dado %d "SERVER_COIN" a %s.", amount, name);
				}
			}
			else SendClientMessagef(playerid, -1, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:con(playerid, params[])
{
	new stats[400+1];
	GetNetworkStats(stats, sizeof(stats));
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Estadísticas del servidor", stats, "OK", "");
	return 1;
}

CMD:notifica(playerid, params[])
{
	if(isnull(params)) return SendClientMessagef(playerid, -1, "Uso: /notifica [cmd/adm/ac/chat]");

	switch(YHash(params, false))
	{
		case _I<cmd>:
		{
			PlayerTemp[playerid][pt_SEE_ACMD_LOG] ^= true;
			SendClientMessagef(playerid, -1, "Log de comandos %sactivado", PlayerTemp[playerid][pt_SEE_ACMD_LOG] ? ("") : ("des"));
		}
		case _I<adm>:
		{
			PlayerTemp[playerid][pt_SEE_ADM_LOG] ^= true;
			SendClientMessagef(playerid, -1, "Log admin general %sactivado", PlayerTemp[playerid][pt_SEE_ADM_LOG] ? ("") : ("des"));
		}
		case _I<ac>:
		{
			PlayerTemp[playerid][pt_SEE_AC_LOG] ^= true;
			SendClientMessagef(playerid, -1, "Log de anticheat %sactivado", PlayerTemp[playerid][pt_SEE_AC_LOG] ? ("") : ("des"));
		}
		case _I<chat>:
		{
			PlayerTemp[playerid][pt_SEE_ADM_CHAT] ^= true;
			SendClientMessagef(playerid, -1, "Chat admin %sactivado", PlayerTemp[playerid][pt_SEE_ADM_CHAT] ? ("") : ("des"));
		}
		default:
			SendClientMessagef(playerid, -1, "Uso: /notifica [cmd/log/ac/chat]");
	}

	return 1;
}

SetPlayerDrivingSchoolCP(playerid)
{
	if(IsValidDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]))
	{
		DestroyDynamicRaceCP(PlayerTemp[playerid][pt_DL_EXAM_CP]);
		PlayerTemp[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
	}

	if(PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] == sizeof(Driving_School_Points) - 1)
	{
		PlayerTemp[playerid][pt_DL_EXAM_CP] =	CreateDynamicRaceCP
												(
													1,
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][0],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][1],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][2],
													0.0,
													0.0,
													0.0,
													5.0, 
													0,
													0,
													playerid
												);
	}
	else
	{
		PlayerTemp[playerid][pt_DL_EXAM_CP] =	CreateDynamicRaceCP
												(
													0,
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][0],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][1],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] ][2],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] + 1][0],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] + 1][1],
													Driving_School_Points[ PlayerTemp[playerid][pt_DL_EXAM_PROCCESS] + 1][2],
													5.0, 
													0,
													0,
													playerid
												);
	}

	new info[1];
	info[0] = CHECKPOINT_TYPE_DRIVING_SCHOOL;
	Streamer_SetArrayData(STREAMER_TYPE_RACE_CP, PlayerTemp[playerid][pt_DL_EXAM_CP], E_STREAMER_EXTRA_ID, info);
	return 1;
}

CMD:changeflags(playerid, params[])
{
	new cmd[24], flags;
	if(sscanf(params, "s[24]d", cmd, flags)) return SendClientMessagef(playerid, -1, "Uso: /changeflags [cmd] [flags]");
	
	PC_SetFlags(cmd, flags);
	SendClientMessagef(playerid, -1, "Flag de /%s cambiada a %d", cmd, flags);
	return 1;
}

CMD:cobject(playerid, params[]) 
{
	new modelid;
	if(sscanf(params, "d", modelid)) return SendClientMessagef(playerid, -1, "Uso: /cobject [modelid]");

	new Float:pos[3];
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	new objectid = CreateDynamicObject(modelid, pos[0], pos[1], pos[2], 0.0, 0.0, 0.0);
	Streamer_SetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, {OBJECT_TYPE_TEST});
	Streamer_Update(playerid);
	EditDynamicObject(playerid, objectid);
	return 1;
}

CMD:selectobject(playerid, params[])
{
	SendClientMessagef(playerid, -1, "Entraste en seleccion de objetos");
	SelectObject(playerid);
	return 1;
}

CMD:std(playerid, params[]) 
{
	SelectTextDrawEx(playerid, 0xe8d08fFF);
	return 1;
}

CMD:historial(playerid, params[])
{	
	//
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/historial <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	if(PI[to_playerid][pADMIN_LEVEL] > PI[playerid][pADMIN_LEVEL]) return SendClientMessagef(playerid, -1, "El rango administrativo de este jugador es superior al tuyo.");
	if(!PI[to_playerid][pID]) return SendClientMessagef(playerid, -1, "DB ID = 0!");

	inline OnInfoQueryLoad()
	{
		new rows;
		if(cache_get_row_count(rows))
		{
			new caption[40], dialog[1600], line_str[256];
			format(caption, sizeof caption, "Bad historial de %s (%d)", PI[to_playerid][pNAME], to_playerid);
			format(dialog, sizeof dialog, "Por\tFecha\tTipo\tDescr.\n");
			if(rows)
			{
				for(new i = 0; i != rows; i ++)
				{
					new name[24], by, type, date[24], text[128], bool:isnull_by;
					cache_get_value_name(i, "name", name);
					cache_is_value_name_null(i, "by", isnull_by);
					if(!isnull_by) cache_get_value_name_int(i, "by", by);
					cache_get_value_name_int(i, "type", type);
					cache_get_value_name(i, "date", date);
					cache_get_value_name(i, "text", text);

					if(by == -1) name = "AC";
					switch(type)
					{
						case TYPE_WARNING: format(line_str, sizeof line_str, "%s\t%s\tAdv\t%s\n", name, date, text);
						case TYPE_KICK: format(line_str, sizeof line_str, "%s\t%s\tKick\t%s\n", name, date, text);
						case TYPE_BAN: format(line_str, sizeof line_str, "%s\t%s\tBan\t%s\n", name, date, text);
						case TYPE_TEMP_BAN: format(line_str, sizeof line_str, "%s\t%s\tTBan\t%s\n", name, date, text);
						case TYPE_UNBAN: format(line_str, sizeof line_str, "%s\t%s\tUnban\t%s\n", name, date, text);
					}
					strcat(dialog, line_str);
				}
			}
			else strcat(dialog, "Sin resultados");
			ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "X", "");
			SendClientMessagef(playerid, -1, "Limite: 20");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT bad_history.*, player.name FROM bad_history LEFT JOIN player ON bad_history.by = player.id WHERE bad_history.id_player = %d ORDER BY bad_history.date LIMIT 20;", PI[to_playerid][pID]);
	mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnInfoQueryLoad);
	return 1;
}

CMD:getversion(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/getversion <playerid>");
	if(!IsPlayerConnected(to_playerid)) return SendClientMessagef(playerid, -1, "Jugador desconectado");

	new player_version[32];
	GetPlayerVersion(to_playerid, player_version, sizeof player_version);

	SendClientMessagef(playerid, -1, "Jugador %s usa la version %s", PlayerTemp[to_playerid][pt_NAME], player_version);
	return 1;
}

CMD:arma(playerid, params[])
{
	new weaponid, ammo;
	if(sscanf(params, "dd", weaponid, ammo)) return SendClientMessagef(playerid, -1, "Uso: /arma [weaponid] [balas]");
	if(!WEAPON_INFO[weaponid][weapon_info_AMMO]) ammo = 1;
	
	GivePlayerWeaponEx(playerid, weaponid, ammo);
	RegisterNewPlayerWeapon(playerid, WEAPON_INFO[weaponid][weapon_info_SLOT]);
	return 1;
}

CMD:vehicles(playerid, params[])
{
	new to_playerid;
	if(sscanf(params, "u", to_playerid)) return ErrorCommandParams(playerid, "/vehicles <player_id>");
	if(!IsPlayerConnected(to_playerid)) return SendMessage(playerid, "Jugador desconectado");
	
	new dialog[115 * (MAX_VIP_VEHICLES + 2)], total_vehicles;
	format(dialog, sizeof dialog, "Vehículo\tMatrícula\tDistancia\n");
	for(new i = 0; i != MAX_VEHICLES; i ++)
	{
		if(!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if(!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		if(total_vehicles > MAX_VIP_VEHICLES) break;
		
		if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[to_playerid][pID])
		{
			
			new Float:pos[3];
			GetVehiclePos(i, pos[0], pos[1], pos[2]);
			
			new line_str[115];
			format(line_str, sizeof line_str, "{FFFFFF}%d. %s\t{FFFFFF}%s\t{"#SILVER_COLOR"}/gotoveh %d\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], i);
			strcat(dialog, line_str);
			total_vehicles ++;
		}
	}
	if(total_vehicles == 0) strcat(dialog, "{"#SILVER_COLOR"}El jugador no tiene vehiculos");
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, "Vehiculos", dialog, "Cerrar", "");
	return 1;
}
alias:vehicles("vehiculos");

//Ayudante
flags:duty(CMD_HELPER);
flags:muteard(CMD_HELPER);
flags:desmuteard(CMD_HELPER);
flags:mutearg(CMD_HELPER);
flags:desmutearg(CMD_HELPER);
flags:cls(CMD_HELPER);

//Mod-Ayudante
flags:admins(CMD_MODERATOR);
flags:inumber(CMD_MODERATOR);
flags:trabajos(CMD_MODERATOR);
flags:getid(CMD_MODERATOR);
flags:getname(CMD_MODERATOR);
flags:aka(CMD_MODERATOR);
flags:adv(CMD_MODERATOR);
flags:kick(CMD_MODERATOR);
flags:spec(CMD_MODERATOR);
flags:specoff(CMD_MODERATOR);
flags:freeze(CMD_MODERATOR);
flags:unfreeze(CMD_MODERATOR);
flags:jail(CMD_MODERATOR);
flags:unjail(CMD_MODERATOR);
flags:notifica(CMD_MODERATOR);
flags:ls(CMD_MODERATOR);
flags:pest(CMD_MODERATOR);
flags:pinv(CMD_MODERATOR);
flags:pexp(CMD_MODERATOR);
flags:parmas(CMD_MODERATOR);
flags:pbank(CMD_MODERATOR);
flags:traerveh(CMD_MODERATOR);
flags:gotoveh(CMD_MODERATOR);
flags:goto(CMD_MODERATOR);
flags:get(CMD_MODERATOR);
flags:pm(CMD_MODERATOR);
flags:tban(CMD_MODERATOR);
flags:dtban(CMD_MODERATOR);
flags:lsdb(CMD_MODERATOR);

//Moderador
flags:unban(CMD_GLOBAL_MODERATOR);
flags:dban(CMD_GLOBAL_MODERATOR);
flags:rac(CMD_GLOBAL_MODERATOR);
flags:rac2(CMD_GLOBAL_MODERATOR);
flags:rv(CMD_GLOBAL_MODERATOR);
flags:repairveh(CMD_GLOBAL_MODERATOR);
flags:revivir(CMD_GLOBAL_MODERATOR);
flags:removec(CMD_GLOBAL_MODERATOR);
flags:historial(CMD_GLOBAL_MODERATOR);
flags:getversion(CMD_GLOBAL_MODERATOR);
flags:ban(CMD_GLOBAL_MODERATOR);

//Administrador
flags:v(CMD_ADMINISTRATOR);
flags:dv(CMD_ADMINISTRATOR);
flags:givemod(CMD_ADMINISTRATOR);
flags:asay(CMD_ADMINISTRATOR);
flags:rproperty(CMD_ADMINISTRATOR);
flags:eproperty(CMD_ADMINISTRATOR);
flags:cproperty(CMD_ADMINISTRATOR);
flags:setwork(CMD_ADMINISTRATOR);
flags:setpass(CMD_ADMINISTRATOR);
flags:setnameplayer(CMD_ADMINISTRATOR);
flags:setnametemp(CMD_ADMINISTRATOR);
flags:givecashall(CMD_ADMINISTRATOR);
flags:ojet(CMD_ADMINISTRATOR);

//Desarrollador
flags:ip(CMD_OWNER);
flags:ac(CMD_OWNER);
flags:say(CMD_OWNER);
flags:sethealth(CMD_OWNER);
flags:setarmour(CMD_OWNER);
flags:setcoins(CMD_OWNER);
flags:setgas(CMD_OWNER);
flags:setthirst(CMD_OWNER);
flags:sethunger(CMD_OWNER);
flags:settime(CMD_OWNER);
flags:setweather(CMD_OWNER);
flags:setlevel(CMD_OWNER);
flags:setworkexp(CMD_OWNER);
flags:setcash(CMD_OWNER);
flags:givecash(CMD_OWNER);
flags:spos(CMD_OWNER);
flags:close(CMD_OWNER);
flags:setname(CMD_OWNER);
flags:exproperty(CMD_OWNER);
flags:gotoproperty(CMD_OWNER);
flags:osetname(CMD_OWNER);
flags:delete(CMD_OWNER);
flags:givecoins(CMD_OWNER);
flags:setvip(CMD_OWNER);
flags:darskin(CMD_OWNER);
flags:setfstyle(CMD_OWNER);
flags:vpcar(CMD_OWNER);
flags:admac(CMD_OWNER);
flags:cleanproperties(CMD_OWNER);
flags:ogivecoins(CMD_OWNER);
flags:con(CMD_OWNER);
flags:changeflags(CMD_OWNER);
flags:selectobject(CMD_OWNER);
flags:arma(CMD_OWNER);
flags:gpos(CMD_OWNER);
flags:cpos(CMD_OWNER);
flags:setwlevel(CMD_OWNER);
flags:sound(CMD_OWNER);
flags:anim(CMD_OWNER);
flags:anmindex(CMD_OWNER);
flags:cobject(CMD_OWNER);
flags:rep(CMD_OWNER);
flags:repall(CMD_OWNER);
flags:setfdrum(CMD_OWNER);

getPhoneNumber(dbid)
{
	new number_str[24];
	format(number_str, sizeof number_str, "%d%04d", random(999), dbid);
	return strval(number_str);
}

getBankAccountNumber(dbid)
{
	new number_str[24];
	format(number_str, sizeof number_str, "%d%04d", random(999), dbid);
	return strval(number_str);
}

SetPiDefaultValues(playerid)
{
	new tmp_PI[enum_PI];
	PI[playerid] = tmp_PI;

	new date[24];
	getDateTime(date);

	GetPlayerIp(playerid, PI[playerid][pIP], 16);
	format(PI[playerid][pNAME], 24, "%s", PlayerTemp[playerid][pt_NAME]);
	format(PI[playerid][pLAST_CONNECTION], 24, "%s", date);
	format(PI[playerid][pREG_DATE], 24, "%s", date);
	PI[playerid][pLAST_CONNECTION_TIMESTAMP] = gettime();
	PI[playerid][pLEVEL] = 1;
	PI[playerid][pREP] = 1;
	PI[playerid][pCONNECTED] = 1;
	PI[playerid][pPLAYERID] = playerid;
	PI[playerid][pTIME_FOR_REP] = TIME_FOR_REP;
	PI[playerid][pSKIN] = 250;
	PI[playerid][pCASH] = 15000;
	PI[playerid][pCOINS] = 0;
	PI[playerid][pPOS_X] = New_User_Pos[0];
	PI[playerid][pPOS_Y] = New_User_Pos[1];
	PI[playerid][pPOS_Z] = New_User_Pos[2];
	PI[playerid][pANGLE] = New_User_Pos[3];
	PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
	PI[playerid][pFIGHT_STYLE] = 4;
	PI[playerid][pHEALTH] = 100.0;
	PI[playerid][pARMOUR] = 0.0;
	PI[playerid][pHUNGRY] = 100.0;
	PI[playerid][pTHIRST] = 100.0;
	PI[playerid][pCONFIG_SOUNDS] = 1;
	PI[playerid][pCONFIG_AUDIO] = 1;
	PI[playerid][pCONFIG_ADMIN] = 1;
	PI[playerid][pPHONE_VISIBLE_NUMBER] = 1;
	PI[playerid][pDOUBT_CHANNEL] = 1;
	pInfo(playerid)[pCONFIG_GLOBAL] = 1;
	return 1;
}

getDateTime(string[])
{
	new 
		Year, Month, Day,
		Hour, Minute, Second
	;
	getdate(Year, Month, Day);
	gettime(Hour, Minute, Second);
	
	format(string, 24, "%04d-%02d-%02d %02d:%02d:%02d", Year, Month, Day, Hour, Minute, Second);
	return 1;
}

callbackp:OnChangePasswordCheck(playerid, bool:success)
{
	if(success)
	{
		ShowDialog(playerid, DIALOG_CHANGE_PASSWORD_PASS);
		PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
	}
	else // Error
	{
		PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] ++;
		if(PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
		SendMessagef(playerid, "clave incorrecta, aviso %d/%d.", PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP], MAX_BAD_LOGIN_ATTEMPS);
	}
	return 1;
}

callbackp:OnChangePasswordHash(playerid)
{
	bcrypt_get_hash(PI[playerid][pPASS]);
	SendMessage(playerid, "Tu clave se ha cambiado correctamente.");
	return 1;
}

callbackp:OnPlayerRegisterPassword(playerid)
{
	bcrypt_get_hash(PI[playerid][pPASS]);
	ShowDialog(playerid, DIALOG_EMAIL);
	return 1;
}

public OnPlayerRegister(playerid)
{
	if(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] != -1) 
	{
		KillTimer(PlayerTemp[playerid][pt_LOGIN_KICK_TIMER]);
		PlayerTemp[playerid][pt_LOGIN_KICK_TIMER] = -1;
	}
	PlayerTemp[playerid][pt_USER_LOGGED] = true;

	TogglePlayerSpectatingEx(playerid, false);
	StopAudioStreamForPlayer(playerid);
	ClearPlayerChat(playerid);
	TogglePlayerControllable(playerid, false);

	SendClientMessagef(playerid, PRIMARY_COLOR2, "{ffffff}Bienvenido {"#BLUE_COLOR"}%s, {ffffff}gracias por jugar en {"#GOLD_COLOR"}"SERVER_NAME".", PlayerTemp[playerid][pt_NAME]);
	SendClientMessagef(playerid, PRIMARY_COLOR2, "{ffffff}Si necesitas ayuda puedes utilizar el comando {"#PURPLE_COLOR"}/ayuda {ffffff}o puedes usar el canal de dudas.");

	SendClientMessageToAllf(0x229ED9FF, "[Telegram] • {ffffff}#{2AABEE}%s {ffffff}(%d) %s", PlayerTemp[playerid][pt_NAME], playerid, Welcome_Messages[ random(sizeof(Welcome_Messages)) ]);
	return 1;
}

callbackp:OnPlayerLoginCheckPass(playerid, bool:success)
{
	if(success)
	{
		inline OnPlayerDataLoad()
		{
			new rows;
			if(cache_get_row_count(rows))
			{
				if(rows)
				{
					new bool:isnull_crew;
					cache_get_value_name(0, "reg_date", PI[playerid][pREG_DATE], 24);
					cache_get_value_name(0, "last_connection", PI[playerid][pLAST_CONNECTION], 24);
					cache_get_value_name_int(0, "last_connection_timestamp", PI[playerid][pLAST_CONNECTION_TIMESTAMP]);
					cache_get_value_name_int(0, "time_playing", PI[playerid][pTIME_PLAYING]);
					cache_get_value_name_int(0, "level", PI[playerid][pLEVEL]);
					cache_get_value_name_int(0, "rep", PI[playerid][pREP]);
					cache_get_value_name_int(0, "doubt_channel", PI[playerid][pDOUBT_CHANNEL]);
					cache_get_value_name_int(0, "time_for_rep", PI[playerid][pTIME_FOR_REP]);
					cache_get_value_name_int(0, "admin_level", PI[playerid][pADMIN_LEVEL]);
					cache_get_value_name_int(0, "payday_rep", PI[playerid][pPAYDAY_REP]);
					cache_get_value_name_int(0, "vip", PI[playerid][pVIP]);
					cache_get_value_name(0, "vip_expire_date", PI[playerid][pVIP_EXPIRE_DATE], 24);
					cache_get_value_name_int(0, "coins", PI[playerid][pCOINS]);
					cache_get_value_name_int(0, "skin", PI[playerid][pSKIN]);
					cache_get_value_name_int(0, "cash", PI[playerid][pCASH]);
					cache_get_value_name_float(0, "pos_x", PI[playerid][pPOS_X]);
					cache_get_value_name_float(0, "pos_y", PI[playerid][pPOS_Y]);
					cache_get_value_name_float(0, "pos_z", PI[playerid][pPOS_Z]);
					cache_get_value_name_float(0, "angle", PI[playerid][pANGLE]);
					cache_get_value_name_int(0, "state", PI[playerid][pSTATE]);
					cache_get_value_name_int(0, "interior", PI[playerid][pINTERIOR]);
					cache_get_value_name_int(0, "local_interior", PI[playerid][pLOCAL_INTERIOR]);
					cache_get_value_name_int(0, "fight_style", PI[playerid][pFIGHT_STYLE]);
					cache_get_value_name_float(0, "health", PI[playerid][pHEALTH]);
					cache_get_value_name_float(0, "armour", PI[playerid][pARMOUR]);
					cache_get_value_name_int(0, "gender", PI[playerid][pGENDER]);
					cache_get_value_name_float(0, "hungry", PI[playerid][pHUNGRY]);
					cache_get_value_name_float(0, "thirst", PI[playerid][pTHIRST]);
					cache_get_value_name_int(0, "wanted_level", PI[playerid][pWANTED_LEVEL]);
					cache_get_value_name_int(0, "police_jail_time", PI[playerid][pPOLICE_JAIL_TIME]);
					cache_get_value_name_int(0, "police_duty", PI[playerid][pPOLICE_DUTY]);
					cache_get_value_name_int(0, "police_jail_id", PI[playerid][pPOLICE_JAIL_ID]);
					cache_get_value_name_int(0, "drive_license_points", PI[playerid][pDRIVE_LICENSE_POINTS]);
					cache_get_value_name_int(0, "bank_account", PI[playerid][pBANK_ACCOUNT]);
					cache_get_value_name_int(0, "bank_money", PI[playerid][pBANK_MONEY]);
					cache_get_value_name_int(0, "phone_number", PI[playerid][pPHONE_NUMBER]);
					cache_get_value_name_int(0, "phone_state", PI[playerid][pPHONE_STATE]);
					cache_get_value_name_int(0, "phone_visible_number", PI[playerid][pPHONE_VISIBLE_NUMBER]);
					cache_get_value_name_int(0, "gps", PI[playerid][pGPS]);
					cache_get_value_name_int(0, "phone_resolver", PI[playerid][pPHONE_RESOLVER]);
					cache_get_value_name_int(0, "mechanic_pieces", PI[playerid][pMECHANIC_PIECES]);
					cache_get_value_name_int(0, "fuel_drum", PI[playerid][pFUEL_DRUM]);
					cache_get_value_name_int(0, "seed_medicine", PI[playerid][pSEED_MEDICINE]);
					cache_get_value_name_int(0, "seed_cannabis", PI[playerid][pSEED_CANNABIS]);
					cache_get_value_name_int(0, "seed_crack", PI[playerid][pSEED_CRACK]);
					cache_get_value_name_int(0, "medicine", PI[playerid][pMEDICINE]);
					cache_get_value_name_int(0, "cannabis", PI[playerid][pCANNABIS]);
					cache_get_value_name_int(0, "crack", PI[playerid][pCRACK]);
					cache_get_value_name_int(0, "config_sounds", PI[playerid][pCONFIG_SOUNDS]);
					cache_get_value_name_int(0, "config_audio", PI[playerid][pCONFIG_AUDIO]);
					cache_get_value_name_int(0, "config_admin", PI[playerid][pCONFIG_ADMIN]);
					cache_get_value_name_int(0, "mute", PI[playerid][pMUTE]);
					cache_get_value_name_int(0, "placa_pd", PI[playerid][pPLACA_PD]);
					cache_is_value_name_null(0, "crew", isnull_crew);
					if(!isnull_crew) cache_get_value_name_int(0, "crew", PI[playerid][pCREW]);
					cache_get_value_name_int(0, "crew_rank", PI[playerid][pCREW_RANK]);
					cache_get_value_name_int(0, "mechanic_kits", PI[playerid][pMECHANIC_KITS]);
					cache_get_value_name_int(0, "medical_kits", PI[playerid][pMEDICAL_KITS]);
					cache_get_value_name_int(0, "global_channel", PI[playerid][pCONFIG_GLOBAL]);
					cache_get_value_name_int(0, "global_mute", PI[playerid][pGLOBAL_MUTE]);
					cache_get_value_name_int(0, "black_cash", PI[playerid][pBLACK_CASH]);
					cache_get_value_name(0, "discord_userid", PI[playerid][pDISCORD_USERID]);
					if(strlen(PI[playerid][pDISCORD_USERID]) <= 0) format(PI[playerid][pDISCORD_USERID], DCC_ID_SIZE, "");
					cache_get_value_name(0, "pharmacy_timer", PI[playerid][pPHARMACY_TIMER]);
					CallLocalFunction("OnPlayerLogin", "i", playerid);
				}
				else Kick(playerid);
			}
			else Kick(playerid);
		}
		SendMessage(playerid, "Cargando datos...");
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM player WHERE id = %d;", PI[playerid][pID]);
		mysql_tquery_inline(handle_db, QUERY_BUFFER, using inline OnPlayerDataLoad);
	}
	else // Error
	{
		PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] ++;
		if(PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
		ShowDialog(playerid, DIALOG_LOGIN);
	}
	return 1;
}

public OnPlayerLogin(playerid)
{
	PlayerTemp[playerid][pt_USER_LOGGED] = true;

	LoadPlayerVehicles(playerid);
	LoadPlayerPhoneBook(playerid);
	LoadPlayerGPSData(playerid);
	LoadPlayerWeaponsData(playerid);
	LoadPlayerWorks(playerid);
	LoadPlayerCrewInfo(playerid);
	LoadPlayerPockets(playerid);

	SetPlayerScore(playerid, PI[playerid][pLEVEL]);
	PlayerTemp[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
	PlayerTemp[playerid][pt_GLOBAL_TIMER] = gettime();
	ResetPlayerWeapons(playerid);
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pCASH]);
	SetPlayerFightingStyle(playerid, PI[playerid][pFIGHT_STYLE]);
	SetPlayerHealthEx(playerid, PI[playerid][pHEALTH]);
	SetPlayerArmourEx(playerid, PI[playerid][pARMOUR]);
	SetPlayerVirtualWorld(playerid, 0);
	StopAudioStreamForPlayer(playerid);
	CancelSelectTextDrawEx(playerid);
	PlayerTemp[playerid][pt_PICKUP_TIMER] = gettime();
	pTemp(playerid)[pt_GIVECASHALL_TIME] = gettime();

	PlayerTemp[playerid][pt_INJURED_POS][0] = PI[playerid][pPOS_X];
	PlayerTemp[playerid][pt_INJURED_POS][1] = PI[playerid][pPOS_Y];
	PlayerTemp[playerid][pt_INJURED_POS][2] = PI[playerid][pPOS_Z];
	PlayerTemp[playerid][pt_INJURED_POS][3] = PI[playerid][pANGLE];
	
	SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pSKIN], PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE], 0, 0, 0, 0, 0, 0);
	SetPlayerInterior(playerid, PI[playerid][pINTERIOR]);
	
	PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
	SendClientMessagef(playerid, PRIMARY_COLOR2, "[*]{ffffff} Bienvenido {"#BLUE_COLOR"}%s.{ffffff} Tu ultima conexion fue el {"#GOLD_COLOR"}%s.", PlayerTemp[playerid][pt_NAME], PI[playerid][pLAST_CONNECTION]);

    TogglePlayerSpectatingEx(playerid, false);
	TogglePlayerControllableEx(playerid, false);
	return 1;
}

callbackp:OnChangeNamePassCheck(playerid, bool:success)
{
	if(success)
	{
		ShowDialog(playerid, DIALOG_CHANGE_NAME_NAME);
		PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
	}
	else // Error
	{
		PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] ++;
		if(PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
		SendClientMessagef(playerid, -1, "clave incorrecta, aviso %d/%d.", PlayerTemp[playerid][pt_BAD_LOGIN_ATTEMP], MAX_BAD_LOGIN_ATTEMPS);
	}
	return 1;
}

callbackp:OnSetPassChange(playerid, id, name[], new_pass[])
{
	new pass[64 + 1];
	bcrypt_get_hash(pass);

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET pass = '%e' WHERE id = %d;", pass, id);
	mysql_tquery(handle_db, QUERY_BUFFER);

	SendMessagef(playerid, "La clave de '%s' ahora es: %s", name, new_pass);
	return 1;
}

stock IsPlayerLoggedIn(playerid)
{
	return PlayerTemp[playerid][pt_USER_LOGGED];
}

stock IsPlayerRegistered(playerid)
{
	return PlayerTemp[playerid][pt_USER_EXIST];
}

stock IsPlayerWork(playerid, work)
{
	if(PLAYER_WORKS[playerid][work][pwork_SET]) return 1;
	else
	{
		return 0;
	}
}

stock GetPlayerWorking(playerid)
{
	return PlayerTemp[playerid][pt_WORKING_IN];
}

UpdatePlayerWorldInfo(playerid)
{
	if(PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_DEAD || PlayerTemp[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		//health armour
		//GetPlayerHealth(playerid, PI[playerid][pHEALTH]);
		GetPlayerArmour(playerid, PI[playerid][pARMOUR]);
		if(PI[playerid][pHEALTH] <= 0.0) PI[playerid][pHEALTH] = 1.0;
		if(PI[playerid][pHEALTH] > 100.0) PI[playerid][pHEALTH] = 100.0;
		if(PI[playerid][pARMOUR] > 100.0) PI[playerid][pARMOUR] = 100.0;

		//world
		switch(PI[playerid][pSTATE])
		{
			case ROLEPLAY_STATE_INTERIOR:
			{
				new index = GetEnterExitIndexById(PI[playerid][pLOCAL_INTERIOR]);
				if(index == -1)
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = New_User_Pos[0];
					PI[playerid][pPOS_Y] = New_User_Pos[1];
					PI[playerid][pPOS_Z] = New_User_Pos[2];
					PI[playerid][pANGLE] = New_User_Pos[3];
					PI[playerid][pINTERIOR] = 0;
				}
				else
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = ENTER_EXIT[index][ee_EXT_X];
					PI[playerid][pPOS_Y] = ENTER_EXIT[index][ee_EXT_Y];
					PI[playerid][pPOS_Z] = ENTER_EXIT[index][ee_EXT_Z];
					PI[playerid][pANGLE] = ENTER_EXIT[index][ee_EXT_ANGLE];
					PI[playerid][pINTERIOR] = ENTER_EXIT[index][ee_EXT_INTERIOR];
				}
			}
			case ROLEPLAY_STATE_OWN_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
				if(index == -1)
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = New_User_Pos[0];
					PI[playerid][pPOS_Y] = New_User_Pos[1];
					PI[playerid][pPOS_Z] = New_User_Pos[2];
					PI[playerid][pANGLE] = New_User_Pos[3];
					PI[playerid][pINTERIOR] = 0;
				}
				else
				{
					if(PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pID])
					{
						PI[playerid][pPOS_X] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_X];
						PI[playerid][pPOS_Y] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Y];

						new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Z];
						
						PI[playerid][pPOS_Z] = z_pos;

						PI[playerid][pANGLE] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_ANGLE];
						PI[playerid][pINTERIOR] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR];
					}
					else
					{
						PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
						PI[playerid][pLOCAL_INTERIOR] = 0;
						PI[playerid][pPOS_X] = PROPERTY_INFO[index][property_EXT_X];
						PI[playerid][pPOS_Y] = PROPERTY_INFO[index][property_EXT_Y];
						PI[playerid][pPOS_Z] = PROPERTY_INFO[index][property_EXT_Z];
						PI[playerid][pANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
						PI[playerid][pINTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
					}
				}
			}
			case ROLEPLAY_STATE_GUEST_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pLOCAL_INTERIOR]);
				if(index == -1)
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = New_User_Pos[0];
					PI[playerid][pPOS_Y] = New_User_Pos[1];
					PI[playerid][pPOS_Z] = New_User_Pos[2];
					PI[playerid][pANGLE] = New_User_Pos[3];
					PI[playerid][pINTERIOR] = 0;
				}
				else
				{
					PI[playerid][pSTATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pLOCAL_INTERIOR] = 0;
					PI[playerid][pPOS_X] = PROPERTY_INFO[index][property_EXT_X];
					PI[playerid][pPOS_Y] = PROPERTY_INFO[index][property_EXT_Y];
					PI[playerid][pPOS_Z] = PROPERTY_INFO[index][property_EXT_Z];
					PI[playerid][pANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
					PI[playerid][pINTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
				}
			}
			case ROLEPLAY_STATE_JAIL:
			{
				PI[playerid][pPOS_X] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_X];
				PI[playerid][pPOS_Y] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_Y];
				PI[playerid][pPOS_Z] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_Z];
				PI[playerid][pANGLE] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID] ][jail_ANGLE];
				PI[playerid][pINTERIOR] = JAIL_POSITIONS[ PI[playerid][pPOLICE_JAIL_ID]  ][jail_INTERIOR];
			}
			default:
			{
				GetPlayerPos(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
				GetPlayerFacingAngle(playerid, PI[playerid][pANGLE]);
				PI[playerid][pINTERIOR] = GetPlayerInterior(playerid);
			}
		}
		return 1;
	}
	return 0;
}

SavePlayerData(playerid)
{
	if(PI[playerid][pID])
	{
		new tmp_crew[24], tmp_vip_expire_date[24];
		
		tmp_crew = "NULL";
		if(PI[playerid][pCREW]) format(tmp_crew, sizeof tmp_crew, "%d", PI[playerid][pCREW]);

		tmp_vip_expire_date = "'0000-00-00 00:00:00'";
		if(strlen(PI[playerid][pVIP_EXPIRE_DATE]) > 3) format(tmp_vip_expire_date, sizeof tmp_vip_expire_date, "'%s'", PI[playerid][pVIP_EXPIRE_DATE]);

		mysql_format
		(
			handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
			"\
				UPDATE player SET \
					name = '%e',\
					ip = '%e',\
					email = '%e',\
					pass = '%e',\
					reg_date = '%e',\
					last_connection = '%e',\
					last_connection_timestamp = %d,\
					time_playing = %d,\
					level = %d,\
					rep = %d,\
					connected = %d,\
					playerid = %d,\
					doubt_channel = %d,\
					time_for_rep = %d,\
					admin_level = %d,\
					payday_rep = %d,\
					vip = %d,\
					vip_expire_date = %s,\
					skin = %d,\
					cash = %d,\
					pos_x = %f,\
					pos_y = %f,\
					pos_z = %f,\
					angle = %f,\
					state = %d,\
					interior = %d,\
					local_interior = %d,\
					fight_style = %d,\
					health = %f,\
					armour = %f,\
					gender = %d,\
					hungry = %f,\
					thirst = %f,\
					wanted_level = %d,\
					police_jail_time = %d,\
					police_duty = %d,\
					police_jail_id = %d,\
					drive_license_points = %d,\
					bank_account = %d,\
					bank_money = %d,\
					phone_number = %d,\
					phone_state = %d,\
					phone_visible_number = %d,\
					gps = %d,\
					phone_resolver = %d,\
					mechanic_pieces = %d,\
					fuel_drum = %d,\
					seed_medicine = %d,\
					seed_cannabis = %d,\
					seed_crack = %d,\
					medicine = %d,\
					cannabis = %d,\
					crack = %d,\
					config_sounds = %d,\
					config_audio = %d,\
					config_admin = %d,\
					mute = %d,\
					placa_pd = %d,\
					crew = %s,\
					crew_rank = %d,\
					mechanic_kits = %d,\
					medical_kits = %d,\
					global_channel = %d,\
					global_mute = %d,\
					black_cash = %d,\
					discord_userid = '%e',\
					pharmacy_timer = %d \
				WHERE id = %d;\
			",
				PI[playerid][pNAME], PI[playerid][pIP], PI[playerid][pEMAIL], PI[playerid][pPASS], PI[playerid][pREG_DATE], PI[playerid][pLAST_CONNECTION],
				PI[playerid][pLAST_CONNECTION_TIMESTAMP], PI[playerid][pTIME_PLAYING], PI[playerid][pLEVEL], PI[playerid][pREP], PI[playerid][pCONNECTED], PI[playerid][pPLAYERID],
				PI[playerid][pDOUBT_CHANNEL], PI[playerid][pTIME_FOR_REP], PI[playerid][pADMIN_LEVEL], PI[playerid][pPAYDAY_REP], PI[playerid][pVIP], tmp_vip_expire_date,
				PI[playerid][pSKIN], PI[playerid][pCASH], PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], PI[playerid][pANGLE],
				PI[playerid][pSTATE], PI[playerid][pINTERIOR], PI[playerid][pLOCAL_INTERIOR], PI[playerid][pFIGHT_STYLE], PI[playerid][pHEALTH], PI[playerid][pARMOUR], PI[playerid][pGENDER],
				PI[playerid][pHUNGRY], PI[playerid][pTHIRST], PI[playerid][pWANTED_LEVEL], PI[playerid][pPOLICE_JAIL_TIME], PI[playerid][pPOLICE_DUTY],
				PI[playerid][pPOLICE_JAIL_ID], PI[playerid][pDRIVE_LICENSE_POINTS], PI[playerid][pBANK_ACCOUNT], PI[playerid][pBANK_MONEY], PI[playerid][pPHONE_NUMBER],
				PI[playerid][pPHONE_STATE], PI[playerid][pPHONE_VISIBLE_NUMBER], PI[playerid][pGPS], PI[playerid][pPHONE_RESOLVER], PI[playerid][pMECHANIC_PIECES], 
				PI[playerid][pFUEL_DRUM], PI[playerid][pSEED_MEDICINE], PI[playerid][pSEED_CANNABIS], PI[playerid][pSEED_CRACK], PI[playerid][pMEDICINE],
				PI[playerid][pCANNABIS], PI[playerid][pCRACK], PI[playerid][pCONFIG_SOUNDS], PI[playerid][pCONFIG_AUDIO],
				PI[playerid][pCONFIG_ADMIN], PI[playerid][pMUTE], PI[playerid][pPLACA_PD], tmp_crew, PI[playerid][pCREW_RANK],
				PI[playerid][pMECHANIC_KITS], PI[playerid][pMEDICAL_KITS], PI[playerid][pCONFIG_GLOBAL], PI[playerid][pGLOBAL_MUTE], 
				PI[playerid][pBLACK_CASH], PI[playerid][pDISCORD_USERID], PI[playerid][pPHARMACY_TIMER],
				PI[playerid][pID]
		);
		mysql_tquery(handle_db, QUERY_BUFFER);
		return 1;
	}
	return 0;
}

CountPlayerVehicles(playerid)
{
	new count;
	if(PI[playerid][pID])
	{
		for(new i = 0; i < MAX_VEHICLES; i ++)
		{
			if(PLAYER_VEHICLES[i][player_vehicle_VALID])
			{
				if(PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pID])
				{
					count ++;
					if(count >= MAX_VIP_VEHICLES)
					{
						break;
					}
				}
			}
		}
	}
	return count;
}

CountPlayerProperties(playerid)
{
	new count;
	if(PI[playerid][pID])
	{
		for(new i = 0; i < MAX_PROPERTIES; i ++)
		{
			if(PROPERTY_INFO[i][property_VALID])
			{
				if(PROPERTY_INFO[i][property_SOLD] && PROPERTY_INFO[i][property_OWNER_ID] == PI[playerid][pID])
				{
					count ++;
					if(count >= MAX_VIP_PROPERTIES)
					{
						break;
					}
				}
			}
		}
	}
	return count;
}

SavePlayerWorkLevels(playerid)
{
	if(!PI[playerid][pID]) return 0;
	
	for(new i = 0; i != sizeof work_info; i ++)
	{
		if(!PLAYER_WORKS[playerid][i][pwork_SET] || !i) continue;
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", PLAYER_WORKS[playerid][i][pwork_LEVEL], PI[playerid][pID], i);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

#define PlayerTask_Interval_Seconds 10
ptask PlayerTask[PlayerTask_Interval_Seconds * 1000](playerid)
{
	PI[playerid][pTIME_PLAYING] += PlayerTask_Interval_Seconds;
}

GetBootTypeName(type) {
	new name[24];
	switch(type) {
		case BOOT_TYPE_WEAPON: name = "Arma";
		case BOOT_TYPE_MEDICINES: name = "Medicamentos";
		case BOOT_TYPE_CANNABIS: name = "Marihuana";
		case BOOT_TYPE_CRACK: name = "Crack";
	}
	return name;
}

GetClosetTypeName(type) {
	new name[24];
	switch(type) {
		case CLOSET_TYPE_WEAPON: name = "Arma";
		case CLOSET_TYPE_MEDICINES: name = "Medicamentos";
		case CLOSET_TYPE_CANNABIS: name = "Marihuana";
		case CLOSET_TYPE_CRACK: name = "Crack";
	}
	return name;
}

forward ResetCombat(damagedid);
public ResetCombat(damagedid)
{
	PlayerTemp[damagedid][pt_COMBAT] = false;

	KillTimer(PlayerTemp[damagedid][pt_COMBAT_TIMER]);
	PlayerTemp[damagedid][pt_COMBAT_TIMER] = -1;
	return 1;
}

stock HexToInt(const string[])
{
	if(string[0] == 0) return 0;
	new i, cur = 1, res = 0;
	for(i = strlen(string); i > 0; i --) 
	{
		if(string[i-1]<58) res = res + cur * (string[i - 1] - 48); 
		else res = res + cur *(string[i - 1] - 65 + 10);

		cur = cur * 16;
	}
	return res;
}

GetCrewTerritories(id)
{
	new
		count;

	for(new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if(TERRITORIES[i][territory_CREW_ID] == id) count++;
	}
	return count;
}

stock CountPolicesOnDuty() 
{
	new count = 0;
	for(new i = 0; i != MAX_PLAYERS; i++)
	{
		if(IsPlayerConnected(i))
		{
			if(pTemp(i)[pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if(PLAYER_WORKS[i][WORK_POLICE][pwork_SET] && pTemp(i)[pt_WORKING_IN] == WORK_POLICE) 
				{
					count ++;
				}
			}
		}
	}
	return count;
}

hook OnPlayerKeyPressFinish(playerid) {
	if(PlayerTemp[playerid][pt_PLANTING]) {
		PlayerTemp[playerid][pt_WORKING_IN] = WORK_NONE;
		PlayerTemp[playerid][pt_PLANTING] = false;
		PlayerTemp[playerid][pt_LAST_PLANT_TIME] = gettime();

		TogglePlayerControllableEx(playerid, true);
		ClearAnimations(playerid);

		//objeto planta: 2244
		new index = GetAvaiblePlantIndex();
		if(index == -1)
		{
			switch(seed_info[ PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED] ][seed_info_PLANT_TYPE])
			{
				case PLANT_TYPE_MEDICINE: PI[playerid][pSEED_MEDICINE] += plant_info[ PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
				case PLANT_TYPE_CANNABIS: PI[playerid][pSEED_CANNABIS] += plant_info[ PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
				case PLANT_TYPE_CRACK: PI[playerid][pSEED_CRACK] += plant_info[ PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
			}

			SendClientMessagef(playerid, -1, "No queda espacio para más plantas, te hemos devuelto las semillas. Prueba ms tarde.");
			return 1;
		}

		GetPlayerPos(playerid, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z]);
		GetPlayerFacingAngle(playerid, PI[playerid][pANGLE]);
		PI[playerid][pPOS_X] += (1.0 * floatsin(-PI[playerid][pANGLE], degrees));
		PI[playerid][pPOS_Y] += (1.0 * floatcos(-PI[playerid][pANGLE], degrees));
		PI[playerid][pPOS_Z] -= 0.75;

		PLANTS[index][plant_VALID] = true;
		PLANTS[index][plant_GROWING] = true;
		PLANTS[index][plant_INVISIBLE] = true;
		PLANTS[index][plant_GROWING_PROGRESS] = frandom(10.0, 8.0, 2);
		PLANTS[index][plant_TYPE] = PlayerTemp[playerid][pt_PLANTING_PLANT_SELECTED];
		PLANTS[index][plant_PLANTED_BY_ACCOUNT_ID] = PI[playerid][pID];
		PLANTS[index][plant_IMMUNITY] = -1;

		format(PLANTS[index][plant_PLANTED_BY_NAME], 24, "%s", PlayerTemp[playerid][pt_NAME]);
		PLANTS[index][plant_OBJECT_ID] = CreateDynamicObject(2244, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z], 0.0, 0.0, PI[playerid][pANGLE], 0, 0);
		SetDynamicObjectMaterial(PLANTS[index][plant_OBJECT_ID], 2, 2244, "plants_tabletop", "CJ_PLANT", 0x00FFFFFF);

		new info[3];
		info[0] = OBJECT_TYPE_PLANT;
		info[1] = index;
		Streamer_SetArrayData(STREAMER_TYPE_OBJECT, PLANTS[index][plant_OBJECT_ID], E_STREAMER_EXTRA_ID, info);

		new label_str[256];
		if(seed_info[ PLANTS[index][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n{CCCCCC}Agricultor: %s\n\n{"#PRIMARY_COLOR"}(%.1f%%)", plant_info[ PLANTS[index][plant_TYPE] ][plant_info_NAME], PLANTS[index][plant_PLANTED_BY_NAME], PLANTS[index][plant_GROWING_PROGRESS]);
		else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Planta (%s)\n{CCCCCC}Agricultor: %s\n\n{"#PRIMARY_COLOR"}(%.1f%%)", plant_info[ PLANTS[index][plant_TYPE] ][plant_info_NAME], PLANTS[index][plant_PLANTED_BY_NAME], PLANTS[index][plant_GROWING_PROGRESS]);
		PLANTS[index][plant_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, PI[playerid][pPOS_X], PI[playerid][pPOS_Y], PI[playerid][pPOS_Z] + 0.25, 10.0, .testlos = false, .interiorid = 0, .worldid = 0);

		KillTimer(PLANTS[index][plant_TIMER]);
		PLANTS[index][plant_TIMER] = SetTimerEx("GrowPlantUp", 5000, false, "d", index);

		PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL] ++;
		SendClientMessagef(playerid, -1, "Ahora espera a que la planta crezca, si pasan más de 5 minutos después de que la planta haya crecido se destruirá.");
		Streamer_Update(playerid);
		return Y_HOOKS_BREAK_RETURN_1;
	}
	else if(PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] != -1) {
		new tree = PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE];
		GetPlayerFacingAngle(playerid, PI[playerid][pANGLE]);
		SetDynamicObjectRot(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID], LUMBER_TREES[ tree ][lumber_tree_RX], LUMBER_TREES[ tree ][lumber_tree_RY], PI[playerid][pANGLE]);	
		MoveDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID], LUMBER_TREES[ tree ][lumber_tree_X], LUMBER_TREES[ tree ][lumber_tree_Y], LUMBER_TREES[ tree ][lumber_tree_Z] + 0.01, 0.0065, -85.0, 0.0, PI[playerid][pANGLE]);
		RemovePlayerAttachedObject(playerid, 9);
		SetPlayerAttachedObject(playerid, 9, 341, 1, -0.172999, -0.165, -0.053999, 0.0, -7.599999, -9.6);
		
		KillTimer(PlayerTemp[playerid][pt_TIMERS][11]);
		PlayerTemp[playerid][pt_TIMERS][11] = SetTimerEx("ContinueTreeAnimation", 1400, false, "iif", playerid, tree, PI[playerid][pANGLE]);
		
		ClearAnimations(playerid);
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
		TogglePlayerControllableEx(playerid, true);
		return Y_HOOKS_BREAK_RETURN_1;
	}
	return Y_HOOKS_CONTINUE_RETURN_1;
}

hook OnPlayerKeyPress(playerid, Float:percentage) {
	if(PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE] != -1) {
		new tree = PlayerTemp[playerid][pt_PLAYER_LUMBERJACK_TREE];
		SetPlayerArmedWeapon(playerid, 9);
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{FFFFFF}Talando... {"#SILVER_COLOR"}(%.1f%%)", tree, percentage);
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
		
		KillTimer(PlayerTemp[playerid][pt_TIMERS][11]);
		PlayerTemp[playerid][pt_TIMERS][11] = SetTimerEx("LumberjackUp", 2000, false, "ii", playerid, tree);
		return Y_HOOKS_BREAK_RETURN_1;
	}
	return Y_HOOKS_CONTINUE_RETURN_1;
}

stock GetPlayerCameraRotation(playerid,&Float:rx,&Float:rz){
	new Float:mx,Float:my,Float:mz;
	GetPlayerCameraFrontVector(playerid,mx,my,mz);
	rx = CompressRotation(-(acos(mz)-90.0));
	rz = CompressRotation((atan2(my,mx)-90.0));
}

stock Float:CompressRotation(Float:rotation)
{
	return (rotation - floatround(rotation/360.0,floatround_floor)*360.0);
}

CountCrewPlayers(id_crew) 
{
    mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d;", id_crew);
    new count, Cache:result = mysql_query(handle_db, QUERY_BUFFER);
    cache_get_value_int(0, 0, count);
    cache_delete(result);
    return count;
}

stock GetRandomPropertyIndex() 
{
	new index = -1;
	while(index == -1) 
	{
		new tmpIndex = random(MAX_PROPERTIES);
		if(PROPERTY_INFO[tmpIndex][property_VALID]) index = tmpIndex;
	}
	return index;
}

const RPC_VehicleDestroy = 136;
IRPC:RPC_VehicleDestroy(playerid, BitStream:bs)
{
	if(ac_Info[CHEAT_DESTROY_VEHICLE][ac_Enabled]) {
		new vehicleid;
		BS_ReadUint16(bs, vehicleid);

		if(vehicleid <= 0 || vehicleid >= MAX_VEHICLES)
		{
			return 0;
		}

		if(PI[playerid][pLEVEL] < 3)
		{
			if( (vehicleid == GetPlayerVehicleID(playerid) && GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == playerid) || (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] && PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pID]) )
			{
				return 1;
			}
			return 0;
		}

		if(!IsVehicleStreamedIn(vehicleid, playerid))
		{
			return 0;
		}

		new interval = GetTickDiff(GetTickCount(), PlayerTemp[playerid][pt_LAST_VEHICLE_DESTROY]);
		if(interval < 500)
		{
			new current_gettime = gettime();
			if(current_gettime > PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_IMMUNITY])
			{
				if(!ac_Info[CHEAT_DESTROY_VEHICLE][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_DESTROY_VEHICLE);
				else
				{
					if(current_gettime - PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DESTROY_VEHICLE][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_LAST_DETECTION] = current_gettime;
					if(PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DESTROY_VEHICLE][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_DESTROY_VEHICLE);
				}
			}
			return 0;
		}
		PlayerTemp[playerid][pt_LAST_VEHICLE_DESTROY] = GetTickCount();
	}
    return 1;
}

GetVehicleComponentIndexFromId(vehicleid, id) {
	for(new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
	{
		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i] == id) {
			return i;
		}
	}
	return -1;
}

stock GetTerritoryIndexById(id) 
{
	for(new i = 0; i != MAX_TERRITORIES; i ++) 
	{
		if(TERRITORIES[i][territory_VALID] && TERRITORIES[i][territory_ID] == id) return i;
	}
	return -1;
}

stock GetNearVehicle(playerid, Float:fDis = 5.0)
{
	if(!IsPlayerConnected(playerid)) return INVALID_VEHICLE_ID;

	new vehicle = INVALID_VEHICLE_ID, Float:PosPlayer[3];
	GetPlayerPos(playerid, PosPlayer[0], PosPlayer[1], PosPlayer[2]);

	for(new i; i != MAX_VEHICLES; i++)
	{
		if(IsValidVehicle(i))
		{
			new Float:PosVehicle[3], Float:PosRelative[3], Float:tempDis;
			GetVehiclePos(i, PosVehicle[0], PosVehicle[1], PosVehicle[2]);

			for(new z; z < sizeof(PosVehicle); z++)
				PosRelative[z] = PosVehicle[z] - PosPlayer[z];
				
			tempDis = floatsqroot((floatpower(PosRelative[0], 2)) + (floatpower(PosRelative[1], 2)) + (floatpower(PosRelative[2], 2)));

			if(tempDis <= fDis)
			{
				fDis = tempDis;
				vehicle = i;
			}
		}
	}
	return vehicle;
}

#include "src/world_time.pwn"
#include "src/message.pwn"
#include "src/speedo.pwn"
#include "src/taximeter.pwn"
#include "src/robbery.pwn"
#include "src/air_speedo.pwn"
#include "src/info_message.pwn"
#include "src/air_veh_fuel.pwn"
#include "src/attachobjecttoobjectex.pwn"
#include "src/key_press.pwn"
#include "src/inv.pwn"
#include "src/body_weapons.pwn"
#include "src/injured.pwn"
#include "src/drop_weapons.pwn"
#include "src/visible_items.pwn"
#include "src/boat_repair_points.pwn"
#include "src/ac_anticbug.pwn"
#include "src/ac_afkpos.pwn"
#include "src/police_pdoor_kick.pwn"
#include "src/gender_selector.pwn"
#include "src/server_play.pwn"
#include "src/player_data.pwn"
#include "src/pharmacy.pwn"
#include "src/discord.pwn"
